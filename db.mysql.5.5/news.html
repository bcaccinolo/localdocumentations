<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Appendix D. MySQL Change History</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.5 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.5 Reference Manual"><link rel="prev" href="error-handling.html" title="Appendix C. Errors, Error Codes, and Common Problems"><link rel="next" href="restrictions.html" title="Appendix E. Restrictions and Limits">
<script language="javascript" type="text/javascript">
  function addOnload(theFunc)
  {
    var previous = window.onload;
    if (typeof window.onload != 'function')
    {
      window.onload = theFunc;
    }
    else
    {
      window.onload = function()
      {
        previous();
        theFunc();
      }
    }
  }

  addOnload(function()
  {
    var base = new Date(1328790650*1000);
    var now = new Date();
    var diff = ((now-base)/1000)/(24*3600);

    if (diff > 90) {
      var nodes = document.getElementsByClassName('titlepage');
      nodes[0].innerHTML = '<p style="border: 5px #ff0000 solid; padding: 5px; margin 5px">' +
        'This copy of the manual is more than 90 days old. We encourage you to download a ' +
        'new version from <a href="http://dev.mysql.com">dev.mysql.com/doc</a>.</p>' + nodes[0].innerHTML;
    }
  });
</script>
<noscript></noscript>
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix D. MySQL Change History</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="error-handling.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="restrictions.html">Next</a></td></tr></table><hr></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="news"></a>Appendix D. MySQL Change History</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="news.html#news-5-5-x">D.1. Changes in Release 5.5.x (Production)</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#news-5-5-22">D.1.1. Changes in MySQL 5.5.22 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-21">D.1.2. Changes in MySQL 5.5.21 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-20">D.1.3. Changes in MySQL 5.5.20 (10 January 2012)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-19">D.1.4. Changes in MySQL 5.5.19 (08 December 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-18">D.1.5. Changes in MySQL 5.5.18 (16 November 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-17">D.1.6. Changes in MySQL 5.5.17 (19 October 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-16">D.1.7. Changes in MySQL 5.5.16 (15 September 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-15">D.1.8. Changes in MySQL 5.5.15 (28 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-14">D.1.9. Changes in MySQL 5.5.14 (05 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-13">D.1.10. Changes in MySQL 5.5.13 (31 May 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-12">D.1.11. Changes in MySQL 5.5.12 (05 May 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-11">D.1.12. Changes in MySQL 5.5.11 (07 April 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-10">D.1.13. Changes in MySQL 5.5.10 (15 March 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-9">D.1.14. Changes in MySQL 5.5.9 (07 February 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-8">D.1.15. Changes in MySQL 5.5.8 (03 December 2010, General Availability)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-7">D.1.16. Changes in MySQL 5.5.7 (14 October 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-6">D.1.17. Changes in MySQL 5.5.6 (13 September 2010, Release Candidate)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-5">D.1.18. Changes in MySQL 5.5.5 (06 July 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-4">D.1.19. Changes in MySQL 5.5.4 (09 April 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-3">D.1.20. Changes in MySQL 5.5.3 (24 March 2010, Milestone 3)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-2">D.1.21. Changes in MySQL 5.5.2 (12 February 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-1">D.1.22. Changes in MySQL 5.5.1 (04 January 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-0">D.1.23. Changes in MySQL 5.5.0 (07 December 2009, Milestone 2)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#connector-odbc-news">D.2. MySQL Connector/ODBC (MyODBC) Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-x">D.2.1. Changes in MySQL Connector/ODBC Version 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-x">D.2.2. Changes in MySQL Connector/ODBC Version 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-x">D.2.3. Changes in MySQL Connector/ODBC Version 3.51.x</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#connector-net-news">D.3. MySQL Connector/Net Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#connector-net-news-6-5-x">D.3.1. Changes in MySQL Connector/Net Version 6.5.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-4-x">D.3.2. Changes in MySQL Connector/Net Version 6.4.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-x">D.3.3. Changes in MySQL Connector/Net Version 6.3.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-x">D.3.4. Changes in MySQL Connector/Net Version 6.2.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-x">D.3.5. Changes in MySQL Connector/Net Version 6.1.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-x">D.3.6. Changes in MySQL Connector/Net Version 6.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-3-x">D.3.7. Changes in MySQL Connector/Net Version 5.3.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-x">D.3.8. Changes in MySQL Connector/Net Version 5.2.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-x">D.3.9. Changes in MySQL Connector/Net Version 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-x">D.3.10. Changes in MySQL Connector/Net Version 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-x">D.3.11. Changes in MySQL Connector/Net Version 1.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-9-0">D.3.12. Changes in MySQL Connector/Net Version 0.9.0 (30 August 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-76">D.3.13. Changes in MySQL Connector/Net Version 0.76</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-75">D.3.14. Changes in MySQL Connector/Net Version 0.75</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-74">D.3.15. Changes in MySQL Connector/Net Version 0.74</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-71">D.3.16. Changes in MySQL Connector/Net Version 0.71</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-70">D.3.17. Changes in MySQL Connector/Net Version 0.70</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-68">D.3.18. Changes in MySQL Connector/Net Version 0.68</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-65">D.3.19. Changes in MySQL Connector/Net Version 0.65</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-60">D.3.20. Changes in MySQL Connector/Net Version 0.60</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-50">D.3.21. Changes in MySQL Connector/Net Version 0.50</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#vstudio-plugin-news">D.4. MySQL Visual Studio Plugin Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-3">D.4.1. Changes in MySQL Visual Studio Plugin 1.0.3 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-2">D.4.2. Changes in MySQL Visual Studio Plugin 1.0.2 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-1">D.4.3. Changes in MySQL Visual Studio Plugin 1.0.1 (04 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-0">D.4.4. Changes in MySQL Visual Studio Plugin 1.0.0 (04 October 2006)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#cj-news">D.5. MySQL Connector/J Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#cj-news-5-1-x">D.5.1. Changes in MySQL Connector/J 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-x">D.5.2. Changes in MySQL Connector/J 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-x">D.5.3. Changes in MySQL Connector/J 3.1.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-x">D.5.4. Changes in MySQL Connector/J 3.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-x">D.5.5. Changes in MySQL Connector/J 2.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-2-x">D.5.6. Changes in MySQL Connector/J 1.2.x and lower</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#news-connector-mxj">D.6. MySQL Connector/MXJ Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-12">D.6.1. Changes in MySQL Connector/MXJ 5.0.12 (07 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-11">D.6.2. Changes in MySQL Connector/MXJ 5.0.11 (24 November 2009)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-10">D.6.3. Changes in MySQL Connector/MXJ 5.0.10 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-9">D.6.4. Changes in MySQL Connector/MXJ 5.0.9 (19 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-8">D.6.5. Changes in MySQL Connector/MXJ 5.0.8 (06 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-7">D.6.6. Changes in MySQL Connector/MXJ 5.0.7 (27 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-6">D.6.7. Changes in MySQL Connector/MXJ 5.0.6 (04 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-5">D.6.8. Changes in MySQL Connector/MXJ 5.0.5 (14 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-4">D.6.9. Changes in MySQL Connector/MXJ 5.0.4 (28 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-3">D.6.10. Changes in MySQL Connector/MXJ 5.0.3 (24 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-2">D.6.11. Changes in MySQL Connector/MXJ 5.0.2 (15 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-1">D.6.12. Changes in MySQL Connector/MXJ 5.0.1 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-0">D.6.13. Changes in MySQL Connector/MXJ 5.0.0 (09 December 2005)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#ccpp-news">D.7. MySQL Connector/C++ Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#ccpp-news-1-1-x">D.7.1. Changes in MySQL Connector/C++ 1.1.x</a></span></dt><dt><span class="section"><a href="news.html#ccpp-news-1-0-x">D.7.2. Changes in MySQL Connector/C++ 1.0.x</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#mysql-proxy-news">D.8. MySQL Proxy Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#mysql-proxy-news-0-8-2">D.8.1. Changes in MySQL Proxy 0.8.2 (18 August 2011)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-8-1">D.8.2. Changes in MySQL Proxy 0.8.1 (13 September 2010)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-8-0">D.8.3. Changes in MySQL Proxy 0.8.0 (21 January 2010)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-7-2">D.8.4. Changes in MySQL Proxy 0.7.2 (30 June 2009)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-7-1">D.8.5. Changes in MySQL Proxy 0.7.1 (15 May 2009)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-7-0">D.8.6. Changes in MySQL Proxy 0.7.0 (Not Released)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-6-1">D.8.7. Changes in MySQL Proxy 0.6.1 (06 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-6-0">D.8.8. Changes in MySQL Proxy 0.6.0 (11 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-1">D.8.9. Changes in MySQL Proxy 0.5.1 (30 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-0">D.8.10. Changes in MySQL Proxy 0.5.0 (19 June 2007)</a></span></dt></dl></dd></dl></div><a class="indexterm" name="id1728403"></a><a class="indexterm" name="id1728412"></a><a class="indexterm" name="id1728424"></a><p>
    This appendix lists the changes from version to version in the MySQL
    source code through the latest version of MySQL 5.5,
    which is currently MySQL 5.5.22. We offer a version of
    the Manual for each series of MySQL releases (5.0, 5.1, and so
    forth). For information about changes in another release series of
    the MySQL database software, see the corresponding version of this
    Manual.
  </p><p>
    We update this section as we add new features in the
    5.5 series, so that everybody can follow the
    development process.
  </p><p>
    Note that we tend to update the manual at the same time we make
    changes to MySQL. If you find a recent version of MySQL listed here
    that you can't find on our download page
    (<a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>), it means that the version has
    not yet been released.
  </p><p>
    The date mentioned with a release version is the date of the last
    Bazaar ChangeSet on which the release was based, not the date when
    the packages were made available. The binaries are usually made
    available a few days after the date of the tagged ChangeSet, because
    building and testing all packages takes some time.
  </p><p>
    The manual included in the source and binary distributions may not
    be fully accurate when it comes to the release changelog entries,
    because the integration of the manual happens at build time. For the
    most up-to-date release changelog, please refer to the online
    version instead.
  </p><p>
    Previously, MySQL development proceeded by including a large set of
    features and moving them over many versions within a release series
    through several stages of maturity (Alpha, Beta, and so forth). This
    development model had a disadvantage in that problems with only part
    of the code could hinder timely release of the whole.
  </p><p>
    MySQL development now uses a milestone model. The move to this model
    provides for more frequent milestone releases, with each milestone
    proceeding through a small number of releases having a focus on a
    specific subset of thoroughly tested features. Following the
    releases for one milestone, development proceeds with the next
    milestone; that is, another small number of releases that focuses on
    the next small set of features, also thoroughly tested.
  </p><p>
    MySQL 5.5.0-m2 is the first release for Milestone 2. The new
    features of this milestone may be considered to be initially of beta
    quality. For subsequent Milestone 2 releases, we plan to use
    increasing version numbers (5.5.1 and higher) while continuing to
    employ the “<span class="quote">-m2</span>” suffix. For Milestone 3, we plan to
    change the suffix to “<span class="quote">-m3</span>”. Version designators with
    “<span class="quote">-alpha</span>” or “<span class="quote">-beta</span>” suffixes are no used.
  </p><p>
    You may notice that the MySQL 5.5.0 release is designated as
    Milestone 2 rather than Milestone 1. This is because MySQL 5.4 was
    actually designated as Milestone 1, although we had not yet begun
    referring to milestone numbers as part of version numbers at the
    time.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="news-5-5-x"></a>D.1. Changes in Release 5.5.x (Production)</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#news-5-5-22">D.1.1. Changes in MySQL 5.5.22 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-21">D.1.2. Changes in MySQL 5.5.21 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-20">D.1.3. Changes in MySQL 5.5.20 (10 January 2012)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-19">D.1.4. Changes in MySQL 5.5.19 (08 December 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-18">D.1.5. Changes in MySQL 5.5.18 (16 November 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-17">D.1.6. Changes in MySQL 5.5.17 (19 October 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-16">D.1.7. Changes in MySQL 5.5.16 (15 September 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-15">D.1.8. Changes in MySQL 5.5.15 (28 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-14">D.1.9. Changes in MySQL 5.5.14 (05 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-13">D.1.10. Changes in MySQL 5.5.13 (31 May 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-12">D.1.11. Changes in MySQL 5.5.12 (05 May 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-11">D.1.12. Changes in MySQL 5.5.11 (07 April 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-10">D.1.13. Changes in MySQL 5.5.10 (15 March 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-9">D.1.14. Changes in MySQL 5.5.9 (07 February 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-8">D.1.15. Changes in MySQL 5.5.8 (03 December 2010, General Availability)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-7">D.1.16. Changes in MySQL 5.5.7 (14 October 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-6">D.1.17. Changes in MySQL 5.5.6 (13 September 2010, Release Candidate)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-5">D.1.18. Changes in MySQL 5.5.5 (06 July 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-4">D.1.19. Changes in MySQL 5.5.4 (09 April 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-3">D.1.20. Changes in MySQL 5.5.3 (24 March 2010, Milestone 3)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-2">D.1.21. Changes in MySQL 5.5.2 (12 February 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-1">D.1.22. Changes in MySQL 5.5.1 (04 January 2010)</a></span></dt><dt><span class="section"><a href="news.html#news-5-5-0">D.1.23. Changes in MySQL 5.5.0 (07 December 2009, Milestone 2)</a></span></dt></dl></div><a class="indexterm" name="id1728560"></a><p>
    An overview of features added in MySQL 5.5 can be found
    here: <a href="introduction.html#mysql-nutshell" title="1.4. What Is New in MySQL 5.5">Section 1.4, “What Is New in MySQL 5.5”</a>. For a full list of changes,
    please refer to the changelog sections for individual
    5.5 releases.
  </p><p>
    For discussion of upgrade issues that you may encounter for upgrades
    from MySQL 5.1 to MySQL 5.5, see
    <a href="installing.html#upgrading-from-previous-series" title="2.11.1.1. Upgrading from MySQL 5.1 to 5.5">Section 2.11.1.1, “Upgrading from MySQL 5.1 to 5.5”</a>.
  </p><p>
    For discussion of upgrade issues that you may encounter for upgrades
    from MySQL 5.4 to MySQL 5.5, see
    <a href="installing.html#upgrading-from-5-4" title="2.11.1.2. Upgrading from MySQL 5.4 to 5.5">Section 2.11.1.2, “Upgrading from MySQL 5.4 to 5.5”</a>.
  </p><p>
    For changes relating to MySQL Cluster, see
    <a href="mysql-cluster.html#mysql-cluster-news" title="16.7. Changes in MySQL Cluster">Section 16.7, “Changes in MySQL Cluster”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-22"></a>D.1.1. Changes in MySQL 5.5.22 (Not yet released)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A DDL operation such as <code class="literal">ALTER TABLE ... ADD
        COLUMN</code> could stall, eventually timing out with an
        <code class="literal">Error 1005: Can't create table</code> message
        referring to <code class="literal">fil_rename_tablespace</code>.
       (Bug #13636122, Bug #62100, Bug #63553)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Server startup could produce an error for temporary tables using
        the <code class="literal">InnoDB</code> storage engine, if the path in the
        <code class="literal">$TMPDIR</code> variable ended with a
        <code class="literal">/</code> character. The error log would look like:
      </p><pre class="programlisting">120202 19:21:26  InnoDB: Operating system error number 2 in a file operation. 
InnoDB: The error means the system cannot find the path specified. 
InnoDB: If you are installing InnoDB, remember that you must create 
InnoDB: directories yourself, InnoDB does not create them. 
120202 19:21:26  InnoDB: Error: trying to open a table, but could not 
InnoDB: open the tablespace file './t/#sql7750_1_0.ibd'! 
InnoDB: Have you moved InnoDB .ibd files around without using the 
InnoDB: commands DISCARD TABLESPACE and IMPORT TABLESPACE? 
InnoDB: It is also possible that this is a temporary table #sql..., 
InnoDB: and MySQL removed the .ibd file for this. </pre><p>
        The workaround for the problem was to create a similar temporary
        table again, copy its <code class="literal">.frm</code> file to
        <code class="literal">tmpdir</code> under the name mentioned in the error
        message (for example, <code class="literal">#sql123.frm</code>) and
        restart <code class="literal">mysqld</code> with <code class="literal">tmpdir</code>
        set to its normal value without a trailing slash, for example
        <code class="literal">/var/tmp</code>. On startup, MySQL would see the
        <code class="literal">.frm</code> file and issue <code class="literal">DROP
        TABLE</code> for the orphaned temporary table.
       (Bug #11754376, Bug #45976)</p></li><li><p>
        <a href="server-administration.html#sysvar_myisam_sort_buffer_size"><code class="literal">myisam_sort_buffer_size</code></a> could
        not be set larger than 4GB on 64-bit systems.
       (Bug #45702, Bug #11754145)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-21"></a>D.1.2. Changes in MySQL 5.5.21 (Not yet released)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A new <span><strong class="command">CMake</strong></span> option,
        <a href="installing.html#option_cmake_mysql_project_name"><code class="option">MYSQL_PROJECT_NAME</code></a>, can be set on
        Windows or Mac OS X to be used in the project name.
       (Bug #13551687)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        An earlier change (in MySQL 5.1.62 and 5.5.21) was found to
        modify date-handling behavior in General Availability-status
        series (MySQL 5.1 and 5.5). This change has been reverted.
      </p><p>
        The change was that several functions became more strict when
        passed a <a href="functions.html#function_date"><code class="literal">DATE()</code></a> function value as
        their argument, thus they rejected incomplete dates with a day
        part of zero. These functions were affected:
        <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a>,
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>,
        <a href="functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a>,
        <a href="functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a>,
        <a href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a>,
        <a href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a>,
        <a href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a>,
        <a href="functions.html#function_week"><code class="literal">WEEK()</code></a>,
        <a href="functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a>,
        <a href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a>,
        <a href="functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a>. The previous behavior
        has been restored.
       (Bug #13458237)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A Valgrind error was fixed in the function
        <code class="literal">os_aio_init()</code>.
       (Bug #13612811)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash when creating an
        <code class="literal">InnoDB</code> temporary table under Linux, if the
        <code class="literal">$TMPDIR</code> setting points to a
        <code class="literal">tmpfs</code> filesystem and
        <a href="storage-engines.html#sysvar_innodb_use_native_aio"><code class="literal">innodb_use_native_aio</code></a> is
        enabled, as it is by default in MySQL 5.5.4 and higher. The
        entry in the error log looked like:
      </p><pre class="programlisting">101123  2:10:59  InnoDB: Operating system error number 22 in a file operation. 
InnoDB: Error number 22 means 'Invalid argument'.</pre><p>
        The crash occurred because asynchronous I/O is not supported on
        tmpfs in some Linux kernel versions. The workaround was to turn
        off the <code class="literal">innodb_use_native_aio</code> setting or use
        a different temporary directory. The fix causes
        <code class="literal">InnoDB</code> to turn off the
        <code class="literal">innodb_use_native_aio</code> setting automatically
        if it detects that the temporary file directory does not support
        asynchronous I/O.
       (Bug #13593888, Bug #11765450, Bug #58421)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        References to C preprocessor symbols and macros
        <code class="literal">HAVE_purify</code>,
        <code class="literal">UNIV_INIT_MEM_TO_ZERO</code>, and
        <code class="literal">UNIV_SET_MEM_TO_ZERO</code> were removed from the
        <code class="literal">InnoDB</code> source code. They were only used in
        debug builds instrumented for Valgrind. They are replaced by
        calls to the<code class="literal">UNIV_MEM_INVALID()</code> macro.
       (Bug #13418934)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        With 1024 concurrent <code class="literal">InnoDB</code> transactions
        running concurrently and the
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> setting
        enabled, a <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> operation
        for an <code class="literal">InnoDB</code> table could fail. The
        <code class="literal">.ibd</code> file from the failed <code class="literal">CREATE
        TABLE</code> was left behind, preventing the table from being
        created later, after the load had dropped.
      </p><p>
        The fix adds error handling to delete the erroneous
        <code class="literal">.ibd</code> file. This error was less likely to
        occur in MySQL 5.5 and 5.6, because raising the number of
        <code class="literal">InnoDB</code> undo slots increased the number of
        simultaneous transactions needed to trigger the bug, from 1K to
        128K.
       (Bug #12400341)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Memory allocation for <code class="literal">InnoDB</code> tables was
        reorganized to reduce the memory overhead for large numbers of
        tables or partitions, avoiding situations where the
        “<span class="quote">resident set size</span>” could grow regardless of
        <code class="literal">FLUSH TABLES</code> statements. The problem was most
        evident for tables with large row size. Some of the memory that
        was formerly allocated for every open table is now allocated
        only when the table is modified for the first time.
       (Bug #11764622, Bug #57480)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Executing <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> with the
        <a href="programs.html#option_mysqlbinlog_start-position"><code class="option">--start-position=<em class="replaceable"><code>N</code></em></code></a>
        option, where <em class="replaceable"><code>N</code></em> was equal either to 0
        or to a value greater than the length of the dump file, caused
        it to crash.
      </p><p>
        This issue was introduced in MySQL 5.5.18 by the fix for Bug
        #32228 and Bug #11747416.
       (Bug #13593869, Bug #64035)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        On Windows replication slave hosts, <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP
        SLAVE</code></a> took an excessive length of time to complete
        when the master was down.
       (Bug #11752315, Bug #43460)</p></li><li><p>
        A query that used an index on a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> column referenced in a
        <code class="literal">BETWEEN</code> clause could return invalid results.
       (Bug #13463488, Bug #63437)</p></li><li><p>
        Expressions that compared a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> column with any
        non-integer constant were performed using integers rather than
        decimal or float values, with the result that the constant could
        be truncated. This could lead to any such comparison that used
        <a href="functions.html#operator_less-than"><code class="literal">&lt;</code></a>,
        <a href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a>,
        <a href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a>,
        <a href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a>,
        <a href="functions.html#operator_equal"><code class="literal">=</code></a>,
        <a href="functions.html#operator_not-equal"><code class="literal">!=</code></a>/<a href="functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a>,
        <a href="functions.html#function_in"><code class="literal">IN</code></a>, or
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> yielding false positive or
        negative results.
       (Bug #13463415, Bug #11758543, Bug #63502, Bug #50756)</p></li><li><p>
        When the optimizer performed conversion of
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values while evaluating
        range conditions, it could produce incorrect results.
       (Bug #13453382)</p></li><li><p>
        When running <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> with both the
        <a href="programs.html#option_mysqldump_single-transaction"><code class="option">--single-transaction</code></a> and
        <a href="programs.html#option_mysqldump_flush-logs"><code class="option">--flush-logs</code></a> options, the
        flushing of the log performed an implicit
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> (see
        <a href="sql-syntax.html#implicit-commit" title="12.3.3. Statements That Cause an Implicit Commit">Section 12.3.3, “Statements That Cause an Implicit Commit”</a>), causing more than one
        transaction to be used and thus breaking consistency.
       (Bug #12809202, Bug #61854)</p></li><li><p>
        It was possible in the event of successive failures for
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> to restart quickly enough to
        consume excessive amounts of CPU. Now, on systems that support
        the <span><strong class="command">sleep</strong></span> and <span><strong class="command">date</strong></span> system
        utilities, <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> checks to see whether
        it has restarted more than 5 times in the current second, and if
        so, waits 1 second before attempting another restart.
       (Bug #11761530, Bug #54035)</p></li><li><p>
        When used with the <a href="programs.html#option_mysqldump_xml"><code class="option">--xml</code></a>
        option, <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>
        <a href="programs.html#option_mysqldump_routines"><code class="option">--routines</code></a> failed to dump any
        stored routines, triggers, or events.
       (Bug #11760384, Bug #52792)</p></li><li><p>
        It was possible on replication slaves where
        <a href="storage-engines.html#federated-storage-engine" title="13.11. The FEDERATED Storage Engine"><code class="literal">FEDERATED</code></a> tables were in use to get
        timeouts on long-running operations, such as Error 1160
        <span class="errortext">Got an error writing communication
        packets</span>. The <code class="literal">FEDERATED</code> tables did
        not need to be replicated for the issue to occur.
       (Bug #11758931, Bug #51196)</p><p>References: See also Bug #12896628, Bug #61790.</p></li><li><p>
        If an attempt to initiate a statement failed, the issue could
        not be reported to the client because it was not prepared to
        receive any error messages prior to the execution of any
        statement. Since the user could not execute any queries, they
        were simply disconnected without providing a clear error.
      </p><p>
        After the fix for this issue, the client is prepared for an
        error as soon as it attempts to initiate a statement, so that
        the error can be reported prior to disconnecting the user.
       (Bug #11755281, Bug #47032)</p></li><li><p>
        Using <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a> with the sort recover method
        to repair a table having fixed-width row format could cause the
        row pointer size to be reduced, effectively resulting in a
        smaller maximum data file size.
       (Bug #48848, Bug #11756869)</p></li><li><p>
        On Windows, the server incorrectly constructed the full path
        name of the plugin binary for <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL
        PLUGIN</code></a> and
        <a href="sql-syntax.html#create-function-udf" title="12.7.3.1. CREATE FUNCTION Syntax for User-Defined
        Functions"><code class="literal">CREATE
        FUNCTION ... SONAME</code></a>.
       (Bug #45549, Bug #11754014)</p></li><li><p>
        The stored routine cache was subject to a small memory leak that
        over time or with many routines being used could result in
        out-of-memory errors.
       (Bug #44585, Bug #11753187)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-20"></a>D.1.3. Changes in MySQL 5.5.20 (10 January 2012)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A new server option,
        <a href="server-administration.html#option_mysqld_slow-start-timeout"><code class="option">--slow-start-timeout</code></a>, controls
        the Windows service control manager's service start timeout. The
        value is the maximum number of milliseconds that the service
        control manager waits before trying to kill the MySQL service
        during startup. The default value is 15000 (15 seconds). If the
        MySQL service takes too long to start, you may need to increase
        this value. A value of 0 means there is no timeout.
       (Bug #45546, Bug #11754011)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Setting an empty user in a <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
        TO</code></a> statement caused an invalid internal result and is
        no longer permitted. Trying to use
        <code class="literal">MASTER_USER=''</code> or setting
        <code class="literal">MASTER_PASSWORD</code> while leaving
        <code class="literal">MASTER_USER</code> unset causes the statement to
        fail with an error.
       (Bug #13427949)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Moving the binary log file, relay log file, or both files to a
        new location, then restarting the server with a new value for
        <a href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>,
        <a href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a>, or both, caused the
        server to abort on start. This was because the entries in the
        index file overrode the new location. In addition, paths were
        calculated relative to datadir (rather than to the
        <a href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> or
        <a href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> values).
      </p><p>
        The fix for this problem means that, when the server reads an
        entry from the index file, it now checks whether the entry
        contains a relative path. If it does, the relative part of the
        path is replaced with the absolute path set using the
        <a href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> or
        <a href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> option. An absolute
        path remains unchanged; in such a case, the index must be edited
        manually to enable the new path or paths to be used.
       (Bug #11745230, Bug #12133)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When doing a live downgrade from MySQL 5.6.4 or later, with
        <a href="http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_page_size" target="_top"><code class="literal">innodb_page_size</code></a> set to a value
        other than 16384, now the earlier MySQL version reports that the
        page size is incompatible with the older version, rather than
        crashing or displaying a “<span class="quote">corruption</span>” error.
       (Bug #13116225)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Certain <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statements
        could fail for <code class="literal">InnoDB</code> child tables containing
        foreign key definitions. This problem affected Windows systems
        only, with the setting
        <code class="literal">lower_case_table_names=0</code>. It was a regression
        from MySQL bug #55222.
       (Bug #13083023, Bug #60229)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Issuing <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT...ON
        DUPLICATE KEY</code></a> statements for <code class="literal">InnoDB</code>
        tables from concurrent threads could cause a
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_deadlock" target="_top">deadlock</a>, particularly with
        the <code class="literal">INSERT...ON DUPLICATE KEY UPDATE</code> form.
        The problem could also be triggered by issuing multiple
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT IGNORE</code></a>
        statements. The fix avoids deadlocks caused by the same row
        being accessed by more than one transaction. Deadlocks could
        still occur when multiple rows are inserted and updated
        simultaneously by different transactions in inconsistent order;
        those types of deadlocks require the standard error handling on
        the application side, of re-trying the transaction.
       (Bug #11759688, Bug #52020, Bug #12842206)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        This fix improved the efficiency and concurrency of freeing
        pages in the <code class="literal">InnoDB</code> buffer pool when
        performing a <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> for an
        <code class="literal">InnoDB</code> table when the
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> option is
        enabled.
      </p><p>
        This change is most noticeable for systems with large buffer
        pools. During the drop operation, one traversal of the buffer
        pool memory structure is changed from the LRU list (the entire
        buffer pool) to the flush list (a much smaller structure). The
        LRU scanning is reduced, but not entirely eliminated. The buffer
        pool mutex is also released periodically, so that if the drop
        operation takes significant time, other threads can proceed
        concurrently.
       (Bug #11759044, Bug #51325)</p></li><li><p>
        An incorrect <code class="literal">InnoDB</code> assertion could cause the
        server to halt. This issue only affected debug builds. The
        assertion referenced the source file
        <code class="filename">btr0pcur.ic</code> and the variable
        <code class="literal">cursor-&gt;pos_state</code>.
       (Bug #13358468)</p></li><li><p>
        Locale information for <a href="functions.html#function_format"><code class="literal">FORMAT()</code></a>
        function instances was lost in view definitions.
       (Bug #63020, Bug #13344643)</p></li><li><p>
        The <code class="literal">handle_segfault()</code> signal-handler code in
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> could itself crash due to calling
        unsafe functions.
       (Bug #54082, Bug #11761576)</p></li><li><p>
        Enabling <a href="server-administration.html#sysvar_myisam_use_mmap"><code class="literal">myisam_use_mmap</code></a> could
        cause the server to crash.
       (Bug #48726, Bug #11756764)</p></li><li><p>
        Concurrent access to <code class="literal">ARCHIVE</code> tables could
        cause corruption.
       (Bug #42784, Bug #11751793)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-19"></a>D.1.4. Changes in MySQL 5.5.19 (08 December 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Replication</strong></span>: 
        Previously, replication slaves could connect to the master
        server through master accounts that use nonnative
        authentication, except Windows native authentication. This is
        now also true for Windows native authentication.
      </p></li><li><p>
        Performance of metadata locking operations on Windows XP systems
        was improved by instituting a cache for metadata lock objects.
        This permits the server to avoid expensive operations for
        creation and destruction of synchronization objects on XP. A new
        system variable,
        <a href="server-administration.html#sysvar_metadata_locks_cache_size"><code class="literal">metadata_locks_cache_size</code></a>,
        permits control over the size of the cache. The default size is
        1024.
       (Bug #12695572)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An internal deadlock could occur within
        <code class="literal">InnoDB</code>, on a server doing a substantial
        amount of <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_change_buffering" target="_top">change
        buffering</a> for DML operations, particularly
        <code class="literal">DELETE</code> statements.
       (Bug #13340047)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a statement containing a large number of rows to be applied
        on a slave table that does not contain a primary key, a
        considerable amount of time can be needed to find and change all
        the rows that are to be changed. The current fix helps diagnose
        this issue by printing a message to the error log if the
        execution time for a given statement replicated using row-based
        replication takes more than 60 seconds.
        <a href="server-administration.html#sysvar_log_warnings"><code class="literal">log_warnings</code></a> must be greater
        than 1 for this message to be printed to the error log.
       (Bug #11760927, Bug #53375)</p></li><li><p>
        Rounding <code class="literal">DBL_MAX</code> returned
        <code class="literal">DBL_MAX</code>, not 'inf'.
       (Bug #13261955)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> did not upgrade the system
        tables or create the <code class="filename">mysql_upgrade_info</code>
        file when run with the
        <a href="programs.html#option_mysql_upgrade_write-binlog"><code class="option">--write-binlog</code></a> or
        <a href="programs.html#option_mysql_upgrade_write-binlog"><code class="option">--skip-write-binlog</code></a>
        option.
       (Bug #60223, Bug #11827359)</p></li><li><p>
        If a plugin was uninstalled, thread local variables for plugin
        variables of string type with wth
        <code class="literal">PLUGIN_VAR_MEMALLOC</code> flag were not freed.
       (Bug #56652, Bug #11763882)</p></li><li><p>
        Deadlock could occur when these four things happened at the same
        time: 1) An old dump thread was waiting for the binary log to
        grow. 2) The slave server that replicates from the old dump
        thread tried to reconnect. During reconnection, the new dump
        thread tried to kill the old dump thread. 3) A
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> statement tried to kill the
        old dump thread. 4) An <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
        statement caused a binary log rotation.
       (Bug #56299, Bug #11763573)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-18"></a>D.1.5. Changes in MySQL 5.5.18 (16 November 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Upgrading from an <code class="literal">Advanced GPL</code> RPM package to
        an <code class="literal">Advanced</code> RPM package did not work. Now on
        Linux it is possible to use <span><strong class="command">rpm -U</strong></span> to replace
        any installed MySQL product by any other of the same release
        family. It is not necessary to remove the old produce with
        <span><strong class="command">rpm -e</strong></span> first.
       (Bug #11886309)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The statements in the following list are now marked as unsafe
        for statement-based replication. This is due to the fact that
        each of these statements depends on the results of a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement whose order
        cannot always be determined. When using
        <code class="literal">STATEMENT</code> logging mode, a warning is issued
        in the binary log for any of these statements; when using
        <code class="literal">MIXED</code> logging mode, the statement is logged
        using the row-based format.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
            SELECT</code></a><a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">
            ... ON DUPLICATE KEY UPDATE</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE ...
            SELECT</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
            TABLE ... IGNORE SELECT</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
            TABLE ... REPLACE SELECT</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT IGNORE
            ... SELECT</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE
            IGNORE</code></a>
          </p></li></ul></div><p>
        When upgrading, you should note the use of these statements in
        your applications, keeping in mind that a statement that inserts
        or replaces rows obtained from a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> can take up many times as
        much space in the binary log when logged using row-based format
        than when only the statement itself is logged. Depending on the
        number and size of the rows selected and inserted (or replaced)
        by any such statements, the difference in size of the binary log
        after the logging of these statements is switched from
        statement-based to row-based can potentially be several orders
        of magnitude. See <a href="replication.html#replication-sbr-rbr" title="15.1.2.1. Advantages and Disadvantages of Statement-Based and Row-Based
        Replication">Section 15.1.2.1, “Advantages and Disadvantages of Statement-Based and Row-Based
        Replication”</a>.
       (Bug #11758262, Bug #50439)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Fixed a compilation problem that affected the
        <code class="literal">InnoDB</code> source code with
        <code class="literal">gcc</code> 4.6.1. The affected
        <code class="literal">InnoDB</code> source file was
        <code class="filename">btr/btr0cur.c</code>.
       (Bug #13116045)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The process of deallocating the <code class="literal">InnoDB</code>
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_adaptive_hash_index" target="_top">Adaptive Hash
        Index</a> was made faster, during shutdown or when turning
        off the AHI with the statement:
      </p><pre class="programlisting">SET GLOBAL innodb_adaptive_hash_index=OFF;</pre><p>(Bug #13006367, Bug #62487)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An <code class="literal">UPDATE</code> statement for an
        <code class="literal">InnoDB</code> table could hang. The issue affects
        tables using the <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_barracuda" target="_top">Barracuda</a>
        file format and having multiple indexes on
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_column_prefix" target="_top">column prefixes</a>. The
        size of an <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_undo_log" target="_top">undo log</a> record
        could exceed the <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_page_size" target="_top">page
        size</a>, even though the total size of the column prefixes
        was less than the page size (usually 16KB). In MySQL 5.5 and
        higher, this error is now reported using the new code
        <code class="literal">ER_UNDO_RECORD_TOO_BIG</code>. In MySQL 5.1 with the
        InnoDB Plugin, this error is reported using the existing code
        <code class="literal">ER_TOO_BIG_ROWSIZE</code>.
       (Bug #12547647)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A replication master could send damaged events to slaves after
        the binary log disk on the master became full. To correct this
        issue, only complete events are now pushed by the master dump
        thread to the slave I/O thread. In addition, the error text that
        the master sends to the slave when an incomplete event is found
        now states that the incomplete event may have been caused by
        running out of disk space on the master, and provides
        coordinates of the first and the last event bytes read.
       (Bug #11747416, Bug #32228)</p><p>References: See also Bug #64035, Bug #13593869.</p></li><li><p>
        During the table-opening process, memory was allocated and later
        freed that was needed view loading, even for statements that did
        not use views. These unnecessary allocation and free operations
        are no longer done.
       (Bug #13116518)</p></li><li><p>
        <a href="programs.html#mysql-plugin" title="4.4.4. mysql_plugin — Configure MySQL Server Plugins"><span><strong class="command">mysql_plugin</strong></span></a> mishandled the
        <a href="programs.html#option_mysql_plugin_plugin-ini"><code class="option">--plugin-ini</code></a>,
        <a href="programs.html#option_mysql_plugin_mysqld"><code class="option">--mysqld</code></a>, and
        <a href="programs.html#option_mysql_plugin_my-print-defaults"><code class="option">--my-print-defaults</code></a> options
        under some circumstances.
       (Bug #12968815)</p></li><li><p>
        <a href="programs.html#mysql-plugin" title="4.4.4. mysql_plugin — Configure MySQL Server Plugins"><span><strong class="command">mysql_plugin</strong></span></a> returned the wrong error code
        from failed server bootstrap execution.
       (Bug #12968567)</p></li><li><p>
        Several improvements were made to the <code class="literal">libedit</code>
        library bundled with MySQL distributions, and that is available
        for all platforms that MySQL supports except Windows.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Navigation keys did not work for UTF-8 input.
          </p></li><li><p>
            Word navigation and delete operations did not work for UTF-8
            input with Cyrillic characters.
          </p></li><li><p>
            Nonlatin characters were corrupted in overwrite mode for
            UTF-8 input.
          </p></li><li><p>
            Long queries caused the statement history file to become
            corrupted.
          </p></li><li><p>
            The Alt key caused history operations to fail.
          </p></li></ul></div><p>(Bug #12605400, Bug #12613725, Bug #12618092, Bug #12624155, Bug #12617651, Bug #12605388)</p></li><li><p>
        <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine"><code class="literal">ARCHIVE</code></a> tables with
        <code class="literal">NULL</code> columns could cause server crashes or
        become corrupt under concurrent load.
       (Bug #51252, Bug #11758979)</p></li><li><p>
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> could corrupt
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables if
        <a href="server-administration.html#sysvar_myisam_use_mmap"><code class="literal">myisam_use_mmap</code></a> was enabled.
       (Bug #49030, Bug #11757032)</p></li><li><p>
        A query that selected a
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> function result
        could return different values depending on whether an
        <code class="literal">ORDER BY</code> of the function result was present.
       (Bug #41090, Bug #11750518)</p></li><li><p>
        For <a href="storage-engines.html#federated-storage-engine" title="13.11. The FEDERATED Storage Engine"><code class="literal">FEDERATED</code></a> tables, loss of
        connection to the remote table during some insert operations
        could cause a server crash.
       (Bug #34660, Bug #11747970)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-17"></a>D.1.6. Changes in MySQL 5.5.17 (19 October 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Replication</strong></span>: 
        Previously, replication slaves could connect to the master
        server only through master accounts that use native
        authentication. Now replication slaves can also connect through
        master accounts that use nonnative authentication (except
        Windows native authentication) if the required client-side
        plugin is installed on the slave side in the directory named by
        the slave <a href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
        variable. The exception for Windows is lifted in MySQL 5.5.19.
       (Bug #12897501)</p></li><li><p>
        The <span><strong class="command">make_win_bin_dist</strong></span> script is no longer
        used and has been removed from MySQL distributions and the
        manual.
       (Bug #58241)</p></li><li><p>
        <a href="storage-engines.html#memory-storage-engine" title="13.6. The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> table creation time is now
        available in the <code class="literal">CREATE_TIME</code> column of the
        <a href="information-schema.html#tables-table" title="19.22. The INFORMATION_SCHEMA TABLES Table"><code class="literal">INFORMATION_SCHEMA.TABLES</code></a> table and
        the <code class="literal">Create_time</code> column of
        <a href="sql-syntax.html#show-table-status" title="12.7.5.37. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE STATUS</code></a> output.
       (Bug #51655, Bug #11759349)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        This fix improves the performance of instrumentation code for
        <code class="literal">InnoDB</code> buffer pool operations.
       (Bug #12950803, Bug #62294)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Lookups using secondary indexes could give incorrect matches
        under a specific set of conditions. The conditions involve an
        index defined on a column prefix, for a BLOB or other long
        column stored outside the index page, with a table using the
        Barracuda file format.
       (Bug #12601439, Bug #12543666)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        This fix corrects cases where the MySQL server could hang or
        abort with a <code class="literal">long semaphore wait</code> message.
        (This is a different issue than when these symptoms occurred
        during a <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> statement.)
       (Bug #11766591, Bug #59733)</p></li><li><p>
        Internal conversion of zero to binary and back could yield a
        result with incorrect precision.
       (Bug #12911710)</p></li><li><p>
        Valgrind warnings generated by <code class="literal">filesort</code>
        operations were fixed.
       (Bug #12856915)</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> did not properly check for an
        already running instance of <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
       (Bug #11878394)</p></li><li><p>
        With Valgrind enabled, <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        semaphore wait timeouts were too low and could expire.
       (Bug #11765460)</p></li><li><p>
        The help message for <a href="programs.html#mysql-install-db" title="4.4.3. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> did not
        indicate that it supports the
        <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a>,
        <a href="programs.html#option_general_defaults-extra-file"><code class="option">--defaults-extra-file</code></a> and
        <a href="programs.html#option_general_no-defaults"><code class="option">--no-defaults</code></a> options.
       (Bug #58898, Bug #11765888)</p></li><li><p>
        An assertion designed to detect zero-length sort keys also was
        raised when the entire key set fit in memory.
       (Bug #58200, Bug #11765254)</p></li><li><p>
        <a href="programs.html#myisampack" title="4.6.5. myisampack — Generate Compressed, Read-Only MyISAM Tables"><span><strong class="command">myisampack</strong></span></a> could create corrupt
        <code class="literal">FULLTEXT</code> indexes when compressing tables.
       (Bug #53646, Bug #11761180)</p></li><li><p>
        A linking problem prevented the
        <a href="storage-engines.html#federated-storage-engine" title="13.11. The FEDERATED Storage Engine"><code class="literal">FEDERATED</code></a> storage engine plugin
        from loading.
       (Bug #40942, Bug #11750417)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-16"></a>D.1.7. Changes in MySQL 5.5.16 (15 September 2011)</h3></div></div></div><p><span class="bold"><strong>Thread Pool Plugin Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The default thread-handling model in MySQL Server executes
        statements using one thread per client connection. As more
        clients connect to the server and execute statements, overall
        performance degrades. Commercial distributions of MySQL now
        include a thread pool plugin that provides an alternative
        thread-handling model designed to reduce overhead and improve
        performance. The plugin implements a thread pool that increases
        server performance by efficiently managing statement execution
        threads for large numbers of client connections.
      </p><p>
        The thread pool addresses several problems of the one thread per
        connection model:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Too many thread stacks make CPU caches almost useless in
            highly parallel execution workloads. The thread pool
            promotes thread stack reuse to minimize the CPU cache
            footprint.
          </p></li><li><p>
            With too many threads executing in parallel, context
            switching overhead is high. This also presents a challenging
            task to the operating system scheduler. The thread pool
            controls the number of active threads to keep the
            parallelism within the MySQL server at a level that it can
            handle and that is appropriate for the server host on which
            MySQL is executing.
          </p></li><li><p>
            Too many transactions executing in parallel increases
            resource contention. In <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>,
            this increases the time spent holding central mutexes. The
            thread pool controls when transactions start to ensure that
            not too many execute in parallel.
          </p></li></ul></div><p>
        On Windows, the thread pool plugin requires Windows Vista or
        newer. On Linux, the plugin requires kernel 2.6.9 or newer.
      </p><p>
        For more information, see <a href="optimization.html#thread-pool-plugin" title="7.11.6. The Thread Pool Plugin">Section 7.11.6, “The Thread Pool Plugin”</a>.
      </p></li></ul></div><p><span class="bold"><strong>External Authentication</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Commercial distributions of MySQL now include two plugins that
        enable MySQL Server to use external authentication methods to
        authenticate MySQL users:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            PAM (Pluggable Authentication Modules) enables a system to
            access various kinds of authentication methods through a
            standard interface. A PAM authentication plugin enables
            MySQL Server to use PAM to authenticate MySQL users.
          </p><p>
            The PAM plugin uses the information passed to it by the
            MySQL server (such as user name, host name, password, and
            authentication string), plus whatever is available for PAM
            lookup (such as Unix passwords or an LDAP directory). The
            plugin checks the user credentials against PAM and returns
            success or failure.
          </p><p>
            The PAM authentication plugin has been tested on Linux and
            Mac OS X.
          </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
              The PAM plugin works with a client-side plugin that simply
              sends the password to the server in clear text so it can
              be passed to PAM. This may be a security problem in some
              configurations, but is necessary to use the server-side
              PAM library. To avoid problems if there is any possibility
              that the password would be intercepted, clients should
              connect to MySQL Server using SSL. See
              <a href="server-administration.html#clear-text-authentication-plugin" title="5.5.6.4. The Clear-Text Client-Side Authentication Plugin">Section 5.5.6.4, “The Clear-Text Client-Side Authentication Plugin”</a>.
            </p></div></li><li><p>
            Distributions of MySQL for Windows include an authentication
            plugin that enables MySQL Server to use native Windows
            services to authenticate client connections. Users who have
            logged in to Windows can connect from MySQL client programs
            to the server based on the information in their environment
            without specifying an additional password.
          </p><p>
            The client and server exchange data packets in the
            authentication handshake. As a result of this exchange, the
            server creates a security context object that represents the
            identity of the client in the Windows OS. This identity
            includes the name of the client account. The Windows
            authentication plugin uses the identity of the client to
            check whether it is a given account or a member of a group.
            By default, negotiation uses Kerberos to authenticate, then
            NTLM if Kerberos is unavailable.
          </p><p>
            The Windows authentication plugin should work on Windows
            2000 Professional
          </p></li></ul></div><p>
        These authentication plugins enable MySQL Server to accept
        connections from users defined outside the MySQL grant tables.
        They also support the MySQL proxy-user capability. Each plugin
        can return to MySQL a user name different from the login user,
        which means that the plugin can return the MySQL user that
        defines the privileges the externally authenticated user should
        have. For example, an external user named <code class="literal">joe</code>
        can connect and have the privileges of the MySQL user named
        <code class="literal">developer</code>.
      </p><p>
        The server-side PAM and Windows authentication plugins are
        included only in commercial distributions. They are not included
        in MySQL community distributions. The client-side plugins with
        which they communicate are included in all distributions,
        including community distributions. This permits clients from any
        release to connect to a server that has the server-side plugin
        loaded.
      </p><p>
        For more information about these plugins, see
        <a href="server-administration.html#pam-authentication-plugin" title="5.5.6.2. The PAM Authentication Plugin">Section 5.5.6.2, “The PAM Authentication Plugin”</a>, and
        <a href="server-administration.html#windows-authentication-plugin" title="5.5.6.3. The Windows Native Authentication Plugin">Section 5.5.6.3, “The Windows Native Authentication Plugin”</a>. For general
        information about pluggable authentication in MySQL, see
        <a href="server-administration.html#pluggable-authentication" title="5.5.6. Pluggable Authentication">Section 5.5.6, “Pluggable Authentication”</a>. For proxy user
        information, see <a href="server-administration.html#proxy-users" title="5.5.7. Proxy Users">Section 5.5.7, “Proxy Users”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The <a href="sql-syntax.html#reset-slave" title="12.4.2.3. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a> statement has
        been extended with an <code class="literal">ALL</code> keyword. In
        addition to deleting the <code class="filename">master.info</code>,
        <code class="filename">relay-log.info</code>, and all relay log files,
        <a href="sql-syntax.html#reset-slave" title="12.4.2.3. RESET SLAVE Syntax"><code class="literal">RESET SLAVE
        ALL</code></a> also clears all connection information otherwise
        held in memory following execution of <a href="sql-syntax.html#reset-slave" title="12.4.2.3. RESET SLAVE Syntax"><code class="literal">RESET
        SLAVE</code></a>.
       (Bug #11809016)</p></li><li><p>
        The thread pool plugin should be loaded at server startup, and
        not loaded or unloaded at runtime. An error now occurs for
        attempts to load or unload it with the
        <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> or
        <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> statement.
      </p></li><li><p>
        Some plugins operate in such a matter that they should be loaded
        at server startup, and not loaded or unloaded at runtime. The
        plugin API now supports marking plugins this way. The
        <code class="literal">st_mysql_plugin</code> structure now has a
        <code class="literal">flags</code> member, which can be set to the OR of
        the applicable flags. The
        <code class="literal">PLUGIN_OPT_NO_INSTALL</code> flag indicates that the
        plugin cannot be loaded at runtime with the
        <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement. This is
        appropriate for plugins that must be loaded at server startup
        with the <a href="server-administration.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> option.
        The <code class="literal">PLUGIN_OPT_NO_UNINSTALL</code> flag indicates
        that the plugin cannot be unloaded at runtime with the
        <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> statement.
      </p><p>
        The new member changes the interface, so the plugin interface
        version, <code class="literal">MYSQL_PLUGIN_INTERFACE_VERSION</code>, has
        been incremented from <code class="literal">0x0102</code> to
        <code class="literal">0x0103</code>. Plugins that require access to the
        new member must be recompiled to use version
        <code class="literal">0x0103</code> or higher.
      </p></li><li><p>
        A new utility, <a href="programs.html#mysql-plugin" title="4.4.4. mysql_plugin — Configure MySQL Server Plugins"><span><strong class="command">mysql_plugin</strong></span></a>, enables MySQL
        administrators to manage which plugins a MySQL server loads. It
        provides an alternative to manually specifying the
        <a href="server-administration.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> option at server
        startup or using the <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL
        PLUGIN</code></a> and <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL
        PLUGIN</code></a> statements at runtime. See
        <a href="programs.html#mysql-plugin" title="4.4.4. mysql_plugin — Configure MySQL Server Plugins">Section 4.4.4, “<span><strong class="command">mysql_plugin</strong></span> — Configure MySQL Server Plugins”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Handling of a date-related assertion was modified.
      </p><p>
        However, a consequence of this change is that several functions
        become more strict when passed a
        <a href="functions.html#function_date"><code class="literal">DATE()</code></a> function value as their
        argument and reject incomplete dates with a day part of zero.
        These functions are affected:
        <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a>,
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>,
        <a href="functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a>,
        <a href="functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a>,
        <a href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a>,
        <a href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a>,
        <a href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a>,
        <a href="functions.html#function_week"><code class="literal">WEEK()</code></a>,
        <a href="functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a>,
        <a href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a>,
        <a href="functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a>. Because this changes
        date-handling behavior in General Availability-status series
        (MySQL 5.1 and 5.5), it was reverted in 5.1.62 and 5.5.21. The
        change is retained in MySQL 5.6.
      </p><p>References: See also Bug #13458237.</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        This fix improves the performance of operations on
        <code class="literal">VARCHAR(<em class="replaceable"><code>N</code></em>)</code> columns
        in <code class="literal">InnoDB</code> tables, where
        <em class="replaceable"><code>N</code></em> is declared as a large value but
        the actual string values in the table are short.
       (Bug #12835650)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <code class="literal">DATA_LENGTH</code> column in the
        <a href="information-schema.html#tables-table" title="19.22. The INFORMATION_SCHEMA TABLES Table"><code class="literal">INFORMATION_SCHEMA.TABLES</code></a> table now
        correctly reports the on-disk sizes of tablespaces for
        <code class="literal">InnoDB</code> compressed tables.
       (Bug #12770537)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Unused functions were removed from the internal
        <code class="literal">InnoDB</code> code related to mini-transactions, to
        clarify the logic.
       (Bug #12626794, Bug #61240)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The “<span class="quote">random
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_read_ahead" target="_top">read-ahead</a></span>”
        feature that was removed from the <code class="literal">InnoDB</code>
        Plugin is now available again. Because it is only helpful for
        certain workloads, it is turned off by default. To turn it on,
        enable the <code class="literal">innodb_random_read_ahead</code>
        configuration option. Because this feature can improve
        performance in some cases and reduce performance in others,
        before relying on this setting, benchmark both with and without
        the setting enabled.
       (Bug #12356373)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Processing of corrupted table map events could cause the server
        to crash. This was especially likely if the events mapped
        different tables to the same identifier, such as could happen
        due to Bug #56226.
      </p><p>
        Now, before applying a table map event, the server checks
        whether the table has already been mapped with different
        settings, and if so, an error is raised and the slave SQL thread
        stops. If it has been mapped with the same settings, or if the
        table is set to be ignored by filtering rules, there is no
        change in behavior: the event is skipped and IDs are not
        checked.
       (Bug #44360, Bug #11753004)</p><p>References: See also Bug #11763509.</p></li><li><p>
        The metadata locking subsystem added too much overhead for
        <code class="literal">INFORMATION_SCHEMA</code> queries that were
        processed by opening only <code class="filename">.frm</code> or
        <code class="filename">.TRG</code> files and had to scan many tables. For
        example, <code class="literal">SELECT COUNT(*) FROM
        INFORMATION_SCHEMA.TRIGGERS</code> was affected.
       (Bug #12828477)</p></li><li><p>
        Compilation failed on Mac OS X 10.7 (Lion) with a warning:
        <code class="literal">Implicit declaration of function
        'pthread_init'</code>
       (Bug #12779790)</p></li><li><p>
        With profiling disabled or not compiled in,
        <code class="literal">set_thd_proc_info()</code> unnecessarily checked
        file name lengths.
       (Bug #12756017)</p><p>References: This bug is a regression of Bug #59273.</p></li><li><p>
        A <code class="literal">DBUG_ASSERT</code> added by Bug #11792200 was
        overly aggressive in raising assertions.
       (Bug #12537160)</p></li><li><p>
        <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> and
        <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> failed to find
        problems with <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> tables that had
        underlying tables missing or with the wrong storage engine.
        Issues were reported only for the first underlying table.
       (Bug #11754210)</p></li><li><p>
        <code class="literal">(5 DIV 2)</code> and <code class="literal">(5.0 DIV 2)</code>
        produced different results (2 versus 3) because the result of
        the latter expression was not truncated before conversion to
        integer. This differed from the behavior in MySQL 5.0 and 5.1.
        Now both expressions produce 2.
       (Bug #61676, Bug #12711164)</p></li><li><p>
        For a <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        value of 1 or 2 and a database having a mixed-case name, calling
        a stored function using a fully qualified name including the
        database name failed.
       (Bug #60347, Bug #11840395)</p></li><li><p>
        <code class="literal">SELECT DISTINCT</code> with a deterministic stored
        function in the <code class="literal">WHERE</code> clause could produce
        incorrect results.
       (Bug #59736, Bug #11766594)</p></li><li><p>
        The embedded server crashed when <code class="literal">argc = 0</code>.
       (Bug #57931, Bug #12561297)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> without an
        <code class="literal">ENGINE</code> option determined the default engine
        at parse rather than execution time. This led to incorrect
        results if the statement was executed within a stored program
        and the default engine had been changed in the meantime.
       (Bug #50614, Bug #11758414)</p></li><li><p>
        The <code class="literal">mysql_affected_rows()</code> C API
        function returned 3 (instead of 2) for
        <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT ...
        ON DUPLICATE KEY UPDATE</code></a> statements where there was a
        duplicated key value.
       (Bug #46675, Bug #11754979)</p></li><li><p>
        Upgrades using an RPM package recreated the
        <code class="literal">test</code> database, which is undesirable when the
        DBA had removed it.
       (Bug #45415, Bug #11753896)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-15"></a>D.1.8. Changes in MySQL 5.5.15 (28 July 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The undocumented <code class="option">--all</code> option for
        <a href="programs.html#perror" title="4.8.1. perror — Explain Error Codes"><span><strong class="command">perror</strong></span></a> is deprecated and will be removed in
        MySQL 5.6.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A failed <code class="literal">CREATE INDEX</code> operation for an
        <code class="literal">InnoDB</code> table could result in some memory
        being allocated but not freed. This memory leak could affect
        tables created with the <code class="literal">ROW_FORMAT=DYNAMIC</code> or
        <code class="literal">ROW_FORMAT=COMPRESSED</code> setting.
       (Bug #12699505)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> command for an
        <code class="literal">InnoDB</code> table could be very slow, in a
        configuration with a combination of table compression,
        partitioning, and a large buffer pool.
       (Bug #12635227, Bug #61188)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Auto-increment columns of partitioned tables were checked even
        when they were not being written to. In debug builds, this could
        lead to a server crash.
       (Bug #11765667, Bug #58655)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        The <a href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> function was
        not treated as a monotonic function for purposes of partition
        pruning.
       (Bug #11746819, Bug #28928)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If a <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement—replicated using
        statement-based replication—featured a
        <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> clause, the name-value pairs
        were regenerated using a method
        (<code class="function">Item::print()</code>) intended primarily for
        generating output for statements such as
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a>, and which cannot be relied on to return
        valid SQL. This could in certain cases lead to a crash on the
        slave.
      </p><p>
        To fix this problem, the server now names each value in its
        original, user-supplied form, and uses that to create
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statements for statement-based replication.
       (Bug #60580, Bug #11902767)</p><p>References: See also Bug #34283, Bug #11752526, Bug #43746.</p></li><li><p>
        Compiling the server with maintainer mode enabled failed for
        <span><strong class="command">gcc</strong></span> 4.6 or higher.
       (Bug #12727287)</p></li><li><p>
        The option-parsing code for empty strings leaked memory.
       (Bug #12589928)</p></li><li><p>
        <code class="literal">mysql_list_fields()</code> returned
        incorrect character set information for character columns of
        views.
       (Bug #12337762)</p></li><li><p>
        Previously, an inappropriate error message was produced if a
        multiple-table update for an <code class="literal">InnoDB</code> table
        with a clustered primary key would update a table through
        multiple aliases, and perform an update that may physically move
        the row in at least one of these aliases. Now the error message
        is: <code class="literal">Primary key/partition key update is not permitted
        since the table is updated both as
        '<em class="replaceable"><code>tbl_name1</code></em>' and
        '<em class="replaceable"><code>tbl_name2</code></em>'</code>
       (Bug #11882110)</p><p>References: See also Bug #11764529.</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE
        {MODIFY|CHANGE} ... FIRST</code></a> did nothing except rename
        columns if the old and new versions of the table had exactly the
        same structure with respect to column data types. As a result,
        the mapping of column name to column data was incorrect. The
        same thing happened for
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE DROP
        COLUMN ... ADD COLUMN</code></a> statements intended to produce a
        new version of the table with exactly the same structure as the
        old version.
       (Bug #61493, Bug #12652385)</p></li><li><p>
        Incorrect handling of metadata locking for
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a> for statements requiring prelocking caused two
        problems:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Execution of any data-changing statement that required
            prelocking (that is, involved a stored function or trigger)
            as part of a transaction slowed down somewhat all subsequent
            statements in the transaction. Performance in a transaction
            that periodically involved such statements gradually
            degraded over time.
          </p></li><li><p>
            Execution of any data-changing statement that required
            prelocking as part of a transaction prevented a concurrent
            <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a> from proceeding until the end of the
            transaction rather than at the end of the particular
            statement.
          </p></li></ul></div><p>(Bug #61401, Bug #12641342)</p></li><li><p>
        The fractional part of the “<span class="quote">Queries per second</span>”
        value could be displayed incorrectly in MySQL status output (for
        example, in the output from <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin status</strong></span></a>
        or the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> <code class="literal">STATUS</code>
        command).
       (Bug #61205, Bug #12565712)</p></li><li><p>
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> incorrectly parsed relative data file path
        names that ascended more than three levels in the file system
        and as a consequence was unable to find the file.
       (Bug #60987, Bug #12403662)</p></li><li><p>
        For unknown users, the native password plugin reported
        incorrectly that no password had been specified even when it
        had.
       (Bug #59792, Bug #11766641)</p></li><li><p>
        For <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables, attempts to
        insert incorrect data into an indexed
        <code class="literal">GEOMETRY</code> column could result in table
        corruption.
       (Bug #57323, Bug #11764487)</p></li><li><p>
        In debug builds,
        <code class="literal">Field_new_decimal::store_value()</code> was subject
        to buffer overflows.
       (Bug #55436, Bug #11762799)</p></li><li><p>
        A race condition between loading a stored routine using the name
        qualified by the database name and dropping that database
        resulted in a spurious error message: <code class="literal">The table
        mysql.proc is missing, corrupt, or contains bad data</code>
       (Bug #47870, Bug #11756013)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-14"></a>D.1.9. Changes in MySQL 5.5.14 (05 July 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In the audit plugin interface, the
        <code class="literal">event_class</code> member was removed from the
        <code class="literal">mysql_event_general</code> structure and the calling
        sequence for the notification function was changed. Originally,
        the second argument was a pointer to the event structure. The
        function now receives this information as two arguments: an
        event class number and a pointer to the event. Corresponding to
        these changes, <code class="literal">MYSQL_AUDIT_INTERFACE_VERSION</code>
        was increased to <code class="literal">0x0300</code>.
      </p><p>
        The <code class="filename">plugin_audit.h</code> header file, and the
        <code class="literal">NULL_AUDIT</code> example plugin in the
        <code class="filename">plugin/audit_null</code> directory were modified
        per these changes. See <a href="extending-mysql.html#writing-audit-plugins" title="22.2.4.8. Writing Audit Plugins">Section 22.2.4.8, “Writing Audit Plugins”</a>.
      </p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> now permits concurrent reads
        while creating a secondary index.
       (Bug #11853126)</p><p>References: See also Bug #11751388, Bug #11784056, Bug #11815600.</p></li><li><p>
        <span><strong class="command">CMake</strong></span> configuration support on Linux now
        provides a boolean <a href="installing.html#option_cmake_enable_gcov"><code class="option">ENABLE_GCOV</code></a>
        option to control whether to include support for
        <span><strong class="command">gcov</strong></span>.
       (Bug #12549572)</p></li><li><p>
        Client programs now display more information for SSL errors to
        aid in diagnosis and debugging of connection problems.
       (Bug #21287, Bug #11745920)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Replication</strong></span>: 
        A mistake in thread cleanup could cause a replication master to
        crash.
       (Bug #12578441)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication and attribute promotion or
        demotion (see
        <a href="replication.html#replication-features-different-data-types" title="15.4.1.6.2. Replication of Columns Having Different Data Types">Section 15.4.1.6.2, “Replication of Columns Having Different Data Types”</a>),
        memory allocated internally for conversion of
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns was not freed
        afterwards.
       (Bug #12558519)</p></li><li><p>
        Adding support for Windows authentication to
        <code class="literal">libmysql</code> introduced a link dependency on the
        system Secur32 library. The Microsoft Visual C++ link
        information now pulls in this library automatically.
       (Bug #12612143)</p></li><li><p>
        In some cases, memory allocated for
        <code class="literal">Query_tables_list::sroutines()</code> was not freed
        properly.
       (Bug #12429877)</p></li><li><p>
        After the fix for Bug #11889186,
        <a href="functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a> arguments with a year
        part greater than 9999 raised an assertion.
       (Bug #12403504)</p></li><li><p>
        An assertion could be raised due to a missing
        <code class="literal">NULL</code> value check in
        <code class="literal">Item_func_round::fix_length_and_dec()</code>.
       (Bug #12392636)</p></li><li><p>
        An assertion could be raised during two-phase commits if the
        binary log was used as the transaction coordinator log.
       (Bug #12346411)</p></li><li><p>
        A problem introduced in MySQL 5.5.11 caused very old (MySQL 4.0)
        clients to be unable to connect to the server.
       (Bug #61222, Bug #12563279)</p></li><li><p>
        Using <a href="sql-syntax.html#create-event" title="12.1.11. CREATE EVENT Syntax"><code class="literal">CREATE EVENT
        IF NOT EXISTS</code></a> for an event that already existed and
        was enabled caused multiple instances of the event to run.
       (Bug #61005, Bug #12546938)</p></li><li><p>
        An embedded client aborted rather than issuing an error message
        if it issued a <code class="literal">TEE</code> command (<code class="literal">\T
        <em class="replaceable"><code>file_name</code></em></code>) and the
        directory containing the file did not exist. This occurred
        because the wrong error handler was called.
       (Bug #57491, Bug #11764633)</p></li><li><p>
        <a href="sql-syntax.html#alter-event" title="12.1.2. ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a> could change the
        event status.
       (Bug #57156, Bug #11764334)</p></li><li><p>
        On some platforms, the <code class="literal">Incorrect value: xxx for column
        yyy at row zzz</code> error produced by
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> could have an incorrect value of
        <em class="replaceable"><code>zzz</code></em>.
       (Bug #46895, Bug #11755168)</p></li><li><p>
        An attempt to install nonexistent files during installation was
        corrected.
       (Bug #43247, Bug #11752142)</p></li><li><p>
        On FreeBSD 64-bit builds of the embedded server, exceptions were
        not prevented from propagating into the embedded application.
       (Bug #38965, Bug #11749418)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-13"></a>D.1.10. Changes in MySQL 5.5.13 (31 May 2011)</h3></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          Very old (MySQL 4.0) clients are not working temporarily due
          to a problem discovered after the release of MySQL 5.5.12. We
          are looking at fixing the problem. Update: This is fixed in
          MySQL 5.5.14.
        </p></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The client-side plugin that accompanies the server-side Windows
        authentication plugin is now included in all MySQL
        distributions. This will permit clients from any release,
        whether commercial or community, to connect to a server that has
        the server-side plugin loaded. See
        <a href="server-administration.html#windows-authentication-plugin" title="5.5.6.3. The Windows Native Authentication Plugin">Section 5.5.6.3, “The Windows Native Authentication Plugin”</a>
       (Bug #59780, Bug #11766631)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        If the server crashed while an XA transaction was prepared but
        not yet committed, the transaction could remain in the system
        after restart, and cause a subsequent shutdown to hang.
       (Bug #11766513, Bug #59641)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        With the setting
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names=2</code></a>,
        inserts into <code class="literal">InnoDB</code> tables covered by foreign
        key constraints could fail after a server restart. This is a
        similar problem to the foreign key error in Bug #11831040 / Bug
        #60196 / Bug #60909, but with a different root cause and
        occurring on Mac OS X.
      </p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        The internal <code class="function">get_partition_set()</code> function
        did not take into account the possibility that a key
        specification could be <code class="literal">NULL</code> in some cases.
       (Bug #12380149)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When executing a row-ordered retrieval index merge, the
        partitioning handler used memory from that allocated for the
        table, rather than that allocated to the query, causing table
        object memory not to be freed until the table was closed.
       (Bug #11766249, Bug #59316)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> was invoked using
        <a href="programs.html#option_mysqlbinlog_base64-output"><code class="option">--base64-output=decode-row</code></a>
        and
        <a href="programs.html#option_mysqlbinlog_start-position"><code class="option">--start-position=<em class="replaceable"><code>pos</code></em></code></a>,
        (where <em class="replaceable"><code>pos</code></em> is a point in the binary
        log past the format description log event), a spurious error of
        the type shown here was generated:
      </p><pre class="programlisting"><span class="errortext">malformed binlog: it does not contain any Format_description_log_event</span>... 
</pre><p>
        However, since there is nothing unsafe about not printing the
        format description log event, the error has been removed for
        this case.
       (Bug #12354268)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Typographical errors appeared in the text of several replication
        error messages. (The word “<span class="quote">position</span>” was misspelled
        as “<span class="quote">postion</span>”.)
       (Bug #11762616, Bug #55229)</p></li><li><p>
        Assignments to
        <code class="literal">NEW.<em class="replaceable"><code>var_name</code></em></code>
        within triggers, where <em class="replaceable"><code>var_name</code></em> had a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> type, were not properly
        handled and produced incorrect results.
       (Bug #12362125)</p></li><li><p>
        <a href="sql-syntax.html#xa" title="12.3.7. XA Transactions"><code class="literal">XA COMMIT</code></a> could
        fail to clean up the error state if it discovered that the
        current XA transaction had to be rolled back. Consequently, the
        next XA transaction could raise an assertion when it checked for
        proper cleanup of the previous transaction.
       (Bug #12352846)</p></li><li><p>
        An internal client macro reference was removed from the
        <code class="filename">client_plugin.h</code> header file. This reference
        made the file unusable.
       (Bug #60746, Bug #12325444)</p></li><li><p>
        For repeated invocation of some stored procedures, the server
        consumed memory that it did not release until the connection
        terminated.
       (Bug #60025, Bug #11848763)</p></li><li><p>
        The server did not check for certain invalid out of order
        sequences of XA statements, and these sequences raised an
        assertion.
       (Bug #59936, Bug #11766752, Bug #12348348)</p></li><li><p>
        With the conversion from GNU autotools to
        <span><strong class="command">CMake</strong></span> for configuring MySQL, the
        <code class="literal">USE_SYMDIR</code> preprocessor symbol was omitted.
        This caused failure of symbolic links (described at
        <a href="optimization.html#symbolic-links" title="7.11.3.1. Using Symbolic Links">Section 7.11.3.1, “Using Symbolic Links”</a>).
       (Bug #59408, Bug #11766320)</p></li><li><p>
        An incorrect <code class="literal">max_length</code> value for
        <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> values could be used in
        temporary result tables for
        <a href="sql-syntax.html#union" title="12.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>, leading to incorrect
        results.
       (Bug #59343, Bug #11766270)</p></li><li><p>
        In <code class="literal">Item_func_in::fix_length_and_dec()</code>, a
        Valgrind warning for uninitialized values was corrected.
       (Bug #59270, Bug #11766212)</p></li><li><p>
        In <a href="functions.html#function_round"><code class="literal">ROUND()</code></a> calculations, a
        Valgrind warning for uninitialized memory was corrected.
       (Bug #58937, Bug #11765923)</p><p>References: This bug is a regression of Bug #33143.</p></li><li><p>
        Valgrind warnings caused by comparing index values to an
        uninitialized field were corrected.
       (Bug #58705, Bug #11765713)</p></li><li><p>
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> errors could leak I/O cache memory.
       (Bug #58072, Bug #11765141)</p></li><li><p>
        For <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a>, multibyte character sequences could be pushed
        onto a stack too small to accommodate them.
       (Bug #58069, Bug #11765139)</p></li><li><p>
        Internal Performance Schema header files were unnecessarily
        installed publicly.
       (Bug #53281)</p></li><li><p>
        On Linux, the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client built using the
        bundled <code class="literal">libedit</code> did not read
        <code class="filename">~/.editrc</code>.
       (Bug #49967, Bug #11757855)</p></li><li><p>
        The optimizer sometimes incorrectly processed
        <code class="literal">HAVING</code> clauses for queries that did not also
        have an <code class="literal">ORDER BY</code> clause.
       (Bug #48916, Bug #11756928)</p></li><li><p>
        <code class="literal">PROCEDURE ANALYZE()</code> could leak memory for
        <code class="literal">NULL</code> results, and could return incorrect
        results if used with a <code class="literal">LIMIT</code> clause.
       (Bug #48137, Bug #11756242)</p></li><li><p>
        With <code class="literal">DISTINCT</code>,
        <a href="functions.html#function_concat"><code class="literal">CONCAT(<em class="replaceable"><code>col_name</code></em>,...)</code></a>
        returned incorrect results when the arguments to
        <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> were columns with an
        integer data type declared with a display width narrower than
        the values in the column. (For example, if an
        <code class="literal">INT(1)</code> column contained
        <code class="literal">1111</code>.)
       (Bug #4082)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-12"></a>D.1.11. Changes in MySQL 5.5.12 (05 May 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When invoked with the
        <a href="programs.html#option_mysqlslap_auto-generate-sql"><code class="option">--auto-generate-sql</code></a> option,
        <a href="programs.html#mysqlslap" title="4.5.7. mysqlslap — Load Emulation Client"><span><strong class="command">mysqlslap</strong></span></a> dropped the schema specified with
        the <a href="programs.html#option_mysqlslap_create-schema"><code class="option">--create-schema</code></a> option at
        the end of the test run, which may have been unexpected by the
        user. <a href="programs.html#mysqlslap" title="4.5.7. mysqlslap — Load Emulation Client"><span><strong class="command">mysqlslap</strong></span></a> no longer drops the schema,
        but has a new
        <a href="programs.html#option_mysqlslap_create-and-drop-schema"><code class="option">--create-and-drop-schema</code></a>
        option that both creates and drops a schema.
       (Bug #58090, Bug #11765157)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Trying to update a column, previously set to
        <code class="literal">NULL</code>, of an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table with no primary key
        caused replication to fail with <span class="errortext">Can't find record in
        '<em class="replaceable"><code>table</code></em>' on the slave</span>.
       (Bug #11766865, Bug #60091)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could halt if <code class="literal">InnoDB</code> interpreted a
        very heavy I/O load for 15 minutes or more as an indication that
        the server was hung. This change fixes the logic that measures
        how long <code class="literal">InnoDB</code> threads were waiting, which
        formerly could produce false positives.
       (Bug #11877216, Bug #11755413, Bug #47183)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        With the setting <code class="literal">lower_case_table_names=2</code>,
        inserts into <code class="literal">InnoDB</code> tables covered by foreign
        key constraints could fail after a server restart.
       (Bug #11831040, Bug #60196, Bug #60909)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Using the <a href="programs.html#option_mysqlbinlog_server-id"><code class="option">--server-id</code></a> option
        with <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> could cause format
        description log events to be filtered from the binary log,
        leaving <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> unable to read the
        remainder of the log. Now such events are always read without
        regard to the value of this option.
      </p><p>
        As part of the the fix for this problem,
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> now also reads rotate log events
        without regard to the value of
        <a href="programs.html#option_mysqlbinlog_server-id"><code class="option">--server-id</code></a>.
       (Bug #59530, Bug #11766427)</p></li><li><p>
        On Windows, the server rejected client connections if no DNS
        server was available.
       (Bug #12325375)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> did not properly upgrade the
        <code class="literal">authentication_string</code> column of the
        <code class="literal">mysql.user</code> table.
       (Bug #11936829)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> invoked some
        <code class="literal">zlib</code> functions without proper initialization.
       (Bug #11849231)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> permitted a
        <code class="literal">TABLESPACE</code> table option but did not write the
        option value to the <code class="filename">.frm</code> file.
       (Bug #11769356)</p></li><li><p>
        Comparison of a <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> stored
        program variable and <a href="functions.html#function_now"><code class="literal">NOW()</code></a>
        resulted in “<span class="quote">Illegal mix of collations error</span>” when
        <a href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> was
        set to <code class="literal">utf8</code>.
       (Bug #60625, Bug #11926811)</p></li><li><p>
        Selecting from a view for which the definition included a
        <code class="literal">HAVING</code> clause failed with an error:
      </p><pre class="programlisting">1356: View '...' references invalid table(s) or column(s)
or function(s) or definer/invoker of view lack rights to use them</pre><p>(Bug #60295, Bug #11829681)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> syntax permits
        specification of a <code class="literal">STORAGE
        {DEFAULT|DISK|MEMORY}</code> option. However, this value was
        not written to the <code class="filename">.frm</code> file, so that a
        subsequent <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE ... LIKE</code></a> for the table did not include that
        option.
      </p><p>
        Also, <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> of a table that
        had a tablespace incorrectly destroyed the tablespace.
       (Bug #60111, Bug #11766883, Bug #34047, Bug #11747789)</p></li><li><p>
        The server permitted
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> to be set
        lower than <a href="server-administration.html#sysvar_net_buffer_length"><code class="literal">net_buffer_length</code></a>,
        which does not make sense because
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> is the upper
        limit on <a href="server-administration.html#sysvar_net_buffer_length"><code class="literal">net_buffer_length</code></a>
        values. Now a warning occurs and the value remains unchanged.
       (Bug #59959, Bug #11766769)</p></li><li><p>
        A missing variable initialization for
        <code class="literal">Item_func_set_user_var</code> objects could raise an
        assertion.
       (Bug #59527, Bug #11766424)</p></li><li><p>
        When the server was started with the
        <a href="storage-engines.html#option_mysqld_innodb"><code class="option">--skip-innodb</code></a>
        option, it initialized the
        <a href="server-administration.html#sysvar_have_innodb"><code class="literal">have_innodb</code></a> system variable to
        <code class="literal">YES</code> rather than <code class="literal">DISABLED</code>.
       (Bug #59393, Bug #11766306)</p></li><li><p>
        In <code class="literal">Item_func_month::val_str()</code>, a Valgrind
        warning for a too-late <code class="literal">NULL</code> value check was
        corrected.
       (Bug #59166, Bug #11766126)</p></li><li><p>
        In <code class="literal">Item::get_date</code>, a Valgrind warning for a
        missing <code class="literal">NULL</code> value check was corrected.
       (Bug #59164, Bug #11766124)</p></li><li><p>
        In <code class="literal">extract_date_time()</code>, a Valgrind warning
        for a missing end-of-string check was corrected.
       (Bug #59151, Bug #11766112)</p></li><li><p>
        In string context, the <a href="functions.html#function_min"><code class="literal">MIN()</code></a> and
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> functions did not take into
        account the unsignedness of a <code class="literal">BIGINT UNSIGNED</code>
        argument.
       (Bug #59132, Bug #11766094)</p></li><li><p>
        In <code class="literal">Item_func::val_decimal</code>, a Valgrind warning
        for a missing <code class="literal">NULL</code> value check was corrected.
       (Bug #59125, Bug #11766087)</p></li><li><p>
        In <code class="literal">Item_func_str_to_date::val_str</code>, a Valgrind
        warning for an uninitialized variable was corrected.
       (Bug #58154, Bug #11765216)</p></li><li><p>
        An assertion could be raised in
        <code class="literal">Item_func_int_val::fix_num_length_and_dec()</code>
        due to overflow for geometry functions.
       (Bug #57900, Bug #11764994)</p></li><li><p>
        With prepared statements, the server could attempt to send
        result set metadata after the table had been closed.
       (Bug #56115, Bug #11763413)</p></li><li><p>
        With <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names=2</code></a>,
        resolution of objects qualified by database names could fail.
       (Bug #50924, Bug #11758687)</p></li><li><p>
        <a href="sql-syntax.html#show-events" title="12.7.5.19. SHOW EVENTS Syntax"><code class="literal">SHOW EVENTS</code></a> did not always show
        events from the correct database.
       (Bug #41907, Bug #11751148)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-11"></a>D.1.12. Changes in MySQL 5.5.11 (07 April 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> now permits concurrent reads
        on a table while creating nonprimary unique indexes. (This was
        found to create problems and was reverted in 5.5.12.)
       (Bug #11784056)</p></li><li><p>
        Previously, Performance Schema instrumentation for both the
        binary log and the relay log used these instruments:
      </p><pre class="programlisting">wait/io/file/sql/binlog 
wait/io/file/sql/binlog_index 
wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_index 
wait/synch/cond/sql/MYSQL_BIN_LOG::update_cond </pre><p>
        Now instrumentation for the relay log uses these instruments,
        which makes it possible to distinguish binary log and relay log
        events:
      </p><pre class="programlisting">wait/io/file/sql/relaylog 
wait/io/file/sql/relaylog_index 
wait/synch/mutex/sql/MYSQL_RELAY_LOG::LOCK_index 
wait/synch/cond/sql/MYSQL_RELAY_LOG::update_cond </pre><p>(Bug #59658, Bug #11766528)</p></li><li><p>
        MySQL distributions now include an <code class="filename">INFO_SRC</code>
        file that contains information about the source distribution,
        such as the MySQL version from which it was created. MySQL
        binary distributions additionally include an
        <code class="filename">INFO_BIN</code> file that contains information
        about how the distribution was built, such as compiler options
        and feature flags. In RPM packages, these files are located in
        the <code class="filename">/usr/share/doc/packages/MySQL-server</code>
        directory. In <code class="filename">tar.gz</code> and derived packages,
        they are located in the <code class="filename">Docs</code> directory
        under the location where the distribution is unpacked.
       (Bug #42969, Bug #11751935)</p></li><li><p>
        Previously, for queries that were aborted due to a sort problem
        or terminated with <code class="literal">KILL</code> in the middle of a
        sort, the server wrote the message <code class="literal">Sort
        aborted</code> to the error log. Now the server writes more
        information about the cause of the error. These causes include:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Insufficient disk space in the temporary file directory
            prevented a temp file from being created
          </p></li><li><p>
            Insufficient memory for
            <a href="server-administration.html#sysvar_sort_buffer_size"><code class="literal">sort_buffer_size</code></a> to be
            allocated
          </p></li><li><p>
            Somebody ran <code class="literal">KILL
            <em class="replaceable"><code>id</code></em></code> in the middle of a
            filesort operation
          </p></li><li><p>
            The server was shut down while some queries were sorting
          </p></li><li><p>
            A transaction was rolled back or aborted due to a lock wait
            timeout or deadlock
          </p></li><li><p>
            Unexpected errors, such as a source table or even temp table
            was corrupt
          </p></li><li><p>
            Processing of a subquery failed which was also sorting
          </p></li></ul></div><p>(Bug #30771, Bug #11747102)</p></li><li><p>
        A new system variable,
        <a href="server-administration.html#sysvar_max_long_data_size"><code class="literal">max_long_data_size</code></a>, now
        controls the maximum size of parameter values that can be sent
        with the
        <code class="literal">mysql_stmt_send_long_data()</code> C API
        function. If not set at server startup, the default is the value
        of the <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>
        system variable. This variable is deprecated. In MySQL 5.6, it
        is removed and the maximum parameter size is controlled by
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>.
      </p></li><li><p>
        For the Windows installer, debug information files and the
        embedded MySQL server have been removed from the standard MSI
        distribution file to reduce the download size for the majority
        of users.
      </p><p>
        If these files are needed, the Zip distribution must be
        downloaded separately and be extracted in the installation
        directory, which is most probably <code class="filename">C:\Program
        Files\MySQL\MySQL Server 5.5</code> on English systems.
      </p><p>
        Please note that upon product de-installation, these extracted
        files from the Zip distribution must be removed from the system
        manually.
      </p></li><li><p>
        The undocumented <code class="literal">SHOW NEW MASTER</code> statement
        has been removed.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The length of the <code class="literal">plugin</code> column of the
        <code class="literal">mysql.user</code> system table is increased to 64
        characters. This is now the same size as the
        <code class="literal">name</code> column of the
        <code class="literal">mysql.plugin</code> table.
       (Bug #11766610, Bug #59752)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        A problem with a previous fix for poor performance of
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ON DUPLICATE KEY
        UPDATE</code></a> statements on tables having many partitions
        caused the handler function for reading a row from a specific
        index to fail to store the ID of the partition last used. This
        caused some statements to fail with <span class="errortext">Can't find
        record</span> errors.
       (Bug #59297, Bug #11766232)</p><p>References: This bug is a regression of Bug #52455.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A failed <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> statement
        could break statement-based replication.
       (Bug #58381, Bug #11765416)</p></li><li><p>
        Two unused test files in
        <code class="filename">storage/ndb/test/sql</code> contained incorrect
        versions of the GNU Lesser General Public License. The files and
        the directory containing them have been removed.
       (Bug #11810224)</p><p>References: See also Bug #11810156.</p></li><li><p>
        Division of large numbers could cause stack corruption.
       (Bug #11792200)</p></li><li><p>
        The <code class="literal">mysql_load_client_plugin()</code> C
        API function did not clear the previous error.
       (Bug #60075, Bug #11766854)</p></li><li><p>
        An assertion was raised if an
        <a href="sql-syntax.html#xa" title="12.3.7. XA Transactions"><code class="literal">XA COMMIT</code></a> was
        issued when an XA transaction had already encountered an error
        (such as a deadlock) that required the transaction to be rolled
        back.
       (Bug #59986, Bug #11766788)</p></li><li><p>
        On some systems, debug builds of <code class="filename">comp_err</code>
        could fail due to an uninitialized variable.
       (Bug #59906, Bug #11766729)</p></li><li><p>
        The server read one byte too many when trying to process an XML
        string lacking a closing single quote (<code class="literal">'</code>) or
        double quote (<code class="literal">"</code>) character used as an
        argument for <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> or
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a>.
       (Bug #59901, Bug #11766725)</p><p>References: See also Bug #44332, Bug #11752979.</p></li><li><p>
        Attempting to create a spatial index on a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> column longer than 31 bytes
        led to an assertion failure if the server was compiled with
        safemutex support.
       (Bug #59888, Bug #11766714)</p></li><li><p>
        Aggregation followed by a subquery could produce an incorrect
        result.
       (Bug #59839, Bug #11766675)</p></li><li><p>
        An incorrect character set pointer passed to
        <code class="literal">my_strtoll10_mb2()</code> caused an assertion to be
        raised.
       (Bug #59648, Bug #11766519)</p></li><li><p>
        <a href="functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a> could work
        differently in MySQL 5.5 than in 5.1.
       (Bug #59405, Bug #11766317)</p></li><li><p>
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> did not quote database names in
        <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER DATABASE</code></a> statements in its
        output, which could cause an error at reload time for database
        names containing a dash.
       (Bug #59398, Bug #11766310)</p></li><li><p>
        The <code class="literal">MYSQL_HOME</code> environment variable was being
        ignored.
       (Bug #59280, Bug #11766219)</p></li><li><p>
        An invalid pathname argument for the
        <a href="programs.html#option_general_defaults-extra-file"><code class="option">--defaults-extra-file</code></a> option of
        MySQL programs caused a program crash.
       (Bug #59234, Bug #11766184)</p></li><li><p>
        On Windows, the <code class="literal">authentication_string</code> column
        recently added to the <code class="literal">mysql.user</code> table caused
        the Configuration Wizard to fail.
       (Bug #59038, Bug #11766011)</p></li><li><p>
        <a href="sql-syntax.html#create-trigger" title="12.1.19. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a> and
        <a href="sql-syntax.html#drop-trigger" title="12.1.30. DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a> can change the
        prelocking list of stored routines, but the routine cache did
        not detect such changes, resulting in routine execution with an
        inaccurate locking list.
       (Bug #58674, Bug #11765684)</p></li><li><p>
        The code for <code class="literal">PROCEDURE ANALYSE()</code> had a
        missing <code class="literal">DBUG_RETURN</code> statement, which could
        cause a server crash in debug builds.
       (Bug #58140, Bug #11765202)</p></li><li><p>
        An assertion was raised if a statement tried to upgrade a
        metadata lock while there was an active
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLE
        <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK</code></a>
        statement. Now if a statement tries to upgrade a metadata lock
        in this situation, the server returns an
        <a href="error-handling.html#error_er_table_not_locked_for_write"><code class="literal">ER_TABLE_NOT_LOCKED_FOR_WRITE</code></a>
        error to the client.
       (Bug #57649, Bug #11764779)</p></li><li><p>
        If a multiple-table update updated a row through two aliases and
        the first update physically moved the row, the second update
        failed to locate the row. This resulted in different errors
        depending on the storage engine, although these errors did not
        accurately describe the problem:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>: <code class="literal">Got error 134
            from storage engine</code>
          </p></li><li><p>
            <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>: <code class="literal">Can't find
            record in '<em class="replaceable"><code>tbl</code></em>'</code>
          </p></li></ul></div><p>
        For <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>, which is
        nontransactional, the update executed first was performed but
        the second was not. In addition, for two equal multiple-table
        update statements, one could succeed and the other fail
        depending on whether the record actually moved, which is
        inconsistent.
      </p><p>
        Now such an update returns an error if it will update a table
        through multiple aliases, and perform an update that may
        physically move the row in at least one of these aliases.
       (Bug #57373, Bug #11764529, Bug #55385, Bug #11762751)</p></li><li><p>
        <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a> output following
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> could include unprintable characters.
       (Bug #57341, Bug #11764503)</p></li><li><p>
        In some cases, <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a>
        returned an empty result when the previous statement failed.
       (Bug #55847, Bug #11763166)</p></li><li><p>
        On Windows, an object in thread local storage could be used
        before the object was created.
       (Bug #55730, Bug #11763065)</p></li><li><p>
        For a client connected using SSL, the
        <a href="server-administration.html#statvar_Ssl_cipher_list"><code class="literal">Ssl_cipher_list</code></a> status
        variable was empty and did not show the possible cipher types.
       (Bug #52596, Bug #11760210)</p></li><li><p>
        When used to upgrade tables, <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a> (and
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>, which invokes
        <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a>) did not upgrade some tables for
        which table repair was found to be necessary. In particular, it
        failed to upgrade <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables
        that needed repair, leaving them in a nonupgraded state. This
        occurred because:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck --check-upgrade ---auto-repair</strong></span></a>
            checks for tables that are incompatible with the current
            version of MySQL. It does this by issuing the
            <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> statement and examining the result.
          </p></li><li><p>
            For any table found to be incompatible,
            <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a> issues a
            <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> statement. But
            this fails for storage engines such as
            <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> that do not support the
            repair operation. Consequently, the table remained
            unchanged.
          </p></li></ul></div><p>
        To fix the problem, the following changes were made to
        <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ... FOR
        UPGRADE</code></a> and <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a>. Because
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> invokes
        <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a>, these changes also fix the
        problem for <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> returns a different error if a table
            needs repair but its storage engine does not support
            <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>:
          </p><p>
            Previous:
          </p><p>
</p><pre class="programlisting">Error: <code class="literal">ER_TABLE_NEEDS_UPGRADE</code>
Table upgrade required. Please do "REPAIR TABLE `<em class="replaceable"><code>tbl_name</code></em>`" or
dump/reload to fix it!
</pre><p>
            Now:
          </p><pre class="programlisting">Error: <code class="literal">ER_TABLE_NEEDS_REBUILD</code>
Table rebuild required. Please do "ALTER TABLE `<em class="replaceable"><code>tbl_name</code></em>` FORCE" or
dump/reload to fix it!
</pre></li><li><p>
            <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a> recognizes the new error and
            issues an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE ... FORCE</code></a> statement. The
            <code class="literal">FORCE</code> option for
            <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> was recognized
            but did nothing; now it is implemented and acts as a
            “<span class="quote">null</span>” alter operation that rebuilds the table.
          </p></li></ul></div><p>(Bug #47205, Bug #11755431)</p></li><li><p>
        When <code class="literal">CASE ... WHEN</code> arguments had different
        character sets, 8-bit values could be referenced as
        <code class="literal">utf16</code> or <code class="literal">utf32</code> values,
        raising an assertion.
       (Bug #44793, Bug #11753363)</p></li><li><p>
        Bitmap functions used in one thread could change bitmaps used by
        other threads, raising an assertion.
       (Bug #43152, Bug #11752069)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-10"></a>D.1.13. Changes in MySQL 5.5.10 (15 March 2011)</h3></div></div></div><p><span class="bold"><strong>C API Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The shared library version of the client library was increased
        to 18 to reflect ABI changes, and avoid compatibility problems
        with the client library in MySQL 5.1. Note that this is an
        incompatible change between 5.5.10 and earlier 5.5 versions, so
        client programs that use the 5.5 client library should be
        recompiled against the 5.5.10 client library.
       (Bug #60061, Bug #11827366)</p></li></ul></div><p><span class="bold"><strong>Pluggable Authentication</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL distributions now include <code class="literal">auth_socket</code>,
        a server-side authentication plugin that authenticates clients
        that connect from the local host through the Unix socket file.
        The plugin uses the <code class="literal">SO_PEERCRED</code> socket option
        to obtain information about the user running the client program
        (and thus can be built only on systems that support this
        option). For a connection to succeed, the plugin requires a
        match between the login name of the connecting client user and
        the MySQL user name presented by the client program. For more
        information, see <a href="server-administration.html#socket-authentication-plugin" title="5.5.6.5. The Socket Peer-Credential Authentication Plugin">Section 5.5.6.5, “The Socket Peer-Credential Authentication Plugin”</a>.
       (Bug #59017, Bug #11765993, Bug #9411, Bug #11745104)</p></li><li><p>
        MySQL distributions now include
        <code class="literal">mysql_clear_password</code>, a client-side
        authentication plugin that sends the password to the server
        without hashing or encryption. Although this is insecure, and
        thus appropriate precautions should be taken (such as using an
        SSL connection), the plugin is useful in conjunction with
        server-side plugins that must have access to the original
        password in clear text. For more information, see
        <a href="server-administration.html#clear-text-authentication-plugin" title="5.5.6.4. The Clear-Text Client-Side Authentication Plugin">Section 5.5.6.4, “The Clear-Text Client-Side Authentication Plugin”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>,
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a>, <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a>,
        <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a>, <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a>,
        and <a href="programs.html#mysqlslap" title="4.5.7. mysqlslap — Load Emulation Client"><span><strong class="command">mysqlslap</strong></span></a> clients now have
        <code class="option">--default-auth</code> and
        <code class="option">--plugin-dir</code> options for specifying which
        authentication plugin and plugin directory to use.
       (Bug #58139)</p></li><li><p>
        Boolean system variables can be enabled at run time by setting
        them to the value <code class="literal">ON</code> or
        <code class="literal">OFF</code>, but previously this did not work at
        server startup. Now at startup such variables can be enabled by
        setting them to <code class="literal">ON</code> or
        <code class="literal">TRUE</code>, or disabled by setting them to
        <code class="literal">OFF</code> or <code class="literal">FALSE</code>. Any other
        nonnumeric variable is invalid.
       (Bug #46393)</p><p>References: See also Bug #11754743, Bug #51631.</p></li><li><p>
        Previously, for queries that were aborted due to a sort problem,
        the server wrote the message <code class="literal">Sort aborted</code> to
        the error log. Now the server writes more information to provide
        a more specific message, such as:
      </p><pre class="programlisting">Sort aborted: Out of memory (Needed 24 bytes)
Out of sort memory, consider increasing server sort buffer size
Sort aborted: Out of sort memory, consider increasing server sort
  buffer size
Sort aborted: Incorrect number of arguments for FUNCTION test.f1;
  expected 0, got 1</pre><p>
        In addition, if the server was started with
        <a href="server-administration.html#option_mysqld_log-warnings"><code class="option">--log-warnings=2</code></a>, the server
        writes information about the host, user, and query.
       (Bug #36022, Bug #11748358)</p></li><li><p>
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump --xml</strong></span></a> now displays comments from
        column definitions.
       (Bug #13618, Bug #11745324)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #36544 was fixed.</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Raised the number of I/O requests that each
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_aio" target="_top">AIO</a> helper thread could process,
        from 32 to 256. The new limit applies to Linux and Unix
        platforms; the limit on Windows remains 32.
       (Bug #59472)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> returned values for
        “<span class="quote">rows examined</span>” in the query plan that were higher
        than expected. <code class="literal">NULL</code> values were treated in an
        inconsistent way. The inaccurate statistics could trigger
        “<span class="quote">false positives</span>” in combination with the
        <a href="server-administration.html#sysvar_max_join_size"><code class="literal">max_join_size</code></a> setting, because
        the queries did not really examine as many rows as reported.
      </p><p>
        A new configuration option
        <code class="literal">innodb_stats_method</code> lets you specify how
        <code class="literal">NULL</code> values are treated when calculating
        index statistics. Allowed values are
        <code class="literal">nulls_equal</code> (the default),
        <code class="literal">nulls_unequal</code> and
        <code class="literal">null_ignored</code>. The meanings of these values
        are similar to those of the
        <a href="server-administration.html#sysvar_myisam_stats_method"><code class="literal">myisam_stats_method</code></a> option.
       (Bug #30423)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the statement-based logging format,
        <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT ON
        DUPLICATE KEY UPDATE</code></a> and
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT IGNORE</code></a>
        statements affecting transactional tables that did not fail were
        not written to the binary log if they did not insert any rows.
        (With statement-based logging, all successful statements should
        be logged, whether they do or do not cause any rows to be
        changed.)
       (Bug #59338, Bug #11766266)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Formerly, <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> stopped the
        slave I/O thread first and then stopped the slave SQL thread;
        thus, it was possible for the I/O thread to stop after
        replicating only part of a transaction which the SQL thread was
        executing, in which case—if the transaction could not be
        rolled back safely—the SQL thread could hang.
      </p><p>
        Now, <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> stops the slave
        SQL thread first and then stops the I/O thread; this guarantees
        that the I/O thread can fetch any remaining events in the
        transaction that the SQL thread is executing, so that the SQL
        thread can finish the transaction if it cannot be rolled back
        safely.
       (Bug #58546, Bug #11765563)</p></li><li><p>
        Setting the <a href="server-administration.html#sysvar_optimizer_switch"><code class="literal">optimizer_switch</code></a>
        system variable to an invalid value caused a server crash.
       (Bug #59894, Bug #11766719)</p></li><li><p>
        <a href="functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a> could crash if the
        argument was not produced by
        <a href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a>.
       (Bug #59632, Bug #11766505)</p></li><li><p>
        The server and client did not always properly negotiate
        authentication plugin names.
       (Bug #59453, Bug #11766356)</p></li><li><p>
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--autocommit=ON</code></a> did not work (it
        set the global <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> value
        to 0, not 1).
       (Bug #59432, Bug #11766339)</p></li><li><p>
        A query of the following form returned an incorrect result,
        where the values for <em class="replaceable"><code>col_name</code></em> in the
        result set were entirely replaced with <code class="literal">NULL</code>
        values:
      </p><pre class="programlisting">SELECT DISTINCT <em class="replaceable"><code>col_name</code></em> ... ORDER BY <em class="replaceable"><code>col_name</code></em> DESC;
</pre><p>(Bug #59308, Bug #11766241)</p></li><li><p>
        <a href="sql-syntax.html#show-privileges" title="12.7.5.27. SHOW PRIVILEGES Syntax"><code class="literal">SHOW PRIVILEGES</code></a> did not display a
        row for the <a href="server-administration.html#priv_proxy"><code class="literal">PROXY</code></a> privilege.
       (Bug #59275, Bug #11766216)</p></li><li><p>
        <a href="sql-syntax.html#show-profile" title="12.7.5.31. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> could truncate
        source file names or fail to show function names.
       (Bug #59273, Bug #11766214)</p></li><li><p>
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> or
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements could fail if
        they used <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> values with a year,
        month, or day part of zero.
       (Bug #59173)</p></li><li><p>
        The <code class="literal">ESCAPE</code> clause for the
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator permits only
        expressions that evaluate to a constant at execution time, but
        aggregate functions were not being rejected.
       (Bug #59149, Bug #11766110)</p></li><li><p>
        Memory leaks detected by Valgrind, some of which could cause
        incorrect query results, were corrected.
       (Bug #59110, Bug #11766075)</p></li><li><p>
        There was an erroneous restriction on file attributes for
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a>.
       (Bug #59085, Bug #11766052)</p></li><li><p>
        The <a href="installing.html#option_cmake_default_charset"><code class="option">DEFAULT_CHARSET</code></a> and
        <a href="installing.html#option_cmake_default_collation"><code class="option">DEFAULT_COLLATION</code></a>
        <span><strong class="command">CMake</strong></span> options did not work.
       (Bug #58991, Bug #11765967)</p></li><li><p>
        An <code class="literal">OUTER JOIN</code> query using <code class="literal">WHERE
        <em class="replaceable"><code>col_name</code></em> IS NULL</code> could
        return an incorrect result.
       (Bug #58490, Bug #11765513)</p></li><li><p>
        Starting the server with the
        <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file=<em class="replaceable"><code>file_name</code></em></code></a>
        option, where the file name had no extension, caused a server
        crash.
       (Bug #58455, Bug #11765482)</p></li><li><p>
        Outer joins with an empty table could produce incorrect results.
       (Bug #58422, Bug #11765451)</p></li><li><p>
        In debug builds, <code class="literal">SUBSTRING_INDEX(FORMAT(...),
        FORMAT(...))</code> could cause a server crash.
       (Bug #58371, Bug #11765406)</p></li><li><p>
        When <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> was run with the
        <a href="programs.html#option_mysqladmin_sleep"><code class="option">--sleep</code></a> and
        <a href="programs.html#option_mysqladmin_count"><code class="option">--count</code></a> options, it went into
        an infinite loop executing the specified command.
       (Bug #58221, Bug #11765270)</p></li><li><p>
        Some string-manipulating SQL functions use a shared string
        object intended to contain an immutable empty string. This
        object was used by the SQL function
        <a href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a> to return an
        empty string when one argument was of the wrong data type. If
        the string object was then modified by the SQL function
        <a href="functions.html#function_insert"><code class="literal">INSERT()</code></a>, undefined behavior
        ensued.
       (Bug #58165, Bug #11765225)</p></li><li><p>
        Parsing nested regular expressions could lead to recursion
        resulting in a stack overflow crash.
       (Bug #58026, Bug #11765099)</p></li><li><p>
        The fix for Bug #25192 caused <code class="literal">load_defaults()</code>
        to add an argument separator to distinguish options loaded from
        option files from those provided on the command line, whether or
        not the application needed it.
       (Bug #57953, Bug #11765041)</p><p>References: See also Bug #11746296.</p></li><li><p>
        The <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client went into an infinite loop
        if the standard input was a directory.
       (Bug #57450, Bug #11764598)</p></li><li><p>
        Outer joins on a unique key could return incorrect results.
       (Bug #57034, Bug #11764219)</p></li><li><p>
        The expression <code class="literal"><em class="replaceable"><code>const1</code></em>
        BETWEEN <em class="replaceable"><code>const2</code></em> AND
        <em class="replaceable"><code>field</code></em></code> was optimized
        incorrectly and produced incorrect results.
       (Bug #57030, Bug #11764215)</p></li><li><p>
        Some RPM installation scripts used a hardcoded value for the
        data directory, which could result in a failed installation for
        users who have a nonstandard data directory location. The same
        was true for other configuration values such as the PID file
        name.
       (Bug #56581, Bug #11763817)</p></li><li><p>
        On FreeBSD and OpenBSD, the server incorrectly checked the range
        of the system date, causing legal values to be rejected.
       (Bug #55755, Bug #11763089)</p></li><li><p>
        Sorting using <code class="literal">ORDER BY AVG(DISTINCT
        <em class="replaceable"><code>decimal_col</code></em>)</code> caused a
        server crash or incorrect results.
       (Bug #52123, Bug #11759784)</p></li><li><p>
        When using <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> or
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a>, if the XML to be
        read contained an incomplete XML comment, MySQL read beyond the
        end of the XML string when processing, leading to a crash of the
        server.
       (Bug #44332, Bug #11752979)</p></li><li><p>
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a> and
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a> return a string if the
        first argument is a string, but incorrectly returned a binary
        string. Now they return a character string with a collation of
        <code class="literal">connection_collation</code>.
       (Bug #31384, Bug #11747221)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-9"></a>D.1.14. Changes in MySQL 5.5.9 (07 February 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> and
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> clients now have
        <code class="option">--default-auth</code> and
        <code class="option">--plugin-dir</code> options for specifying which
        authentication plugin and plugin directory to use.
       (Bug #58139, Bug #11765201)</p></li><li><p>
        <code class="filename">sql_priv.h</code> now includes an
        <code class="literal">OPTION_ALLOW_BATCH</code> flag for the
        <a href="mysql-cluster.html#sysvar_transaction_allow_batching"><code class="literal">transaction_allow_batching</code></a>
        feature of MySQL Cluster.
       (Bug #57604)</p></li><li><p>
        Boolean system variables can be enabled at run time by setting
        them to the value <code class="literal">ON</code> or
        <code class="literal">OFF</code>, but previously this did not work at
        server startup. Now at startup such variables can be enabled by
        setting them to <code class="literal">ON</code> or
        <code class="literal">TRUE</code>. Any other nonnumeric variable is
        interpreted as <code class="literal">OFF</code>. (Bug #46393 improves on
        this such that <code class="literal">ON</code>, <code class="literal">TRUE</code>,
        <code class="literal">OFF</code>, and <code class="literal">FALSE</code> are
        recognized, and other values are invalid.)
       (Bug #51631, Bug #11759326)</p><p>References: See also Bug #11754743.</p></li><li><p>
        In the audit plugin interface, the
        <code class="literal">MYSQL_AUDIT_CONNECTION_CLASS</code> event class was
        added, and the <code class="literal">MYSQL_AUDIT_GENERAL_STATUS</code>
        subclass was added to the
        <code class="literal">MYSQL_AUDIT_GENERAL_CLASS</code> event class. The
        new symbol definitions can be found in the
        <code class="filename">plugin_audit.h</code> header file.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #57952 was fixed.</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> now uses the
        <code class="literal">PAUSE</code> instruction on all platforms where it
        is available. Previously, <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        used the <code class="literal">PAUSE</code> instruction only on Windows
        systems.
       (Bug #58666)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: 
        Queries involving <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables in
        the <code class="literal">INFORMATON_SCHEMA</code> tables
        <a href="information-schema.html#table-constraints-table" title="19.24. The INFORMATION_SCHEMA TABLE_CONSTRAINTS Table"><code class="literal">TABLE_CONSTRAINTS</code></a>,
        <a href="information-schema.html#key-column-usage-table" title="19.11. The INFORMATION_SCHEMA KEY_COLUMN_USAGE Table"><code class="literal">KEY_COLUMN_USAGE</code></a>, or
        <a href="information-schema.html#referential-constraints-table" title="19.17. The INFORMATION_SCHEMA REFERENTIAL_CONSTRAINTS Table"><code class="literal">REFERENTIAL_CONSTRAINTS</code></a> were slower
        than necessary because statistics were rechecked more often than
        required, even more so when many foreign keys were present. The
        improvement to this may be of particular benefit to users of
        MySQL Enterprise Monitor with many monitored servers or tens of
        thousands of tables.
       (Bug #43818, Bug #11752585)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        When <code class="literal">auto_increment_increment</code> is greater than
        one, values generated by a bulk insert that reaches the maximum
        column value could wrap around rather producing an overflow
        error.
      </p><p>
        As a consequence of the fix, it is no longer possible for an
        auto-generated value to be equal to the maximum <code class="literal">BIGINT
        UNSIGNED</code> value. It is still possible to store that
        value manually, if the column can accept it.
       (Bug #39828, Bug #11749800)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Partitioning</strong></span>: 
        Date and time functions used as partitioning functions now have
        the types of their operands checked; use of a value of the wrong
        type is now disallowed in such cases. In addition,
        <a href="functions.html#function_extract"><code class="literal">EXTRACT(WEEK FROM
        <em class="replaceable"><code>col_name</code></em>)</code></a>, where
        <em class="replaceable"><code>col_name</code></em> is a
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> column, is now
        disallowed altogether because its return value depends on the
        value of the
        <a href="server-administration.html#sysvar_default_week_format"><code class="literal">default_week_format</code></a> system
        variable.
       (Bug #54483, Bug #11761948)</p><p>References: See also Bug #57071, Bug #11764255.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The partitioning handler did not pass locking information to a
        table's storage engine handler. This caused high contention
        and thus slower performance when working with partitioned
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables.
       (Bug #59013)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When multiple <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> buffer pools
        were enabled, <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW
        ENGINE INNODB</code></a> statements displayed information about
        each one, but not summary information combining statistics for
        the entire buffer pool subsystem. Now, the aggregated
        information is displayed in the <code class="literal">BUFFER POOL AND
        MEMORY</code> section, and information about individual
        buffer pool instances is displayed in a new <code class="literal">INDIVIDUAL
        BUFFER POOL INFO</code> section.
       (Bug #58461)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The command to create a debug build (<code class="literal">cmake -DWITH_DEBUG
        ...</code>) now automatically sets the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> debugging flag
        <code class="literal">UNIV_DEBUG</code> on all platforms. Formerly, the
        <code class="literal">UNIV_DEBUG</code> flag might not be set for Windows
        platforms with Visual Studio and not on OS X with Xcode.
       (Bug #58279)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        In <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> status output, the value
        for <code class="literal">I/O sum[]</code> could be incorrect, displayed
        as a very large number.
       (Bug #57600)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash with an assertion error, if a stored
        procedure, stored function, or trigger modified one
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table containing an
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_auto_increment" target="_top">auto-increment</a>
        column, and dropped another <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        table containing an auto-increment column.
       (Bug #56228)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        It was not possible to query the
        <a href="information-schema.html#innodb-trx-table" title="19.29.3. The INFORMATION_SCHEMA INNODB_TRX Table"><code class="literal">information_schema.INNODB_TRX</code></a> table
        while other connections were running queries involving
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> types.
       (Bug #55397, Bug #11762763)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When the <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        variable was set to 2, <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> could
        fail to restore a <code class="literal">mysqldump</code> dump of a table
        with foreign key constraints involving case-sensitive names.
       (Bug #55222)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> statement
        reset the auto-increment counter for an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table. Now the
        auto-increment value is preserved across this operation.
       (Bug #18274)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Failed <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE
        ... TRUNCATE PARTITION</code></a> statements were written to the
        binary log.
       (Bug #58147)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Failed <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE
        ... PARTITION</code></a> statements could cause memory leaks.
       (Bug #56380, Bug #11763641)</p><p>References: See also Bug #46949, Bug #11755209, Bug #56996, Bug #11764187.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        While an <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statement
        with a single inserted value does not return any visible
        warnings, such a warning could be still written into the error
        log.
       (Bug #57666, Bug #11764793)</p><p>References: See also Bug #49567.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When closing a session that used temporary tables, binary
        logging could sometimes fail with a spurious <span class="errortext">Failed
        to write the DROP statement for temporary tables to binary
        log</span>.
       (Bug #57288)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Due to changes made in MySQL 5.5.3, settings made in the
        <a href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a> and
        <a href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a> server
        system variables affected both the binary log statement cache
        (also introduced in that version) and the binary log
        transactional cache (formerly known simply as the binary log
        cache). This meant that the resources used as a result of
        setting either or both of these variables were double the amount
        expected. To rectify this problem, these variables now affect
        only the transactional cache. The fix for this issue also
        introduces two new system variables
        <a href="replication.html#sysvar_binlog_stmt_cache_size"><code class="literal">binlog_stmt_cache_size</code></a> and
        <a href="replication.html#sysvar_max_binlog_stmt_cache_size"><code class="literal">max_binlog_stmt_cache_size</code></a>,
        which affect only the binary log statement cache.
      </p><p>
        In addition, the
        <a href="server-administration.html#statvar_Binlog_cache_use"><code class="literal">Binlog_cache_use</code></a> status
        variable was incremented whenever either cache was used, and
        <a href="server-administration.html#statvar_Binlog_cache_disk_use"><code class="literal">Binlog_cache_disk_use</code></a> was
        incremented whenever the disk space from either cache was used,
        which caused problems with performance tuning of the statement
        and transactional caches, because it was not possible to
        determine which of these was being exceeded when attempting to
        troubleshoot excessive disk seeks and related problems. This
        issue is solved by changing the behavior of these two status
        variables such that they are incremented only in response to
        usage of the binary log transactional cache, as well as by
        introducing two new status variables
        <a href="server-administration.html#statvar_Binlog_stmt_cache_use"><code class="literal">Binlog_stmt_cache_use</code></a> and
        <a href="server-administration.html#statvar_Binlog_stmt_cache_disk_use"><code class="literal">Binlog_stmt_cache_disk_use</code></a>,
        which are incremented only by usage of the binary log statement
        cache.
      </p><p>
        The behavior of the
        <a href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a> system
        variable with regard to active sessions has also been changed to
        match that of the
        <a href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a> system
        variable: Previously, a change in
        <a href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a> took
        effect in existing sessions; now, as with a change in
        <a href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a>, a change in
        <a href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a> takes
        effect only in sessions begun after the value was changed.
      </p><p>
        For more information, see
        <a href="replication.html#replication-sysvars-binlog" title="System variables used with the binary log">System variables used with the binary log</a>, and
        <a href="server-administration.html#server-status-variables" title="5.1.5. Server Status Variables">Section 5.1.5, “Server Status Variables”</a>.
       (Bug #57275, Bug #11764443)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        By default, a value is generated for an
        <code class="literal">AUTO_INCREMENT</code> column by inserting either
        <code class="literal">NULL</code> or 0 into the column. Setting the
        <a href="server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a> server
        SQL mode suppresses this behavior for 0, so that it occurs only
        when <code class="literal">NULL</code> is inserted into the column.
      </p><p>
        This behavior is also followed on a replication slave (by the
        slave SQL thread) when applying events that have been logged on
        the master using the statement-based format. However, when
        applying events that had been logged using the row-based format,
        <a href="server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a> was
        ignored, which could lead to an assertion.
      </p><p>
        To fix this issue, the value of an
        <code class="literal">AUTO_INCREMENT</code> column is no longer generated
        when applying an event that was logged using the row-based row
        format, as this value is already contained in the changes
        applied on the slave.
       (Bug #56662)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The <a href="server-administration.html#statvar_Binlog_cache_use"><code class="literal">Binlog_cache_use</code></a> and
        <a href="server-administration.html#statvar_Binlog_cache_disk_use"><code class="literal">Binlog_cache_disk_use status</code></a>
        variables were incremented twice by a change to a table using a
        transactional storage engine.
       (Bug #56343, Bug #11763611)</p><p>References: This bug is a regression of Bug #50038.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The <a href="sql-syntax.html#binlog" title="12.7.6.1. BINLOG Syntax"><code class="literal">BINLOG</code></a> statement modified the
        values of session variables, which could lead to problems with
        operations such as point-in-time recovery. One such case
        occurred when replaying a row-based binary log which relied on
        setting <a href="server-administration.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks =
        OFF</code></a> at the session level to create and populate a set
        of <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables having foreign key
        constraints.
       (Bug #54903)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> printed
        <a href="sql-syntax.html#use" title="12.8.4. USE Syntax"><code class="literal">USE</code></a> statements to its output only
        when the default database changed between events. To illustrate
        how this could cause problems, suppose that a user issued the
        following sequence of statements:
      </p><pre class="programlisting">CREATE DATABASE mydb;
USE mydb;
CREATE TABLE mytable (<em class="replaceable"><code>column_definitions</code></em>);
DROP DATABASE mydb;
CREATE DATABASE mydb;
USE mydb;
CREATE TABLE mytable (<em class="replaceable"><code>column_definitions</code></em>);
</pre><p>
        When played back using <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a>, the
        second <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
        failed with <span class="errortext">Error: No Database Selected</span>
        because the second <a href="sql-syntax.html#use" title="12.8.4. USE Syntax"><code class="literal">USE</code></a> statement
        was not played back, due to the fact that a database other than
        <code class="literal">mydb</code> was never selected.
      </p><p>
        This fix ensures that <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> outputs a
        <a href="sql-syntax.html#use" title="12.8.4. USE Syntax"><code class="literal">USE</code></a> statement whenever it reads
        one from the binary log.
       (Bug #50914, Bug #11758677)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Previously, when a statement failed with a different error on
        the slave than on the master, the slave SQL thread displayed a
        message containing:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The error message for the master error code
          </p></li><li><p>
            The master error code
          </p></li><li><p>
            The error message for the slaves error code
          </p></li><li><p>
            The slave error code
          </p></li></ul></div><p>
        However, the slave has no information with which to fill in any
        print format specifiers for the master message, so it actually
        displayed the message format string. To make it clearer that the
        slave is not displaying the actual message as it appears on the
        master, the slave now indicates that the master part of the
        output is the message format, not the actual message. For
        example, previously the slave displayed information like this:
      </p><pre class="programlisting">Error: "Query caused different errors on master and slave. Error
on master: 'Duplicate entry '%-.192s' for key %d' (1062), Error on
slave: 'no error' (0). Default database: 'test'. Query: 'insert
into t1 values(1),(2)'" (expected different error codes on master
and slave)</pre><p>
        Now the slave displays this:
      </p><pre class="programlisting">Error: "Query caused different errors on master and slave. Error
on master: message format='Duplicate entry '%-.192s' for key %d'
error code=1062 ; Error on slave: actual message='no error', error
code=0. Default database: 'test'. Query: 'insert into t1 values(1),(2)'"
(expected different error codes on master and slave)</pre><p>(Bug #46697)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When an error occurred in the generation of the name for a new
        binary log file, the error was logged but not shown to the user.
       (Bug #46166)</p><p>References: See also Bug #37148, Bug #11748696, Bug #40611, Bug #11750196, Bug #43929, Bug #51019.</p></li><li><p>
        Comparisons of aggregate values with
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values were incorrect.
       (Bug #59330, Bug #11766259)</p></li><li><p>
        For <a href="functions.html#operator_div"><code class="literal">DIV</code></a> expressions, assignment of
        the result to multiple variables could cause a server crash.
       (Bug #59241, Bug #11766191)</p><p>References: See also Bug #8457.</p></li><li><p>
        <a href="functions.html#function_min"><code class="literal">MIN(<em class="replaceable"><code>year_col</code></em>)</code></a>
        could return an incorrect result in some cases.
       (Bug #59211, Bug #11766165)</p></li><li><p>
        <a href="programs.html#mysqlslap" title="4.5.7. mysqlslap — Load Emulation Client"><span><strong class="command">mysqlslap</strong></span></a> failed to check for a
        <code class="literal">NULL</code> return from
        <a href="connectors-apis.html#mysql-store-result" title="21.9.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and crashed
        trying to process the result set.
       (Bug #59109, Bug #11766074)</p></li><li><p>
        In a subquery, a <a href="sql-syntax.html#union" title="12.2.9.4. UNION Syntax"><code class="literal">UNION</code></a> with no
        referenced tables (or only a reference to the
        <code class="literal">DUAL</code> virtual table) did not permit an
        <code class="literal">ORDER BY</code> clause.
       (Bug #58970, Bug #11765950)</p></li><li><p>
        Configuring MySQL with
        <code class="option">-DWITHOUT_PERFSCHEMA_STORAGE_ENGINE=1</code> caused
        build failures.
       (Bug #58953)</p></li><li><p>
        Several Valgrind warnings were fixed.
       (Bug #58948, Bug #59021)</p></li><li><p>
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> for an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table could raise an
        assertion if the operation failed because it had been killed.
       (Bug #58933, Bug #11765920)</p></li><li><p>
        If <code class="literal">max_allowed_packet</code> was set larger than
        16MB, the server failed to reject too-large packets with
        “<span class="quote">Packet too large</span>” errors.
       (Bug #58887, Bug #11765878)</p></li><li><p>
        A <code class="literal">NOT IN</code> predicate with a subquery containing
        a <code class="literal">HAVING</code> clause could retrieve too many rows,
        when the subquery itself returned <code class="literal">NULL</code>.
       (Bug #58818, Bug #11765815)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> could crash for queries
        that accessed two derived tables.
       (Bug #58730)</p></li><li><p>
        On Solaris, the MySQL build failed if it was configured with
        debugging enabled.
       (Bug #58699)</p></li><li><p>
        Issuing <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> for a query that would use condition pushdown
        could cause <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to crash.
       (Bug #58553, Bug #11765570)</p></li><li><p>
        An assertion could be raised for queries for which the optimizer
        could choose between Index Merge range access or const ref
        access methods.
       (Bug #58456)</p></li><li><p>
        If MySQL was built with Visual Studio Express, the project wixca
        was not built.
       (Bug #58411)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> could crash for queries
        that used <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a>.
       (Bug #58396)</p></li><li><p>
        <span><strong class="command">CMake</strong></span> polluted the source tree by writing
        installation-related temporary files there.
       (Bug #58372)</p></li><li><p>
        Security context references in <code class="filename">sp_head.cc</code>
        were rewritten for improved DTrace compatibility.
       (Bug #58350)</p></li><li><p>
        The <code class="literal">ucs2</code> character set does not support
        characters outside the Basic Multilingual Plane (BMP), but
        converting to <code class="literal">ucs2</code> a string containing such
        characters did not produce a conversion-failure warning.
       (Bug #58321)</p></li><li><p>
        A Valgrind failure occurred in <code class="literal">fn_format</code> when
        called from <code class="literal">archive_discover</code>.
       (Bug #58205, Bug #11765259)</p></li><li><p>
        <span><strong class="command">CMake</strong></span> did not add
        <code class="literal">LINK_LIBRARIES</code> for
        <code class="literal">MYSQL_ADD_PLUGIN</code> for
        <code class="literal">libmysqld</code>.
       (Bug #58158)</p></li><li><p>
        An assertion could be raised if the server was closing a session
        at the same time the session was being killed by another thread.
       (Bug #58136)</p></li><li><p>
        Condition pushdown optimization could push down conditions with
        incorrect column references.
       (Bug #58134, Bug #11765196)</p></li><li><p>
        Configuration with maintainer mode enabled resulted in errors
        when compiling with <span><strong class="command">icc</strong></span>.
       (Bug #57991, Bug #58871)</p></li><li><p>
        An <code class="literal">ORDER BY</code> clause was bound to the incorrect
        substatement when used in <a href="sql-syntax.html#union" title="12.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>
        context.
       (Bug #57986)</p></li><li><p>
        The <a href="functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a> function could
        return incorrect results when a join returned no matching rows.
       (Bug #57954)</p></li><li><p>
        If the set of values aggregated with
        <a href="functions.html#function_avg"><code class="literal">AVG(DISTINCT)</code></a> contained a
        <code class="literal">NULL</code> value, the function result could be
        incorrect.
       (Bug #57932)</p></li><li><p>
        In rare cases, <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> expressions
        failed for an indexed column that used a collation containing
        contractions.
       (Bug #57737)</p></li><li><p>
        Unnecessary subquery evaluation in contexts such as statement
        preparation or view creation could cause a server crash.
       (Bug #57703)</p></li><li><p>
        View creation could produce Valgrind warnings.
       (Bug #57352)</p></li><li><p>
        <code class="literal">NULL</code> geometry values could cause a crash in
        <code class="literal">Item_func_spatial_collection::fix_length_and_dec</code>.
       (Bug #57321)</p></li><li><p>
        It was possible to compile <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with
        Performance Schema support but with a dummy atomic-operations
        implementation, which caused a server crash. This problem does
        not affect binary distributions. It is helpful as a safety
        measure for users who build MySQL from source.
       (Bug #56769)</p></li><li><p>
        The <code class="literal">cp1251</code> character set did not properly
        support the Euro sign (<code class="literal">0x88</code>). For example,
        converting a string containing this character to
        <code class="literal">utf8</code> resulted in <code class="literal">'?'</code>
        rather than the <code class="literal">utf8</code> Euro sign.
       (Bug #56639)</p></li><li><p>
        Some unsigned system variables could be displayed with negative
        values.
       (Bug #55794)</p></li><li><p>
        <a href="sql-syntax.html#create-database" title="12.1.10. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> and
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> caused
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql --one-database</strong></span></a> to lose track of the
        statement-filtering context.
       (Bug #54899)</p></li><li><p>
        An assertion could be raised during concurrent execution of
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> and
        <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> if the drop deleted
        a table's <code class="filename">.TMD</code> file at the same time the
        repair tried to read details from the old file that was just
        removed.
      </p><p>
        A problem could also occur when <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP
        TABLE</code></a> tried to remove all files belonging to a table
        at the same time <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> had
        just deleted the table's <code class="filename">.TMD</code> file.
       (Bug #54486)</p></li><li><p>
        After compilation from source, all header files were installed
        in the same directory, even those that should be installed into
        subdirectories of the installation include directory.
       (Bug #51925)</p></li><li><p>
        When <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> printed crash dump information,
        it incorrectly indicated that some valid pointers were invalid.
       (Bug #51817)</p></li><li><p>
        On Mac OS X, a configuration error caused the preference pane to
        fail.
       (Bug #51264)</p></li><li><p>
        On FreeBSD, if <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> was killed with a
        <code class="literal">SIGHUP</code> signal, it could corrupt
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> <code class="filename">.ibd</code>
        files.
       (Bug #51023, Bug #11758773)</p></li><li><p>
        An assertion could be raised if –1 was inserted into an
        <code class="literal">AUTO_INCREMENT</code> column by a statement writing
        more than one row.
       (Bug #50619, Bug #11758417)</p></li><li><p>
        If a client supplied a user name longer than the maximum 16
        characters permitted for names stored in the MySQL grant tables,
        all characters were being considered significant when checking
        for a match. Historically, only the first 16 characters were
        used for matching; this behavior was restored.
       (Bug #49752)</p></li><li><p>
        The <code class="literal">my_seek()</code> and
        <code class="literal">my_tell()</code> functions ignored the
        <code class="literal">MY_WME</code> flag when they returned an error,
        which could cause client programs to hang.
       (Bug #48451)</p></li><li><p>
        During assignment of values to system variables, legality checks
        on the value range occurred too late, preventing proper error
        checking.
       (Bug #43233)</p></li><li><p>
        On Solaris, time-related functions such as
        <a href="functions.html#function_now"><code class="literal">NOW()</code></a> or
        <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> could return a constant
        value.
       (Bug #42054)</p></li><li><p>
        If the remote server for a
        <a href="storage-engines.html#federated-storage-engine" title="13.11. The FEDERATED Storage Engine"><code class="literal">FEDERATED</code></a> table could not be
        accessed, queries for the
        <a href="information-schema.html#tables-table" title="19.22. The INFORMATION_SCHEMA TABLES Table"><code class="literal">INFORMATION_SCHEMA.TABLES</code></a> table
        failed.
       (Bug #35333)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-8"></a>D.1.15. Changes in MySQL 5.5.8 (03 December 2010, General Availability)</h3></div></div></div><p><span class="bold"><strong>Configuration Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL releases are now built on all platforms using
        <span><strong class="command">CMake</strong></span> rather than the GNU autotools, so
        autotools support has been removed. For instructions on building
        MySQL with <code class="literal">CMake</code>, see
        <a href="installing.html#source-installation" title="2.9. Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a>. If you are familiar with
        autotools but not <span><strong class="command">CMake</strong></span>, you might find this
        transition document helpful:
        <a href="http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide" target="_top">http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide</a>
        Third-party tools that need to extract the MySQL version number
        formerly found in <code class="filename">configure.in</code> can use the
        <code class="filename">VERSION</code> file. See
        <a href="installing.html#source-configuration-third-party" title="2.9.6. MySQL Configuration and Third-Party Tools">Section 2.9.6, “MySQL Configuration and Third-Party Tools”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Support for the <code class="literal">IBMDB2I</code> storage engine has
        been removed.
       (Bug #58079)</p></li><li><p>
        The following words are no longer reserved words the way they
        are in earlier MySQL 5.5 releases: <code class="literal">SLOW</code>,
        <code class="literal">GENERAL</code>,
        <code class="literal">IGNORE_SERVER_IDS</code>,
        <code class="literal">MASTER_HEARTBEAT_PERIOD</code>
       (Bug #57899)</p></li><li><p>
        For an upgrade to MySQL 5.5.7 from a previous release, the
        server exited if the <code class="literal">mysql.proxies_priv</code> table
        did not exist, making upgrades inconvenient. Now the server
        treats a missing <code class="literal">proxies_priv</code> table as
        equivalent to an empty table. However, after starting the
        server, you should still run <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> to
        create the table.
       (Bug #57551)</p></li><li><p>
        The <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> system variable
        is enabled by default for all user connections, and the session
        value can be set for each new connection by setting the
        <a href="server-administration.html#sysvar_init_connect"><code class="literal">init_connect</code></a> system variable to
        <code class="literal">SET autocommit=0</code>. However, this has no effect
        for users who have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
        privilege.
      </p><p>
        Now the global <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> value
        can be set at server startup, and this value is used to
        initialize the session value for all new connections, including
        those for users with the <code class="literal">SUPER</code> privilege. The
        variable is treated as a boolean value so it can be enabled with
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--autocommit</code></a>,
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--autocommit=1</code></a>, or
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--enable-autocommit</code></a>.
        It can be disabled with
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--autocommit=0</code></a>,
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--skip-autocommit</code></a>,
        or
        <a href="server-administration.html#sysvar_autocommit"><code class="option">--disable-autocommit</code></a>.
       (Bug #57316)</p></li><li><p>
        The client/server protocol now includes a
        <code class="literal">SERVER_QUERY_WAS_SLOW</code> flag to indicate when a
        query is slow; that is, when query execution exceeds the value
        of the <a href="server-administration.html#sysvar_long_query_time"><code class="literal">long_query_time</code></a> system
        variable.
       (Bug #57058)</p></li><li><p>
        The time zone tables available at
        <a href="http://dev.mysql.com/downloads/timezones.html" target="_top">http://dev.mysql.com/downloads/timezones.html</a> have been
        updated. These tables can be used on systems such as Windows or
        HP-UX that do not include zoneinfo files.
       (Bug #40230)</p></li><li><p>
        Changes to replication in MySQL 5.6 make
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> output generated by the
        <a href="programs.html#option_mysqlbinlog_base64-output"><code class="option">--base64-output=ALWAYS</code></a>
        option unusable, so <code class="literal">ALWAYS</code> is now deprecated
        and will be an invalid option value in MySQL 5.6. This should
        not be a significant problem because
        <a href="programs.html#option_mysqlbinlog_base64-output"><code class="option">--base64-output</code></a> values other
        than <code class="literal">AUTO</code> are supposed to be used only for
        debugging, not for production environments.
      </p><p>References: See also Bug #28760.</p></li><li><p>
        A <a href="programs.html#option_mysql_bind-address"><code class="option">--bind-address</code></a> option has been
        added to a number of MySQL client programs:
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>, <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>,
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>, <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a>,
        <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a>, <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a>,
        and <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a>. This is for use on a computer
        having multiple network interfaces, and enables you to choose
        which interface is used to connect to the MySQL server.
      </p><p>
        A corresponding change was made to the
        <code class="literal">mysql_options()</code> C API function,
        which now has a <code class="literal">MYSQL_OPT_BIND</code> option for
        specifying the interface. The argument is a host name or IP
        address (specified as a string).
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Security Fix</strong></span>: 
        A failed <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
        for an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table could allocate
        memory that was never freed.
       (Bug #56947)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #58005 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #57687 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #57659 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #57477 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #57272 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #57130 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #56814 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #55146 and Bug #56287 were fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #54484 was fixed.</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Improved concurrency when several <a href="sql-syntax.html#analyze-table" title="12.7.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE
        TABLE</code></a> or <a href="sql-syntax.html#show-table-status" title="12.7.5.37. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE
        STATUS</code></a> statements are run simultaneously for
        <code class="literal">InnoDB</code> tables.
       (Bug #53046)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Previously, tables in the <code class="literal">performance_schema</code>
        database had uppercase names. This was incompatible with the
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> system
        variable, and caused issues when the variable value was changed
        <span class="emphasis"><em>after</em></span> installing or upgrading.
      </p><p>
        Now <code class="literal">performance_schema</code> table names are
        lowercase, so they appear in uniform lettercase regardless of
        the <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        setting. References to these tables in SQL statements should be
        given in lowercase. This is an incompatible change, but provides
        compatible behavior across different values of
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>.
      </p><p>
        If you upgrade to MySQL 5.5.8 from an earlier version of MySQL
        5.5, be sure to run <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> (and
        restart the server) to change the names of existing
        <code class="literal">performance_schema</code> tables from uppercase to
        lowercase. If <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> does not work,
        use this procedure:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Stop <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
          </p></li><li><p>
            Remove the <code class="filename">performance_schema/*.frm</code>
            files from the data directory.
          </p></li><li><p>
            Create a separate “<span class="quote">dummy</span>” MySQL 5.5.8
            installation.
          </p></li><li><p>
            Copy the <code class="filename">performance_schema/*.frm</code> files
            from the dummy installation to the installation you are
            upgrading.
          </p></li><li><p>
            Restart <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> and run
            <span><strong class="command">mysqld_upgrade --force</strong></span> and check that it
            does not produce errors.
          </p></li><li><p>
            Remove the dummy installation.
          </p></li></ol></div><p>(Bug #57609)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The following changes were made to the
        <a href="performance-schema.html#threads-table" title="20.7.5.2. The threads Table"><code class="literal">performance_schema.threads</code></a> table
        for conformance with the implementation in MySQL 5.6:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">ID</code> column: Renamed to
            <code class="literal">PROCESSLIST_ID</code>, removed <code class="literal">NOT
            NULL</code> from definition.
          </p></li><li><p>
            <code class="literal">NAME</code> column: Changed from
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR(64)</code></a> to
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR(128)</code></a>.
          </p></li></ul></div><p>(Bug #57154)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Starvation of <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLES WITH READ LOCK</code></a> statements occurred when there
        was a constant load of concurrent DML statements in two or more
        connections. Deadlock occurred when a connection that had some
        table open through a <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a>
        statement tried to update data through a DML statement while
        another connection tried to execute
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a> concurrently.
      </p><p>
        These problems resulted from the global read lock
        implementation, which was reimplemented with the following
        consequences:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            To solve deadlock in event-handling code that was exposed by
            this patch, the <code class="literal">LOCK_event_metadata</code> mutex
            was replaced with metadata locks on events. As a result, DDL
            operations on events are now prohibited under
            <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>. This is an
            incompatible change.
          </p></li><li><p>
            The global read lock
            (<a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a>) no longer blocks DML and DDL on
            temporary tables. Before this patch, server behavior was not
            consistent in this respect: In some cases, DML/DDL
            statements on temporary tables were blocked; in others, they
            were not. Since the main use cases for
            <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a> are various forms of backups and
            temporary tables are not preserved during backups, the
            server now consistently permits DML/DDL on temporary tables
            under the global read lock.
          </p></li><li><p>
            The set of thread states has changed:
          </p><div class="itemizedlist"><ul type="square"><li><p>
                <code class="literal">Waiting for global metadata lock</code> is
                replaced by <code class="literal">Waiting for global read
                lock</code>.
              </p></li><li><p>
                Previously, <code class="literal">Waiting for release of
                readlock</code> was used to indicate that DML/DDL
                statements were waiting for release of a read lock and
                <code class="literal">Waiting to get readlock</code> was used to
                indicate that
                <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
                READ LOCK</code></a> was waiting to acquire a global read
                lock. Now <code class="literal">Waiting for global read
                lock</code> is used for both cases.
              </p></li><li><p>
                Previously, <code class="literal">Waiting for release of
                readlock</code> was used for all statements that
                caused an explicit or implicit commit to indicate that
                they were waiting for release of a read lock and
                <code class="literal">Waiting for all running commits to
                finish</code> was used by
                <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
                READ LOCK</code></a>. Now <code class="literal">Waiting for commit
                lock</code> is used for both cases.
              </p></li><li><p>
                There are two other new states, <code class="literal">Waiting for
                trigger metadata lock</code> and <code class="literal">Waiting for
                event metadata lock</code>.
              </p></li></ul></div></li></ul></div><p>(Bug #57006, Bug #11764195, Bug #54673, Bug #11762116)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Values could be truncated in certain
        <code class="literal">INFORMATION_SCHEMA</code> columns, such as
        <code class="literal">REFERENTIAL_CONSTRAINTS.REFERENCED_TABLE_NAME</code>
        and <code class="literal">KEY_COLUMN_USAGE.REFERENCED_TABLE_NAME</code>.
       (Bug #57960)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        For an <code class="literal">InnoDB</code> table created with
        <code class="literal">ROW_FORMAT=COMPRESSED</code> or
        <code class="literal">ROW_FORMAT=DYNAMIC</code>, a query using the
        <code class="literal">READ UNCOMMITTED</code> isolation level could cause
        the server to stop with an assertion error, if
        <code class="literal">BLOB</code> or other large columns that use off-page
        storage were being inserted at the same time.
       (Bug #57799)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could stop with an assertion error on Windows Vista
        and Windows 7 systems.
       (Bug #57720)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A followup fix to bug #54678. <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
        TABLE</code></a> could still cause a crash (assertion error) in
        the debug version of the server.
       (Bug #57700)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        If the MySQL Server crashed immediately after creating an
        <code class="literal">InnoDB</code> table, the server could quit with a
        <code class="literal">signal 11</code> during the subsequent restart. The
        issue could occur if the server halted after
        <code class="literal">InnoDB</code> created the primary index for the
        table, but before the index definition was recorded in the MySQL
        metadata.
       (Bug #57616)</p><p>References: This bug is a regression of Bug #54582.</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <code class="literal">InnoDB</code> system tablespace could grow
        continually for a server under heavy load.
       (Bug #57611)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Heavy concurrent updates of a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> column in an
        <code class="literal">InnoDB</code> table could cause a hang.
       (Bug #57579)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Turning off the
        <a href="storage-engines.html#sysvar_innodb_stats_on_metadata"><code class="literal">innodb_stats_on_metadata</code></a> option
        could prevent the <a href="sql-syntax.html#analyze-table" title="12.7.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>
        statement from updating the cardinality statistics of
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables.
       (Bug #57252)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A query for an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table could
        return the wrong value if a column value was changed to a
        different case, and the column had a case-insensitive index.
       (Bug #56680)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An existing <code class="literal">InnoDB</code> table could be switched to
        <code class="literal">ROW_FORMAT=COMPRESSED</code> implicitly by a
        <code class="literal">KEY_BLOCK_SIZE</code> clause in an
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement. Now, the
        row format is only switched to compressed if there is an
        explicit <code class="literal">ROW_FORMAT=COMPRESSED</code> clause. on the
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement.
      </p><p>
        Any valid, nondefault <code class="literal">ROW_FORMAT</code> parameter
        takes precedence over <code class="literal">KEY_BLOCK_SIZE</code> when
        both are specified. <code class="literal">KEY_BLOCK_SIZE</code> only
        enables <code class="literal">ROW_FORMAT=COMPRESSED</code> if
        <code class="literal">ROW_FORMAT</code> is not specified on either the
        <code class="literal">CREATE TABLE</code> or <code class="literal">ALTER
        TABLE</code> statement, or is specified as
        <code class="literal">DEFAULT</code>. In case of a conflict between
        <code class="literal">KEY_BLOCK_SIZE</code> and
        <code class="literal">ROW_FORMAT</code> clauses, the
        <code class="literal">KEY_BLOCK_SIZE</code> is ignored if
        <code class="literal">innodb_strict_mode</code> is off, and the statement
        causes an error if <code class="literal">innodb_strict_mode</code> is on.
       (Bug #56632)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The clause <code class="literal">KEY_BLOCK_SIZE=0</code> is now permitted
        on <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements for
        <code class="literal">InnoDB</code> tables, regardless of the setting of
        <a href="storage-engines.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a>. The zero
        value has the effect of resetting the
        <code class="literal">KEY_BLOCK_SIZE</code> table parameter to its default
        value, depending on the <code class="literal">ROW_FORMAT</code> parameter,
        as if it had not been specified. That default is 8 if
        <code class="literal">ROW_FORMAT=COMPRESSED</code>. Otherwise,
        <code class="literal">KEY_BLOCK_SIZE</code> is not used or stored with the
        table parameters.
      </p><p>
        As a consequence of this fix,
        <code class="literal">ROW_FORMAT=FIXED</code> is not permitted when
        <a href="storage-engines.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a> is enabled.
       (Bug #56628)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A large number of foreign key declarations could cause the
        output of the <code class="literal">SHOW CREATE STATEMENT</code> statement
        to be truncated.
       (Bug #56143)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Clarified the message when a <code class="literal">CREATE TABLE</code>
        statement fails because a foreign key constraint does not have
        the required indexes.
       (Bug #16290)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        In-place <code class="literal">ALTER TABLE</code> operations (that do not
        involve a table copy) on a partitioned table could leave the
        table in an unusable state.
       (Bug #57985)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        In debug builds, an
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ... ON DUPLICATE
        KEY UPDATE <em class="replaceable"><code>col_name</code></em> = 0</code></a>
        statement on an <code class="literal">AUTO_INCREMENT</code> column caused
        the server to crash.
       (Bug #57890)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Issuing <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE
        ... ADD PRIMARY KEY</code></a> on a partitioned
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table could cause the MySQL
        Server to crash.
       (Bug #57778)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Concurrent statements using a stored function and a
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> statement that
        caused the same stored function to be dropped could cause
        statement-based replication to fail. This problem is resolved by
        making sure that <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a>
        takes an exclusive metadata lock on all stored functions and
        stored procedures that it causes to be dropped.
       (Bug #57663)</p><p>References: See also Bug #30977.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> is issued, the
        slave SQL thread rolls back the current transaction and stops
        immediately if the transaction updates only tables which use
        transactional storage engines. Previously, this occurred even
        when the transaction contained
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TEMPORARY
        TABLE</code></a> statements,
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TEMPORARY
        TABLE</code></a> statements, or both, although these statements
        cannot be rolled back. Because temporary tables persist for the
        lifetime of a user session (in the case, the replication user),
        they remain until the slave is stopped or reset. When the
        transaction is restarted following a subsequent
        <a href="sql-syntax.html#start-slave" title="12.4.2.5. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement, the SQL
        thread aborts with an error that a temporary table to be created
        (or dropped) already exists (or does not exist, in the latter
        case).
      </p><p>
        Following this fix, if an ongoing transaction contains
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TEMPORARY
        TABLE</code></a> statements,
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TEMPORARY
        TABLE</code></a> statements, or both, the SQL thread now waits
        until the transaction ends, then stops.
       (Bug #56118, Bug #11763416)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If there exist both a temporary table and a nontemporary table
        having the same name, updates normally apply only to the
        temporary table, with the exception of a
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> statement that creates a nontemporary
        table having the same name as an existing temporary table. When
        such a statement was replicated using the
        <code class="literal">MIXED</code> logging format, and the statement was
        unsafe for row-based logging, updates were misapplied to the
        temporary table.
      </p><p>
        Updates were also applied wrongly when a temporary table that
        used a transactional storage engine was dropped inside a
        transaction, followed by updates within the same transaction to
        a nontemporary table having the same name.
       (Bug #55478)</p><p>References: See also Bug #47899, Bug #55709.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When making changes to relay log settings using
        <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>, the I/O cache
        was not cleared. This could result in replication failure when
        the slave attempted to read stale data from the cache and then
        stopped with an assertion.
       (Bug #55263)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Replication of <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> and
        <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns represented using
        more than 1 byte (that is, <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a>
        columns with more than 8 members and
        <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns with more than 256
        constants) between platforms using different endianness failed
        when using the row-based format. This was because columns of
        these types are represented internally using integers, but the
        internal functions used by MySQL to handle them treated them as
        strings.
       (Bug #52131)</p><p>References: See also Bug #53528.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Trying to read from a binary log containing a log event of an
        invalid type caused the slave to crash.
       (Bug #38718)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When replicating the <code class="literal">mysql.tables_priv</code> table,
        the <code class="literal">Grantor</code> column was not replicated, and
        was thus left empty on the slave.
       (Bug #27606)</p></li><li><p>
        Setting the <a href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a> system
        variable at server startup did not work.
       (Bug #58669)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> failed after an upgrade from
        MySQL 5.1.
       (Bug #58514)</p></li><li><p>
        When configuring the build with
        <code class="literal">-DBUILD_CONFIG=mysql_release</code> and building
        with Visual Studio Express, the build failed if
        <span><strong class="command">signtool.exe</strong></span> was not present.
       (Bug #58313)</p></li><li><p>
        With <span><strong class="command">CMake</strong></span> 2.8.3, the
        <a href="installing.html#option_cmake_build_config"><code class="option">-DBUILD_CONFIG=mysql_release</code></a>
        option did not work.
       (Bug #58272)</p></li><li><p>
        When configuring the build with
        <code class="literal">-DBUILD_CONFIG=mysql_release</code> on Linux,
        <code class="literal">libaio</code> is required, but the error message if
        it was missing was uninformative.
       (Bug #58227)</p></li><li><p>
        Use of <a href="functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a> in a
        <code class="literal">HAVING</code> clause caused a server crash.
       (Bug #58199)</p></li><li><p>
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> did not use indexes for
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> columns.
       (Bug #58190)</p></li><li><p>
        Memory was allocated in <code class="literal">fn_expand()</code> for
        storing path names, but not freed anywhere.
       (Bug #58173)</p></li><li><p>
        In debug builds, inserting a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> value into a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR(0)</code></a> column could cause a
        server crash.
       (Bug #58137)</p></li><li><p>
        Failure to create a thread to handle a user connection could
        cause a server crash.
       (Bug #58080)</p></li><li><p>
        During configuration, <code class="literal">ADD_VERSION_INFO</code> in
        <code class="filename">cmake/mysql_version.cmake</code> failed if
        <code class="literal">LINK_FLAGS</code> was modified.
       (Bug #58074)</p></li><li><p>
        The Performance Schema did not count I/O for the binary log
        file.
       (Bug #58052)</p></li><li><p>
        Several compilation problems were fixed.
       (Bug #57992, Bug #57993, Bug #57994, Bug #57995, Bug #57996, Bug #57997, Bug #58057)</p></li><li><p>
        After creation of a table with two foreign key constraints, the
        <a href="information-schema.html#referential-constraints-table" title="19.17. The INFORMATION_SCHEMA REFERENTIAL_CONSTRAINTS Table"><code class="literal">INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS</code></a>
        table displayed only one of them.
       (Bug #57904)</p></li><li><p>
        Incorrect error handling raised an assertion if character set
        conversion wrapped an item that failed.
       (Bug #57882)</p></li><li><p>
        In debug builds, a missing <code class="literal">DBUG_RETURN</code> macro
        in <code class="filename">sql/client.c</code> caused
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> to be unable to connect to the server.
       (Bug #57744)</p></li><li><p>
        Clients using a client library older than MySQL 5.5.7 suffered
        loss of connection after executing
        <a href="connectors-apis.html#mysql-change-user" title="21.9.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> while
        connected to a 5.5.7 server.
       (Bug #57689)</p></li><li><p>
        The <code class="literal">MySQL-shared</code> RPM package failed to
        provide the lowercase virtual identifier
        <code class="literal">'mysql-shared'</code> in the RPM
        <code class="literal">'Provides'</code> tags (usually used for backward
        compatibility).
       (Bug #57596)</p></li><li><p>
        <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> displayed
        non-ASCII characters improperly.
       (Bug #57306)</p></li><li><p>
        Passing a string that was not null-terminated to
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> or
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> caused the server
        to fail with an assertion.
       (Bug #57279, Bug #11764447)</p></li><li><p>
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET GLOBAL
        debug</code></a> could cause a crash on Solaris if the server
        failed to open the trace file.
       (Bug #57274)</p></li><li><p>
        In debug builds, an assertion could be raised during conversion
        of strings to floating-point values.
       (Bug #57203)</p></li><li><p>
        If the <em class="replaceable"><code>file_name</code></em> argument to the
        <code class="option">--defaults-file</code> or
        <code class="option">--defaults-extra-file</code> option was not a full
        path name, it could be interpreted incorrectly in some contexts
        and cause a server crash. Now the
        <em class="replaceable"><code>file_name</code></em> argument is interpreted as
        relative to the current working directory if given as a relative
        path name rather than as a full path name.
       (Bug #57108)</p></li><li><p>
        A user with no privileges on a stored routine or the
        <code class="literal">mysql.proc</code> table could discover the routine's
        existence.
       (Bug #57061)</p></li><li><p>
        Queries executed using the Index Merge access method and a
        temporary file could return incorrect results.
       (Bug #56862)</p></li><li><p>
        The server could crash inside <code class="literal">memcpy()</code> when
        reading certain Performance Schema tables.
       (Bug #56761, Bug #58003)</p></li><li><p>
        The server could crash as a result of accessing freed memory
        when populating
        <a href="information-schema.html#views-table" title="19.28. The INFORMATION_SCHEMA VIEWS Table"><code class="literal">INFORMATION_SCHEMA.VIEWS</code></a> if a view
        could not be opened properly.
       (Bug #56540)</p></li><li><p>
        Valgrind warnings about overlapping memory when double-assigning
        the same variable were corrected.
       (Bug #56138)</p></li><li><p>
        If a <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> statement was
        issued while the slave SQL thread was executing a statement that
        invoked the <a href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a> function,
        both statements hung.
       (Bug #56096)</p></li><li><p>
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> for
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables could raise an
        assertion.
       (Bug #55930)</p></li><li><p>
        Warnings raised by a trigger were not cleared upon successful
        completion. Now warnings are cleared if the trigger completes
        successfully, per the SQL standard.
       (Bug #55850)</p></li><li><p>
        For <span><strong class="command">CMake</strong></span> builds, some parts of the source
        were unnecessarily compiled twice if the embedded server was
        built.
       (Bug #55647)</p></li><li><p>
        In debug builds, an assertion could be raised if a
        <code class="literal">send_eof()</code> method was called after an error
        occurred.
       (Bug #54812)</p></li><li><p>
        Boolean command options caused an error if given with an option
        value and the <code class="literal">loose-</code> option prefix.
       (Bug #54569)</p></li><li><p>
        An error in a stored procedure could leave the session in a
        different default database.
       (Bug #54375)</p></li><li><p>
        The <code class="literal">CMake</code> “<span class="quote">wrapper</span>” for
        <span><strong class="command">configure</strong></span> (<span><strong class="command">configure.pl</strong></span>)
        did not handle the <code class="option">--with-comment</code> option
        properly.
       (Bug #52275)</p></li><li><p>
        Grouping by a <a href="functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC()</code></a>
        function result could cause a server crash or incorrect results.
        Grouping by a function returning a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> could cause an unexpected
        “<span class="quote">Duplicate entry</span>” error and incorrect result.
       (Bug #52160)</p></li><li><p>
        The <code class="literal">find_files()</code> function used by
        <a href="sql-syntax.html#show" title="12.7.5. SHOW Syntax"><code class="literal">SHOW</code></a> statements performed
        redundant and unnecessary memory allocation.
       (Bug #51208)</p></li><li><p>
        The Windows sample option files contained values more
        appropriate for Linux.
       (Bug #50021)</p></li><li><p>
        A failed <a href="sql-syntax.html#rename-table" title="12.1.32. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a> operation
        could prevent a <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLES WITH READ LOCK</code></a> from completing.
       (Bug #47924)</p></li><li><p>
        Error messages for several delegate-related initialization error
        conditions that should not occur were changed to help identify
        the area of failure and to instruct the user to file a bug
        report if they do occur. A delegate is a set of internal data
        structures and algorithms.
       (Bug #47027)</p></li><li><p>
        On file systems with case insensitive file names, and
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names=2</code></a>, the
        server could crash due to a table definition cache
        inconsistency.
       (Bug #46941)</p></li><li><p>
        Handling of host name lettercase in
        <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statements was
        inconsistent.
       (Bug #36742)</p></li><li><p>
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET NAMES utf8
        COLLATE utf8_sinhala_ci</code></a> did not work.
       (Bug #26474)</p></li><li><p>
        The <code class="literal">utf16_bin</code> collation uses code-point
        order, not byte-by-byte order, as described at
        <a href="globalization.html#charset-unicode-sets" title="9.1.14.1. Unicode Character Sets">Section 9.1.14.1, “Unicode Character Sets”</a>. (The order was
        byte-by-byte in MySQL 5.5.7.)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-7"></a>D.1.16. Changes in MySQL 5.5.7 (14 October 2010)</h3></div></div></div><p><span class="bold"><strong>Configuration Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL releases now are built using <span><strong class="command">CMake</strong></span>
        rather than the GNU autotools. Accordingly, the instructions for
        installing MySQL from source have been updated to discuss how to
        build MySQL using <span><strong class="command">CMake</strong></span>. See
        <a href="installing.html#source-installation" title="2.9. Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a>. If you are familiar with
        autotools but not <span><strong class="command">CMake</strong></span>, you might find this
        transition document helpful:
        <a href="http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide" target="_top">http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide</a>
      </p><p>
        The build process is now similar enough on all platforms,
        including Windows, that there are no longer sections dedicated
        to notes for specific platforms.
      </p><p>
        The default installation layout when compiling from source now
        matches that used for binary distributions. You will notice
        these differences for installations from source distributions:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is installed in
            <code class="filename">bin</code>, not <code class="filename">libexec</code>.
          </p></li><li><p>
            <a href="programs.html#mysql-install-db" title="4.4.3. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> is installed in
            <code class="filename">scripts</code>, not <code class="filename">bin</code>.
          </p></li><li><p>
            The data directory is <code class="filename">data</code>, not
            <code class="filename">var</code>.
          </p></li></ul></div><p>
        The <span><strong class="command">make_binary_distribution</strong></span> and
        <code class="literal">make_win_bin_dist</code> scripts are now obsolete.
        To create a binary distribution, use <span><strong class="command">make
        package</strong></span>.
      </p></li></ul></div><p><span class="bold"><strong>Authentication Changes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL now supports pluggable authentication, such that the
        server uses plugins to authenticate incoming client connections.
        Client programs load an authentication plugin that interacts
        properly with the corresponding server plugin.
      </p><p>
        Pluggable authentication enables two important capabilities,
        external authentication and proxy users:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Pluggable authentication makes it possible for clients to
            connect to the MySQL server with credentials that are
            appropriate for authentication methods other than native
            authentication based on passwords stored in the
            <code class="literal">mysql.user</code> table. For example, plugins
            can be created to use external authentication methods such
            as PAM, Windows login IDs, LDAP, or Kerberos.
          </p></li><li><p>
            If a user is permitted to connect, an authentication plugin
            can return to the server a user name different from the name
            of the connecting user, to indicate that the connecting user
            is a proxy for another user. While the connection lasts, the
            proxy user is treated, for purposes of access control, as
            having the privileges of a different user. In effect, one
            user impersonates another.
          </p></li></ul></div><p>
        Pluggable authentication entails these changes:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            For user specifications in the <a href="sql-syntax.html#create-user" title="12.7.1.1. CREATE USER Syntax"><code class="literal">CREATE
            USER</code></a> and <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>
            statements, there is a new <code class="literal">IDENTIFIED
            WITH</code> clause for specifying the authentication
            plugin.
          </p></li><li><p>
            For the <code class="literal">mysql.user</code> table, there are new
            columns that specify plugin information. The
            <code class="literal">plugin</code> column, if nonempty, indicates
            which plugin authenticates connections for an account. The
            <code class="literal">authentication_string</code> column is a string
            that the server passes to the plugin for connections by
            clients that authenticate using the plugin.
          </p></li><li><p>
            For the <a href="connectors-apis.html#mysql-options" title="21.9.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> C
            API function, there are new
            <code class="literal">MYSQL_DEFAULT_AUTH</code> and
            <code class="literal">MYSQL_PLUGIN_DIR</code> options that enable
            client programs to load authentication plugins.
          </p></li><li><p>
            For the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client, there are new
            <a href="programs.html#option_mysql_default-auth"><code class="option">--default-auth</code></a> and
            <a href="programs.html#option_mysql_plugin-dir"><code class="option">--plugin-dir</code></a> options for
            specifying which authentication plugin and plugin directory
            to use. These options will be added to other clients in
            future releases.
          </p></li><li><p>
            For the <span><strong class="command">mysqltest</strong></span> client, there is a new
            <a href="programs.html#option_mysql_plugin-dir"><code class="option">--plugin-dir</code></a> option for
            specifying which plugin directory to use, and a new
            <code class="literal">connect()</code> command argument to specify an
            authentication plugin.
          </p></li><li><p>
            For the server plugin API, there is a new
            <code class="literal">MYSQL_AUTHENTICATION_PLUGIN</code> plugin type.
          </p></li><li><p>
            A new client plugin API enables client programs to manage
            plugins.
          </p></li><li><p>
            The native authentication methods previously supported in
            MySQL have been reimplemented as plugins. These methods
            provide against the current password format and pre-MySQL
            4.1.1 format that uses shorter password hash values. This
            change reimplements the native methods as plugins that
            cannot be unloaded. Existing clients authenticate as before
            with no changes needed. In particular, starting the server
            with the <a href="server-administration.html#option_mysqld_secure-auth"><code class="option">--secure-auth</code></a> option
            still prevents clients that have pre-4.1.1 password hashes
            from conecting, and
            <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> still
            disables all password checking.
          </p></li></ul></div><p>
        Proxy user capability entails these changes:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            There is a new <a href="server-administration.html#priv_proxy"><code class="literal">PROXY</code></a>
            privilege that can be managed with the
            <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
            <a href="sql-syntax.html#revoke" title="12.7.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statements.
          </p></li><li><p>
            The new <a href="server-administration.html#sysvar_proxy_user"><code class="literal">proxy_user</code></a> and
            <a href="server-administration.html#sysvar_external_user"><code class="literal">external_user</code></a> system
            variables indicate whether the current session uses
            proxying.
          </p></li><li><p>
            A new <code class="literal">mysql.proxies_priv</code> grant table
            records proxy information for MySQL accounts.
          </p></li></ul></div><p>
        <a class="indexterm" name="id1740462"></a>
        Due to these changes, the server requires that a new grant
        table, <code class="literal">proxies_priv</code>, be present in the
        <code class="literal">mysql</code> database. If you are upgrading to MySQL
        5.5.7 from a previous MySQL release rather than performing a new
        installation, the server will find that this table is missing
        and exit during startup with the following message:
      </p><pre class="programlisting">Table 'mysql.proxies_priv' doesn't exist</pre><p>
        To create the <code class="literal">proxies_priv</code> table, start the
        server with the
        <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option to
        cause it to skip the normal grant table checks, then run
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>. For example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqld --skip-grant-tables &amp;</code></strong>
shell&gt; <strong class="userinput"><code>mysql_upgrade</code></strong>
</pre><p>
        Then stop the server and restart it normally.
      </p><p>
        You can specify other options on the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
        command line if necessary. Alternatively, if your installation
        is configured so that the server normally reads options from an
        option file, use the
        <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> option to
        specify the file (enter each command on a single line):
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqld --defaults-file=/usr/local/mysql/etc/my.cnf</code></strong>
         <strong class="userinput"><code>--skip-grant-tables &amp;</code></strong>
shell&gt; <strong class="userinput"><code>mysql_upgrade</code></strong>
</pre><p>
        With the <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a>
        option, the server does no password or privilege checking, so
        any client can connect and effectively have all privileges. For
        additional security, use the
        <a href="server-administration.html#option_mysqld_skip-networking"><code class="option">--skip-networking</code></a> option as well
        to prevent remote clients from connecting.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          The upgrade problem just described is fixed in MySQL 5.5.8.
          The server treats a missing <code class="literal">proxies_priv</code>
          table as equivalent to an empty table.
        </p></div><p>
        For additional information, consult these references:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Information about pluggable authentication, including
            installation and usage instructions:
            <a href="server-administration.html#pluggable-authentication" title="5.5.6. Pluggable Authentication">Section 5.5.6, “Pluggable Authentication”</a>.
          </p></li><li><p>
            Information about proxy users:
            <a href="server-administration.html#proxy-users" title="5.5.7. Proxy Users">Section 5.5.7, “Proxy Users”</a>.
          </p></li><li><p>
            Information about the server and client plugin API:
            <a href="extending-mysql.html#writing-plugins" title="22.2.4. Writing Plugins">Section 22.2.4, “Writing Plugins”</a>.
          </p></li><li><p>
            Information about the C API functions for managing client
            plugins: See <a href="connectors-apis.html#c-api-plugin-functions" title="21.9.10. C API Client Plugin Functions">Section 21.9.10, “C API Client Plugin Functions”</a>.
          </p></li><li><p>
            Information about current restrictions on the use of
            pluggable authentication, including which connectors support
            which plugins: See
            <a href="restrictions.html#pluggable-authentication-restrictions" title="E.9. Restrictions on Pluggable Authentication">Section E.9, “Restrictions on Pluggable Authentication”</a>.
            Third-party connector developers should read that section to
            determine the extent to which a connector can take advantage
            of pluggable authentication capabilities and what steps to
            take to become more compliant.
          </p></li></ul></div></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Previously, if you flushed the logs using
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a> or
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin flush-logs</strong></span></a> and
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> was writing the error log to a file
        (for example, if it was started with the
        <a href="server-administration.html#option_mysqld_log-error"><code class="option">--log-error</code></a> option), it renamed
        the current log file with the suffix <code class="literal">-old</code>,
        then created a new empty log file. This had the problem that a
        second log-flushing operation thus caused the original error log
        file to be lost unless you saved it under a different name. For
        example, you could use the following commands to save the file:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin flush-logs</code></strong>
shell&gt; <strong class="userinput"><code>mv <em class="replaceable"><code>host_name</code></em>.err-old <em class="replaceable"><code>backup-directory</code></em></code></strong>
</pre><p>
        To avoid the preceding file-loss problem, renaming no longer
        occurs. The server merely closes and reopens the log file. To
        rename the file, you can do so manually before flushing. Then
        flushing the logs reopens a new file with the original file
        name. For example, you can rename the file and create a new one
        using the following commands:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mv <em class="replaceable"><code>host_name</code></em>.err <em class="replaceable"><code>host_name</code></em>.err-old</code></strong>
shell&gt; <strong class="userinput"><code>mysqladmin flush-logs</code></strong>
shell&gt; <strong class="userinput"><code>mv <em class="replaceable"><code>host_name</code></em>.err-old <em class="replaceable"><code>backup-directory</code></em></code></strong>
</pre><p>(Bug #29751)</p><p>References: See also Bug #56821.</p></li><li><p>
        The unused and undocumented <code class="literal">thread_pool_size</code>
        system variable was removed.
       (Bug #57338)</p></li><li><p>
        The <code class="literal">pstack</code> library was nonfunctional and has
        been removed, along with the <code class="option">--with-pstack</code>
        option for <span><strong class="command">configure</strong></span> and the
        <code class="option">--enable-pstack</code> option for
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
       (Bug #57210)</p></li><li><p>
        Added a new <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>
        state, <code class="literal">Waiting for query cache lock</code>. This
        indicates that a session is waiting to take the query cache lock
        while it performs some query cache operation.
       (Bug #56822)</p></li><li><p>
        A new status variable,
        <a href="server-administration.html#statvar_Handler_read_last"><code class="literal">Handler_read_last</code></a>, displays
        the number of requests to read the last key in an index. With
        <code class="literal">ORDER BY</code>, the server issues a first-key
        request followed by several next-key requests, whereas with
        <code class="literal">ORDER BY DESC</code>, the server issues a last-key
        request followed by several previous-key requests.
       (Bug #52312)</p></li><li><p>
        Previously, the server supported values of
        <code class="literal">OFF</code>, <code class="literal">ON</code>, and
        <code class="literal">FORCE</code> for the
        <code class="option">--<em class="replaceable"><code>plugin_name</code></em>=<em class="replaceable"><code>value</code></em></code>
        option format for controlling plugin loading using an option
        named after the plugin. Such options now support a
        <code class="literal">FORCE_PLUS_PERMANENT</code> value. This value is
        like <code class="literal">FORCE</code>, but in addition prevents the
        plugin from being unloaded at runtime. If a user attempts to do
        so with <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>, an
        error occurs. See <a href="server-administration.html#server-plugin-loading" title="5.1.7.1. Installing and Uninstalling Plugins">Section 5.1.7.1, “Installing and Uninstalling Plugins”</a>.
      </p><p>
        In addition, the
        <a href="information-schema.html#plugins-table" title="19.14. The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
        now has a <code class="literal">LOAD_OPTION</code> column that indicates
        the plugin loading value (<code class="literal">OFF</code>,
        <code class="literal">ON</code>, <code class="literal">FORCE</code>, or
        <code class="literal">FORCE_PLUS_PERMANENT</code>). See
        <a href="information-schema.html#plugins-table" title="19.14. The INFORMATION_SCHEMA PLUGINS Table">Section 19.14, “The <code class="literal">INFORMATION_SCHEMA PLUGINS</code> Table”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Security Fix</strong></span>: 
        Issuing <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> and
        examining the same table's information in the
        <code class="literal">INFORMATION_SCHEMA</code> database at the same time
        could cause a crash in the debug version of the server.
      </p><p>
        As a result of this change, <code class="literal">InnoDB</code> always
        uses the fast truncation technique, equivalent to
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> and
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>. It no longer
        performs a row-by-row delete for tables with parent-child
        foreign key relationships. <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
        TABLE</code></a> returns an error for such tables. Modify your
        SQL to issue <code class="literal">DELETE FROM
        <em class="replaceable"><code>table_name</code></em></code> for such tables
        instead.
       (Bug #54678)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server crashed for assignment of values of types other than
        <code class="literal">Geometry</code> to items of type
        <code class="literal">GeometryCollection</code>
        (<code class="literal">MultiPoint</code>, <code class="literal">MultiCurve</code>,
        <code class="literal">MultiSurface</code>). Now the server checks the
        value type and fails with <code class="literal">bad geometry value</code>
        if it detects incorrect parameters.
       (Bug #55531)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a> function crashed
        the server when the timezone argument was an empty
        <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> column value.
       (Bug #55424)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> caused a server crash with some prepared
        statements.
       (Bug #54494)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        In prepared-statement mode,
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> for a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> from a derived table
        caused a server crash.
       (Bug #54488)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The <a href="functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB()</code></a> function could
        crash the server when improper WKB data was passed to the
        function.
       (Bug #51875, CVE-2010-3840)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The master <code class="literal">InnoDB</code> background thread could
        sometimes cause transient performance drops due to excessive
        flushing of modified pages.
       (Bug #56933)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The behavior of <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
        statements when using statement-based replication has changed as
        follows:
      </p><p>
        Previously, when using
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=STATEMENT</code></a>, a
        warning was issued in the client when executing
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>; now, no warning
        is issued in such cases.
      </p><p>
        Previously, when using
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=STATEMENT</code></a>,
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> was logged as
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>; now, it is logged
        as an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, without the
        <code class="literal">DELAYED</code> option.
      </p><p>
        However, when
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=STATEMENT</code></a>,
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> continues to be
        executed as <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> (without the
        <code class="literal">DELAYED</code> option). The behavior of
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> remains unchanged
        when using <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=ROW</code></a>:
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> generates no
        warnings, is executed as <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
        DELAYED</code></a>, and is logged using the row-based format.
      </p><p>
        This change also affects
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=MIXED</code></a>, because
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> is no longer
        considered unsafe. Now, when the logging format is
        <code class="literal">MIXED</code>, no switch to row-based logging occurs.
        This means that the statement is logged as a simple
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> (that is, without the
        <code class="literal">DELAYED</code> option), using the statement-based
        logging format.
       (Bug #54579, Bug #11762035)</p><p>References: See also Bug #56678, Bug #11763907, Bug #57666. This bug was introduced by Bug #39934, Bug #11749859.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER ...
        READ</code></a> statements that invoke stored functions can cause
        replication errors. Such statements are now disallowed and
        result in an
        <a href="error-handling.html#error_er_not_supported_yet"><code class="literal">ER_NOT_SUPPORTED_YET</code></a> error.
       (Bug #54920)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash with an assertion, possibly leading to
        data corruption, while updating the primary key of an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table containing
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or other columns requiring
        off-page storage. This fix applies to the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> Plugin in MySQL 5.1, and to
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> 1.1 in MySQL 5.5.
       (Bug #55543)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        If the master had
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table=OFF</code></a>,
        <a href="storage-engines.html#sysvar_innodb_file_format"><code class="literal">innodb_file_format=Antelope</code></a>
        (and <a href="storage-engines.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode=OFF</code></a>),
        or both, certain <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
        options, such as <code class="literal">KEY_BLOCK_SIZE</code>, were
        ignored. This could permit the master to avoid raising
        <a href="error-handling.html#error_er_too_big_rowsize"><code class="literal">ER_TOO_BIG_ROWSIZE</code></a> errors.
      </p><p>
        However, the ignored <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
        options were still written into the binary log, so that, if the
        slave had
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table=ON</code></a> and
        <a href="storage-engines.html#sysvar_innodb_file_format"><code class="literal">innodb_file_format=Barracuda</code></a>,
        it could encounter an
        <a href="error-handling.html#error_er_too_big_rowsize"><code class="literal">ER_TOO_BIG_ROWSIZE</code></a> error while
        executing the record from the log, causing the slave SQL thread
        to abort and replication to fail.
      </p><p>
        In the case where the master was running MySQL 5.1 and the slave
        was MySQL 5.5 (or later), the failure occurred when both master
        and slave were running with default values for
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> and
        <a href="storage-engines.html#sysvar_innodb_file_format"><code class="literal">innodb_file_format</code></a>. This could
        cause problems during upgrades.
      </p><p>
        To address this issue, the default values for
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> and
        <a href="storage-engines.html#sysvar_innodb_file_format"><code class="literal">innodb_file_format</code></a> are reverted
        to the MySQL 5.1 default values—that is,
        <code class="literal">OFF</code> and <code class="literal">Antelope</code>,
        respectively.
       (Bug #56318, Bug #11763590)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash with a high volume of concurrent
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> and
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
        TABLES</code></a> statements.
       (Bug #57345)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> incorrectly reported an error when a
        cascading foreign key constraint deleted more than 250 rows.
       (Bug #57255)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        If the server crashed during an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> operation on an <code class="literal">InnoDB</code> table,
        examining the table through <code class="literal">SHOW CREATE TABLE</code>
        or querying the <code class="literal">INFORMATION_SCHEMA</code> tables
        could cause the server to stop with an assertion error.
       (Bug #56982)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The output from the
        <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE INNODB
        STATUS</code></a> command can now be up to 1MB. Formerly, it was
        truncated at 64KB. Monitoring applications that parse that
        output can check whether it exceeds this new, larger limit by
        testing the
        <a href="server-administration.html#statvar_Innodb_truncated_status_writes"><code class="literal">Innodb_truncated_status_writes</code></a>
        status variable.
       (Bug #56922)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        For debug builds, a <code class="literal">SELECT ... FOR UPDATE</code>
        statement affecting a range of rows in an
        <code class="literal">InnoDB</code> table could cause a server crash.
       (Bug #56716)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Improved the performance of <code class="literal">UPDATE</code> operations
        on <code class="literal">InnoDB</code> tables, when only non-indexed
        columns are changed.
       (Bug #56340)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When MySQL was restarted after a crash with the option
        <code class="literal">innodb_force_recovery=6</code>, certain queries
        against <code class="literal">InnoDB</code> tables could fail, depending
        on <code class="literal">WHERE</code> or <code class="literal">ORDER BY</code>
        clauses.
      </p><p>
        Usually in such a disaster recovery situation, you dump the
        entire table using a query without these clauses. During
        advanced troubleshooting, you might use queries with these
        clauses to diagnose the position of the corrupted data, or to
        recover data following the corrupted part.
       (Bug #55832)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <code class="literal">CHECK TABLE</code> command could cause a
        time-consuming verification of the <code class="literal">InnoDB</code>
        adaptive hash index memory structure. Now this extra checking is
        only performed in binaries built for debugging.
       (Bug #55716)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A heavy workload with a large number of threads could cause a
        crash in the debug version of the server.
       (Bug #55699)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash on shutdown, if started with
        <code class="literal">--innodb-use-system-malloc=0</code>.
       (Bug #55627)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        If the server crashed during a <code class="literal">RENAME TABLE</code>
        operation on an <code class="literal">InnoDB</code> table, subsequent
        crash recovery could fail. This problem could also affect an
        <code class="literal">ALTER TABLE</code> statement that caused a rename
        operation internally.
       (Bug #55027)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Setting the <code class="literal">PACK_KEYS=0</code> table option for an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table prevented new indexes
        from being added to the table.
       (Bug #54606)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash when opening an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table linked through foreign
        keys to a long chain of child tables.
       (Bug #54582)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Changed the locking mechanism for the <code class="literal">InnoDB</code>
        data dictionary during <code class="literal">ROLLBACK</code> operations,
        to improve concurrency for <code class="literal">REPLACE</code>
        statements.
       (Bug #54538)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        With multiple buffer pools enabled, <code class="literal">InnoDB</code>
        could flush more data from the buffer pool than necessary,
        causing extra I/O overhead.
       (Bug #54346)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> transactions could be incorrectly
        committed during recovery, rather than rolled back, if the
        server crashed and was restarted after performing <code class="literal">ALTER
        TABLE ... ADD PRIMARY KEY</code> on an
        <code class="literal">InnoDB</code> table, or some other operation that
        involves copying the entire table.
       (Bug #53756)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> startup messages now include the start
        and end times for buffer pool initialization, and the total
        buffer pool size.
       (Bug #48026)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        An
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE</code></a> statement acting on table partitions that failed
        while the affected table was locked could cause the server to
        crash.
       (Bug #56172)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Multiple-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements
        involving a partitioned <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>
        table could cause this table to become corrupted. Not all tables
        affected by the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> needed to
        be partitioned for this issue to be observed.
       (Bug #55458)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        PARTITIONS</code></a> returned bad estimates for range queries on
        partitioned <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables. In
        addition, values in the <code class="literal">rows</code> column of
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        PARTITIONS</code></a> output did not take partition pruning into
        account.
       (Bug #53806, Bug #46754)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#set-password" title="12.7.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> caused failure of
        row-based replication between a MySQL 5.1 master and a MySQL 5.5
        slave.
      </p><p>
        This fix makes it possible to replicate <a href="sql-syntax.html#set-password" title="12.7.1.6. SET PASSWORD Syntax"><code class="literal">SET
        PASSWORD</code></a> correctly, using row-based replication
        between a master running MySQL 5.1.53 or a later MySQL 5.1
        release to a slave running MySQL 5.5.7 or a later MySQL 5.5
        release.
       (Bug #57098)</p><p>References: See also Bug #55452, Bug #57357.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Prepared multiple-row <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
        DELAYED</code></a> statements were written to the binary log
        without <code class="literal">DELAYED</code>.
       (Bug #56678, Bug #11763907)</p><p>References: This bug is a regression of Bug #54579, Bug #11762035.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Backticks used to enclose identifiers for savepoints were not
        preserved in the binary log, which could lead to replication
        failure when the identifier, stripped of backticks, could be
        misinterpreted, causing a syntax or other error.
      </p><p>
        This could cause problems with MySQL application programs making
        use of generated savepoint IDs. If, for instance,
        <code class="literal">java.sql.Connection.setSavepoint()</code> is called
        without any parameters, Connector/J automatically generates a
        savepoint identifier consisting of a string of hexadecimal
        digits <code class="literal">0</code>-<code class="literal">F</code> encased in
        backtick (<code class="literal">`</code>) characters. If such an ID took
        the form
        <code class="literal">`<em class="replaceable"><code>N</code></em>e<em class="replaceable"><code>N</code></em>`</code>
        (where <em class="replaceable"><code>N</code></em> represents a string of the
        decimal digits <code class="literal">0</code>-<code class="literal">9</code>, and
        <code class="literal">e</code> is a literal uppercase or lowercase
        “<span class="quote">E</span>” character). Removing the backticks when writing
        the identifier into the binary log left behind a substring which
        the slave MySQL server tried to interpret as a floating point
        number, rather than as an identifier. The resulting syntax error
        caused loss of replication.
       (Bug #55961)</p><p>References: See also Bug #55962.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a slave tried to execute a transaction larger than the
        slave's value for
        <a href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a>, it
        crashed. This was caused by an assertion that the server should
        roll back only the statement but not the entire transaction when
        the error <a href="error-handling.html#error_er_trans_cache_full"><code class="literal">ER_TRANS_CACHE_FULL</code></a>
        occurred. However, the slave SQL thread always rolled back the
        entire transaction whenever any error occurred, regardless of
        the type of error.
       (Bug #55375)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The error message for
        <a href="error-handling.html#error_er_slave_heartbeat_value_out_of_range"><code class="literal">ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE</code></a>
        was hard coded in English in <code class="filename">sql_yacc.yy</code>,
        so that it could not be translated in
        <code class="filename">errmsg.txt</code> for other languages.
      </p><p>
        Additionally, this same error message was used for three
        separate error conditions:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            When the heartbeat period exceeded the value of
            <a href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a>.
          </p></li><li><p>
            When the heartbeat period was nonnegative but shorter than 1
            millisecond.
          </p></li><li><p>
            When the value for the heartbeat period was either negative
            or greater than the maximum permitted.
          </p></li></ul></div><p>
        These issues have been addressed as follows:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            By using three distinct error messages for each of the
            conditions listed previously.
          </p></li><li><p>
            By moving the sources for these error messages into the
            <code class="filename">errmsg-utf8.txt</code> file to facilitate
            translations into languages other than English.
          </p></li></ul></div><p>(Bug #54144)</p></li><li><p>
        A buffer overrun could occur when formatting
        <code class="literal">DBL_MAX</code> numbers.
       (Bug #57209)</p></li><li><p>
        <a href="functions.html#function_coalesce"><code class="literal">COALESCE()</code></a> in MySQL 5.5 could
        return a result different from MySQL 5.1 for some arguments.
       (Bug #57095)</p></li><li><p>
        Constant <a href="functions.html#function_subtime"><code class="literal">SUBTIME()</code></a> expressions
        could return incorrect results.
       (Bug #57039)</p></li><li><p>
        When <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> was started as a service on
        Windows and <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> was writing the error log
        to a file (for example, if it was started with the
        <a href="server-administration.html#option_mysqld_log-error"><code class="option">--log-error</code></a> option), the server
        reassigned the file descriptors of the <code class="literal">stdout</code>
        and <code class="literal">stderr</code> streams to the file descriptor of
        the log file. On Windows, if <code class="literal">stdout</code> or
        <code class="literal">stderr</code> is not associated with an output
        stream, the file descriptor returns a negative value.
        Previously, this caused the file descriptor reassignment to fail
        and the server to abort. To avoid this problem on Windows, the
        server now first assigns the <code class="literal">stdout</code> and
        <code class="literal">stderr</code> streams to the log file stream by
        opening this file. This causes the <code class="literal">stdout</code> and
        <code class="literal">stderr</code> file descriptors to be nonzero and the
        server can successfully reassign them to the file descriptor of
        the log file.
       (Bug #56821)</p><p>References: This bug is a regression of Bug #29751.</p></li><li><p>
        The server could crash inside <code class="literal">memcpy()</code> when
        reading certain Performance Schema tables.
       (Bug #56761, Bug #58003)</p></li><li><p>
        Deadlock could occur for heavily concurrent workloads consisting
        of a mix of DML, DDL, and
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a>
        statements affecting the same set of tables.
       (Bug #56715, Bug #56404, Bug #56405)</p></li><li><p>
        Memory leaks detected by Valgrind were corrected.
       (Bug #56709)</p></li><li><p>
        On Mac OS X, <a href="sql-syntax.html#rename-table" title="12.1.32. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a> raised
        an assertion if the
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> system
        variable was 2 and the old table name was specified in
        uppercase.
       (Bug #56595)</p></li><li><p>
        Performance for certain read-only queries, in particular
        <code class="literal">point_select</code>, had deteriorated compared to
        previous versions.
       (Bug #56585)</p></li><li><p>
        It was possible to compile <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with
        Performance Schema support but with a dummy atomic-operations
        implementation, which caused a server crash. This problem does
        not affect binary distributions. It is helpful as a safety
        measure for users who build MySQL from source.
       (Bug #56521)</p></li><li><p>
        Executing <a href="sql-syntax.html#xa" title="12.3.7. XA Transactions"><code class="literal">XA END</code></a>
        after an XA transaction was already ended raised an assertion.
       (Bug #56448)</p></li><li><p>
        A <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement could produce
        a number of rows different from a
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> that was supposed to select the same
        rows.
       (Bug #56423)</p><p>References: This bug is a regression of Bug #38999.</p></li><li><p>
        The server crashed if a table maintenance statement such as
        <a href="sql-syntax.html#analyze-table" title="12.7.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a> or
        <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> was executed on a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table and opening and locking
        a child table failed. For example, this could happen if a child
        table did not exist or if a lock timeout happened while waiting
        for a conflicting metadata lock to disappear.
      </p><p>
        As a consequence of this bug fix, it is now possible to use
        <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> for log tables
        without producing an error.
       (Bug #56422, Bug #56494)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table could result in
        deadlock with other connections.
       (Bug #56292, Bug #57002)</p></li><li><p>
        Comparison of one <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a>
        result with another could return incorrect results.
       (Bug #56271)</p></li><li><p>
        The <code class="literal">tcmalloc</code> library was missing from binary
        MySQL packages for Linux.
       (Bug #56267)</p></li><li><p>
        An <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statement for a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table could cause deadlock if
        it occurred as part of a transaction or under
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, and there was a
        concurrent DDL or
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        WRITE</code></a> statement that tried to lock one of its
        underlying tables.
       (Bug #56251)</p></li><li><p>
        In debug builds, the server raised an assertion for
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> in installations
        that had an outdated or corrupted <code class="literal">mysql.proc</code>
        table. For example, this affected
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> when run as part of a MySQL 5.1
        to 5.5 upgrade.
       (Bug #56137)</p></li><li><p>
        A negative <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> argument to
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> could raise an assertion.
       (Bug #56120)</p></li><li><p>
        The ordering for supplementary characters in the
        <code class="literal">utf8mb4_bin</code>, <code class="literal">utf16_bin</code>,
        and <code class="literal">utf32_bin</code> collations was incorrect.
       (Bug #55980)</p></li><li><p>
        On Solaris with <span><strong class="command">gcc</strong></span> 3.4.6,
        <code class="literal">ha_example.so</code> was built with DTrace support
        even if the server was not, causing plugin loading problems.
       (Bug #55966)</p></li><li><p>
        Short (single-letter) command-line options did not work.
       (Bug #55873)</p></li><li><p>
        If a query specified a <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> value in a format
        different from <code class="literal">'YYYY-MM-DD HH:MM:SS'</code>, a
        greater-than-or-equal (<code class="literal">&gt;=</code>) condition
        matched only greater-than values in an indexed
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column.
       (Bug #55779, Bug #50774, Bug #11758558)</p></li><li><p>
        If a view was named as the destination table for <code class="literal">CREATE
        TABLE ... SELECT</code>, the server produced a warning
        whether or not <code class="literal">IF NOT EXISTS</code> was used. Now it
        produces a warning only when <code class="literal">IF NOT EXISTS</code> is
        used, and an error otherwise.
       (Bug #55777)</p></li><li><p>
        <a href="functions.html#operator_case"><code class="literal">CASE</code></a> expressions with a mix of
        operands in different character sets sometimes returned
        incorrect results.
       (Bug #55744)</p></li><li><p>
        After the fix for Bug #39653, the shortest available secondary
        index was used for full table scans. The primary clustered key
        was used only if no secondary index could be used. However, when
        the chosen secondary index includes all columns of the table
        being scanned, it is better to use the primary index because the
        amount of data to scan is the same but the primary index is
        clustered. This is now taken into account.
       (Bug #55656)</p></li><li><p>
        The server entered an infinite loop with high CPU utilization
        after an error occurred during flushing of the I/O cache.
       (Bug #55629)</p></li><li><p>
        For the Performance Schema, the default number of rwlock classes
        was increased to 30, and the default number of rwlock and mutex
        instances was increased to 1 million. These changes were made to
        account for the volume of data instrumented when the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage engine is used
        (because of the <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> buffer
        pool).
       (Bug #55576)</p></li><li><p>
        If there was an active <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
        statement, an error arising during trigger execution could cause
        a server crash.
       (Bug #55421)</p></li><li><p>
        Assignment of <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> scalar
        subquery results to a variable resulted in unexpected
        <code class="literal">S</code> locks in <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ
        COMMITTED</code></a> transation isolation level.
       (Bug #55382)</p></li><li><p>
        In debug builds, <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLE <em class="replaceable"><code>table_list</code></em> WITH READ
        LOCK</code></a> for a <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table
        led to an assertion failure if one of the table's children was
        not present in the list of tables to be flushed.
       (Bug #55273)</p></li><li><p>
        The server could crash during shutdown due to a race condition
        relating to Performance Schema cleanup.
       (Bug #55105, Bug #56324)</p></li><li><p>
        Queries involving predicates of the form
        <code class="literal"><em class="replaceable"><code>const</code></em> NOT BETWEEN
        <em class="replaceable"><code>not_indexed_column</code></em> AND
        <em class="replaceable"><code>indexed_column</code></em></code> could return
        incorrect data due to incorrect handling by the range optimizer.
       (Bug #54802)</p></li><li><p>
        With an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE
        IGNORE</code></a> statement including a subquery that was
        evaluated using a temporary table, an error transferring the
        data from the temporary was ignored, causing an assertion to be
        raised.
       (Bug #54543)</p></li><li><p>
        A bad <code class="literal">DBUG_PRINT</code> statement in
        <code class="literal">fill_schema_schemata()</code> caused server crashes
        on Solaris.
       (Bug #54478)</p></li><li><p>
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> with a subquery argument
        could raise a debug assertion for debug builds or return
        incorrect data for nondebug builds.
       (Bug #54465)</p></li><li><p>
        If one session attempted to drop a database containing a table
        which another session had opened with
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a>, any instance of
        <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER DATABASE</code></a>,
        <a href="sql-syntax.html#create-database" title="12.1.10. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a>, or
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> issued by the
        latter session produced a deadlock.
       (Bug #54360)</p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA</code> plugins with no
        <code class="literal">deinit()</code> method resulted in a memory leak.
       (Bug #54253)</p></li><li><p>
        Row subqueries producing no rows were not handled as
        <code class="literal">UNKNOWN</code> values in row-comparison expressions.
       (Bug #54190)</p></li><li><p>
        Setting <code class="literal">SETUP_INSTRUMENTS.TIMER = 'NO'</code> caused
        <code class="literal">TIMER_WAIT</code> values for aggregations to be
        <code class="literal">NULL</code> rather than 0.
       (Bug #53874)</p></li><li><p>
        The <code class="literal">max_length</code> metadata value of
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">MEDIUMBLOB</code></a> types was reported as
        1 byte greater than the correct value.
       (Bug #53296)</p></li><li><p>
        If an application using the embedded server called
        <a href="connectors-apis.html#mysql-library-init" title="21.9.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> a second
        time after calling
        <a href="connectors-apis.html#mysql-library-init" title="21.9.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> and
        <a href="connectors-apis.html#mysql-library-end" title="21.9.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> to start and
        stop the server, the application crashed when reading option
        files.
       (Bug #53251)</p></li><li><p>
        The fix for Bug #30234 caused the server to reject the
        <code class="literal">DELETE <em class="replaceable"><code>tbl_name</code></em>.*
        ...</code> Access compatibility syntax for multiple-table
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements.
       (Bug #53034)</p></li><li><p>
        The <code class="filename">plugin_ftparser.h</code> and
        <code class="filename">plugin_audit.h</code> include files are part of
        the public API/ABI, but were not tested by the ABI check.
       (Bug #52821)</p></li><li><p>
        An atomic “<span class="quote">compare and swap</span>” operation using x86
        assembly code (32 bit) could access incorrect data, which would
        make it work incorrectly and lose the intended atomicity. This
        in turn caused the MySQL server to work on inconsistent data
        structures and return incorrect data. That code affected only
        32-bit builds; the effect has been observed when
        <span><strong class="command">icc</strong></span> was used to build binaries. With
        <span><strong class="command">gcc</strong></span>, no incorrect results have been observed
        during tests, so this fix is a proactive one. Other compilers do
        not use this assembly code.
       (Bug #52419)</p></li><li><p>
        In <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a>, using a <code class="literal">SET</code> clause to set a
        column equal to itself caused a server crash.
       (Bug #51850)</p></li><li><p>
        An assertion could be raised by
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> on a view that referenced
        another view which in turn (directly or indirectly) referenced
        more than one table.
       (Bug #51099)</p></li><li><p>
        In some cases, when the left part of a <code class="literal">NOT IN</code>
        subquery predicate was a row and contained
        <code class="literal">NULL</code> values, the query result was incorrect.
       (Bug #51070)</p></li><li><p>
        <a href="sql-syntax.html#checksum-table" title="12.7.2.3. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM TABLE</code></a> for Performance
        Schema tables could cause a server crash due to uninitialized
        memory reads.
       (Bug #50557)</p></li><li><p>
        For some queries, the optimizer produced incorrect results using
        the Index Merge access method with
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables.
       (Bug #50402)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> produced an incorrect
        <code class="literal">rows</code> value for queries evaluated using an
        index scan and that included <code class="literal">LIMIT</code>,
        <code class="literal">GROUP BY</code>, and <code class="literal">ORDER BY</code> on
        a computed column.
       (Bug #50394)</p></li><li><p>
        <a href="connectors-apis.html#mysql-store-result" title="21.9.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and
        <a href="connectors-apis.html#mysql-use-result" title="21.9.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> are not for
        use with prepared statements and are not intended to be called
        following <a href="connectors-apis.html#mysql-stmt-execute" title="21.9.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>,
        but failed to return an error when invoked that way.
       (Bug #47485)</p></li><li><p>
        Using <code class="literal">REPAIR TABLE <em class="replaceable"><code>tbl_name</code></em>
        USE_FRM</code> on a <code class="literal">MERGE</code> table caused the
        server to crash.
       (Bug #46339)</p></li><li><p>
        If the global and session <a href="server-administration.html#sysvar_debug"><code class="literal">debug</code></a>
        system variables had the same value, the debug trace file could
        be closed twice, leading to freeing already freed memory and a
        server crash.
       (Bug #46165)</p></li><li><p>
        If <a href="sql-syntax.html#alter-event" title="12.1.2. ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a> failed to load an
        event after altering it, an assertion could be raised. This
        could occur, for example, if <a href="sql-syntax.html#alter-event" title="12.1.2. ALTER EVENT Syntax"><code class="literal">ALTER
        EVENT</code></a> was killed with
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL QUERY</code></a>.
       (Bug #44171)</p></li><li><p>
        Trailing space removal for <code class="literal">utf32</code> strings was
        done with non-multibyte-safe code, leading to incorrect result
        length and assertion failure.
       (Bug #42511)</p></li><li><p>
        A malformed packet sent by the server when the query cache was
        in use resulted in lost-connection errors.
       (Bug #42503)</p></li><li><p>
        Multiple-statement execution could fail.
       (Bug #40877)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> failed if a column
        referred to in an index definition and foreign key definition
        had different lettercases in the two definitions.
       (Bug #39932)</p></li><li><p>
        <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a> behaved differently depending on
        the order in which options were given on the command line.
       (Bug #35269)</p></li><li><p>
        When invoked to display a help message,
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> also displayed spurious warning or
        error messages.
       (Bug #30025)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-6"></a>D.1.17. Changes in MySQL 5.5.6 (13 September 2010, Release Candidate)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <a href="functions.html#function_sha2"><code class="literal">SHA2()</code></a> function now returns a
        character string with the connection character set and
        collation. Previously, it returned a binary string. This is the
        same change made for several other encryption functions in MySQL
        5.5.3.
       (Bug #54661)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The mechanism that checks if there is enough space for redo logs
        was improved, reducing the chance of encountering this message:
        <code class="literal">ERROR: the age of the last checkpoint is
        <em class="replaceable"><code>x</code></em>, which exceeds the log group
        capacity <em class="replaceable"><code>y</code></em></code>.
       (Bug #39168)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Improved performance and scalability on Windows systems,
        especially for Windows Vista and higher. Re-enabled the use of
        atomic instructions on Windows systems. For Windows Vista and
        higher, reduced the number of event handles used. To compile on
        Windows systems now requires Windows SDK v6.0 or later; either
        upgrade to Visual Studio 2008 or 2010, or for Visual Studio
        2005, install Windows SDK Update for Windows Vista.
       (Bug #22268)</p></li><li><p>
        Previously, <code class="literal">MySQL-shared-compat</code> RPMs for
        Linux contained both the current and previous client library
        versions for the target platform. Thus, the package contents
        overlapped with <code class="literal">MySQL-shared</code> RPMs, which
        contain only the current client library version. This can result
        in problems in two cases:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            When the <code class="literal">MySQL-shared</code> RPM is installed
            but later it is determined that the
            <code class="literal">MySQL-shared-compat</code> RPM is needed (an
            application is installed that was linked against an older
            client library). Installing the
            <code class="literal">MySQL-shared-compat</code> RPM results in a
            conflict because both include the current library version.
            This can be overcome by using the <code class="option">--force</code>
            option to RPM, or by first uninstalling the
            <code class="literal">MySQL-shared</code> RPM (which breaks
            dependencies).
          </p></li><li><p>
            When the <code class="literal">MySQL-shared-compat</code> RPM is
            installed, but old applications that require it are removed
            or upgraded to the current library version. In this case,
            <code class="literal">MySQL-shared-compat</code> cannot be replaced
            with <code class="literal">MySQL-shared</code> as long as current
            applications are installed. This can be overcome by using
            the <code class="option">--force</code> option to RPM, which incurs the
            risk of breaking dependencies.
          </p></li></ul></div><p>
        Now the <code class="literal">MySQL-shared-compat</code> RPMs include only
        older client library versions and no longer include the current
        version, so that the <code class="literal">MySQL-shared</code> and
        <code class="literal">MySQL-shared-compat</code> RPM contents no longer
        overlap. The <code class="literal">MySQL-shared-compat</code> RPM can be
        installed even if the <code class="literal">MySQL-shared</code> RPM is
        installed, without producing conflicts related to the current
        library version. The <code class="literal">MySQL-shared-compat</code> RPM
        can be uninstalled when old applications are removed or upgraded
        to the current library version, without breaking applications
        that already use the current library version.
      </p><p>
        If you previously installed the
        <code class="literal">MySQL-shared-compat</code> RPM because you needed
        both the current and previous libraries, you should install both
        the <code class="literal">MySQL-shared</code> and
        <code class="literal">MySQL-shared-compat</code> RPMs now.
       (Bug #56150)</p></li><li><p>
        Overhead for the Performance Schema interface was reduced.
       (Bug #55087)</p></li><li><p>
        Within stored programs, <code class="literal">LIMIT</code> clauses now
        permit integer-valued routine parameters or local variables as
        parameters.
       (Bug #11918)</p></li><li><p>
        Code was removed for the following no-longer-supported
        platforms: NetWare, MS-DOS, VMS, QNX, and 32-bit SPARC.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Security Fix</strong></span>: 
        After changing the values of the
        <code class="literal">innodb_file_format</code> or
        <code class="literal">innodb_file_per_table</code> configuration
        parameters, DDL statements could cause a server crash.
       (Bug #55039, CVE-2010-3676)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        During evaluation of arguments to extreme-value functions such
        as <a href="functions.html#function_least"><code class="literal">LEAST()</code></a> and
        <a href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a>, type errors did not
        propagate properly, causing the server to crash.
       (Bug #55826, CVE-2010-3833)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server could crash after materializing a derived table that
        required a temporary table for grouping.
       (Bug #55568, CVE-2010-3834)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A user-variable assignment expression that is evaluated in a
        logical expression context can be precalculated in a temporary
        table for <code class="literal">GROUP BY</code>. However, when the
        expression value is used after creation of the temporary table,
        it was re-evaluated, not read from the table, and a server crash
        resulted.
       (Bug #55564, CVE-2010-3835)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Joins involving a table with a unique
        <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> column could cause a server
        crash.
       (Bug #54575, CVE-2010-3677)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Pre-evaluation of <code class="literal">LIKE</code> predicates during view
        preparation could cause a server crash.
       (Bug #54568, Bug #11762026, CVE-2010-3836)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Incorrect handling of <code class="literal">NULL</code> arguments could
        lead to a crash for <a href="functions.html#function_in"><code class="literal">IN()</code></a> or
        <a href="functions.html#operator_case"><code class="literal">CASE</code></a> operations when
        <code class="literal">NULL</code> arguments were either passed explicitly
        as arguments (for <a href="functions.html#function_in"><code class="literal">IN()</code></a>) or
        implicitly generated by the <code class="literal">WITH ROLLUP</code>
        modifier (for <a href="functions.html#function_in"><code class="literal">IN()</code></a> and
        <a href="functions.html#operator_case"><code class="literal">CASE</code></a>).
       (Bug #54477, CVE-2010-3678)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> and <code class="literal">WITH
        ROLLUP</code> together could cause a server crash.
       (Bug #54476, CVE-2010-3837)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Queries could cause a server crash if the
        <a href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a> or
        <a href="functions.html#function_least"><code class="literal">LEAST()</code></a> function had a mixed list
        of numeric and <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGBLOB</code></a>
        arguments, and the result of such a function was processed using
        an intermediate temporary table.
       (Bug #54461, CVE-2010-3838)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A malformed argument to the
        <a href="sql-syntax.html#binlog" title="12.7.6.1. BINLOG Syntax"><code class="literal">BINLOG</code></a> statement could result in
        Valgrind warnings or a server crash.
       (Bug #54393, CVE-2010-3679)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        After <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> was used on a
        temporary transactional table locked by
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, any later attempts
        to execute <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> or
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
        TABLES</code></a> caused a server crash.
       (Bug #54117)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Use of <code class="literal">TEMPORARY</code>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables with nullable columns
        could cause a server crash.
       (Bug #54044, CVE-2010-3680)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Queries with nested joins could cause an infinite loop in the
        server when used from stored procedures and prepared statements.
       (Bug #53544, CVE-2010-3839)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Using <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> with queries of the
        form <code class="literal">SELECT ... UNION ... ORDER BY (SELECT ... WHERE
        ...)</code> could cause a server crash.
       (Bug #52711, CVE-2010-3682)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #49124 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #49124 and Bug #11757121 were fixed.</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The setting <code class="literal">innodb_change_buffering=all</code> could
        produce slower performance for some operations than the previous
        default, <code class="literal">innodb_change_buffering=inserts</code>.
       (Bug #54914)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> plan for an
        <code class="literal">InnoDB</code> table could vary greatly in the
        estimated cost for a <code class="literal">BETWEEN</code> clause.
       (Bug #53761)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        As of MySQL 5.5.6, handling of
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE IF NOT EXISTS ... SELECT</code></a> statements has been
        changed for the case that the destination table already exists:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Previously, for
            <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
            TABLE IF NOT EXISTS ... SELECT</code></a>, MySQL produced a
            warning that the table exists, but inserted the rows and
            wrote the statement to the binary log anyway. By contrast,
            <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
            TABLE ... SELECT</code></a> (without <code class="literal">IF NOT
            EXISTS</code>) failed with an error, but MySQL inserted
            no rows and did not write the statement to the binary log.
          </p></li><li><p>
            MySQL now handles both statements the same way when the
            destination table exists, in that neither statement inserts
            rows or is written to the binary log. The difference between
            them is that MySQL produces a warning when <code class="literal">IF NOT
            EXISTS</code> is present and an error when it is not.
          </p></li></ul></div><p>
        This change in handling of <code class="literal">IF NOT EXISTS</code>
        results in an incompatibility for statement-based replication
        from a MySQL 5.1 master with the original behavior and a MySQL
        5.5 slave with the new behavior. Suppose that
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE IF NOT EXISTS ... SELECT</code></a> is executed on the
        master and the destination table exists. The result is that rows
        are inserted on the master but not on the slave. (Row-based
        replication does not have this problem.)
      </p><p>
        To address this issue, statement-based binary logging for
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE IF NOT EXISTS ... SELECT</code></a> is changed in MySQL 5.1
        as of 5.1.51:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If the destination table does not exist, there is no change:
            The statement is logged as is.
          </p></li><li><p>
            If the destination table does exist, the statement is logged
            as the equivalent pair of
            <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
            TABLE IF NOT EXISTS</code></a> and
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
            SELECT</code></a> statements. (If the
            <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> in the original
            statement is preceded by <code class="literal">IGNORE</code> or
            <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a>, the
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> becomes
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT
            IGNORE</code></a> or <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a>,
            respectively.)
          </p></li></ul></div><p>
        This change provides forward compatibility for statement-based
        replication from MySQL 5.1 to 5.5 because when the destination
        table exists, the rows will be inserted on both the master and
        slave. To take advantage of this compatibility measure, the 5.1
        server must be at least 5.1.51 and the 5.5 server must be at
        least 5.5.6.
      </p><p>
        To upgrade an existing 5.1-to-5.5 replication scenario, upgrade
        the master first to 5.1.51 or higher. Note that this differs
        from the usual replication upgrade advice of upgrading the slave
        first.
      </p><p>
        A workaround for applications that wish to achieve the original
        effect (rows inserted regardless of whether the destination
        table exists) is to use
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE IF NOT EXISTS</code></a> and
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a> statements rather than
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE IF NOT EXISTS ... SELECT</code></a> statements.
      </p><p>
        Along with the change just described, the following related
        change was made: Previously, if an existing view was named as
        the destination table for
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE IF NOT EXISTS ... SELECT</code></a>, rows were inserted
        into the underlying base table and the statement was written to
        the binary log. As of MySQL 5.1.51 and 5.5.6, nothing is
        inserted or logged.
       (Bug #47442, Bug #47132, Bug #48814, Bug #49494)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several changes were made to Performance Schema tables:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The <code class="literal">SETUP_OBJECTS</code> table was removed.
          </p></li><li><p>
            The <code class="literal">PROCESSLIST</code> table was renamed to
            <code class="literal">THREADS</code>.
          </p></li><li><p>
            The <code class="literal">EVENTS_WAITS_SUMMARY_BY_EVENT_NAME</code>
            table was renamed to
            <code class="literal">EVENTS_WAITS_SUMMARY_GLOBAL_BY_EVENT_NAME</code>.
          </p></li></ul></div><p>(Bug #55416)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Handling of warnings and errors during stored program execution
        was problematic:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If one statement generated several warnings or errors, only
            the handler for the first was activated, even if another
            might be more appropriate. Now the server chooses the more
            appropriate handler.
          </p></li><li><p>
            Warning or error information could be lost.
          </p></li></ul></div><p>(Bug #36185, Bug #5889, Bug #9857, Bug #23032)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        If the server was started with
        <code class="literal">character_set_server</code> set to
        <code class="literal">utf16</code>, it crashed during full-text stopword
        initialization. Now the stopword file is loaded and searched
        using <code class="literal">latin1</code> if
        <code class="literal">character_set_server</code> is
        <code class="literal">ucs2</code>, <code class="literal">utf16</code>, or
        <code class="literal">utf32</code>.
      </p><p>
        If any table was created with <code class="literal">FULLTEXT</code>
        indexes while the server character set was
        <code class="literal">ucs2</code>, <code class="literal">utf16</code>, or
        <code class="literal">utf32</code>, it should be repaired using this
        statement:
      </p><pre class="programlisting">REPAIR TABLE <em class="replaceable"><code>tbl_name</code></em> QUICK;
</pre><p>(Bug #32391)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement is now considered unsafe for
        statement-based replication. When using statement-based logging
        mode, the statement now produces a warning; when using
        mixed-format logging, the statement is made using the row-based
        format.
       (Bug #34283)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An assertion was raised if (1) an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table was created using
        <a href="sql-syntax.html#create-table-select" title="12.1.17.1. CREATE TABLE ...
        SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> where the query used an
        <code class="literal">INFORMATION_SCHEMA</code> table and a view existed
        in the database; or (2) any statement that modified an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table had a subquery
        referencing an <code class="literal">INFORMATION_SCHEMA</code> table.
       (Bug #55973)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <code class="literal">InnoDB</code> storage engine was not included in
        the default installation when using the
        <span><strong class="command">configure</strong></span> script.
       (Bug #55547)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        For an <code class="literal">InnoDB</code> table with an auto-increment
        column, the server could crash if the first statement that
        references the table after a server restart is a <code class="literal">SHOW
        CREATE TABLE</code> statement.
       (Bug #55277)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config</strong></span></a> tool did not output the
        requirement for the <code class="literal">aio</code> library for
        <code class="literal">mysqld-libs</code>.
       (Bug #55215)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Some memory used for <code class="literal">InnoDB</code> asynchronous I/O
        was not freed at shutdown.
       (Bug #54764)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Implementation of the 64-bit <code class="literal">dulint</code> structure
        in <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> was not optimized for
        64-bit processors, resulting in excessive storage and reduced
        performance.
       (Bug #54728)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The output from the
        <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE INNODB
        STATUS</code></a> command now includes information about
        “<span class="quote">spin rounds</span>” for RW-locks (both shared and
        exclusive locks).
       (Bug #54726)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement could
        convert an <code class="literal">InnoDB</code> compressed table (with
        <code class="literal">row_format=compressed</code>) back to an
        uncompressed table (with <code class="literal">row_format=compact</code>).
       (Bug #54679)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> could issue an incorrect message on
        startup, if tables were created under the setting
        <code class="literal">innodb_file_per_table=ON</code>. The message was of
        the form <code class="literal">InnoDB: Warning: allocated tablespace
        <em class="replaceable"><code>n</code></em>, old maximum was 0</code>. If
        you encounter this message after upgrading, create an
        <code class="literal">InnoDB</code> table with
        <code class="literal">innodb_file_per_table = ON</code> and restart the
        server. The message should not be displayed any more. If you
        continue to encounter this message, or if you get it and haven't
        used a version without this fix, you might have corruption in
        your shared tablespace. If so, back up and reload your data.
       (Bug #54658)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        For debug builds, the database server could crash when renaming
        a table that had active transactions.
       (Bug #54453)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash during the recovery phase of startup, if
        it previously crashed while inserting <code class="literal">BLOB</code> or
        other large columns that use off-page storage into an
        <code class="literal">InnoDB</code> table created with
        <code class="literal">ROW_FORMAT=REDUNDANT</code> or
        <code class="literal">ROW_FORMAT=COMPACT</code>.
       (Bug #54408)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        For an <code class="literal">InnoDB</code> table created with
        <code class="literal">ROW_FORMAT=COMPRESSED</code> or
        <code class="literal">ROW_FORMAT=DYNAMIC</code>, a query using the
        <code class="literal">READ UNCOMMITTED</code> isolation level could cause
        the server to stop with an assertion error, if
        <code class="literal">BLOB</code> or other large columns that use off-page
        storage were being inserted at the same time.
       (Bug #54358)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Fast index creation in the <code class="literal">InnoDB Plugin</code>
        could fail, leaving the new secondary index corrupted.
       (Bug #54330)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        If a session executing <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
        TABLE</code></a> on an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table
        was killed during <code class="literal">open_tables()</code>, an assertion
        could be raised.
       (Bug #53757)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <code class="literal">Lock_time</code> field in the slow query log now
        reports a larger value, including the time for
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> lock waits at the statement
        level.
       (Bug #53496)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Misimplementation of the
        <code class="literal">os_fast_mutex_trylock()</code> function in
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> resulted in unnecessary
        blocking and reduced performance.
       (Bug #53204)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> could not create tables that
        used the <code class="literal">utf32</code> character set.
       (Bug #52199)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Performing large numbers of <a href="sql-syntax.html#rename-table" title="12.1.32. RENAME TABLE Syntax"><code class="literal">RENAME
        TABLE</code></a> statements caused excessive memory use.
       (Bug #47991)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        With <a href="storage-engines.html#sysvar_innodb_thread_concurrency"><code class="literal">innodb_thread_concurrency =
        1</code></a>, <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE ... REORGANIZE PARTITION</code></a> and
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> could deadlock. There were
        unreleased latches in the
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
        REORGANIZE PARTITION</code></a> thread which were needed by the
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> thread to be able to
        continue.
       (Bug #54747)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        An
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE ... ADD PARTITION</code></a> statement run concurrently
        with a read lock caused spurious
        <a href="error-handling.html#error_er_table_exists_error"><code class="literal">ER_TABLE_EXISTS_ERROR</code></a> and
        <a href="error-handling.html#error_er_no_such_table"><code class="literal">ER_NO_SUCH_TABLE</code></a> errors on
        subsequent attempts.
       (Bug #53676)</p><p>References: See also Bug #53770.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> and
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements affecting
        partitioned tables performed poorly when using row-based
        replication.
       (Bug #52517)</p><p>References: This bug is a regression of Bug #39084.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ON DUPLICATE KEY
        UPDATE</code></a> statements performed poorly on tables having
        many partitions. The handler function for reading a row from a
        specific index was not optimized in the partitioning handler.
       (Bug #52455)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE ... TRUNCATE PARTITION</code></a>, when called concurrently
        with transactional DML on the table, was executed immediately
        and did not wait for the concurrent transaction to release
        locks. As a result, the <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement was written into the binary log before
        the DML statement, which led to replication failures when using
        row-based logging.
       (Bug #49907)</p><p>References: See also Bug #42643.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When the storage engine used to create a partitioned table was
        disabled, attempting to drop the table caused the server to
        crash.
       (Bug #46086)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the row-based logging format, a failed
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        SELECT</code></a> statement was written to the binary log,
        causing replication to break if the failed statement was later
        re-run on the master. In such cases, a
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE ... IF
        EXIST</code></a> statement is now logged in the event that a
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        SELECT</code></a> fails.
       (Bug #55625)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the row-based logging format, a
        <a href="sql-syntax.html#set-password" title="12.7.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> statement was
        written to the binary log twice.
       (Bug #55452)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When closing temporary tables, after the session connection was
        already closed, if the writing of the implicit
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> statement into the
        binary log failed, it was possible for the resulting error to be
        mishandled, triggering an assertion.
       (Bug #55387)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Executing <a href="sql-syntax.html#show-binlog-events" title="12.7.5.3. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a>
        increased the value of
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> applying to
        the session that executed the statement.
       (Bug #55322)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Setting <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> to
        <code class="literal">ROW</code>, then creating and dropping a temporary
        table led to an assertion.
       (Bug #54925)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using mixed-format replication, changes made to a
        nontransactional temporary table within a transaction were not
        written into the binary log when the transaction was rolled
        back. This could lead to a failure in replication if the
        temporary table was used again afterwards.
       (Bug #54872)</p><p>References: See also Bug #53259.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> was explicitly
        switched from <code class="literal">STATEMENT</code> to
        <code class="literal">ROW</code> following the creation of a temporary
        table, then on disconnection the master failed to write the
        expected <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP
        TEMPORARY TABLE</code></a> statement into the binary log. As a
        consequence, temporary tables (and their corresponding files)
        accumulated as this scenario was repeated.
       (Bug #54842)</p><p>References: See also Bug #52616.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If the SQL thread was started while the I/O thread was
        performing rotation of the relay log, the two threads could
        begin to race for the same I/O cache, leading to a server crash.
       (Bug #54509)</p><p>References: See also Bug #50364.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Two related issues involving temporary tables and transactions
        were introduced by a fix made in MySQL 5.1.37:
      </p><div class="orderedlist"><ol type="1"><li><p>
            When a temporary table was created or dropped within a
            transaction, any failed statement that following the
            <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
            TEMPORARY TABLE</code></a> or
            <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TEMPORARY
            TABLE</code></a> statement triggered a rollback, which caused
            the slave to diverge from the master.
          </p></li><li><p>
            When a <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
            TEMPORARY TABLE ... SELECT * FROM ...</code></a> statement
            was executed within a transaction in which only tables using
            transactional storage engines were used and the transaction
            was rolled back at the end, the changes—including the
            creation of the temporary table—were not written to
            the binary log.
          </p></li></ol></div><p>
        The current fix restores the correct behavior in both of these
        cases.
       (Bug #53560)</p><p>References: This bug was introduced by Bug #43929.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The value of
        <a href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
        had no effect on statements mixing transactional tables and
        nontransactional tables, or mixing temporary tables and
        nontransactional tables.
      </p><p>
        As part of the fix for this issue, updates to temporary tables
        are now handled as transactional or nontransactional according
        to their storage engine types. (In effect, the current fix
        reverts a change made previously as part of the fix for Bug
        #53259.)
      </p><p>
        In addition, unsafe mixed statements (that is, statements which
        access transactional table as well nontransactional or temporary
        tables, and write to any of them) are now handled as
        transactional when the statement-based logging format is in use.
       (Bug #53452)</p><p>References: See also Bug #51894.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A number of statements generated unnecessary warnings as
        potentially unsafe statements. (Due to the fix for Bug #51894, a
        temporary table is treated in this context as a transactional
        table, so that any mixed statement such as
        <code class="literal">t_innodb</code> + <code class="literal">t_myisam</code> or
        <code class="literal">t_temp</code> + <code class="literal">t_myisam</code> is
        flagged as unsafe.)
      </p><p>
        To reduce the number of spurious warnings produced when this
        happened, some of the criteria used to classify a statements as
        safe or unsafe have been changed. For more information about
        handling of mixed statements, see
        <a href="replication.html#replication-features-transactions-trx-nontrx-mixed" title="Transactional, nontransactional, and mixed statements">Transactional, nontransactional, and mixed statements</a>.
       (Bug #53259)</p><p>References: See also Bug #53452, Bug #54872.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=STATEMENT</code></a>,
        any statement that is flagged as being unsafe, possibly causing
        the slave to go out of sync, generates a warning. This warning
        is written to the server log, the warning count is returned to
        the client in the server's response, and the warnings are
        accessible through <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a>.
      </p><p>
        The current bug affects only the counts for warnings to the
        client and that are visible through <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW
        WARNINGS</code></a>; it does not affect which warnings are
        written to the log. The current issue came about because the fix
        for an earlier issue caused warnings for substatements to be
        cleared whenever a new substatement was started. However, this
        suppressed warnings for unsafe statements in some cases. Now,
        such warnings are no longer cleared.
       (Bug #50312)</p><p>References: This bug was introduced by Bug #36649.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Replication could break if a transaction involving both
        transactional and nontransactional tables was rolled back to a
        savepoint. It broke if a concurrent connection tried to drop a
        transactional table which was locked after the savepoint was
        set. This <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> completed
        when <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK TO
        SAVEPOINT</code></a> was executed because the lock on the table
        was dropped by the transaction. When the slave later tried to
        apply the binary log events, it failed because the table had
        already been dropped.
       (Bug #50124)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> or
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> was used to supply
        the name and host of the affected user or of the definer in any
        of the statements <a href="sql-syntax.html#drop-user" title="12.7.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a>,
        <a href="sql-syntax.html#rename-user" title="12.7.1.4. RENAME USER Syntax"><code class="literal">RENAME USER</code></a>,
        <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>,
        <a href="sql-syntax.html#revoke" title="12.7.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a>, and
        <a href="sql-syntax.html#alter-event" title="12.1.2. ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>, the reference to
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> or
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> was not expanded
        when written to the binary log. This resulted in
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> or
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> being expanded to
        the user and host of the slave SQL thread on the slave, thus
        breaking replication. Now
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> and
        <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> are expanded prior
        to being written to the binary log in such cases, so that the
        correct user and host are referenced on both the master and the
        slave.
       (Bug #48321)</p></li><li><p>
        After an RPM installation, <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> would be
        started with the <code class="literal">root</code> user, rather than the
        <code class="literal">mysql</code> user.
       (Bug #56574)</p></li><li><p>
        The embedded server raised an assertion when it attempted to
        load plugins.
       (Bug #56085)</p></li><li><p>
        <a href="functions.html#function_format"><code class="literal">FORMAT()</code></a> did not respect the
        decimal point character if the locale was changed and always
        returned an ASCII value.
       (Bug #55912)</p></li><li><p>
        <span><strong class="command">CMake</strong></span> produced bad dependencies for the
        <code class="filename">sql/lex_hash.h</code> file during configuration.
       (Bug #55842)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> did not handle the
        <code class="option">--ssl</code> option properly.
       (Bug #55672)</p></li><li><p>
        Using <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> on a column containing the
        maximum <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> value caused a
        server crash.
       (Bug #55648)</p></li><li><p>
        Incorrect handling of user variable assignments as
        subexpressions could lead to incorrect results or server
        crashes.
       (Bug #55615)</p></li><li><p>
        The default compiler options for Mac OS X 10.5 were set
        incorrectly.
       (Bug #55601)</p></li><li><p>
        The server was not checking for errors generated during the
        execution of <code class="literal">Item::val_xxx()</code> methods when
        copying data to a group, order, or distinct temp table's row.
       (Bug #55580)</p></li><li><p>
        <code class="literal">ORDER BY</code> clauses that included user-variable
        expressions could raise a debug assertion.
       (Bug #55565)</p></li><li><p>
        <a href="sql-syntax.html#show-create-trigger" title="12.7.5.13. SHOW CREATE TRIGGER Syntax"><code class="literal">SHOW CREATE TRIGGER</code></a> took a
        stronger metadata lock than required. This caused the statement
        to be blocked unnecessarily. For example,
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        WRITE</code></a> in one session blocked <a href="sql-syntax.html#show-create-trigger" title="12.7.5.13. SHOW CREATE TRIGGER Syntax"><code class="literal">SHOW
        CREATE TRIGGER</code></a> in another session.
      </p><p>
        Also, a <a href="sql-syntax.html#show-create-trigger" title="12.7.5.13. SHOW CREATE TRIGGER Syntax"><code class="literal">SHOW CREATE TRIGGER</code></a>
        statement issued inside a transaction did not release its
        metadata locks at the end of statement execution. Consequently,
        <a href="sql-syntax.html#show-create-trigger" title="12.7.5.13. SHOW CREATE TRIGGER Syntax"><code class="literal">SHOW CREATE TRIGGER</code></a> was able to
        block other sessions from accessing the table (for example,
        using <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>).
       (Bug #55498)</p></li><li><p>
        A single-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> ordered by
        a column that had a hash-type index could raise an assertion or
        cause a server crash.
       (Bug #55472)</p></li><li><p>
        A call to <a href="connectors-apis.html#mysql-library-init" title="21.9.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
        following a call to
        <a href="connectors-apis.html#mysql-library-end" title="21.9.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> caused a
        client crash.
       (Bug #55345)</p></li><li><p>
        The <code class="option">-features=no%except</code> option was missing from
        the build for Solaris/x86.
       (Bug #55250)</p></li><li><p>
        A statement that was aborted by
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL QUERY</code></a> while
        it waited on a metadata lock could raise an assertion in debug
        builds, or send OK to the client instead of
        <a href="error-handling.html#error_er_query_interrupted"><code class="literal">ER_QUERY_INTERRUPTED</code></a> in regular
        builds.
       (Bug #55223)</p></li><li><p>
        <code class="literal">GROUP BY</code> operations used
        <a href="server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a> inconsistently.
       (Bug #55188)</p></li><li><p>
        The Windows MSI installer failed during installation to preserve
        custom settings, such as the configured data directory.
       (Bug #55169)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> produced no warning at
        startup about illegal
        <a href="storage-engines.html#sysvar_innodb_file_format_check"><code class="literal">innodb_file_format_check</code></a>
        values.
       (Bug #55095)</p></li><li><p>
        <a href="functions.html#function_if"><code class="literal">IF()</code></a> with a subquery argument
        could raise a debug assertion for debug builds under some
        circumstances.
       (Bug #55077)</p></li><li><p>
        Building MySQL on Solaris 8 x86 failed when using Sun Studio due
        to <span><strong class="command">gcc</strong></span> inline assembly code.
       (Bug #55061)</p></li><li><p>
        When upgrading an existing install with an RPM on Linux, the
        MySQL server might not have been restarted properly. This was
        due to a naming conflict when upgrading from a
        <code class="literal">community</code> named RPM. Previous installations
        are now correctly removed, the MySQL initialization script is
        recreated, and the MySQL server is restarted as normal.
       (Bug #55015)</p></li><li><p>
        The <a href="server-administration.html#sysvar_thread_concurrency"><code class="literal">thread_concurrency</code></a> system
        variable was unavailable on non-Solaris systems.
       (Bug #55001)</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> contained a syntax error that
        prevented it from restarting the server.
       (Bug #54991)</p></li><li><p>
        If audit plugins were installed that were interested in
        <code class="literal">MYSQL_AUDIT_GENERAL_CLASS</code> events and the
        general query log was disabled, failed
        <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> or
        <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> statements
        caused a server crash.
       (Bug #54989)</p></li><li><p>
        Some functions did not calculate their
        <code class="literal">max_length</code> metadata value correctly.
       (Bug #54916)</p></li><li><p>
        A <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> statement
        issued inside a transaction did not release its metadata locks
        at the end of statement execution. Consequently,
        <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> was able to
        block other sessions from accessing the table (for example,
        using <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>).
       (Bug #54905)</p></li><li><p>
        <a href="information-schema.html#engines-table" title="19.6. The INFORMATION_SCHEMA ENGINES Table"><code class="literal">INFORMATION_SCHEMA.ENGINES</code></a> and
        <a href="sql-syntax.html#show-engines" title="12.7.5.17. SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a> described
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> as the default storage
        engine, but this is not true as of MySQL 5.5.5.
       (Bug #54832)</p></li><li><p>
        The <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> storage engine tried to
        use memory mapping on the underlying
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables even on platforms
        that do not support it and even when
        <a href="server-administration.html#sysvar_myisam_use_mmap"><code class="literal">myisam_use_mmap</code></a> was disabled.
        This led to a hang for
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT INTO ...
        SELECT FROM</code></a> statements that selected from a
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table into a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table that contained the same
        <code class="literal">MyISAM</code> table.
       (Bug #54811, Bug #50788)</p></li><li><p>
        Incorrect error handling could result in an
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> crash.
       (Bug #54783)</p></li><li><p>
        Performance Schema event collection for a thread could
        “<span class="quote">leak</span>” from one connection to another if the thread
        was used for one connection, then cached, then reused for
        another connection.
       (Bug #54782)</p></li><li><p>
        In debug builds, an assertion could be raised when the server
        tried to send an OK packet to the client after having failed to
        detect errors during processing of the <code class="literal">WHERE</code>
        condition of an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement.
       (Bug #54734)</p></li><li><p>
        In a slave SQL thread or Event Scheduler thread, the
        <a href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a> function could not sleep
        more than five seconds.
       (Bug #54729)</p></li><li><p>
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET sql_select_limit
        = 0</code></a> did not work.
       (Bug #54682)</p></li><li><p>
        Assignments of the <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> or
        <a href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> function to a user
        variable did not preserve the character set of the function
        return value.
       (Bug #54668)</p></li><li><p>
        A signal-handler redefinition for <code class="literal">SIGUSR1</code> was
        removed. The redefinition could cause the server to encounter a
        kernel deadlock on Solaris when there are many active threads.
        Other POSIX platforms might also be affected.
       (Bug #54667)</p></li><li><p>
        Queries that named view columns in a <code class="literal">GROUP BY</code>
        clause could cause a server crash.
       (Bug #54515)</p></li><li><p>
        The Performance Schema displayed spurious startup error messages
        when the server was run in bootstrap mode.
       (Bug #54467)</p></li><li><p>
        For distributions built with <span><strong class="command">CMake</strong></span> rather
        than the GNU autotools, <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> lacked
        <code class="literal">pager</code> support, and some scripts were built
        without the execute bit set.
       (Bug #54466, Bug #54129)</p></li><li><p>
        The server failed to disregard sort order for some zero-length
        tuples, leading to an assertion failure.
       (Bug #54459)</p></li><li><p>
        A join with an aggregated function and impossible
        <code class="literal">WHERE</code> condition returned an extra row.
       (Bug #54416)</p></li><li><p>
        Errors during processing of <code class="literal">WHERE</code> conditions
        in <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER ...
        READ</code></a> statements were not detected, so the handler code
        still tried to send EOF to the client, raising an assertion.
       (Bug #54401)</p></li><li><p>
        If a session tried to drop a database containing a table opened
        with <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> in another session,
        any <code class="literal">DATABASE</code> statement
        (<code class="literal">CREATE</code>, <code class="literal">DROP</code>,
        <code class="literal">ALTER</code>) executed by that session produced a
        deadlock.
       (Bug #54360)</p></li><li><p>
        Deadlocks involving <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
        DELAYED</code></a> statements were not detected. The server could
        crash if the delayed handler thread was killed due to a
        conflicting shared metadata lock.
       (Bug #54332)</p></li><li><p>
        After <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> was used on a
        temporary transactional table locked by
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, any later attempts
        to execute <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> or
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
        TABLES</code></a> caused a server crash.
       (Bug #54117)</p></li><li><p>
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT IGNORE
        INTO ... SELECT</code></a> statements could raise a debug
        assertion.
       (Bug #54106)</p></li><li><p>
        <a href="sql-syntax.html#show-create-event" title="12.7.5.9. SHOW CREATE EVENT Syntax"><code class="literal">SHOW CREATE EVENT</code></a> released all
        metadata locks held by the current transaction. This invalidated
        any existing savepoints and raised an assertion if
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK TO
        SAVEPOINT</code></a> was executed.
       (Bug #54105)</p></li><li><p>
        A client could supply data in chunks to a prepared statement
        parameter other than of type <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>
        or <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> using the
        <a href="connectors-apis.html#mysql-stmt-send-long-data" title="21.9.7.26. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a> C
        API function (or <code class="literal">COM_STMT_SEND_LONG_DATA</code>
        command). This led to a crash because other data types are not
        valid for long data.
       (Bug #54041)</p></li><li><p>
        <a href="programs.html#mysql-secure-installation" title="4.4.5. mysql_secure_installation — Improve MySQL Installation Security"><span><strong class="command">mysql_secure_installation</strong></span></a> did not properly
        identify local accounts and could incorrectly remove nonlocal
        <code class="literal">root</code> accounts.
       (Bug #54004)</p></li><li><p>
        A client with automatic reconnection enabled saw the error
        message <code class="literal">Lost connection to MySQL server during
        query</code> if the connection was lost between the
        <a href="connectors-apis.html#mysql-stmt-prepare" title="21.9.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> and
        <a href="connectors-apis.html#mysql-stmt-execute" title="21.9.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> C API
        functions. However,
        <a href="connectors-apis.html#mysql-stmt-errno" title="21.9.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a> returned 0,
        not the corresponding error number 2013.
       (Bug #53899)</p></li><li><p>
        <a href="information-schema.html#columns-table" title="19.4. The INFORMATION_SCHEMA COLUMNS Table"><code class="literal">INFORMATION_SCHEMA.COLUMNS</code></a> reported
        incorrect precision for <code class="literal">BIGINT UNSIGNED</code>
        columns.
       (Bug #53814)</p></li><li><p>
        The patch for Bug #36569 caused performance regressions and
        incorrect execution of some
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
       (Bug #53737, Bug #53742)</p></li><li><p>
        Missing Performance Schema tables were not reported in the error
        log at server startup.
       (Bug #53617)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> could incorrectly remove
        <a href="server-administration.html#priv_trigger"><code class="literal">TRIGGER</code></a> privileges.
       (Bug #53613)</p></li><li><p>
        <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
        PERFORMANCE_SCHEMA STATUS</code></a> underreported the amount of
        memory allocated by the Performance Schema.
       (Bug #53566)</p></li><li><p>
        Portability problems in <a href="sql-syntax.html#show-status" title="12.7.5.36. SHOW STATUS Syntax"><code class="literal">SHOW
        STATUS</code></a> could lead to incorrect results on some
        platforms.
       (Bug #53493)</p></li><li><p>
        Builds of MySQL generated a large number of warnings.
       (Bug #53445)</p></li><li><p>
        Performance Schema header files were not installed in the
        correct directory.
       (Bug #53255)</p></li><li><p>
        The server could crash when processing subqueries with empty
        results.
       (Bug #53236)</p></li><li><p>
        With <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> set
        to a nonzero value, searches for table or database names in
        <code class="literal">INFORMATION_SCHEMA</code> tables could produce
        incorrect results.
       (Bug #53095)</p></li><li><p>
        Use of <code class="literal">uint</code> in <code class="filename">typelib.h</code>
        caused compilation problems in Windows. This was changed to
        <code class="literal">unsigned int</code>.
       (Bug #52959)</p></li><li><p>
        The <code class="filename">mysql-debug.pdb</code> supplied with releases
        did not match the corresponding <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld.exe</strong></span></a>.
       (Bug #52850)</p></li><li><p>
        The <code class="literal">PERFORMANCE_SCHEMA</code> database was not
        correctly created and populated on Windows.
       (Bug #52809)</p></li><li><p>
        The <a href="server-administration.html#sysvar_large_pages"><code class="literal">large_pages</code></a> system variable
        was tied to the <code class="option">--large-files</code> command-line
        option, not the <a href="server-administration.html#option_mysqld_large-pages"><code class="option">--large-pages</code></a>
        option.
       (Bug #52716)</p></li><li><p>
        Attempts to access a nonexistent Performance Schema table
        resulted in a misleading error message.
       (Bug #52586)</p></li><li><p>
        The ABI check for MySQL failed to compile with
        <span><strong class="command">gcc</strong></span> 4.5.
       (Bug #52514)</p></li><li><p>
        The Performance Schema could enter an infinite loop if required
        to create a large number of mutex instances.
       (Bug #52502)</p></li><li><p>
        <a href="programs.html#mysql-secure-installation" title="4.4.5. mysql_secure_installation — Improve MySQL Installation Security"><span><strong class="command">mysql_secure_installation</strong></span></a> sometimes failed to
        locate the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client.
       (Bug #52274)</p></li><li><p>
        Some queries involving <code class="literal">GROUP BY</code> and a
        function that returned <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>
        raised a debug assertion.
       (Bug #52159)</p></li><li><p>
        If a symbolic link was used in a file path name, the Performance
        Schema did not resolve all file I/O events to the same name.
       (Bug #52134)</p></li><li><p>
        <code class="literal">PARTITION BY KEY</code> on a
        <code class="literal">utf32</code> <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a>
        column raised a debugging assertion.
       (Bug #52121)</p></li><li><p>
        A pending <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES
        <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK</code></a>
        statement unnecessarily aborted transactions.
       (Bug #52117)</p></li><li><p>
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a> in one session and
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES
        <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK</code></a> in
        another session were mutually exclusive.
      </p><p>
        This bug fix involved several changes to the states displayed by
        <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">Table lock</code> was replaced with
            <code class="literal">Waiting for table level lock</code>.
          </p></li><li><p>
            <code class="literal">Waiting for table</code> was replaced with
            <code class="literal">Waiting for table flush</code>.
          </p></li><li><p>
            These states are new: <code class="literal">Waiting for global metadata
            lock</code>, <code class="literal">Waiting for schema metadata
            lock</code>, <code class="literal">Waiting for stored function
            metadata lock</code>, <code class="literal">Waiting for stored
            procedure metadata lock</code>, <code class="literal">Waiting for
            table metadata lock</code>.
          </p></li></ul></div><p>(Bug #52044)</p></li><li><p>
        Reading a <code class="literal">ucs2</code> data file with
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> was subject to three problems. 1) Incorrect
        parsing of the file as <code class="literal">ucs2</code> data, resulting
        in incorrect length of the parsed string. This is fixed by
        truncating the invalid trailing bytes (incomplete multibyte
        characters) when reading from the file. 2) Reads from a proper
        <code class="literal">ucs2</code> file did not recognize newline
        characters. This is fixed by first checking whether a byte is a
        newline (or any other special character) before reading it as a
        part of a multibyte character. 3) When using user variables to
        hold column data, the character set of the user variable was set
        incorrectly to the database charset. This is fixed by setting it
        to the character set specified in the
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement, if any.
       (Bug #51876)</p></li><li><p>
        <a href="sql-syntax.html#xa" title="12.3.7. XA Transactions"><code class="literal">XA START</code></a> had a
        race condition that could cause a server crash.
       (Bug #51855)</p></li><li><p>
        The results of some <code class="literal">ORDER BY ... DESC</code> queries
        were sorted incorrectly.
       (Bug #51431)</p></li><li><p>
        <code class="literal">Index Merge</code> between three indexes could
        return incorrect results.
       (Bug #50389)</p></li><li><p>
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> and
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> returned incorrect results
        for <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> columns if the set of
        values included <code class="literal">'0000-00-00'</code>.
       (Bug #49771)</p></li><li><p>
        Searches in <code class="literal">INFORMATION_SCHEMA</code> tables for
        rows matching a nonexistent database produced an error instead
        of an empty query result.
       (Bug #49542)</p></li><li><p>
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> failed if there was
        a <code class="literal">TEMPORARY</code> table with the same name as a
        non-<code class="literal">TEMPORARY</code> table in the database.
       (Bug #48067)</p></li><li><p>
        An assertion occurred in <code class="filename">ha_myisammrg.cc</code>
        line 1137:
      </p><pre class="programlisting">
  DBUG_ASSERT(this-&gt;file-&gt;children_attached);
</pre><p>
        The problem was found while running RQG tests and the assertion
        occurred during <code class="literal">REPAIR</code>,
        <code class="literal">OPTIMIZE</code>, and <code class="literal">ANALYZE</code>
        operations.
       (Bug #47633)</p></li><li><p>
        The optimization method of the <code class="literal">ARCHIVE</code>
        storage engine did not preserve the <code class="filename">.frm</code>
        file embedded in the <code class="filename">.ARZ</code> file when
        rewriting the <code class="filename">.ARZ</code> file for optimization.
        This meant an <code class="literal">ARCHIVE</code> table that had been
        optimized could not be discovered.
      </p><p>
        The <code class="literal">ARCHIVE</code> engine stores the
        <code class="filename">.frm</code> file in the <code class="filename">.ARZ</code>
        file so it can be transferred from machine to machine without
        also needing to copy the <code class="filename">.frm</code> file. The
        engine subsequently restores the embedded
        <code class="filename">.frm</code> during discovery.
       (Bug #45377)</p></li><li><p>
        With <a href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a>
        set to <code class="literal">utf16</code> or <code class="literal">utf32</code>,
        <code class="literal">CREATE TABLE t1 AS SELECT HEX() ...</code> caused a
        server crash.
       (Bug #45263)</p></li><li><p>
        The
        <code class="literal">my_like_range_<em class="replaceable"><code>xxx</code></em>()</code>
        functions returned badly formed maximum strings for Asian
        character sets, which caused problems for storage engines.
       (Bug #45012)</p></li><li><p>
        A debugging assertion could be raised after a write failure to a
        closed socket.
       (Bug #42496)</p></li><li><p>
        Enumeration plugin variables were subject to a type-casting
        error, causing inconsistent results between different platforms.
       (Bug #42144)</p></li><li><p>
        Sort-<code class="literal">index_merge</code> for join tables other than
        the first table used excessive memory.
       (Bug #41660)</p></li><li><p>
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> held a lock during
        <code class="literal">unlink()</code> file system operations, causing
        performance problems if <code class="literal">unlink()</code> took a long
        time.
       (Bug #41158)</p></li><li><p>
        Rows inserted in a table by one session were not immediately
        visible to another session that queried the table, even if the
        insert had committed.
       (Bug #37521)</p></li><li><p>
        Statements of the form <code class="literal">UPDATE ... WHERE ... ORDER
        BY</code> used a <code class="literal">filesort</code> even when not
        required.
       (Bug #36569)</p><p>References: See also Bug #53737, Bug #53742.</p></li><li><p>
        Reading from a temporary <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a>
        table, with two nontemporary child
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables, resulted in the
        error:
      </p><pre class="programlisting">ERROR 1168 (HY000): Unable to open underlying table which is differently 
defined or of non-MyISAM type or doesn't exist</pre><p>(Bug #36171)</p></li><li><p>
        <code class="literal">safemalloc</code> was excessively slow under certain
        conditions and has been removed. The
        <a href="server-administration.html#option_mysqld_skip-safemalloc"><code class="option">--skip-safemalloc</code></a> server option
        has also been removed, and the
        <a href="http://dev.mysql.com/doc/refman/5.1/en/source-configuration-options.html#option_configure_with-debug" target="_top"><code class="option">--with-debug=full</code></a>
        configuration option is no different from
        <a href="http://dev.mysql.com/doc/refman/5.1/en/source-configuration-options.html#option_configure_with-debug" target="_top"><code class="option">--with-debug</code></a>.
       (Bug #34043)</p></li><li><p>
        Threads that were calculating the estimated number of records
        for a range scan did not respond to the
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> statement. That is, if a
        <a href="optimization.html#jointype_range"><code class="literal">range</code></a> join type is possible
        (even if not selected by the optimizer as a join type of choice
        and thus not shown by <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>),
        the query in the <code class="literal">statistics</code> state (shown by
        the <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>) did not
        respond to the <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> statement.
       (Bug #25421)</p></li><li><p>
        Problems in the atomic operations implementation could lead to
        server crashes.
       (Bug #22320, Bug #52261)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-5"></a>D.1.18. Changes in MySQL 5.5.5 (06 July 2010)</h3></div></div></div><p><span class="bold"><strong>icc Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        This is the final release of MySQL 5.5 for which
        Generic Linux MySQL binary packages built with the
        <span><strong class="command">icc</strong></span> compiler on x86 and x86_64 will be
        offered. These were previously produced as an alternative to our
        main packages built using <span><strong class="command">gcc</strong></span>, as they
        provided noticeable performance benefits. In recent times the
        performance differences have diminished and build and runtime
        problems have surfaced, thus it is no longer viable to continue
        producing them.
      </p><p>
        We continue to use the <span><strong class="command">icc</strong></span> compiler to
        produce our distribution-specific RPM packages on ia64.
      </p></li></ul></div><p><span class="bold"><strong>InnoDB Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">InnoDB</code> has been upgraded to version 1.1.1.
        This version is considered of “<span class="quote">early adopter</span>”
        quality.
      </p><p>
        <code class="literal">InnoDB</code> is now the default storage engine,
        rather than <code class="literal">MyISAM</code>, in the regular and
        enterprise versions of MySQL. This change has the following
        consequences:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Existing tables are not affected by this change, only new
            tables that are created.
          </p></li><li><p>
            Some of the <code class="literal">InnoDB</code> option settings also
            change, so that the default configuration represents the
            best practices for <code class="literal">InnoDB</code> functionality,
            reliability, and file management:
            <a href="storage-engines.html#sysvar_innodb_file_format"><code class="literal">innodb_file_format=Barracuda</code></a>
            rather than <code class="literal">Antelope</code>,
            <a href="storage-engines.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode=ON</code></a>
            rather than <code class="literal">OFF</code>, and
            <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table=ON</code></a>
            rather than <code class="literal">OFF</code>.
          </p></li><li><p>
            The system tables remain in <code class="literal">MyISAM</code>
            format.
          </p></li><li><p>
            <code class="literal">MyISAM</code> remains the default storage engine
            for the embedded version of MySQL.
          </p></li></ul></div><p>
        Follow these steps to ensure a smooth transition when upgrading:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Familiarize yourself with the new default setting for the
            <code class="literal">InnoDB</code> file-per-table option, which
            creates a separate <code class="literal">.ibd</code> file for each
            user table. Adapt any backup procedure to include these
            files. For details, see
            <a href="storage-engines.html#innodb-multiple-tablespaces" title="13.3.3. Using Per-Table Tablespaces">Section 13.3.3, “Using Per-Table Tablespaces”</a>.
          </p></li><li><p>
            Test the installation and operation for any applications
            that you run on the database server, to determine if they
            use any features specific to <code class="literal">MyISAM</code> that
            cause problems during installation (when the tables are
            created) or at runtime (when
            <code class="literal">MyISAM</code>-specific features might fail, or
            reliance on <code class="literal">MyISAM</code> settings for
            performance might become apparent). The
            <code class="literal">InnoDB</code> “<span class="quote">strict</span>” mode might
            also alert you to problems while setting up tables for an
            application.
          </p></li><li><p>
            As a preliminary test for individual tables rather than an
            entire application, you can use the statement <code class="literal">ALTER
            TABLE <em class="replaceable"><code>table_name</code></em>
            ENGINE=INNODB;</code> to convert an existing table to use
            the <code class="literal">InnoDB</code> storage engine, and then run
            compatibility and performance tests.
          </p></li><li><p>
            Where necessary, add <code class="literal">ENGINE=MYISAM</code>
            clauses to <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
            statements, for tables that require features specific to
            <code class="literal">MyISAM</code>, such as full-text search.
          </p></li><li><p>
            Benchmark the most important queries, to check whether you
            need to make changes to the table indexes.
          </p></li><li><p>
            Measure the performance of applications under typical load,
            to check whether you need to change any additional
            <code class="literal">InnoDB</code> configuration settings.
          </p></li><li><p>
            As a last resort, if a database server is devoted entirely
            to applications that can only run with
            <code class="literal">MyISAM</code> tables, you could add a
            <a href="server-administration.html#option_mysqld_default-storage-engine"><code class="option">default-storage-engine</code></a> line
            in the configuration file, or a
            <a href="server-administration.html#option_mysqld_default-storage-engine"><code class="option">--default-storage-engine</code></a>
            option in the database server startup command, to re-enable
            <code class="literal">MyISAM</code> as the default storage engine for
            that server. For details about setting the default storage
            engine, see <a href="storage-engines.html#storage-engine-setting" title="13.1. Setting the Storage Engine">Section 13.1, “Setting the Storage Engine”</a>.
          </p></li></ul></div></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        All numeric operators and functions on integer, floating-point
        and <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values now throw an
        “<span class="quote">out of range</span>” error
        (<a href="error-handling.html#error_er_data_out_of_range"><code class="literal">ER_DATA_OUT_OF_RANGE</code></a>) rather
        than returning an incorrect value or <code class="literal">NULL</code>,
        when the result is out of the supported range for the
        corresponding data type. See
        <a href="data-types.html#out-of-range-and-overflow" title="10.2.6. Out-of-Range and Overflow Handling">Section 10.2.6, “Out-of-Range and Overflow Handling”</a>.
       (Bug #8433)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The <a href="information-schema.html#innodb-trx-table" title="19.29.3. The INFORMATION_SCHEMA INNODB_TRX Table"><code class="literal">INFORMATION_SCHEMA.INNODB_TRX</code></a>
        table now includes a number of fields that duplicate information
        from the <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW
        ENGINE INNODB STATUS</code></a> output. You no longer need to
        parse that output to get complete transaction information.
       (Bug #53336)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> stores redo log records in a
        hash table during recovery. On 64-bit systems, this hash table
        was 1/8 of the buffer pool size. To reduce memory usage, the
        dimension of the hash table was reduced to 1/64 of the buffer
        pool size (or 1/128 on 32-bit systems).
       (Bug #53122)</p></li><li><p>
        Previously, the
        <a href="storage-engines.html#sysvar_innodb_file_format_check"><code class="literal">innodb_file_format_check</code></a> system
        variable served a dual purpose. Setting it at server startup
        would keep <code class="literal">InnoDB</code> from starting if any tables
        used a more recent file format than supported by the current
        level of <code class="literal">InnoDB</code>. If <code class="literal">InnoDB</code>
        could start, the same system variable was set to the
        “<span class="quote">highest</span>” file format value used by any
        <code class="literal">InnoDB</code> table in the database. Thus, its value
        could change from the value you specified.
      </p><p>
        Now, checking and recording the file format tag are handled
        using separate variables.
        <a href="storage-engines.html#sysvar_innodb_file_format_check"><code class="literal">innodb_file_format_check</code></a> can be
        set to 1 or 0 at server startup to enable or disable whether
        <code class="literal">InnoDB</code> checks the file format tag in the
        system tablespace. If the tag is checked and is higher than that
        supported by the current version of <code class="literal">InnoDB</code>,
        an error occurs and <code class="literal">InnoDB</code> does not start. If
        the tag is not higher, <code class="literal">InnoDB</code> sets the value
        of <a href="storage-engines.html#sysvar_innodb_file_format_max"><code class="literal">innodb_file_format_max</code></a> to
        the file format tag.
      </p><p>
        For background information about <code class="literal">InnoDB</code>
        file-format management, see
        <a href="storage-engines.html#innodb-file-format" title="13.4.4. InnoDB File-Format Management">Section 13.4.4, “InnoDB File-Format Management”</a>.
       (Bug #49792, Bug #53654)</p></li><li><p>
        The <code class="literal">Rows_examined</code> value in slow query log
        rows now is nonzero for <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
        and <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements that modify
        rows.
       (Bug #49756)</p></li><li><p>
        For events of <code class="literal">MYSQL_AUDIT_GENERAL_CLASS</code>, the
        event subclass was not passed to audit plugins even though the
        server passed the subclass to the plugin handler. The subclass
        is now available through the following changes:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The <code class="literal">struct mysql_event_general</code> structure
            has a new <code class="literal">event_subclass</code> member.
          </p></li><li><p>
            The new member changes the interface, so the audit plugin
            interface version,
            <code class="literal">MYSQL_AUDIT_INTERFACE_VERSION</code>, has been
            incremented from <code class="literal">0x0100</code> to
            <code class="literal">0x0200</code>. Plugins that require access to
            the new member must be recompiled to use version
            <code class="literal">0x0200</code> or higher.
          </p></li></ul></div><p>
        The <code class="literal">NULL_AUDIT</code> example plugin in the
        <code class="filename">plugin/audit_null</code> directory has been
        modified to count events of each subclass, based on the
        <code class="literal">event_subclass</code> value. See
        <a href="extending-mysql.html#writing-audit-plugins" title="22.2.4.8. Writing Audit Plugins">Section 22.2.4.8, “Writing Audit Plugins”</a>.
       (Bug #47059)</p></li><li><p>
        The deprecated <span><strong class="command">mysql_fix_privilege_tables</strong></span>
        script has been removed.
       (Bug #42589)</p></li><li><p>
        A new system variable,
        <a href="server-administration.html#sysvar_skip_name_resolve"><code class="literal">skip_name_resolve</code></a>, is set from
        the value of the
        <a href="server-administration.html#option_mysqld_skip-name-resolve"><code class="option">--skip-name-resolve</code></a> server
        option. This provides a way to determine at runtime whether the
        server uses name resolution for client connections.
       (Bug #37168)</p></li><li><p>
        Added the <a href="functions.html#function_sha2"><code class="literal">SHA2()</code></a> function, which
        calculates the SHA-2 family of hash functions (SHA-224, SHA-256,
        SHA-384, and SHA-512). (Contributed by Bill Karwin)
       (Bug #13174)</p></li><li><p>
        Windows MSI package installers create and set up the data
        directory that the installed server will use, but now also
        create a pristine “<span class="quote">template</span>” data directory named
        <code class="filename">data</code> under the installation directory. This
        directory can be useful when the machine will be used to run
        multiple instances of MySQL: After an installation has been
        performed using an MSI package, the template data directory can
        be copied to set up additional MySQL instances. See
        <a href="server-administration.html#multiple-servers" title="5.6. Running Multiple MySQL Instances on One Machine">Section 5.6, “Running Multiple MySQL Instances on One Machine”</a>.
      </p></li><li><p>
        It is now possible to build MySQL on all platforms using
        <span><strong class="command">CMake</strong></span> instead of the GNU autotools. (Prior to
        MySQL 5.5.5, <span><strong class="command">CMake</strong></span> support was limited to
        Windows.) For instructions on using <span><strong class="command">CMake</strong></span> to
        build MySQL, see <a href="installing.html#source-installation" title="2.9. Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server could crash if there were alternate reads from two
        indexes on a table using the
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> interface.
       (Bug #54007, CVE-2010-3681)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #53933 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #53907 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server failed to check the table name argument of a
        <code class="literal">COM_FIELD_LIST</code> command packet for validity
        and compliance to acceptable table name standards. This could be
        exploited to bypass almost all forms of checks for privileges
        and table-level grants by providing a specially crafted table
        name argument to <code class="literal">COM_FIELD_LIST</code>.
      </p><p>
        In MySQL 5.0 and above, this permitted an authenticated user
        with <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privileges on one
        table to obtain the field definitions of any table in all other
        databases and potentially of other MySQL instances accessible
        from the server's file system.
      </p><p>
        Additionally, for MySQL version 5.1 and above, an authenticated
        user with <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a> or
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privileges on one table
        could delete or read content from any other table in all
        databases on this server, and potentially of other MySQL
        instances accessible from the server's file system.
       (Bug #53371, CVE-2010-1848)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server was susceptible to a buffer-overflow attack due to a
        failure to perform bounds checking on the table name argument of
        a <code class="literal">COM_FIELD_LIST</code> command packet. By sending
        long data for the table name, a buffer is overflown, which could
        be exploited by an authenticated user to inject malicious code.
       (Bug #53237, CVE-2010-1850)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> did not check for SQL errors and sent an OK
        packet even when errors were already reported. Also, an assert
        related to client/server protocol checking in debug servers
        sometimes was raised when it should not have been.
       (Bug #52512, CVE-2010-3683)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #52357 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #52315 was fixed.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Privilege checking for <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL
        PLUGIN</code></a> was incorrect.
       (Bug #51770, CVE-2010-1621)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server could be tricked into reading packets indefinitely if
        it received a packet larger than the maximum size of one packet.
       (Bug #50974, CVE-2010-1849)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: Bug #48157 was fixed.</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Deadlock detection could be a bottleneck in
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> processing, if many
        transactions attempted to update the same row simultaneously.
        The algorithm has been improved to enhance performance and
        scalability, in the InnoDB Plugin for MySQL 5.1, and in InnoDB
        1.1 for MySQL 5.5.
       (Bug #49047)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: 
        While looking for the shortest index for a covering index scan,
        the optimizer did not consider the full row length for a
        clustered primary key, as in
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>. Secondary covering indexes
        are now preferred, making full table scans less likely.
       (Bug #39653)</p><p>References: See also Bug #55656.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> did not take an
        exclusive lock on a table if truncation was done by deleting all
        rows in the table. For <code class="literal">InnoDB</code> tables, this
        could break proper isolation because <code class="literal">InnoDB</code>
        ended up aborting some granted locks when truncating a table.
        Now an exclusive metadata lock is taken before
        <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> can proceed. This
        guarantees that no other transaction is using the table.
      </p><p>
        Incompatible change: Truncation using delete no longer fails if
        <a href="server-administration.html#sysvar_sql_safe_updates"><code class="literal">sql_safe_updates</code></a> is enabled
        (this was an undocumented side effect).
       (Bug #42643)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        After <a href="sql-syntax.html#set-transaction" title="12.3.6. SET TRANSACTION Syntax"><code class="literal">SET
        TRANSACTION ISOLATION LEVEL</code></a> to set the isolation level
        for the next transaction, the session value of the
        <a href="server-administration.html#sysvar_tx_isolation"><code class="literal">tx_isolation</code></a> system variable
        could appear to change to the transaction isolation level after
        completion of statements within the transaction. Now the current
        transaction isolation level is now established at transaction
        start. If there was a
        <a href="sql-syntax.html#set-transaction" title="12.3.6. SET TRANSACTION Syntax"><code class="literal">SET TRANSACTION
        ISOLATION LEVEL statement</code></a>, the value is taken from it.
        Otherwise, the session
        <a href="server-administration.html#sysvar_tx_isolation"><code class="literal">tx_isolation</code></a> value is used. A
        change in the session value while a transaction is active is
        still permitted, but no longer affects the current transaction
        isolation level. This is an incompatible change. A change in the
        session isolation level made while there is no active
        transaction overrides a
        <a href="sql-syntax.html#set-transaction" title="12.3.6. SET TRANSACTION Syntax"><code class="literal">SET TRANSACTION
        ISOLATION LEVEL</code></a> statement, if there was any.
       (Bug #20837)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        It was possible to set
        <a href="server-administration.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a> with session scope
        inside a transaction or subquery.
       (Bug #53437)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        When changing <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> or
        <a href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>,
        permissions were not checked prior to checking the scope and
        context of the variable being changed.
      </p><p>
        As a result of this fix, an error is no longer reported
        when—in the context of a transaction or a stored
        function—you try to set a value for a session variable
        that is the same as its previous value, or for a variable whose
        scope is global only.
       (Bug #51277)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        When invoked, <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
        and <a href="sql-syntax.html#set-global-sql-slave-skip-counter" title="12.4.2.4. SET GLOBAL sql_slave_skip_counter Syntax"><code class="literal">SET GLOBAL
        sql_slave_skip_counter</code></a> now cause information to be
        written to the error log about the slave's state prior to
        execution of the statement. For <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE
        MASTER TO</code></a>, this information includes the previous
        values of <code class="literal">MASTER_HOST</code>,
        <code class="literal">MASTER_PORT</code>,
        <code class="literal">MASTER_LOG_FILE</code>, and
        <code class="literal">MASTER_LOG_POS</code>. For <a href="sql-syntax.html#set-global-sql-slave-skip-counter" title="12.4.2.4. SET GLOBAL sql_slave_skip_counter Syntax"><code class="literal">SET
        GLOBAL sql_slave_skip_counter</code></a>, this information
        includes the previous values of
        <code class="literal">RELAY_LOG_FILE</code>,
        <code class="literal">RELAY_LOG_POS</code>, and
        <a href="replication.html#sysvar_sql_slave_skip_counter"><code class="literal">sql_slave_skip_counter</code></a>.
       (Bug #43406, Bug #43407)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        When using fast <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
        different internal ordering of indexes in the MySQL optimizer
        and the <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage engine could
        cause error messages about possibly mixed up
        <code class="filename">.frm</code> files and incorrect index use.
       (Bug #47622)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> performed on a
        temporary table using the <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        storage engine was logged even when using row-based mode.
       (Bug #51251)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Reading from a table that used a self-logging storage engine and
        updating a table that used a transactional engine (such as
        <code class="literal">InnoDB</code>) generated changes that were written
        to the binary log using statement format which could make slaves
        diverge. However, when using mixed logging format, such changes
        should be written to the binary log using row format. (This
        issue did not occur when reading from tables using a
        self-logging engine and updating <code class="literal">MyISAM</code>
        tables, as this was already handled by checking for combinations
        of nontransactional and transactional engines.) Now such
        statements are classified as unsafe, and in mixed mode, cause a
        switch to row-based logging.
       (Bug #49019)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash with a message <code class="literal">InnoDB: Assertion
        failure in thread <em class="replaceable"><code>nnnn</code></em></code>,
        typically during shutdown on a Windows system.
       (Bug #53947)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Some combinations of <code class="literal">SELECT</code> and
        <code class="literal">SELECT FOR UPDATE</code> statements could fail with
        errors about locks, or incorrectly release a row lock during a
        <a href="http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_semi_consistent_read" target="_top">semi-consistent
        read</a> operation.
       (Bug #53674)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Adding a unique key on multiple columns, where one of the
        columns is <code class="literal">NULL</code>, could mistakenly report
        duplicate key errors.
       (Bug #53290)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Fixed a checksum error reported for compressed tables when the
        <code class="literal">--innodb_checksums</code> option is enabled.
        Although the message stated that the table was corrupted, the
        table is actually fine.
       (Bug #53248)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When reporting a foreign key constraint violation during
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> could display uninitialized
        data for the <code class="literal">DB_TRX_ID</code> and
        <code class="literal">DB_ROLL_PTR</code> system columns.
       (Bug #53202)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The values of <code class="literal">innodb_buffer_pool_pages_total</code>
        and <code class="literal">innodb_buffer_pool_pages_misc</code> in the
        <code class="literal">information_schema.global_status</code> table could
        be computed incorrectly.
       (Bug #52983)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> page splitting could enter
        an infinite loop for compressed tables.
       (Bug #52964)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        An overly strict assertion could fail during the purge of
        delete-marked records in <code class="literal">DYNAMIC</code> or
        <code class="literal">COMPRESSED</code>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables that contain column
        prefix indexes.
       (Bug #52746)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> attempted to choose off-page
        storage without ensuring that there was an “<span class="quote">off-page
        storage</span>” flag in the record header. To correct this, in
        <code class="literal">DYNAMIC</code> and <code class="literal">COMPRESSED</code>
        formats, <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> stores locally any
        non-<a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns having a maximum
        length not exceeding 256 bytes. This is because there is no room
        for the “<span class="quote">external storage</span>” flag when the maximum
        length is 255 bytes or less. This restriction trivially holds in
        <code class="literal">REDUNDANT</code> and <code class="literal">COMPACT</code>
        formats, because there <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        always stores locally columns having a length up to
        <code class="literal">local_len</code> = 788 bytes.
       (Bug #52745)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The server could crash during shutdown, if started with the
        option
        <a href="storage-engines.html#sysvar_innodb_use_sys_malloc"><code class="literal">--innodb_use_sys_malloc=0</code></a>.
       (Bug #52546)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Connections waiting for an <code class="literal">InnoDB</code> row lock
        ignored <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> until the row lock
        wait ended. Now, <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> during lock
        wait results in “<span class="quote">query interrupted</span>” instead of
        “<span class="quote">lock wait timeout exceeded</span>”. The corresponding
        transaction is rolled back.
       (Bug #51920)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> checks to see whether a row could
        possibly exceed the maximum size if all columns are fully used.
        This produced <code class="literal">Row size too large</code> errors for
        some tables that could be created with the built-in
        <code class="literal">InnoDB</code> from older MySQL versions. Now the
        check is only done when
        <a href="storage-engines.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a> is enabled
        or if the table is dynamic or compressed.
       (Bug #50495)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Multi-statement execution could fail with an error about foreign
        key constraints. This problem could affect calls to
        <code class="literal">mysql_query()</code> and
        <code class="literal">mysql_real_query()</code>, and
        <code class="literal">CALL</code> statements that invoke stored
        procedures.
       (Bug #48024)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        A mismatch between index information maintained within the
        <code class="literal">.frm</code> files and the corresponding information
        in the InnoDB system tablespace could produce this error:
        <code class="literal">[ERROR] Index <em class="replaceable"><code>index</code></em> of
        <em class="replaceable"><code>table</code></em> has
        <em class="replaceable"><code>n</code></em> columns unique inside InnoDB, but
        MySQL is asking statistics for <em class="replaceable"><code>m</code></em>
        columns. Have you mixed up .frm files from different
        installations?</code>
       (Bug #44571)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Attempting to execute <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a>
        on a partitioned <code class="literal">MyISAM</code> table while using
        statement-based logging mode caused the master to hang or crash.
       (Bug #51851)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The <a href="server-administration.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a> server
        SQL mode was not enforced when defining subpartitions. In
        certain cases, this could lead to failures on replication
        slaves.
       (Bug #42954)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Rows inserted into a table created using a <code class="literal">PARTITION BY
        LIST COLUMNS</code> option referencing multiple columns could
        be inserted into the wrong partition.
       (Bug #52815)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Partition pruning on <code class="literal">RANGE</code> partitioned tables
        did not always work correctly; the last partition was not
        excluded if the range was beyond it (when not using
        <code class="literal">MAXVALUE</code>). Now the last partition is not
        included if the partitioning function value is not within the
        range.
       (Bug #51830)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Attempting to partition a table using a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> column caused the server
        to crash; this was not supported and is now specifically not
        permitted.
       (Bug #51347)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE</code></a> statements that cause table partitions to be
        renamed or dropped (such as <code class="literal">ALTER TABLE ... ADD
        PARTITION</code>, <code class="literal">ALTER TABLE ... DROP
        PARTITION</code>, and <code class="literal">ALTER TABLE ... REORGANIZE
        PARTITION</code>) — when run concurrently with queries
        against the
        <a href="information-schema.html#partitions-table" title="19.13. The INFORMATION_SCHEMA PARTITIONS Table"><code class="literal">INFORMATION_SCHEMA.PARTITIONS</code></a> table
        — could fail, cause the affected partitioned tables to
        become unusable, or both. This was due to the fact that the
        <code class="literal">INFORMATION_SCHEMA</code> database ignored the name
        lock imposed by the <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
        statement on the partitions affected. In particular, this led to
        problems with <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables,
        because <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> would accept the
        rename operation, but put it in a background queue, so that
        subsequent rename operations failed when
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> was unable to find the
        correct partition. Now, <code class="literal">INFORMATION_SCHEMA</code>
        honors name locks imposed by ongoing <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statements that cause partitions to be renamed
        or dropped.
       (Bug #50561)</p><p>References: See also Bug #47343, Bug #45808.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        The <a href="server-administration.html#sysvar_insert_id"><code class="literal">insert_id</code></a> server system
        variable was not reset following an insert that failed on a
        partitioned <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table having an
        <code class="literal">AUTO_INCREMENT</code> column.
       (Bug #50392)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Foreign keys are not supported on partitioned tables. However,
        it was possible using an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement to set a foreign key on a partitioned
        table; it was also possible to partition a table with a single
        foreign key.
       (Bug #50104)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        It was possible to execute a <code class="literal">CREATE TEMPORARY TABLE tmp
        LIKE pt</code> statement, where <code class="literal">pt</code> is a
        partitioned table, even though partitioned temporary tables are
        not permitted. This caused the server to crash. Now a check is
        performed to prevent such statements from being executed.
       (Bug #49477)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When attempting to perform DDL on a partitioned table and the
        table's <code class="filename">.par</code> file could not be found,
        the server returned the inaccurate error message <span class="errortext">Out
        of memory; restart server and try again (needed 2
        bytes)</span>. Now in such cases, the server returns the
        error <span class="errortext">Failed to initialize partitions from .par
        file</span>.
       (Bug #49161)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">GROUP BY</code> queries performed poorly for some
        partitioned tables. This was due to the block size not being set
        for partitioned tables, thus the keys per block was not correct,
        which could cause such queries to be optimized incorrectly.
       (Bug #48229)</p><p>References: See also Bug #37252.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#repair-table" title="12.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> failed for
        partitioned <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine"><code class="literal">ARCHIVE</code></a> tables.
       (Bug #46565)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using unique keys on <code class="literal">NULL</code> columns in
        row-based replication, the slave sometimes chose the wrong row
        when performing an update. This happened because a table having
        a unique key on such a column could have multiple rows
        containing <code class="literal">NULL</code> for the column used by the
        unique key, and the slave merely picked the first row containing
        <code class="literal">NULL</code> in that column.
       (Bug #53893)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TEMPORARY TABLE ... SELECT</code></a> statement was executed
        within a transaction that updated only transactional engines and
        was later rolled back (for example, due to a deadlock) the
        changes—including the creation of the temporary
        table—were not written to the binary log, which caused
        subsequent updates to this table to fail on the slave.
       (Bug #53421)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the statement-based logging format, statements that
        used <a href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> were always
        kept in the transaction cache; consequently, nontransactional
        changes that should have been flushed before the transaction
        were kept in the transaction cache.
       (Bug #53075)</p><p>References: This bug was introduced by Bug #51894.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        In some cases, attempting to update a column with a value of an
        incompatible type resulted in a mismatch between master and
        slave because the column value was set to its implicit default
        value on the master (as expected), but the same column on the
        slave was set to <code class="literal">NULL</code>.
       (Bug #52868)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        ACK packets in semisynchronous replication were not checked for
        length and malformed packets could cause a server crash.
       (Bug #52748)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When temporary tables were in use, switching the binary logging
        format from <code class="literal">STATEMENT</code> to
        <code class="literal">ROW</code> did not take effect until all temporary
        tables were dropped. (The existence of temporary tables should
        prevent switching the format only from <code class="literal">ROW</code> to
        <code class="literal">STATEMENT</code> from taking effect, not the
        reverse.)
       (Bug #52616)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A buffer overrun in the handling of
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> column values could cause
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> to fail when reading logs
        containing certain combinations of DML statements on a table
        having a <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> column followed by
        dropping the table.
       (Bug #52202)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The failure of a <a href="sql-syntax.html#revoke" title="12.7.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statement
        was logged with the wrong error code, causing replication slaves
        to stop even when the failure was expected on the master.
       (Bug #51987)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Issuing any DML on a temporary table <code class="literal">temp</code>
        followed by <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP
        TEMPORARY TABLE temp</code></a>, both within the same
        transaction, caused replication to fail.
      </p><p>
        The fix introduces a change to statement-based binary logging
        with respect to temporary tables. Within a transaction, changes
        to temporary tables are saved to the transaction cache and
        written to the binary log when the transaction commits.
        Otherwise, out-of-order logging of events could occur. This
        means that temporary tables are treated similar to transactional
        tables for purposes of caching and logging. This affects
        assessment of statements as safe or unsafe and the associated
        error message was changed from:
      </p><pre class="programlisting">Unsafe statement written to the binary log using statement format
since BINLOG_FORMAT = STATEMENT. Statements that read from both
transactional and non-transactional tables and write to any of them
are unsafe.</pre><p>
        To:
      </p><pre class="programlisting">Unsafe statement written to the binary log using statement format
since BINLOG_FORMAT = STATEMENT. Statements that read from both
transactional (or a temporary table of any engine type) and
non-transactional tables and write to any of them are unsafe.</pre><p>(Bug #51894)</p><p>References: See also Bug #51291, Bug #53075, Bug #53259, Bug #53452, Bug #54872. This bug was introduced by Bug #46364.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The internal flag indicating whether a user value was signed or
        unsigned (<code class="literal">unsigned_flag</code>) could sometimes
        change between the time that the user value was recorded for
        logging purposes and the time that the value was actually
        written to the binary log, which could lead to inconsistency.
        Now <code class="literal">unsigned_flag</code> is copied when the user
        variable value is copied, and the copy of
        <code class="literal">unsigned_flag</code> is then used for logging.
       (Bug #51426, Bug #11759138)</p><p>References: See also Bug #49562, Bug #11757508.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Enabling
        <a href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
        causes nontransactional changes to be written to the binary log
        upon committing the statement. However, even when not enabled,
        the addition of this variable introduced a number of undesired
        changes in behavior:
      </p><div class="orderedlist"><ol type="1"><li><p>
            When using <code class="literal">ROW</code> or
            <code class="literal">MIXED</code> logging mode: Nontransactional
            changes executed within a transaction prior to any
            transactional changes were written to the statement cache,
            but those following any transactional changes were written
            to the transactional cache instead, causing these (later)
            nontransactional changes to be lost.
          </p></li><li><p>
            When using <code class="literal">ROW</code> or
            <code class="literal">MIXED</code> logging mode: When rolling back a
            transaction, any nontransactional changes that might be in
            the transaction cache were disregarded and truncated along
            with the transactional changes.
          </p></li><li><p>
            When using <code class="literal">STATEMENT</code> logging mode: A
            statement that combined transactional and nontransactional
            changes prior to any other transactional changes within the
            transaction, but failed, was kept in the transactional cache
            until the transaction ended, rather than being written to
            the binary log at the instant of failure (and not deferred
            to the end of the transaction).
          </p></li></ol></div><p>
        These problems have been handled as follows:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The setting for
            <a href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            no longer has any effect when the value of
            <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is either
            <code class="literal">ROW</code> or <code class="literal">MIXED</code>. This
            addresses the first two issues previously listed.
          </p></li><li><p>
            When using statement-based logging with
            <a href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            set to <code class="literal">ON</code>, any statement combining
            transactional and nontransactional changes within the same
            transaction is now stored in the transaction cache, whether
            or not it succeeds, and regardless of its order of execution
            among any transactional statements within that transaction.
            This means that such a statement is now written to the
            binary log only on transaction commit or rollback.
          </p></li></ul></div><p>(Bug #51291)</p><p>References: This bug was introduced by Bug #46364.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using temporary tables, the binary log needs to insert a
        pseudo-thread ID for threads that are using temporary tables,
        each time a switch happens between two threads, both of which
        are using temporary tables. However, if a thread issued a
        failing statement before exit, its ID was not recorded in the
        binary log, and this in turn caused the ID for the next thread
        that tried to do something with a temporary table not to be
        logged as well. Subsequent replays of the binary log failed with
        the error <span class="errortext">Table ... doesn't exist</span>.
       (Bug #51226)</p><p>References: This bug is a regression of Bug #35583.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If the master was using
        <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode='TRADITIONAL'</code></a>,
        duplicate key errors were not sent to the slave, which received
        <code class="literal">0</code> rather than the expected error code. This
        caused replication to fail even when such an error was expected.
       (Bug #51055)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        DDL statements that lock tables (such as
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
        <a href="sql-syntax.html#create-index" title="12.1.13. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>, and
        <a href="sql-syntax.html#create-trigger" title="12.1.19. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a>) caused spurious
        <span class="errorcode">ER_BINLOG_ROW_MODE_AND_STMT_ENGINE</span> or
        <span class="errorcode">ER_BINLOG_STMT_MODE_AND_ROW_ENGINE</span>
        errors, even though they did not insert rows into any tables.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          The error
          <span class="errorcode">ER_BINLOG_ROW_MODE_AND_STMT_ENGINE</span> is
          generated when
          <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=ROW</code></a> and a
          statement modifies a table restricted to statement-based
          logging;
          <span class="errorcode">ER_BINLOG_STMT_MODE_AND_ROW_ENGINE</span> is
          generated when
          <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=STATEMENT</code></a> and a
          statement modifies a table restricted to row-based logging.
        </p></div><p>(Bug #50479)</p><p>References: This bug was introduced by Bug #39934, Bug #11749859.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When run with the <a href="programs.html#option_mysqlbinlog_database"><code class="option">--database</code></a>
        option, <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> printed
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
        statements but did not print any corresponding
        <a href="sql-syntax.html#savepoint" title="12.3.4. SAVEPOINT and
      ROLLBACK TO
      SAVEPOINT Syntax"><code class="literal">SAVEPOINT</code></a> statements.
       (Bug #50407)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a <a href="sql-syntax.html#create-event" title="12.1.11. CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a> statement was
        followed by an additional statement and the statements were
        executed together as a single statement, the
        <a href="sql-syntax.html#create-event" title="12.1.11. CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a> statement was padded
        with “<span class="quote">garbage</span>” characters when written to the
        binary log. This led to a syntax error when the event was read
        from the log.
       (Bug #50095)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using a nontransactional table on the master with
        autocommit disabled, no <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>
        was recorded in the binary log following a statement affecting
        this table. If the slave's copy of the table used a
        transactional storage engine, the result on the slave was as
        though a transaction had been started, but never completed.
       (Bug #49522)</p><p>References: See also Bug #29288.</p></li><li><p>
        The <code class="option">make_binary_distribution</code> target to
        <span><strong class="command">make</strong></span> could fail on some platforms because the
        lines generated were too long for the shell.
       (Bug #54590)</p></li><li><p>
        Inconsistent checking of the relationship between
        <a href="sql-syntax.html#show" title="12.7.5. SHOW Syntax"><code class="literal">SHOW</code></a> statements and
        <code class="literal">INFORMATION_SCHEMA</code> queries caused such
        queries to fail sometimes.
       (Bug #54422)</p></li><li><p>
        A crash occurred if a table that was locked with
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> was listed twice in a
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> statement.
       (Bug #54282)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> for views is not
        legal but did not produce an error. (If you need to rename a
        view, use <a href="sql-syntax.html#rename-table" title="12.1.32. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a>.)
       (Bug #53976)</p></li><li><p>
        Valgrind warnings resulting from passing incomplete
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> values to the
        <a href="functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a> function were
        corrected.
       (Bug #53942)</p></li><li><p>
        Builds of the embedded <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> failed due to a
        missing element of the <code class="literal">struct NET</code>.
       (Bug #53908, Bug #53912)</p></li><li><p>
        The definition of the <code class="literal">MY_INIT</code> macro in
        <code class="filename">my_sys.h</code> included an extraneous semicolon,
        which could cause compilation failure.
       (Bug #53906)</p></li><li><p>
        Queries that used <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> on indexed columns could be
        optimized incorrectly.
       (Bug #53859)</p></li><li><p>
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> on an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table modifying the same
        index that was used to satisfy the <code class="literal">WHERE</code>
        condition could trigger a debug assertion under some
        circumstances.
       (Bug #53830)</p></li><li><p>
        MySQL incorrectly processed
        <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER DATABASE
        `#mysql50#<em class="replaceable"><code>special</code></em>` UPGRADE DATA
        DIRECTORY NAME</code></a> where
        <em class="replaceable"><code>special</code></em> was <code class="literal">.</code>,
        <code class="literal">..</code>, or a sequence starting with
        <code class="literal">./</code> or <code class="literal">../</code>. It used the
        server data directory (which contains other regular databases)
        as the database directory.
       (Bug #53804, CVE-2010-2008)</p></li><li><p>
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> could be run on a
        table in use by a transaction in a different session, causing
        repeatable read to break.
       (Bug #53798)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> crashed when replacing
        duplicates in a table after a fast <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> added a unique index.
       (Bug #53592)</p></li><li><p>
        For <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables, the error
        handler for a fast <a href="sql-syntax.html#create-index" title="12.1.13. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>
        did not reset the error state of the transaction before
        attempting to undo a failed operation, resulting in a crash.
       (Bug #53591)</p></li><li><p>
        For single-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>
        statements that used quick select and index scan simultaneously
        caused a server crash or assertion failure.
       (Bug #53450)</p></li><li><p>
        Certain path names passed to
        <a href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a> could cause a server
        crash.
       (Bug #53417)</p></li><li><p>
        If the <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> session
        variable was changed after a stored procedure or prepared
        statement had been cached, the change had no effect on
        subsequent executions of the procedure or statement.
       (Bug #53346)</p></li><li><p>
        The <code class="literal">AND CHAIN</code> option for
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> and
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
        failed to preserve the current transaction isolation level.
        Setting <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> to 1
        also failed to do so.
       (Bug #53343)</p></li><li><p>
        Incorrect results could be returned for <code class="literal">LEFT
        JOIN</code> of <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables
        with an impossible <code class="literal">WHERE</code> condition.
       (Bug #53334)</p></li><li><p>
        The <code class="literal">Lock_time</code> value in the slow query log was
        negative for stored routines.
       (Bug #53191)</p></li><li><p>
        Setting the
        <a href="storage-engines.html#sysvar_innodb_change_buffering"><code class="literal">innodb_change_buffering</code></a> system
        variable to <code class="literal">DEFAULT</code> produced an incorrect
        result.
       (Bug #53165)</p></li><li><p>
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> and
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT ... INTO
        OUTFILE</code></a> truncated long
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> and
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> values to 766 bytes.
       (Bug #53088)</p></li><li><p>
        On some systems, such as Mac OS X, the
        <code class="literal">sockaddr_in</code> and
        <code class="literal">sockaddr_in6</code> structures contain a
        non-standard field (<code class="literal">sin_len</code> /
        <code class="literal">sin6_len</code>) that must be set but was not. This
        resulted in hostname lookup failure.
       (Bug #52923)</p></li><li><p>
        In the debug version of the server, the
        <code class="literal">FreeState()</code> function could in some
        circumstances be called twice, leading to an assertion failure.
       (Bug #52884)</p></li><li><p>
        Concurrent <a href="sql-syntax.html#show-columns" title="12.7.5.6. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a>
        statements could cause a server crash.
       (Bug #52856)</p></li><li><p>
        With a non-<code class="literal">latin1</code> ASCII-based current
        character set, the server inappropriately converted
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> values to strings. This
        resulted in the optimizer not using indexes on such columns.
       (Bug #52849)</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> set
        <a href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> using a hardcoded
        default path name rather than a path depending on
        <a href="server-administration.html#sysvar_basedir"><code class="literal">basedir</code></a>.
       (Bug #52737)</p></li><li><p>
        Semi-consistent read was implemented for
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> to address Bug #3300.
        Semi-consistent reads do not block when a nonmatching record is
        already locked by some other transaction. If the record is not
        locked, a lock is acquired, but is released if the record does
        not match the <code class="literal">WHERE</code> condition. However,
        semi-consistent read was attempted even for
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements having a
        <code class="literal">WHERE</code> condition of the form
        <code class="literal">pk_col1=constant1, ..., pk_colN=constantN</code>.
        Some code failed that was designed with the assumption that
        semi-consistent read would be only attempted on table scans.
       (Bug #52663)</p></li><li><p>
        Setting
        <a href="server-administration.html#sysvar_debug"><code class="literal">@@GLOBAL.debug</code></a>
        to an empty string failed to clear the current debug settings.
       (Bug #52629)</p></li><li><p>
        <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> was blocked if
        the table was write locked by another session.
       (Bug #52593)</p></li><li><p>
        The <code class="literal">length</code> and <code class="literal">max_length</code>
        metadata values were incorrect for columns with the
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> family of data types that
        used multibyte character sets. This bug was introduced in MySQL
        5.5.3.
       (Bug #52520)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> attempted to work with stored
        routines before they were available.
       (Bug #52444)</p></li><li><p>
        The <code class="literal">check_table_is_closed()</code> debugging
        function did not protect access to the
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> open tables list, with the
        result that server crashes could occur during table drop or
        rename operations.
       (Bug #52432)</p></li><li><p>
        Spurious duplicate-key errors occurred for multiple-column
        indexes on <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> columns.
       (Bug #52430)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> crashed trying to resolve references to freed
        temporary table columns for
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> <code class="literal">ORDER
        BY</code> arguments.
       (Bug #52397)</p></li><li><p>
        During MySQL server installation using the MSI package on
        Windows, the <code class="literal">default-character-set</code> option
        would be included in the default configuration template file.
        This caused the MySQL server to fail to start properly.
       (Bug #52380)</p></li><li><p>
        Two sessions trying to set the global
        <a href="server-administration.html#sysvar_event_scheduler"><code class="literal">event_scheduler</code></a> system variable
        to <code class="literal">OFF</code> resulted in one of them hanging
        waiting for the event scheduler to stop.
       (Bug #52367)</p></li><li><p>
        There was a race condition between flags used for signaling that
        a query was killed, which led to error-reporting and
        lock-acquisition problems.
       (Bug #52356)</p></li><li><p>
        For a concurrent load of 16 or more connections containing many
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES
        WRITE</code></a> statements for the same table, server throughput
        was significantly lower for MySQL 5.5.3 and 5.5.4 than for
        earlier versions (10%–40% lower depending on concurrency).
       (Bug #52289)</p></li><li><p>
        Operations on geometry data types failed on some systems for
        builds compiled with Sun Studio.
       (Bug #52208)</p></li><li><p>
        The optimizer could attempt to evaluate the
        <code class="literal">WHERE</code> clause before any rows had been read,
        resulting in a server crash.
       (Bug #52177)</p></li><li><p>
        Cast operations on <code class="literal">NULL</code>
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values could cause server
        crashes or Valgrind warnings.
       (Bug #52168)</p></li><li><p>
        An assertion was raised as a result of a <code class="literal">NULL</code>
        string being passed to the <code class="literal">dtoa</code> code.
       (Bug #52165)</p></li><li><p>
        A memory leak occurred due to missing deallocation of the
        <code class="literal">comparators</code> array (a member of the
        <code class="literal">Arg_comparator</code> class).
       (Bug #52124)</p></li><li><p>
        For debug builds, creating a view containing a subquery that
        might require collation adjustment caused an assertion to be
        raised. For example, this could occur if some items had
        different collations but the result collation could be adjusted
        to the one of them.
       (Bug #52120)</p></li><li><p>
        Aggregate functions could incorrectly return
        <code class="literal">NULL</code> in outer join queries.
       (Bug #52051)</p></li><li><p>
        For outer joins, the optimizer could fail to properly calculate
        table dependencies.
       (Bug #52005)</p></li><li><p>
        A <a href="functions.html#function_count"><code class="literal">COUNT(DISTINCT)</code></a> query on a view
        could cause a server crash.
       (Bug #51980)</p></li><li><p>
        For LDML-defined collations, some data structures were not
        initialized properly to enable
        <a href="functions.html#function_upper"><code class="literal">UPPER()</code></a> and
        <a href="functions.html#function_lower"><code class="literal">LOWER()</code></a> to work correctly.
       (Bug #51976)</p></li><li><p>
        On Windows, <a href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a> could
        cause a crash for some pathnames.
       (Bug #51893)</p></li><li><p>
        Invalid memory reads occurred for
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER ... READ
        NEXT</code></a> after a failed
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER ... READ
        FIRST</code></a>.
       (Bug #51877)</p></li><li><p>
        After <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> of a
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table, subsequent queries
        could crash the server if
        <a href="server-administration.html#sysvar_myisam_use_mmap"><code class="literal">myisam_use_mmap</code></a> was enabled.
       (Bug #51868)</p></li><li><p>
        If <a href="server-administration.html#sysvar_myisam_sort_buffer_size"><code class="literal">myisam_sort_buffer_size</code></a> was
        set to a small value, table repair for
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables with
        <code class="literal">FULLTEXT</code> indexes could crash the server.
       (Bug #51866)</p></li><li><p>
        Stored routine DDL statements were written to the binary log
        using statement-based format regardless of the current logging
        format.
       (Bug #51839)</p></li><li><p>
        A problem with equality propagation optimization for prepared
        statements and stored procedures caused a server crash upon
        re-execution of the prepared statement or stored procedure.
       (Bug #51650)</p><p>References: See also Bug #8115, Bug #8849.</p></li><li><p>
        The optimizer performed an incorrect join type when
        <a href="functions.html#function_coalesce"><code class="literal">COALESCE()</code></a> appeared within an
        <a href="functions.html#function_in"><code class="literal">IN()</code></a> operation.
       (Bug #51598)</p></li><li><p>
        Locking involving the <code class="literal">LOCK_plugin</code>,
        <code class="literal">LOCK_global_system_variables</code>, and
        <code class="literal">LOCK_status</code> mutexes could deadlock.
       (Bug #51591)</p></li><li><p>
        Executing a <a href="sql-syntax.html#load-xml" title="12.2.7. LOAD XML Syntax"><code class="literal">LOAD XML
        INFILE</code></a> statement could sometimes lead to a server
        crash.
       (Bug #51571)</p></li><li><p>
        The server crashed when the optimizer attempted to determine
        constant tables but a table storage engine did not support exact
        record count.
       (Bug #51494)</p></li><li><p>
        The server could crash populating the
        <a href="information-schema.html#processlist-table" title="19.15. The INFORMATION_SCHEMA PROCESSLIST Table"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a>
        table due to lack of mutex protection.
       (Bug #51377)</p></li><li><p>
        Use of <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statements with
        tables that had spatial indexes caused a server crash.
       (Bug #51357)</p></li><li><p>
        With an XA transaction active,
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET autocommit =
        1</code></a> could cause side effects such as memory corruption
        or a server crash.
       (Bug #51342)</p></li><li><p>
        Corrupt <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables were
        automatically repaired even when
        <a href="server-administration.html#sysvar_myisam_recover_options"><code class="literal">myisam_recover_options</code></a> was set
        to <code class="option">OFF</code>.
       (Bug #51327)</p></li><li><p>
        Following a bulk insert into a
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table, if
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> failed to build indexes
        using repair by sort, data file corruption could occur.
       (Bug #51307)</p></li><li><p>
        <a href="sql-syntax.html#checksum-table" title="12.7.2.3. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM TABLE</code></a> could compute the
        checksum for <code class="literal">BIT</code> columns incorrectly.
       (Bug #51304)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables (including
        partitioned tables) acquired exclusive locks on rows of the
        table being altered. If there was a concurrent transaction that
        did locking reads from this table, this sometimes led to a
        deadlock that was not detected by the metadata lock subsystem or
        by InnoDB (and was reported only after exceeding
        <a href="storage-engines.html#sysvar_innodb_lock_wait_timeout"><code class="literal">innodb_lock_wait_timeout</code></a>).
       (Bug #51263)</p></li><li><p>
        A <code class="literal">HAVING</code> clause on a joined table in some
        cases failed to eliminate rows which should have been excluded
        from the result set.
       (Bug #51242)</p></li><li><p>
        Two sessions trying to set the global
        <a href="server-administration.html#sysvar_event_scheduler"><code class="literal">event_scheduler</code></a> system variable
        to different values could deadlock.
       (Bug #51160)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> fast index creation could
        incorrectly use a table copy in some cases.
       (Bug #50946)</p></li><li><p>
        The Loose Index Scan optimization method assumed that it could
        depend on the partitioning engine to maintain interval endpoint
        information, as if it were a storage engine.
       (Bug #50939)</p></li><li><p>
        The type inference used for view columns caused some columns in
        views to be handled as the wrong type, as compared to the same
        columns in base tables. <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>
        columns in base tables were treated as
        <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> columns in views, and base
        table <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> columns as view
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> columns.
       (Bug #50918)</p></li><li><p>
        A syntactically invalid trigger could cause the server to crash
        when trying to list triggers.
       (Bug #50755)</p></li><li><p>
        Previously, the server held a global mutex while performing file
        operations such as deleting an <code class="filename">.frm</code> or data
        file, or reading index statistics from a data file. Now the
        mutex is not held for these operations. Instead, the server uses
        metadata locks.
       (Bug #50589, Bug #51557, Bug #49463)</p></li><li><p>
        User-defined variables of type <code class="literal">REAL</code> that
        contained <code class="literal">NULL</code> were handled improperly when
        assigned to a column of another type.
       (Bug #50511)</p></li><li><p>
        Setting <a href="server-administration.html#option_mysqld_secure-file-priv"><code class="option">--secure-file-priv</code></a> to the
        empty string left the value unaffected.
       (Bug #50373)</p></li><li><p>
        Calculation of intervals for Event Scheduler events was not
        portable.
       (Bug #50087)</p></li><li><p>
        The <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> values
        <code class="literal">2000</code> and <code class="literal">0000</code> could be
        treated as equal.
       (Bug #49910)</p></li><li><p>
        Performing a single in-place <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> containing <code class="literal">ADD INDEX</code> and
        <code class="literal">DROP INDEX</code> options that used the same index
        name could result in a corrupt table definition file. Now such
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements are no
        longer performed in place.
       (Bug #49838)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> did not detect when
        <a href="storage-engines.html#csv-storage-engine" title="13.7. The CSV Storage Engine"><code class="literal">CSV</code></a> log tables incorrectly
        contained columns that could be <code class="literal">NULL</code>. Now
        these columns are altered to be <code class="literal">NOT NULL</code>.
       (Bug #49823)</p></li><li><p>
        <code class="filename">support-files/mysql.spec.sh</code> had unnecessary
        Perl dependencies.
       (Bug #49723)</p></li><li><p>
        Selecting from
        <a href="information-schema.html#routines-table" title="19.18. The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">INFORMATION_SCHEMA.ROUTINES</code></a> or
        <a href="information-schema.html#parameters-table" title="19.12. The INFORMATION_SCHEMA PARAMETERS Table"><code class="literal">INFORMATION_SCHEMA.PARAMETERS</code></a>
        resulted in a memory leak.
       (Bug #48729)</p></li><li><p>
        In MySQL 5.1, <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a>
        was changed to use less locking due to the availability of
        row-based binary logging (see the Note under
        <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a> at
        <a href="sql-syntax.html#set-transaction" title="12.3.6. SET TRANSACTION Syntax">Section 12.3.6, “<code class="literal">SET TRANSACTION</code> Syntax”</a>). However,
        <a href="sql-syntax.html#isolevel_read-uncommitted"><code class="literal">READ UNCOMMITTED</code></a> did not have
        the same change, so it was using more locks than the higher
        isolation level, which is unexpected. This was changed so that
        <a href="sql-syntax.html#isolevel_read-uncommitted"><code class="literal">READ UNCOMMITTED</code></a> now also
        uses the lesser amount of locking and has the same restrictions
        for binary logging.
       (Bug #48607)</p></li><li><p>
        On Intel x86 machines, the optimizer could choose different
        execution plans for a query depending on the compiler version
        and optimization flags used to build the server binary.
       (Bug #48537)</p></li><li><p>
        A trigger could change the behavior of assigning
        <code class="literal">NULL</code> to a <code class="literal">NOT NULL</code> column.
       (Bug #48525)</p></li><li><p>
        The server crashed when it could not determine the best
        execution plan for queries involving outer joins with
        nondeterministic <code class="literal">ON</code> clauses such as the ones
        containing the <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> function, a
        user-defined function, or a <code class="literal">NOT DETERMINISTIC</code>
        stored function.
       (Bug #48483)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> could cause a server
        crash for some queries with subqueries.
       (Bug #48419)</p></li><li><p>
        The <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> engine failed to open a
        child table from a different database if the child table or
        database name contained characters that were subject to table
        name to file name encoding.
      </p><p>
        Further, the <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> engine did not
        properly open a child table from the same database if the child
        table name contained characters such as <code class="literal">'/'</code>,
        or <code class="literal">'#'</code>.
       (Bug #48265)</p></li><li><p>
        On Windows, the server failed to find a description for Event ID
        100.
       (Bug #48042)</p></li><li><p>
        A query that read from a derived table (of the form
        <code class="literal">SELECT ... FROM (SELECT ...)</code>) produced
        incorrect results when the following conditions were present:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The table subquery contained a derived query
            (<code class="literal">(SELECT ...) AS
            <em class="replaceable"><code>column</code></em></code>).
          </p></li><li><p>
            The derived query could potentially produce zero rows or a
            single <code class="literal">NULL</code> (that is, no rows matched, or
            the query used an aggregate function such as
            <a href="functions.html#function_sum"><code class="literal">SUM()</code></a> running over zero
            rows).
          </p></li><li><p>
            The table subquery joined at least two tables.
          </p></li><li><p>
            The join condition involved an index.
          </p></li></ul></div><p>(Bug #47904)</p></li><li><p>
        The optimization to read <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> values from an index did
        not properly handle comparisons with <code class="literal">NULL</code>
        values. This could produce incorrect results for
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a>when the
        <code class="literal">WHERE</code> clause tested a <code class="literal">NOT
        NULL</code> column for <code class="literal">NULL</code>.
       (Bug #47762)</p></li><li><p>
        Killing a query during the optimization phase of a subquery
        could cause a server crash.
       (Bug #47761)</p></li><li><p>
        Using <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a> to update a
        previously inserted negative value in an
        <code class="literal">AUTO_INCREMENT</code> coumn of an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table caused the table
        auto-increment value to be updated to 2147483647.
       (Bug #47720)</p></li><li><p>
        The query shown by
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> plus <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW
        WARNINGS</code></a> could produce results different from the
        original query.
       (Bug #47669)</p></li><li><p>
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> could write uninitialized
        data to new index pages. Now zeros are written to unused bytes
        in the pages.
       (Bug #47598)</p></li><li><p>
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> for an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table could raise an
        assertion if another session issued a concurrent
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>.
       (Bug #47459)</p></li><li><p>
        For updates to <code class="literal">InnoDB</code> tables,
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns could be
        updated even when no values actually changed.
       (Bug #47453)</p></li><li><p>
        Setting <a href="server-administration.html#sysvar_myisam_repair_threads"><code class="literal">myisam_repair_threads</code></a>
        larger than 1 could result in the cardinality for all indexes of
        a <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table being set to 1 after
        parallel index repair.
       (Bug #47444)</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> did not always pass
        <a href="programs.html#option_mysqld_safe_open-files-limit"><code class="option">--open-files-limit</code></a> through
        to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> did
        not treat dashes and underscores as equivalent in option names.
       (Bug #47095)</p></li><li><p>
        When the transaction isolation level was
        <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a> and binary
        logging used statement or mixed format,
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements with subqueries
        referencing <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables
        unnecessarily acquired shared locks on rows in these tables.
       (Bug #46947)</p></li><li><p>
        In debug builds, if the listed columns in the view definition of
        the table used in an
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ...
        SELECT</code></a> statement mismatched, an assertion was raised
        in the query cache invalidation code following the failing
        statement.
       (Bug #46615)</p></li><li><p>
        For the <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> and
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
        statements, the <code class="literal">AND CHAIN</code> and
        <code class="literal">RELEASE</code> modifiers should be mutually
        exclusive, but the parser permitted both to be specified.
       (Bug #46527)</p></li><li><p>
        If the server is started with
        <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a>, plugin
        loading and unloading should be prohibited, but the server
        failed to reject <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>
        and <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> statements.
       (Bug #46261)</p></li><li><p>
        <span><strong class="command">gcc</strong></span> 4.4.0 could fail to compile
        <code class="filename">dtoa.c</code>.
       (Bug #45882)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE ... ADD
        COLUMN</code></a> for a table with multiple foreign keys caused a
        server crash.
       (Bug #45052)</p></li><li><p>
        Manual pages for a few little-used programs were missing from
        RPM packages.
       (Bug #44370)</p></li><li><p>
        Using an initial command with
        <a href="connectors-apis.html#mysql-options" title="21.9.3.49. mysql_options()"><code class="literal">mysql_options(..., MYSQL_INIT_COMMAND,
        ...)</code></a> that generated multiple result sets (such as a
        stored procedure or a multi-statement command) left the
        connection unusable.
       (Bug #42373)</p></li><li><p>
        The server could crash with an out of memory error when trying
        to parse a query that was too long to fit in memory. Now the
        parser rejects such queries with an
        <a href="error-handling.html#error_er_out_of_resources"><code class="literal">ER_OUT_OF_RESOURCES</code></a> error.
       (Bug #42064)</p></li><li><p>
        <code class="literal">InnoDB</code> could fail to create a unique index on
        <code class="literal">NULL</code> columns.
       (Bug #41904)</p></li><li><p>
        For a query that selected from a view and used an alias for the
        view, the metadata used the alias name rather than the view name
        in the <code class="literal">MYSQL_FIELD.table</code> member.
       (Bug #41788)</p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> did not create temporary files
        properly.
       (Bug #41057)</p></li><li><p>
        It was possible for <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> of
        one <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table to remove the data
        and index files of a different
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table.
       (Bug #40980)</p></li><li><p>
        If the arguments to a <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>
        call included a local routine variable, selecting the return
        value into a user variable could produce an incorrect result.
       (Bug #40625)</p></li><li><p>
        Column names displayed from the
        <code class="literal">PARTITION_EXPRESSION</code> column of the
        <a href="information-schema.html#partitions-table" title="19.13. The INFORMATION_SCHEMA PARTITIONS Table"><code class="literal">INFORMATION_SCHEMA.PARTITIONS</code></a> table
        did not include escape characters as necessary.
       (Bug #39338)</p></li><li><p>
        When <a href="sql-syntax.html#set-transaction" title="12.3.6. SET TRANSACTION Syntax"><code class="literal">SET
        TRANSACTION ISOLATION LEVEL</code></a> was used to set the
        isolation level for the next transaction, the level could
        persist for subsequent transactions.
       (Bug #39170)</p></li><li><p>
        When using <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> to
        remove a loaded plugin, open tables and connections caused
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to hang until the open connections had
        been closed.
       (Bug #39053)</p></li><li><p>
        Valgrind warnings in the <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        <code class="literal">compare_record()</code> function were corrected.
       (Bug #38999)</p></li><li><p>
        The optimizer sometimes used <code class="literal">filesort</code> for
        <code class="literal">ORDER BY</code> when it should have used an index.
       (Bug #38745)</p></li><li><p>
        Setting the session value of the
        <a href="server-administration.html#sysvar_debug"><code class="literal">debug</code></a> system variable also set
        the global value.
       (Bug #38054)</p></li><li><p>
        Accessing a <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table with an
        empty underlying table list incorrectly resulted in a
        “<span class="quote">wrong index</span>” error message rather than “<span class="quote">end
        of file.</span>”
       (Bug #35274)</p></li><li><p>
        The test for <code class="literal">readline</code> during configuration
        failed when trying to build MySQL in a directory other than the
        source tree root.
       (Bug #35250)</p></li><li><p>
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> could fail during execution when using
        SSL.
       (Bug #34236)</p></li><li><p>
        A query on a <code class="literal">FEDERATED</code> table in which the
        data was ordered by a <code class="literal">TEXT</code> column returned
        incorrect results. For example, a query such as the following
        produced incorrect results if column <code class="literal">column1</code>
        was a <code class="literal">TEXT</code> column:
      </p><pre class="programlisting">SELECT * FROM table1 ORDER BY column1;</pre><p>(Bug #32426)</p></li><li><p>
        MySQL Makefiles relied on GNU extensions.
       (Bug #30708)</p></li><li><p>
        The parser allocated too much memory for a query string
        containing multiple statements.
       (Bug #27863)</p></li><li><p>
        The behavior of the RPM installation for both new installations
        and upgrade installations has changed.
      </p><p>
        During a new installation, the server boot scripts are
        installed, but the MySQL server is not started at the end of the
        installation, since the status of the system during an
        unattended installation is not known.
      </p><p>
        During an upgrade installation using the RPM packages, if the
        server is running when the upgrade occurs, the server is
        stopped, the upgrade occurs, and server is restarted. If the
        server is not already running when the RPM upgrade occurs, the
        server is not started at the end of the installation.
      </p><p>
        The boot scripts for MySQL are installed in the appropriate
        directories in <code class="filename">/etc</code>, so the MySQL server
        will be restarted automatically at the next machine reboot.
       (Bug #27072)</p></li><li><p>
        <code class="literal">ROW_COUNT()</code> returned a meaningful value only
        for some DML statements. Now it returns a value as follows:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            DDL statements: 0. This applies to statements such as
            <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
            <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>.
          </p></li><li><p>
            DML statements other than
            <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>: The number of
            affected rows. This applies to statements such as
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, or
            <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> (as before), but now
            also to statements such as <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> and
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
            INFILE</code></a>.
          </p></li><li><p>
            <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>: -1 if the statement
            returns a result set, or the number of rows
            “<span class="quote">affected</span>” if it does not. For example, for
            <code class="literal">SELECT * FROM t1</code>,
            <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> returns -1. For
            <code class="literal">SELECT * FROM t1 INTO OUTFILE
            '<em class="replaceable"><code>file_name</code></em>'</code>,
            <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> returns the
            number of rows written to the file.
          </p></li><li><p>
            <a href="sql-syntax.html#signal" title="12.6.7.4. SIGNAL Syntax"><code class="literal">SIGNAL</code></a> statements: 0.
          </p></li></ul></div><p>(Bug #21818)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-4"></a>D.1.19. Changes in MySQL 5.5.4 (09 April 2010)</h3></div></div></div><p><span class="bold"><strong>RPM Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">debuginfo</code> RPM packages are no longer being
        built or published.
      </p></li></ul></div><p><span class="bold"><strong>InnoDB Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">InnoDB</code> has been upgraded to version 1.1. This
        version is considered of Beta quality.
      </p><p>
        For information about <code class="literal">InnoDB</code> features, see
        <a href="storage-engines.html#innodb-5-5" title="13.4. New Features of InnoDB 1.1">Section 13.4, “New Features of InnoDB 1.1”</a>. For general information about
        using <code class="literal">InnoDB</code> in MySQL, see
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine">Section 13.3, “The <code class="literal">InnoDB</code> Storage Engine”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> now has a
        <a href="storage-engines.html#sysvar_innodb_use_native_aio"><code class="literal">innodb_use_native_aio</code></a> system
        variable that can be disabled at startup if there is a problem
        with the asynchronous I/O subsystem in the OS. This variable
        applies to Linux systems only, where the MySQL server now has a
        dependency on the <code class="literal">libaio</code> library.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The redo scan during <code class="literal">InnoDB</code> recovery used
        excessive CPU. The efficiency of this scan was improved,
        significantly speeding up crash recovery.
       (Bug #49535, Bug #29847)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">InnoDB</code> page-freeing operations were made
        faster for compressed blocks, speeding up
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>, and other operations
        on compressed tables that free compressed blocks. One symptom of
        the older behavior could be 100% CPU use during these
        operations.
       (Bug #35077)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The AIX implementation of <code class="literal">readdir_r()</code> caused
        <code class="literal">InnoDB</code> errors.
       (Bug #50691)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        The limit of 1023 concurrent data-modifying transactions has
        been raised. The limit is now 128 × 1023 concurrent
        transactions that generate undo records. You can remove any
        workarounds that require changing the proper structure of your
        transactions, such as committing more frequently or delaying DML
        operations to the end of a transaction. See
        <a href="storage-engines.html#innodb-multiple-rollback-segments" title="13.4.7.19. Better Scalability with Multiple Rollback Segments">Section 13.4.7.19, “Better Scalability with Multiple Rollback Segments”</a>.
       (Bug #26590)</p></li><li><p>
        A unique index on a column prefix could not be upgraded to a
        primary index even if there was no primary index already
        defined.
       (Bug #51378)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> did not reset table
        <code class="literal">AUTO_INCREMENT</code> values to the last used values
        after a server restart.
       (Bug #49032)</p></li><li><p>
        When using the <code class="literal">EXAMPLE</code> storage engine, when
        the engine had been built as a plugin (instead of built in), and
        DTrace probes had been enabled during the build, loading the
        storage engine library failed due to a missing object table
        entry.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-3"></a>D.1.20. Changes in MySQL 5.5.3 (24 March 2010, Milestone 3)</h3></div></div></div><p><span class="bold"><strong>Performance Schema Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Server now includes the Performance Schema, a feature for
        monitoring server execution at a low level. The implementation
        uses the <a href="performance-schema.html" title="Chapter 20. MySQL Performance Schema"><code class="literal">PERFORMANCE_SCHEMA</code></a> storage
        engine and the <code class="literal">performance_schema</code> database.
        The Performance Schema focuses primarily on performance data.
        This differs from <code class="literal">INFORMATION_SCHEMA</code>, which
        serves for inspection of metadata. For more information, see
        <a href="performance-schema.html" title="Chapter 20. MySQL Performance Schema">Chapter 20, <i>MySQL Performance Schema</i></a>.
      </p><p>
        Performance Schema support is included in binary MySQL
        distributions but is disabled by default. To enable it, start
        the server with the
        <a href="performance-schema.html#sysvar_performance_schema"><code class="option">--performance_schema</code></a> option.
      </p><p>
        To create the <code class="literal">performance_schema</code> database if
        you are upgrading from an earlier release, run
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> and restart the server. See
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.7, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p></li></ul></div><p><span class="bold"><strong>InnoDB Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        This release includes <code class="literal">InnoDB</code> 1.0.6. This
        version is considered of Release Candidate (RC) quality.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Performance</strong></span>: 
        The performance of internal functions that trim multiple spaces
        from strings when comparing them has been improved.
       (Bug #14637)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <a href="sql-syntax.html#create-view" title="12.1.20. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> and
        <a href="sql-syntax.html#drop-view" title="12.1.31. DROP VIEW Syntax"><code class="literal">DROP VIEW</code></a> now are prohibited
        while a <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> statement is
        in effect.
       (Bug #56571)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The following obsolete constructs have been removed. Where
        alternatives are shown, applications should be updated to use
        them.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The <code class="literal">log_bin_trust_routine_creators</code> system
            variable (use
            <a href="server-administration.html#sysvar_log_bin_trust_function_creators"><code class="literal">log_bin_trust_function_creators</code></a>).
          </p></li><li><p>
            The <code class="literal">myisam_max_extra_sort_file_size</code>
            system variable.
          </p></li><li><p>
            The <code class="literal">record_buffer</code> system variable (use
            <a href="server-administration.html#sysvar_read_buffer_size"><code class="literal">read_buffer_size</code></a>).
          </p></li><li><p>
            The <code class="literal">sql_log_update</code> system variable.
          </p></li><li><p>
            The <code class="literal">table_type</code> system variable (use
            <a href="server-administration.html#sysvar_storage_engine"><code class="literal">storage_engine</code></a>).
          </p></li><li><p>
            The <code class="literal">FRAC_SECOND</code> modifier for the
            <a href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a> function (use
            <code class="literal">MICROSECOND</code>).
          </p></li><li><p>
            The <code class="literal">TYPE</code> table option to specify the
            storage engine for <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a> or <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> (use <code class="literal">ENGINE</code>).
          </p></li><li><p>
            The <code class="literal">SHOW TABLE TYPES</code> SQL statement (use
            <a href="sql-syntax.html#show-engines" title="12.7.5.17. SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a>).
          </p></li><li><p>
            The <code class="literal">SHOW INNODB STATUS</code> and <code class="literal">SHOW
            MUTEX STATUS</code> SQL statements (use
            <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
            INNODB STATUS</code></a>
            <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
            INNODB MUTEX</code></a>).
          </p></li><li><p>
            The <code class="literal">SHOW PLUGIN</code> SQL statement (use
            <a href="sql-syntax.html#show-plugins" title="12.7.5.26. SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>).
          </p></li><li><p>
            The <code class="literal">LOAD TABLE ... FROM MASTER</code> and
            <code class="literal">LOAD DATA FROM MASTER</code> SQL statements (use
            <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> or
            <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a> to dump tables and
            <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> to reload dump files).
          </p></li><li><p>
            The <code class="literal">BACKUP TABLE</code> and <code class="literal">RESTORE
            TABLE</code> SQL statements (use
            <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> or
            <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a> to dump tables and
            <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> to reload dump files).
          </p></li><li><p>
            <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP(<em class="replaceable"><code>N</code></em>)</code></a>
            data type: The ability to specify a display width of
            <em class="replaceable"><code>N</code></em> (use without
            <em class="replaceable"><code>N</code></em>).
          </p></li><li><p>
            The <code class="option">--default-character-set</code> and
            <code class="option">--default-collation</code> server options (use
            <a href="server-administration.html#option_mysqld_character-set-server"><code class="option">--character-set-server</code></a> and
            <a href="server-administration.html#option_mysqld_collation-server"><code class="option">--collation-server</code></a>).
          </p></li><li><p>
            The <code class="option">--delay-key-write-for-all-tables</code> server
            option (use
            <a href="server-administration.html#option_mysqld_delay-key-write"><code class="option">--delay-key-write=ALL</code></a>).
          </p></li><li><p>
            The <code class="option">--enable-locking</code> and
            <code class="option">--skip-locking</code> server options (use
            <a href="server-administration.html#option_mysqld_external-locking"><code class="option">--external-locking</code></a> and
            <a href="server-administration.html#option_mysqld_skip-external-locking"><code class="option">--skip-external-locking</code></a>).
          </p></li><li><p>
            The <code class="option">--log-bin-trust-routine-creators</code> server
            option (use
            <a href="replication.html#option_mysqld_log-bin-trust-function-creators"><code class="option">--log-bin-trust-function-creators</code></a>).
          </p></li><li><p>
            The <code class="option">--log-long-format</code> server option.
          </p></li><li><p>
            The <code class="option">--log-update</code> server option.
          </p></li><li><p>
            The <code class="option">--master-<em class="replaceable"><code>xxx</code></em></code>
            server options to set replication parameters (use the
            <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
            instead): <code class="option">--master-host</code>,
            <code class="option">--master-user</code>, <code class="option">--master-password
            </code>, <code class="option">--master-port</code>,
            <code class="option">--master-connect-retry</code>,
            <code class="option">--master-ssl</code>,
            <code class="option">--master-ssl-ca</code>,
            <code class="option">--master-ssl-capath</code>,
            <code class="option">--master-ssl-cert</code>,
            <code class="option">--master-ssl-cipher</code>,
            <code class="option">--master-ssl-key</code>.
          </p></li><li><p>
            The <code class="option">--safe-show-database</code> server option.
          </p></li><li><p>
            The <code class="option">--skip-symlink</code> and
            <code class="option">--use-symbolic-links</code> server options (use
            <a href="server-administration.html#option_mysqld_symbolic-links"><code class="option">--skip-symbolic-links</code></a>
            and <a href="server-administration.html#option_mysqld_symbolic-links"><code class="option">--symbolic-links</code></a>).
          </p></li><li><p>
            The <code class="option">--sql-bin-update-same</code> server option.
          </p></li><li><p>
            The <code class="option">--warnings</code> server option (use
            <a href="server-administration.html#option_mysqld_log-warnings"><code class="option">--log-warnings</code></a>).
          </p></li><li><p>
            The <code class="option">--no-named-commands</code> option for
            <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> (use
            <code class="option">--skip-named-commands</code>).
          </p></li><li><p>
            The <code class="option">--no-pager</code> option for
            <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> (use
            <code class="option">--skip-pager</code>).
          </p></li><li><p>
            The <code class="option">--no-tee</code> option for
            <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> (use <code class="option">--skip-tee</code>).
          </p></li><li><p>
            The <code class="option">--position</code> option for
            <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> (use
            <code class="option">--start-position</code>).
          </p></li><li><p>
            The <code class="option">--all</code> option for
            <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> (use
            <code class="option">--create-options</code>).
          </p></li><li><p>
            The <code class="option">--first-slave</code> option for
            <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> (use
            <code class="option">--lock-all-tables</code>).
          </p></li><li><p>
            The <code class="option">--config-file</code> option for
            <a href="programs.html#mysqld-multi" title="4.3.4. mysqld_multi — Manage Multiple MySQL Servers"><span><strong class="command">mysqld_multi</strong></span></a> (use
            <code class="option">--defaults-extra-file</code>).
          </p></li><li><p>
            The
            <code class="option">--set-variable=<em class="replaceable"><code>var_name</code></em>=<em class="replaceable"><code>value</code></em></code>
            and <code class="option">-O
            <em class="replaceable"><code>var_name</code></em>=<em class="replaceable"><code>value</code></em></code>
            general-purpose options for setting program variables (use
            <code class="option">--<em class="replaceable"><code>var_name</code></em>=<em class="replaceable"><code>value</code></em></code>).
          </p></li></ul></div><p>(Bug #48048)</p><p>References: See also Bug #47974, Bug #56408.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Aliases for wildcards (as in <code class="literal">SELECT t.* AS 'alias' FROM
        t</code>) are no longer accepted and result in an error.
        Previously, such aliases were ignored silently.
       (Bug #27249)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Implicit conversion of a number or temporal value to string now
        produces a value that has a character set and collation
        determined by the
        <a href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> and
        <a href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a> system
        variables. (These variables commonly are set with
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET NAMES</code></a>.
        For information about connection character sets, see
        <a href="globalization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.)
      </p><p>
        This change means that such a conversion results in a character
        (nonbinary) string (a <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGTEXT</code></a> value), except when the
        connection character set is set to <code class="literal">binary</code>. In
        that case, the conversion result is a binary string (a
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>, or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGBLOB</code></a> value).
      </p><p>
        Previously, an implicit conversion always produced a binary
        string, regardless of the connection character set. Such
        implicit conversions to string typically occur for functions
        that are passed numeric or temporal values when string values
        are more usual, and thus could have effects beyond the type of
        the converted value. Consider the expression
        <a href="functions.html#function_concat"><code class="literal">CONCAT(1, 'abc')</code></a>. The numeric
        argument <code class="literal">1</code> was converted to the binary string
        <code class="literal">'1'</code> and the concatenation of that value with
        the nonbinary string <code class="literal">'abc'</code> produced the
        binary string <code class="literal">'1abc'</code>.
      </p><p>
        This change in conversion behavior affects several functions
        that expect string arguments because a numeric or temporal
        argument converted to a string now results in a character rather
        than binary string argument:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            String functions: <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>,
            <a href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a>,
            <a href="functions.html#function_elt"><code class="literal">ELT()</code></a>,
            <a href="functions.html#function_export-set"><code class="literal">EXPORT_SET()</code></a>,
            <a href="functions.html#function_insert"><code class="literal">INSERT()</code></a>,
            <a href="functions.html#function_lcase"><code class="literal">LCASE()</code></a>,
            <a href="functions.html#function_left"><code class="literal">LEFT()</code></a>,
            <a href="functions.html#function_lower"><code class="literal">LOWER()</code></a>,
            <a href="functions.html#function_lpad"><code class="literal">LPAD()</code></a>,
            <a href="functions.html#function_ltrim"><code class="literal">LTRIM()</code></a>,
            <a href="functions.html#function_mid"><code class="literal">MID()</code></a>,
            <a href="functions.html#function_quote"><code class="literal">QUOTE()</code></a>,
            <a href="functions.html#function_repeat"><code class="literal">REPEAT()</code></a>,
            <a href="functions.html#function_replace"><code class="literal">REPLACE()</code></a>,
            <a href="functions.html#function_reverse"><code class="literal">REVERSE()</code></a>,
            <a href="functions.html#function_right"><code class="literal">RIGHT()</code></a>,
            <a href="functions.html#function_rpad"><code class="literal">RPAD()</code></a>,
            <a href="functions.html#function_rtrim"><code class="literal">RTRIM()</code></a>,
            <a href="functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a>,
            <a href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a>,
            <a href="functions.html#function_trim"><code class="literal">TRIM()</code></a>,
            <a href="functions.html#function_ucase"><code class="literal">UCASE()</code></a>,
            <a href="functions.html#function_upper"><code class="literal">UPPER()</code></a>.
          </p></li><li><p>
            Date and time functions:
            <a href="functions.html#function_adddate"><code class="literal">ADDDATE()</code></a>,
            <a href="functions.html#function_addtime"><code class="literal">ADDTIME()</code></a>,
            <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
            <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>,
            <a href="functions.html#function_dayname"><code class="literal">DAYNAME()</code></a>,
            <a href="functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a>,
            <a href="functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a>,
            <a href="functions.html#function_subdate"><code class="literal">SUBDATE()</code></a>,
            <a href="functions.html#function_subtime"><code class="literal">SUBTIME()</code></a>,
            <a href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a>.
          </p></li></ul></div><p>
        These functions remain unaffected:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="functions.html#function_char"><code class="literal">CHAR()</code></a> without a
            <code class="literal">USING</code> clause still returns
            <code class="literal">VARBINARY</code>.
          </p></li><li><p>
            Functions that previously returned <code class="literal">utf8</code>
            strings still do so. Examples include
            <a href="functions.html#function_charset"><code class="literal">CHARSET()</code></a> and
            <a href="functions.html#function_collation"><code class="literal">COLLATION()</code></a>.
          </p></li></ul></div><p>
        Encryption and compression functions that expect string
        arguments and previously returned binary strings are affected
        depending on the content of the return value:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If the return value contains only ASCII characters, the
            function now returns a character string with the connection
            character set and collation:
            <a href="functions.html#function_md5"><code class="literal">MD5()</code></a>,
            <a href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>,
            <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>,
            <a href="functions.html#function_sha1"><code class="literal">SHA()</code></a>,
            <a href="functions.html#function_sha1"><code class="literal">SHA1()</code></a>. The
            <a href="functions.html#function_astext"><code class="literal">ASTEXT()</code></a> and
            <a href="functions.html#function_astext"><code class="literal">ASWKT()</code></a>
            spatial functions also fall into this category.
          </p></li><li><p>
            If the return value can contain non-ASCII characters, the
            function still returns a binary string:
            <a href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a>,
            <a href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a>,
            <a href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a>,
            <a href="functions.html#function_encode"><code class="literal">ENCODE()</code></a>,
            <a href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a>.
          </p></li></ul></div><p>
        The <a href="functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a> return value
        contains only ASCII characters, and this function now returns a
        character string with the connection character set and collation
        rather than a binary string.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several changes were made to processing of server system
        variables and command-line options to make their treatment more
        consistent.
      </p><p>
        General changes:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The help message text displayed by <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld --verbose
            --help</strong></span></a> now consistently uses dashes to show the
            names of options and system variables that can be set at
            server startup. Previously, the message used both dashes and
            underscores (generally with dashes for options and
            underscores for system variables). For example, the help
            message now displays <code class="option">--log-output</code> and
            <code class="option">--general-log</code>, whereas previously it
            displayed <code class="option">--log-output</code> and
            <code class="option">--general_log</code>.
          </p><p>
            This is a display-only change. The permissible syntax for
            setting options and variables remains unchanged:
          </p><div class="itemizedlist"><ul type="square"><li><p>
                At server startup, you can specify options and variables
                on the command line or in option files using either
                dashes or underscores.
              </p></li><li><p>
                For those system variables that can be set at runtime
                (for example, using
                <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET</code></a>),
                you must specify them using underscores.
              </p></li></ul></div></li><li><p>
            There are fewer session-only system variables. These
            variables now have a global value:
            <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a>,
            <a href="server-administration.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks</code></a>,
            <a href="server-administration.html#sysvar_profiling"><code class="literal">profiling</code></a>,
            <a href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>,
            <a href="server-administration.html#sysvar_sql_big_selects"><code class="literal">sql_big_selects</code></a>,
            <a href="server-administration.html#sysvar_sql_buffer_result"><code class="literal">sql_buffer_result</code></a>,
            <a href="server-administration.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a>,
            <a href="server-administration.html#sysvar_sql_log_off"><code class="literal">sql_log_off</code></a>,
            <a href="server-administration.html#sysvar_sql_notes"><code class="literal">sql_notes</code></a>,
            <a href="server-administration.html#sysvar_sql_quote_show_create"><code class="literal">sql_quote_show_create</code></a>,
            <a href="server-administration.html#sysvar_sql_safe_updates"><code class="literal">sql_safe_updates</code></a>,
            <a href="server-administration.html#sysvar_sql_warnings"><code class="literal">sql_warnings</code></a>,
            <a href="server-administration.html#sysvar_unique_checks"><code class="literal">unique_checks</code></a>.
          </p><p>
            For those variables, you can now set the global value to
            change the value from which the session value is initialized
            for new sessions.
          </p><p>
            The following list shows the variables that remain
            session-only. They apply only in the context of a specific
            session so that a global value is of no use:
            <a href="server-administration.html#sysvar_debug_sync"><code class="literal">debug_sync</code></a>,
            <a href="server-administration.html#sysvar_error_count"><code class="literal">error_count</code></a>,
            <a href="server-administration.html#sysvar_identity"><code class="literal">identity</code></a>,
            <a href="server-administration.html#sysvar_insert_id"><code class="literal">insert_id</code></a>,
            <a href="server-administration.html#sysvar_last_insert_id"><code class="literal">last_insert_id</code></a>,
            <a href="server-administration.html#sysvar_pseudo_thread_id"><code class="literal">pseudo_thread_id</code></a>,
            <a href="server-administration.html#sysvar_rand_seed1"><code class="literal">rand_seed1</code></a>,
            <a href="server-administration.html#sysvar_rand_seed2"><code class="literal">rand_seed2</code></a>,
            <a href="server-administration.html#sysvar_timestamp"><code class="literal">timestamp</code></a>,
            <a href="server-administration.html#sysvar_warning_count"><code class="literal">warning_count</code></a>.
          </p></li><li><p>
            All system variables are accessible at runtime using
            <code class="literal">@@</code> syntax
            (<code class="literal">@@GLOBAL.<em class="replaceable"><code>var_name</code></em></code>,
            <code class="literal">@@SESSION.<em class="replaceable"><code>var_name</code></em></code>,
            <code class="literal">@@<em class="replaceable"><code>var_name</code></em></code>).
            Previously, this syntax produced an error for some
            variables.
          </p></li><li><p>
            All system variables are included as appropriate in the
            output from
            <a href="sql-syntax.html#show-variables" title="12.7.5.40. SHOW VARIABLES Syntax"><code class="literal">SHOW
            {GLOBAL, SESSION} VARIABLES</code></a> and the
            <a href="information-schema.html#variables-table" title="19.10. The INFORMATION_SCHEMA GLOBAL_VARIABLES and
      SESSION_VARIABLES
      Tables"><code class="literal">INFORMATION_SCHEMA.GLOBAL_VARIABLES</code></a>
            and
            <a href="information-schema.html#variables-table" title="19.10. The INFORMATION_SCHEMA GLOBAL_VARIABLES and
      SESSION_VARIABLES
      Tables"><code class="literal">INFORMATION_SCHEMA.SESSION_VARIABLES</code></a>
            tables. Previously, some variables were not displayed.
          </p></li><li><p>
            “<span class="quote">As appropriate</span>” in the preceding item means
            that <a href="sql-syntax.html#show-variables" title="12.7.5.40. SHOW VARIABLES Syntax"><code class="literal">SHOW
            GLOBAL VARIABLES</code></a> and
            <a href="information-schema.html#variables-table" title="19.10. The INFORMATION_SCHEMA GLOBAL_VARIABLES and
      SESSION_VARIABLES
      Tables"><code class="literal">INFORMATION_SCHEMA.GLOBAL_VARIABLES</code></a>
            no longer include session-only system variables. Previously,
            these included the global value of a variable if it had one,
            and the session value if not.
            (<a href="sql-syntax.html#show-variables" title="12.7.5.40. SHOW VARIABLES Syntax"><code class="literal">SHOW
            SESSION VARIABLES</code></a> still includes global-only
            variables.)
          </p></li><li><p>
            The server now enforces type checking for assignments to
            system variables, so it is more consistent and strict about
            rejecting invalid values.
          </p></li><li><p>
            For attempts to assign a negative value to an unsigned
            system variable, the server truncates the value to the
            minimum permitted value. Previously, there was sometimes
            wraparound to a large positive value.
          </p></li><li><p>
            Some system variables (typically those that control memory
            or disk allocation) are permitted to take only values that
            are a multiple of a given block size, and assigning a value
            not a block size multiple causes truncation to the nearest
            multiple. (For example,
            <a href="server-administration.html#sysvar_net_buffer_length"><code class="literal">net_buffer_length</code></a> must be a
            multiple of 1024. Assigning 16384 results in a value of
            16384, whereas assigning 16383 results in a value of 15360.)
            A warning now occurs when adjustment of the specified value
            takes place. Previously, adjustment was silent.
          </p></li><li><p>
            More system variables can be assigned the value
            <code class="literal">DEFAULT</code> to set them to their default
            value. Previously, this syntax produced an error in some
            cases.
          </p></li><li><p>
            All variables that have a <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a>
            data type value can be set to an integer value that is
            treated like a bit mask. Previously, this did not work for
            some SET-type variables.
          </p></li><li><p>
            The default value for several system variables no longer
            differs between 32-bit and 64-bit builds. Previously, the
            values differed by about 100 bytes for some variables.
          </p></li><li><p>
            There are no longer any write-only system variables. For
            example, <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT
            @@rand_seed1</code></a> returns 0, not <code class="literal">Variable
            'rand_seed1' can only be set, not read</code>.
          </p></li></ul></div><p>
        Variable-specific changes:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The <a href="server-administration.html#sysvar_concurrent_insert"><code class="literal">concurrent_insert</code></a>
            system variable now is handled as an enumeration with the
            permissible values <code class="literal">NEVER</code>,
            <code class="literal">AUTO</code>, and <code class="literal">ALWAYS</code>. The
            corresponding integer values 0, 1, and 2 are still
            recognized.
          </p></li><li><p>
            The <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> system
            variable now is handled as an enumeration with the
            permissible values <code class="literal">NO_CHAIN</code>,
            <code class="literal">CHAIN</code>, and <code class="literal">RELEASE</code>.
            The corresponding integer values 0, 1, and 2 are still
            recognized.
          </p></li><li><p>
            For <a href="server-administration.html#sysvar_concurrent_insert"><code class="literal">concurrent_insert</code></a> and
            <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a>, the string
            form of the value is displayed by <a href="sql-syntax.html#show-variables" title="12.7.5.40. SHOW VARIABLES Syntax"><code class="literal">SHOW
            VARIABLES</code></a> and
            <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT
            @@<em class="replaceable"><code>var_name</code></em></code></a>.
          </p></li><li><p>
            The unused <code class="literal">rpl_recovery_rank</code> system
            variable is deprecated.
          </p></li><li><p>
            The <a href="server-administration.html#sysvar_storage_engine"><code class="literal">storage_engine</code></a> system
            variable is deprecated in favor of the new system variable
            <a href="server-administration.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a>.
            This enables pairing of the
            <a href="server-administration.html#option_mysqld_default-storage-engine"><code class="option">--default-storage-engine</code></a>
            command-line option with a system variable of a more closely
            corresponding name.
          </p></li><li><p>
            The <a href="server-administration.html#option_mysqld_myisam-recover"><code class="option">--myisam-recover</code></a> option
            is renamed to
            <a href="server-administration.html#option_mysqld_myisam-recover-options"><code class="option">--myisam-recover-options</code></a> to
            pair better with the name of the
            <a href="server-administration.html#sysvar_myisam_recover_options"><code class="literal">myisam_recover_options</code></a>
            system variable. The old option name still works because it
            is recognized as an unambiguous prefix of the new name.
            (Option prefix recognition occurs as described in
            <a href="programs.html#program-options" title="4.2.3. Specifying Program Options">Section 4.2.3, “Specifying Program Options”</a>.)
          </p></li><li><p>
            <a href="server-administration.html#option_mysqld_myisam-recover-options"><code class="option">--myisam-recover-options</code></a> has
            a new permissible value <code class="literal">OFF</code>.
          </p></li><li><p>
            Attempts to drop the default key cache produce an error.
            Previously, it produced only a warning and status of success
            even though the attempt failed.
          </p></li></ul></div><p>References: See also Bug #34437, Bug #34635, Bug #11747961, Bug #34829, Bug #34878, Bug #25430.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The server now includes <code class="literal">dtoa</code>, a library for
        conversion between strings and numbers by David M. Gay. In
        MySQL, this library provides the basis for improved conversion
        between string or <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values
        and approximate-value
        (<a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a>/<a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a>)
        numbers:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Consistent conversion results across platforms, which
            eliminates, for example, Unix versus Windows conversion
            differences.
          </p></li><li><p>
            Accurate representation of values in cases where results
            previously did not provide sufficient precision, such as for
            values close to IEEE limits.
          </p></li><li><p>
            Conversion of numbers to string format with the best
            possible precision. The precision of <code class="literal">dtoa</code>
            is always the same or better than that of the standard C
            library functions.
          </p></li></ul></div><p>
        Because the conversions produced by this library differ in some
        cases from previous results, the potential exists for
        incompatibilities in applications that rely on previous results.
        For example, applications that depend on a specific exact result
        from previous conversions might need adjustment to accommodate
        additional precision.
      </p><p>
        For additional information about the properties of
        <code class="literal">dtoa</code> conversions, see
        <a href="functions.html#type-conversion" title="11.2. Type Conversion in Expression Evaluation">Section 11.2, “Type Conversion in Expression Evaluation”</a>.
      </p><p>References: See also Bug #12860, Bug #21497, Bug #26788, Bug #24541, Bug #34015.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The Unicode implementation has been extended to provide support
        for supplementary characters that lie outside the Basic
        Multilingual Plane (BMP). Noteworthy features:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">utf16</code> and <code class="literal">utf32</code>
            character sets have been added. These correspond to the
            UTF-16 and UTF-32 encodings of the Unicode character set,
            and they both support supplementary characters.
          </p></li><li><p>
            The <code class="literal">utf8mb4</code> character set has been added.
            This is similar to <code class="literal">utf8</code>, but its encoding
            allows up to four bytes per character to enable support for
            supplementary characters.
          </p></li><li><p>
            The <code class="literal">ucs2</code> character set is essentially
            unchanged except for the inclusion of some newer BMP
            characters.
          </p></li></ul></div><p>
        In most respects, upgrading to MySQL 5.5 should present few
        problems with regard to Unicode usage, although there are some
        potential areas of incompatibility. These are the primary areas
        of concern:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            For the variable-length character data types
            (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> and the
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types), the maximum
            length in characters is less for <code class="literal">utf8mb4</code>
            columns than for <code class="literal">utf8</code> columns.
          </p></li><li><p>
            For all character data types
            (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and the
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types), the maximum
            number of characters that can be indexed is less for
            <code class="literal">utf8mb4</code> columns than for
            <code class="literal">utf8</code> columns.
          </p></li></ul></div><p>
        Consequently, if you want to upgrade tables from
        <code class="literal">utf8</code> to <code class="literal">utf8mb4</code> to take
        advantage of supplementary-character support, it may be
        necessary to change some column or index definitions.
      </p><p>
        For additional details about the new Unicode character sets and
        potential incompatibilities, see
        <a href="globalization.html#charset-unicode" title="9.1.10. Unicode Support">Section 9.1.10, “Unicode Support”</a>, and
        <a href="globalization.html#charset-unicode-upgrading" title="9.1.11. Upgrading from Previous to Current Unicode Support">Section 9.1.11, “Upgrading from Previous to Current Unicode Support”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several columns were added to the
        <a href="information-schema.html#routines-table" title="19.18. The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">INFORMATION_SCHEMA.ROUTINES</code></a> table
        to provide information about the <code class="literal">RETURNS</code>
        clause data type for stored functions:
        <code class="literal">DATA_TYPE</code>,
        <code class="literal">CHARACTER_MAXIMUM_LENGTH</code>,
        <code class="literal">CHARACTER_OCTET_LENGTH</code>,
        <code class="literal">NUMERIC_PRECISION</code>,
        <code class="literal">NUMERIC_SCALE</code>,
        <code class="literal">CHARACTER_SET_NAME</code>, and
        <code class="literal">COLLATION_NAME</code>.
      </p><p>
        This change produces an incompatibility for applications that
        depend on column order in the
        <a href="information-schema.html#routines-table" title="19.18. The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">ROUTINES</code></a> table because the new
        columns appear between the <code class="literal">ROUTINE_TYPE</code> and
        <code class="literal">DTD_IDENTIFIER</code> columns. Such applications may
        need to be adjusted to account for the new columns.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#reset-master" title="12.4.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> and
        <a href="sql-syntax.html#reset-slave" title="12.4.2.3. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a> now reset the values
        shown for <code class="literal">Last_IO_Error</code>,
        <code class="literal">Last_IO_Errno</code>,
        <code class="literal">Last_SQL_Error</code>, and
        <code class="literal">Last_SQL_Errno</code> in the output of
        <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>.
       (Bug #34654)</p><p>References: See also Bug #44270.</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The <code class="option">--skip-thread-priority</code> option is now
        deprecated such that the server will not change the thread
        priorities by default. Giving threads different priorities might
        yield marginal improvements in some platforms (where it actually
        works), but it might instead cause significant degradation
        depending on the thread count and number of processors. Meddling
        with the thread priorities is a not a safe bet as it is very
        dependent on the behavior of the CPU scheduler and system where
        MySQL is being run.
       (Bug #35164, Bug #37536)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        MySQL Replication now supports attribute promotion and demotion
        for row-based replication between columns of different but
        similar types on the master and the slave. For example, it is
        possible to promote an <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a> column
        on the master to a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> column
        on the slave, and to demote a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column to a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> column.
      </p><p>
        The implementation of type demotion distinguishes between lossy
        and non-lossy type conversions, and their use on the slave can
        be controlled by setting the
        <a href="replication.html#sysvar_slave_type_conversions"><code class="literal">slave_type_conversions</code></a> global
        server system variable.
      </p><p>
        For more information, see
        <a href="replication.html#replication-features-attribute-promotion" title="Row-based replication: attribute promotion and demotion">Row-based replication: attribute promotion and demotion</a>.
       (Bug #47163, Bug #46584)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        For replication based on row-based and mix-format binary
        logging, it is now safe to mix transactional and
        nontransactional statements within a transaction. The
        nontransactional statements are logged immediately rather than
        waiting until the transaction ends, ensuring that their results
        are logged and replicated correctly regardless of the result of
        the transaction.
      </p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> has a new
        <code class="option">--max-connections</code> option to set a higher number
        of maximum permitted server connections than the default 128.
        This option can also be passed using
        <span><strong class="command">mysql-test-run.pl</strong></span>.
       (Bug #51135)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> has a new
        <code class="option">--portbase</code> option and a corresponding
        <code class="literal">MTR_PORT_BASE</code> environment variable for
        setting the port range, as an alternative to the existing
        <code class="option">--build-thread</code> option.
       (Bug #50182)</p></li><li><p>
        <a href="sql-syntax.html#show-profile" title="12.7.5.31. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE
        CPU</code></a> has been ported to Windows. Thanks to Alex
        Budovski for the patch.
       (Bug #50057)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> now has a
        <code class="option">--gprof</code> option that runs the server through the
        <span><strong class="command">gprof</strong></span> profiler, much the same way the
        currently supported <code class="option">--gcov</code> option runs it
        through <span><strong class="command">gcov</strong></span>.
       (Bug #49345)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> now has a
        <code class="literal">lowercase_result</code> command that converts the
        output of the next statement to lowercase. This is useful for
        test cases where the lettercase may vary between platforms.
       (Bug #48863)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> now has a
        <code class="literal">remove_files_wildcard</code> command that removes
        files matching a pattern from a directory.
       (Bug #39774)</p></li><li><p>
        MySQL support for adding collations using LDML specifications
        did not support the <code class="literal">&lt;i&gt;</code> identity rule
        that indicates one character sorts identically to another. The
        <code class="literal">&lt;i&gt;</code> rule now is supported. See
        <a href="globalization.html#ldml-rules" title="9.4.4.2. LDML Syntax Supported in MySQL">Section 9.4.4.2, “LDML Syntax Supported in MySQL”</a>.
       (Bug #37129)</p></li><li><p>
        For boolean options, the option-processing library now prints
        additional information in the <code class="option">--help</code> message:
        If the option is enabled by default, the message says so and
        indicates that the <code class="option">--skip</code> form of the option
        disables the option. This affects all compiled MySQL programs
        that use the library.
       (Bug #35224)</p></li><li><p>
        The use of the <code class="literal">SQL_CACHE</code> and
        <code class="literal">SQL_NO_CACHE</code> options in
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements now is checked
        more restrictively: 1) Previously, both options could be given
        in the same statement. This is no longer true; only one can be
        given. 2) Previously, these options could be given in
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements that were not
        at the top-level. This is no longer true; the options are not
        permitted in subqueries (including subqueries in the
        <code class="literal">FROM</code> clause, and
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements in unions other
        than the first <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>.
       (Bug #35020)</p></li><li><p>
        The <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client now has an
        <a href="programs.html#option_mysql_auto-vertical-output"><code class="option">--auto-vertical-output</code></a> option,
        which causes result sets to be displayed vertically if they are
        too wide for the current window, and uses normal tabular format
        otherwise. (This applies to statements terminated by
        <code class="literal">;</code> or <code class="literal">\G</code>.)
       (Bug #26780)</p></li><li><p>
        <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> now is permitted
        for a table for which a <code class="literal">WRITE</code> lock has been
        acquired with <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>.
       (Bug #20667)</p><p>References: See also Bug #46452.</p></li><li><p>
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a> now
        takes an optional <em class="replaceable"><code>log_type</code></em> value so
        that <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        <em class="replaceable"><code>log_type</code></em> LOGS</code></a> can be used
        to flush only a specified log type. These
        <em class="replaceable"><code>log_type</code></em> options are permitted:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">BINARY</code> closes and reopens the binary log
            files.
          </p></li><li><p>
            <code class="literal">ENGINE</code> closes and reopens any flushable
            logs for installed storage engines.
          </p></li><li><p>
            <code class="literal">ERROR</code> closes and reopens the error log
            file.
          </p></li><li><p>
            <code class="literal">GENERAL</code> closes and reopens the general
            query log file.
          </p></li><li><p>
            <code class="literal">RELAY</code> closes and reopens the relay log
            files.
          </p></li><li><p>
            <code class="literal">SLOW</code> closes and reopens the slow query
            log file.
          </p></li></ul></div><p>
        Thanks to Eric Bergen for the patch to implement this feature.
       (Bug #14104)</p></li><li><p>
        Previously, prepared <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
        statements could be used through the C API only for stored
        procedures that produce at most one result set, and applications
        could not use placeholders for <code class="literal">OUT</code> or
        <code class="literal">INOUT</code> parameters. For prepared
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements used using
        <a href="sql-syntax.html#prepare" title="12.5.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> and
        <a href="sql-syntax.html#execute" title="12.5.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>, placeholders could not
        be used for <code class="literal">OUT</code> or <code class="literal">INOUT</code>
        parameters.
      </p><p>
        For the C API, prepared <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
        support now is expanded in the following ways:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            A stored procedure can produce any number of result sets.
            The number of columns and the data types of the columns need
            not be the same for all result sets.
          </p></li><li><p>
            The final values of <code class="literal">OUT</code> and
            <code class="literal">INOUT</code> parameters are available to the
            calling application after the procedure returns. These
            parameters are returned as an extra single-row result set
            following any result sets produced by the procedure itself.
            The row contains the values of the <code class="literal">OUT</code>
            and <code class="literal">INOUT</code> parameters in the order in
            which they are declared in the procedure parameter list.
          </p></li><li><p>
            A new C API function,
            <a href="connectors-apis.html#mysql-stmt-next-result" title="21.9.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a>, is
            available for processing stored procedure results. See
            <a href="connectors-apis.html#c-api-prepared-call-statements" title="21.9.16. C API Support for Prepared CALL
      Statements">Section 21.9.16, “C API Support for Prepared <code class="literal">CALL</code>
      Statements”</a>.
          </p></li><li><p>
            The <code class="literal">CLIENT_MULTI_RESULTS</code> flag now is
            enabled by default. It no longer needs to be enabled when
            you call
            <a href="connectors-apis.html#mysql-real-connect" title="21.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. (This
            flag is necessary for executing stored procedures because
            they can produce multiple result sets.)
          </p></li></ul></div><p>
        For <a href="sql-syntax.html#prepare" title="12.5.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> and
        <a href="sql-syntax.html#execute" title="12.5.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>, placeholder support for
        <code class="literal">OUT</code> and <code class="literal">INOUT</code> parameters
        is now available. See <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax">Section 12.2.1, “<code class="literal">CALL</code> Syntax”</a>.
       (Bug #11638, Bug #17898)</p></li><li><p>
        MySQL now supports IPv6 connections to the local host, using the
        address <code class="literal">::1</code>. For example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -h ::1</code></strong>
</pre><p>
        The address <code class="literal">::1</code> can be specified in account
        names in statements such as <a href="sql-syntax.html#create-user" title="12.7.1.1. CREATE USER Syntax"><code class="literal">CREATE
        USER</code></a>, <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>, and
        <a href="sql-syntax.html#revoke" title="12.7.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a>. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE USER 'bill'@'::1' IDENTIFIED BY 'secret';</code></strong>
mysql&gt; <strong class="userinput"><code>GRANT SELECT ON mydb.* TO 'bill'@'::1';</code></strong>
</pre><p>
        The default set of accounts created during MySQL installation
        now includes an account for <code class="literal">'root'@'::1'</code>.
      </p><p>
        See <a href="server-administration.html#account-names" title="5.4.3. Specifying Account Names">Section 5.4.3, “Specifying Account Names”</a>, and
        <a href="installing.html#default-privileges" title="2.10.2. Securing the Initial MySQL Accounts">Section 2.10.2, “Securing the Initial MySQL Accounts”</a>.
       (Bug #8836)</p></li><li><p>
        Three options were added to <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> make it
        easier to generate a dump from a slave server:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="programs.html#option_mysqldump_dump-slave"><code class="option">--dump-slave</code></a> is similar to
            <a href="programs.html#option_mysqldump_master-data"><code class="option">--master-data</code></a>, but the
            <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
            contains binary log coordinates for the slave's master host,
            not the slave itself.
          </p></li><li><p>
            <a href="programs.html#option_mysqldump_apply-slave-statements"><code class="option">--apply-slave-statements</code></a>
            causes <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> and
            <a href="sql-syntax.html#start-slave" title="12.4.2.5. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statements to be
            added before the <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
            TO</code></a> statement and at the end of the output,
            respectively.
          </p></li><li><p>
            <a href="programs.html#option_mysqldump_include-master-host-port"><code class="option">--include-master-host-port</code></a>
            causes the <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
            statement to include <code class="literal">MASTER_PORT</code> and
            <code class="literal">MASTER_HOST</code> options for the slave's
            master.
          </p></li></ul></div><p>(Bug #8368)</p></li><li><p>
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> now permits the password value to
        be omitted following the <code class="literal">password</code> command. In
        this case, <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> prompts for the
        password value, which enables you to avoid specifying the
        password on the command line. Omitting the password value should
        be done only if <code class="literal">password</code> is the final command
        on the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> command line. Otherwise,
        the next argument is taken as the password.
       (Bug #5724)</p></li><li><p>
        Code that produces query IDs and updates the value of the
        <a href="server-administration.html#statvar_Threads_running"><code class="literal">Threads_running</code></a> status
        variable no longer acquires a global lock that also protects the
        list of all connections. Instead, it relies on atomic increment
        and decrement instructions. This improves scalability and to a
        certain extent alleviates the problem described in Bug
        #11751904.
      </p><p>References: See also Bug #42930.</p></li><li><p>
        The <a href="server-administration.html#sysvar_optimizer_switch"><code class="literal">optimizer_switch</code></a> system
        variable now has an <code class="literal">engine_condition_pushdown</code>
        flag to control whether storage engine condition pushdown
        optimization is used. As a consequence, the
        <a href="server-administration.html#sysvar_engine_condition_pushdown"><code class="literal">engine_condition_pushdown</code></a>
        system variable now is deprecated.
      </p></li><li><p>
        The server now provides a pluggable audit interface that enables
        information about server operations to be reported to interested
        parties. Audit plugins may register with the audit interface to
        receive notification about server operations. When an auditable
        event occurs within the server, the server determines whether
        notification is needed. For each registered audit plugin, the
        server checks the event against those event classes in which the
        plugin is interested and passes the event to the plugin if there
        is a match. For more information, see
        <a href="extending-mysql.html#audit-plugins" title="22.2.3.6. Audit Plugins">Section 22.2.3.6, “Audit Plugins”</a>.
      </p></li><li><p>
        Some conversions between Japanese character sets are more
        efficient.
      </p></li><li><p>
        When the server detects <code class="literal">MyISAM</code> table
        corruption, it now writes additional information to the error
        log, such as the name and line number of the source file, and
        the list of threads accessing the table. Example: <code class="literal">Got
        an error from thread_id=1, mi_dynrec.c:368</code>. This is
        useful information to include in bug reports.
      </p></li><li><p>
        The <a href="information-schema.html#tablespaces-table" title="19.23. The INFORMATION_SCHEMA TABLESPACES Table"><code class="literal">TABLESPACES</code></a> table has been
        added to <code class="literal">INFORMATION_SCHEMA</code> for tracking
        tablespace details.
      </p></li><li><p>
        Added the <a href="information-schema.html#parameters-table" title="19.12. The INFORMATION_SCHEMA PARAMETERS Table"><code class="literal">PARAMETERS</code></a> table to
        <code class="literal">INFORMATION_SCHEMA</code>. The
        <a href="information-schema.html#parameters-table" title="19.12. The INFORMATION_SCHEMA PARAMETERS Table"><code class="literal">PARAMETERS</code></a> table provides
        information about stored procedure and function parameters, and
        about return values for stored functions.
      </p></li><li><p>
        The maximum length of table comments was extended from 60 to
        2048 characters. The maximum length of column comments was
        extended from 255 to 1024 characters. Index definitions now can
        include a comment of up to 1024 characters.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server crashed if an account with the
        <a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a> privilege but not
        the <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege attempted
        to create a stored procedure.
       (Bug #44798)</p></li><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        When the <code class="literal">DATA DIRECTORY</code> or <code class="literal">INDEX
        DIRECTORY</code> clause of a <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE</code></a> statement referred to a subdirectory of the data
        directory through a symlinked component of the data directory
        path, it was accepted, when for security reasons it should be
        rejected.
       (Bug #39277)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        When writing events to the binary log, transactional events
        (that is, events that operate on transactional tables) are
        written to a thread-specific transaction cache, which is then
        written to the binary log on commit. To handle nontransactional
        events, there was a lock taken on the binary log (when entering
        the function <code class="literal">MYSQL_BIN_LOG::write()</code>), even
        when the event was written to the transaction cache instead of
        the binary log, causing a major bottleneck in replication
        performance.
       (Bug #42757)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> system
        variable can no longer be set inside a transaction. In other
        words, the binary logging format can no longer be changed while
        a transaction is in progress.
       (Bug #47863)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Concurrent statements using a stored function and
        <a href="sql-syntax.html#drop-function" title="12.1.23. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> for that function
        could break statement-based replication.
      </p><p>
        DDL statements for stored procedures and functions are now
        prohibited while a <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>
        statement is in effect.
       (Bug #30977)</p><p>References: See also Bug #57663.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For debug builds, attempts to execute
        <a href="sql-syntax.html#reset" title="12.7.6.6. RESET Syntax"><code class="literal">RESET</code></a> statements within a
        transaction that had acquired metadata locks led to an assertion
        failure.
      </p><p>
        As a result of this bug fix,
        <a href="sql-syntax.html#reset" title="12.7.6.6. RESET Syntax"><code class="literal">RESET</code></a> statements now cause an
        implicit commit.
       (Bug #51336)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        A deadlock occurred for this sequence of events: Session 1
        locked a table using <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>;
        Session 2 dropped the database containing the table; Session 1
        created any database.
      </p><p>
        As a consequence of this bug fix, <a href="sql-syntax.html#create-database" title="12.1.10. CREATE DATABASE Syntax"><code class="literal">CREATE
        DATABASE</code></a> is not permitted within a session that has an
        active <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> statement.
       (Bug #49988)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statements
        (including <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE ... LIKE</code></a>) are now prohibited whenever a
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> statement is in
        effect.
      </p><p>
        One consequence of this change is that
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        LIKE</code></a> makes the same checks as
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and does not just
        copy the <code class="filename">.frm</code> file. This means that if the
        current SQL mode is different from the mode in effect when the
        original table was created, the table definition might be
        considered invalid for the new mode and the statement will fail.
       (Bug #42546, Bug #11751609)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Due to work done for Bug #989,
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a> is
        not permitted when there is an active
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        READ</code></a>. This caused a problem with
        <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a>, which used that sequence of
        statements. <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a> now uses
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES
        <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK</code></a> to
        flush and lock tables. If <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a> is
        used with a server older than MySQL 5.5.3 that does not support
        this statement, it has a new option
        <a href="programs.html#option_mysqlhotcopy_old_server"><code class="option">--old_server</code></a> that causes it
        to use the previous statement sequence.
      </p><p>
        To provide a workaround for the restriction that
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a> is
        no longer permitted when there is an active
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        READ</code></a>, <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLES</code></a> has a new variant,
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES
        <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK</code></a>,
        that enables tables to be flushed and locked in a single
        operation. As a result of this change, applications that
        previously used this statement sequence to lock and flush tables
        will fail:
      </p><pre class="programlisting">LOCK TABLES <em class="replaceable"><code>tbl_list</code></em> READ;
FLUSH TABLES <em class="replaceable"><code>tbl_list</code></em>;
</pre><p>
        Such applications should now use this statement instead:
      </p><pre class="programlisting">FLUSH TABLES <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK;
</pre><p>(Bug #42465)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For application compatibility reasons, when
        <a href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a> is 1, MySQL
        converts <code class="literal"><em class="replaceable"><code>auto_inc_col</code></em> IS
        NULL</code> to
        <code class="literal"><em class="replaceable"><code>auto_inc_col</code></em> =
        LAST_INSERT_ID()</code>. However, this was being done
        regardless of whether the predicate was alone or at the top
        level. Now it occurs only when it is a single top-level
        predicate.
      </p><p>
        In conjunction with this bug fix, the default value of the
        <a href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a> system
        variable has been changed from 1 to 0, which may cause
        incompatibilities with existing applications.
       (Bug #41371)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The parser accepted illegal syntax in a <code class="literal">FOREIGN
        KEY</code> clause:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Multiple <code class="literal">MATCH</code> clauses.
          </p></li><li><p>
            Multiple <code class="literal">ON DELETE</code> clauses.
          </p></li><li><p>
            Multiple <code class="literal">ON UPDATE</code> clauses.
          </p></li><li><p>
            <code class="literal">MATCH</code> clauses specified after <code class="literal">ON
            UPDATE</code> or <code class="literal">ON DELETE</code>. In case of
            multiple redundant clauses, this leads to confusion, and
            implementation-dependent results.
          </p></li></ul></div><p>
        These illegal syntaxes are now properly rejected. Existing
        applications that used them will require adjustment.
       (Bug #34455)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The parser accepted an <code class="literal">INTO</code> clause in nested
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements, which is
        invalid because such statements must return their results to the
        outer context. This syntax is no longer permitted.
       (Bug #33204)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">Locked</code> thread state was equivalent to the
        <code class="literal">Table lock</code> state and has been removed. It no
        longer appears in <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
        PROCESSLIST</code></a> output.
       (Bug #28870)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several changes were made to alias resolution in multiple-table
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements so that it is
        no longer possible to have inconsistent or ambiguous table
        aliases.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            In MySQL 5.1.23, alias declarations outside the
            <em class="replaceable"><code>table_references</code></em> part of the
            statement were disallowed for the <code class="literal">USING</code>
            variant of multiple-table
            <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> syntax, to reduce the
            possibility of ambiguous aliases that could lead to
            ambiguous statements that have unexpected results such as
            deleting rows from the wrong table.
          </p><p>
            Now alias declarations outside
            <em class="replaceable"><code>table_references</code></em> are disallowed
            for all multiple-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>
            statements. Alias declarations are permitted only in the
            <em class="replaceable"><code>table_references</code></em> part.
          </p><p>
            Incorrect:
          </p><pre class="programlisting">DELETE FROM t1 AS a2 USING t1 AS a1 INNER JOIN t2 AS a2;
DELETE t1 AS a2 FROM t1 AS a1 INNER JOIN t2 AS a2;</pre><p>
            Correct:
          </p><pre class="programlisting">DELETE FROM t1 USING t1 AS a1 INNER JOIN t2 AS a2;
DELETE t1 FROM t1 AS a1 INNER JOIN t2 AS a2;</pre></li><li><p>
            Previously, for alias references in the list of tables from
            which to delete rows in a multiple-table delete, the default
            database is used unless one is specified explicitly. For
            example, if the default database is <code class="literal">db1</code>,
            the following statement does not work because the
            unqualified alias reference <code class="literal">a2</code> is
            interpreted as having a database of <code class="literal">db1</code>:
          </p><pre class="programlisting">DELETE a1, a2 FROM db1.t1 AS a1 INNER JOIN db2.t2 AS a2
WHERE a1.id=a2.id;</pre><p>
            To correctly match an alias that refers to a table outside
            the default database, you must explicitly qualify the
            reference with the name of the proper database:
          </p><pre class="programlisting">DELETE a1, db2.a2 FROM db1.t1 AS a1 INNER JOIN db2.t2 AS a2
WHERE a1.id=a2.id;</pre><p>
            Now alias resolution does not require qualification and
            alias references should not be qualified with the database
            name. Qualified names are interpreted as referring to
            tables, not aliases.
          </p></li></ul></div><p>
        Statements containing alias constructs that are no longer
        permitted must be rewritten.
       (Bug #27525)</p><p>References: See also Bug #30234.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> now is permitted only
        if you have acquired a <code class="literal">WRITE</code> lock with
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, or if you hold no
        locks, or if the table is a <code class="literal">TEMPORARY</code> table.
      </p><p>
        Previously, if other tables were locked, you could drop a table
        with a read lock or no lock, which could lead to deadlocks
        between clients. The new stricter behavior means that some usage
        scenarios will fail when previously they did not.
       (Bug #25858)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        If a data definition language (DDL) statement occurred for a
        table that was being used by another session in an active
        transaction, statements could be written to the binary log in
        the wrong order. For example, this could happen if <code class="literal">DROP
        TABLE</code> occurred for a table being used in a
        transaction. This is now prevented by deferring release of
        metadata locks on tables used within a transaction until the
        transaction ends.
      </p><p>
        This bug fix results in some incompatibilities with previous
        versions:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            A table that is being used by a transaction within one
            session cannot be used in DDL statements by other sessions
            until the transaction ends.
          </p></li><li><p>
            <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a> is not permitted when there is an active
            <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
            READ</code></a>. Use
            <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES
            <em class="replaceable"><code>tbl_list</code></em> WITH READ LOCK</code></a>
            instead. This causes a problem with
            <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a>, fixed in Bug #42465.
          </p></li></ul></div><p>(Bug #989, Bug #39675)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        For an engine that supported only row-based replication,
        replication stopped with an error when executing row events.
      </p><p>
        For information about changes in how the binary logging format
        is determined in relation to statement type and storage engine
        logging capabilities, see <a href="server-administration.html#binary-log-mixed" title="5.2.4.3. Mixed Binary Logging Format">Section 5.2.4.3, “Mixed Binary Logging Format”</a>.
      </p><p>
        As part of the fix for this issue, the
        <a href="storage-engines.html#example-storage-engine" title="13.12. The EXAMPLE Storage Engine"><code class="literal">EXAMPLE</code></a> storage engine is now
        changed so that it supports statement-based logging only.
        Previously, it supported row-based logging only.
       (Bug #39934, Bug #11749859)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The IPv6 loopback address <code class="literal">::1</code> was interpeted
        as a hostname rather than a numeric IP address.
      </p><p>
        In addition, the IPv6-enabled server on Windows interpeted the
        hostname <code class="literal">localhost</code> as <code class="literal">::1</code>
        only, which failed to match the default
        <code class="literal">'root'@'127.0.0.1'</code> account in the
        <code class="literal">mysql.user</code> privilege table.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          As a result of this fix, a <code class="literal">'root'@'::1'</code>
          account is added to the <code class="literal">mysql.user</code> table as
          one of the default accounts created during MySQL installation.
        </p></div><p>(Bug #43006)</p><p>References: See also Bug #38247, Bug #45283, Bug #45584, Bug #45606.</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Column length information generated by
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> did not match that generated
        by <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>, which caused invalid
        metadata to be written to the binary log when trying to
        replicate <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> columns.
       (Bug #49618)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        <code class="literal">SHOW INNODB STATUS</code> could display incorrect
        information about deadlocks, when the deadlock detection routine
        stops early (to avoid excessive CPU usage).
       (Bug #49001)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Concurrent execution of <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> for <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table
        and a transaction that tried to read and then update the table
        could result in a deadlock between table-level locks and
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> row locks, which was
        detected only after the
        <a href="storage-engines.html#sysvar_innodb_lock_wait_timeout"><code class="literal">innodb_lock_wait_timeout</code></a>
        timeout occurred.
       (Bug #37346)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When using a debug build of MySQL, if a query against a
        partitioned table having an index on one or more
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> columns used that index,
        the server failed with an assertion.
       (Bug #45816)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        The first time that a query against the
        <a href="information-schema.html#tables-table" title="19.22. The INFORMATION_SCHEMA TABLES Table"><code class="literal">INFORMATION_SCHEMA.TABLES</code></a> table for
        partitioned tables using the
        <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine"><code class="literal">ARCHIVE</code></a> engine was run, it returned
        invalid data. If the server had been restarted since such a
        table had been created, or if the table had never actually been
        opened, its <code class="literal">DATA_LENGTH</code> was reported as 0
        bytes. (The second and subsequent attempts to issue the same
        query returned the expected result.)
       (Bug #44622)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE</code></a> on a partitioned table caused unnecessary
        deadlocks.
       (Bug #43867)</p><p>References: See also Bug #46654. This bug is a regression of Bug #40181.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Attempting to drop a partitioned table from one connection while
        waiting for the completion of an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> that had been issued from a different
        connection, and that changed the storage engine used by the
        table, could cause the server to crash.
       (Bug #42438)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        After attempting to create a duplicate index on a partitioned
        table (and having the attempt fail as expected), a subsequent
        attempt to create a new index on the table caused the server to
        hang.
       (Bug #40181)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When used on a partitioned table, <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> produced the wrong error message when the name
        of a nonexistent storage engine was used in the
        <code class="literal">ENGINE</code> clause.
       (Bug #35765)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When one user was in the midst of a transaction on a partitioned
        table, a second user performing an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> on this table caused the server to hang.
       (Bug #34604)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Portions of the partitioning code were refactored in response to
        potential regression issues uncovered while working on the fix
        for Bug #31210.
       (Bug #32115)</p><p>References: See also Bug #40281.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the row-based or mixed replication format with a
        debug build of the MySQL server, inserts into columns using the
        <code class="literal">utf32</code> character set on the master caused the
        slave to crash.
       (Bug #51787)</p><p>References: See also Bug #51716.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the row-based or mixed replication format, column
        values using the <code class="literal">utf16</code> character set on the
        master were padded incorrectly on the slave.
       (Bug #51716)</p><p>References: See also Bug #51787.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        An issue internal to the code, first seen in Bug #49132 but not
        completely resolved in the fix for that bug, was removed. This
        should prevent similar issues to those in the previous bug with
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> changes following
        DDL statements.
      </p><p>
        <span class="emphasis"><em>For developers working with the MySQL Server
        code</em></span>: the public class variable
        <code class="literal">THD::current_stmt_binlog_row_based</code> was
        supposed to have been removed as part of the fix for Bug #39934,
        but was still present in the code. If a developer later tried to
        use this variable, it could cause the previous issues to
        re-occur, and possibly new ones to arise. The variable has now
        been removed; the previously added class functions
        <code class="literal">THD::is_current_stmt_binlog_format_row()</code>,
        <code class="literal">THD::set_current_stmt_binlog_format_row()</code>,
        and
        <code class="literal">THD::clear_current_stmt_binlog_format_row()</code>
        should be used instead.
       (Bug #51021)</p><p>References: See also Bug #11749859.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Adding an index to a table on the master caused the slave to
        stop logging slow queries to the slow query log.
       (Bug #50620)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If a <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
        set <code class="literal">MASTER_HEARTBEAT_PERIOD</code> to 30 or higher,
        <a href="server-administration.html#statvar_Slave_received_heartbeats"><code class="literal">Slave_received_heartbeats</code></a> did
        not increase on the slave. This caused the slave to reconnect
        before the time indicated by
        <a href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a> had elapsed.
      </p><p>
        This issue affected big-endian 64-bit platforms such as
        Solaris/SPARC.
       (Bug #50296)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The error message given when trying to replicate (using
        statement-based mode) insertions into an
        <code class="literal">AUTO_INCREMENT</code> column by a stored function or
        a trigger was improved.
       (Bug #50192)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The server could deadlock when
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a> was
        executed concurrently with DML statements. To fix this problem,
        nontransactional changes are now always flushed before
        transactional changes.
       (Bug #50038)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Metadata for <code class="literal">GEOMETRY</code> fields was not properly
        stored by the slave in its definitions of tables.
       (Bug #49836)</p><p>References: See also Bug #48776.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Statement-based replication of user variables having numeric
        data types did not always work correctly.
       (Bug #49562, Bug #11757508)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the semisynchronous replication plugin on Windows,
        the wait time calculated when the master was waiting for reply
        from the slave was incorrect. In addition, when the wait time
        was less than the current time, the master did not wait for a
        reply at all.
      </p><p>
        This issue was caused by the fact that a different internal
        function was used to get current time by the plugin on Windows
        as opposed to other platforms, and this function was not
        correctly implemented. Now the Windows version of the plugin
        uses the same function as other platforms for this purpose.
       (Bug #49557)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Due to a change in the format of the information used by the
        slave to connect to the master, which could cause to reject
        connection attempts to older masters by newer slaves.
       (Bug #49259)</p><p>References: This bug was introduced by Bug #13963.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based logging, a failing
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a> statement on a nontransactional table was not
        flagged correctly, such that, if a rollback was requested and no
        other nontransactional table had been updated, nothing was
        written to the binary log.
       (Bug #47175)</p><p>References: See also Bug #40278.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication, the incomplete logging of a
        group of events involving both transaction and nontransactional
        tables could cause <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> to
        hang.
       (Bug #45940)</p><p>References: See also Bug #319, Bug #38205.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        There were two related issues concerning handling of unsafe
        statements and setting of the binary logging format when there
        were open temporary tables on the master, and the existing
        replication format was row-based or mixed:
      </p><div class="orderedlist"><ol type="1"><li><p>
            When using
            <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=ROW</code></a>, and an
            unsafe statement was executed while there were open
            temporary tables on the master, the statement
            <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET
            @@session.binlog_format = MIXED</code></a> failed with the
            error <span class="errortext">Cannot switch out of the row-based binary
            log format when the session has open temporary
            tables</span>.
          </p></li><li><p>
            When using
            <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=MIXED</code></a>, and an
            unsafe statement was executed while there were open
            temporary tables on the master, the statement
            <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET
            @@session.binlog_format = STATEMENT</code></a> caused any
            subsequent DML statements to be written to the binary log
            using the row-based format instead of the statement-based
            format.
          </p></li></ol></div><p>(Bug #45855, Bug #45856)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Statements that updated <code class="literal">AUTO_INCREMENT</code>
        columns in multiple tables were logged using the row-based
        format when <code class="option">--binlog_format</code> was set to
        <code class="literal">MIXED</code>, but did not cause an <span class="errortext">Unsafe
        statement</span> warning to be generated when
        <code class="option">--binlog_format</code> was set to
        <code class="literal">STATEMENT</code>.
       (Bug #45827)</p><p>References: See also Bug #39934, Bug #11749859.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Even though <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
        statements are unsafe for statement-based replication, they
        caused the statement only to be logged in row format when the
        binary logging format was <code class="literal">MIXED</code>, but did not
        cause a warning to be generated when the binary logging format
        was <code class="literal">STATEMENT</code>.
       (Bug #45825)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using <code class="literal">MIXED</code> binary logging format,
        statements containing a <code class="literal">LIMIT</code> clause and
        occurring in stored routines were not written to the log as row
        events.
       (Bug #45785)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using statement-based replication, database-level character
        sets were not always honored by the replication SQL thread. This
        could cause data inserted on the master using
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> to be replicated using
        the wrong character set.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          This was not an issue when using row-based replication.
        </p></div><p>(Bug #45516)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> did not flush the
        relay log or the <code class="filename">master.info</code> or
        <code class="filename">relay-log.info</code> files, which could lead to
        corruption if the server crashed.
       (Bug #44188)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Large transactions and statements could corrupt the binary log
        if the size of the cache (as set by
        <a href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a>) was not
        large enough to store the changes.
      </p><p>
        Now, for transactions that do not fit into the cache, the
        statement is not logged, and the statement generates an error
        instead.
      </p><p>
        For nontransactional changes that do not fit into the cache, the
        statement is also not logged—an incident event is logged
        after committing or rolling back any pending transaction, and
        the statement then raises an error.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          If a failure occurs before the incident event is written the
          binary log, the slave does not stop, and the master does not
          report any errors.
        </p></div><p>(Bug #43929, Bug #11752675)</p><p>References: See also Bug #37148, Bug #11748696, Bug #46166, Bug #11754544.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        On Windows, <a href="sql-syntax.html#reset-master" title="12.4.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> failed
        in the event of a missing binlog file rather than issuing a
        warning and completing the rest of the statement.
       (Bug #42150, Bug #42218)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Executing the sequence of statements <a href="sql-syntax.html#reset-slave" title="12.4.2.3. RESET SLAVE Syntax"><code class="literal">RESET
        SLAVE</code></a>, <a href="sql-syntax.html#reset-master" title="12.4.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a>,
        and <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>,
        when binary log or relay log files listed in the index file
        could not be found, could cause the server to crash. This could
        happen, for example, when these files had been moved or deleted
        manually.
       (Bug #41902)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        MySQL creates binary logs in a numbered sequence, with a maximum
        possible 4294967295 concurrent log files, 4294967295 being the
        maximum value for an unsigned long integer. However, binary log
        file extensions were turned into negative numbers once the
        variable used to hold the value reached the maximum value for a
        signed long integer (2147483647). Consequently, when the
        sequence value was incremented to the next (negative) number,
        MySQL tried to create the file using a
        <code class="filename">.000000</code> extension, causing the server to
        fail since this file already existed.
      </p><p>
        Negative file extensions are no longer permitted, and an error
        is returned when the limit is reached. In addition,
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a> now
        also reports warnings to the user, if the extension number has
        reached the limit, and warnings are printed to the error log
        when the limit is approaching.
       (Bug #40611)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Issuing concurrent <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a>,
        <a href="sql-syntax.html#start-slave" title="12.4.2.5. START SLAVE Syntax"><code class="literal">START SLAVE</code></a>, and
        <a href="sql-syntax.html#reset-slave" title="12.4.2.3. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a> statements using
        different connections caused the replication slave to crash.
       (Bug #38716)</p><p>References: See also Bug #38715, Bug #44312.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A slave compiled using <code class="option">--with-libevent</code> and run
        with
        <a href="server-administration.html#sysvar_thread_handling"><code class="option">--thread-handling=pool-of-threads</code></a>
        could sometimes crash.
       (Bug #36929)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> sometimes failed when trying to
        create temporary files; this was because it ignored the
        specified temp file directory and tried to use the system
        <code class="filename">/tmp</code> directory instead.
       (Bug #35546)</p><p>References: See also Bug #35543.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement with
        no <code class="literal">MASTER_HEARTBEAT_PERIOD</code> option failed to
        reset the heartbeat period to its default value.
       (Bug #34686)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Formerly, only slaves that had been started with the
        <code class="option">--report-hosts</code> option were visible in the
        output of <a href="sql-syntax.html#show-slave-hosts" title="12.7.5.34. SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a>. Now,
        all slaves that are registered with the master appear in
        <a href="sql-syntax.html#show-slave-hosts" title="12.7.5.34. SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a> output.
      </p><p>
        As part of the fix for this issue, the
        <code class="literal">Rpl_recovery_rank</code> column, which had appeared
        in the output of <a href="sql-syntax.html#show-slave-hosts" title="12.7.5.34. SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a>
        in some MySQL releases, was removed because the corresponding
        server variable
        <a href="replication.html#sysvar_rpl_recovery_rank"><code class="literal">rpl_recovery_rank</code></a> (now
        deprecated) was never actually used.
       (Bug #13963)</p><p>References: See also Bug #21132, Bug #21869.</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> did not pass the correct default
        value of <a href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> to
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
       (Bug #51938)</p></li><li><p>
        <a href="programs.html#mysqld-multi" title="4.3.4. mysqld_multi — Manage Multiple MySQL Servers"><span><strong class="command">mysqld_multi</strong></span></a> failed due to a syntax error in
        the script.
       (Bug #51468)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table that has been locked
        using <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES
        ... WRITE</code></a> incorrectly produced an
        <a href="error-handling.html#error_er_table_not_locked_for_write"><code class="literal">ER_TABLE_NOT_LOCKED_FOR_WRITE</code></a>
        error.
       (Bug #51240)</p></li><li><p>
        The <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> could default to the
        <code class="literal">ascii</code> character set, which is not a valid
        character set choice for MySQL. The <code class="literal">latin1</code>
        character set will now be used when an ASCII environment has
        been identified.
       (Bug #51166)</p></li><li><p>
        On some Unix/Linux platforms, an error during build from source
        could be produced, referring to a missing
        <code class="literal">LT_INIT</code> program. This is due to versions of
        <span><strong class="command">libtool</strong></span> 2.1 and earlier.
       (Bug #51009)</p></li><li><p>
        Referring to a subquery result in a <code class="literal">HAVING</code>
        clause could produce incorrect results.
       (Bug #50995)</p></li><li><p>
        Aggregate functions on <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>
        columns could yield incorrect or undefined results.
       (Bug #50888)</p></li><li><p>
        The optimizer normally prefers use of
        <code class="literal">filesort</code> plus the join cache to a full index
        scan. But this combination was used even if the index is
        clustered, in which case, the clustered index scan can be
        faster.
       (Bug #50843)</p></li><li><p>
        For debug builds, <a href="sql-syntax.html#show-binary-logs" title="12.7.5.2. SHOW BINARY LOGS Syntax"><code class="literal">SHOW BINARY
        LOGS</code></a> raised an assertion if binary logging was not
        enabled.
       (Bug #50780)</p></li><li><p>
        The server did not recognize that the stored procedure cache
        became invalid if a view was created or modified within a
        procedure, resulting in a crash.
       (Bug #50624)</p></li><li><p>
        Incorrect handling of <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> columns
        in temporary tables could lead to spurious duplicate-key errors.
       (Bug #50591)</p></li><li><p>
        The second or subsequent invocation of a stored procedure
        containing <a href="sql-syntax.html#drop-trigger" title="12.1.30. DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a> could
        cause a server crash.
       (Bug #50423)</p></li><li><p>
        The return values for calls to put information into the stored
        routine cache were not consistently checked, raising an
        assertion.
       (Bug #50412)</p></li><li><p>
        Full-text queries that used the truncation operator
        (<code class="literal">*</code>) could enter an infinite loop.
       (Bug #50351)</p></li><li><p>
        For debug builds, an assertion was incorrectly raised in the
        optimizer when matching <code class="literal">ORDER BY</code> expressions.
       (Bug #50335)</p></li><li><p>
        Queries optimized with <code class="literal">GROUP_MIN_MAX</code> did not
        clean up <code class="literal">KEYREAD</code> optimizations properly,
        causing subsequent queries to return incomplete rows.
       (Bug #49902)</p></li><li><p>
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql --show-warnings</strong></span></a> crashed if the server
        connection was lost.
       (Bug #49646)</p></li><li><p>
        For string-valued system variables containing multibyte
        characters, the byte length was used in contexts where the
        character length was more appropriate.
       (Bug #49645)</p></li><li><p>
        <a href="sql-syntax.html#show-variables" title="12.7.5.40. SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a> did not correctly
        display string-valued system variables that contained
        <code class="literal">\0</code> characters.
       (Bug #49644)</p></li><li><p>
        MySQL program option-processing code incorrectly displayed some
        options when printing ambiguous-option errors.
       (Bug #49640)</p></li><li><p>
        For dynamic format <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables
        containing <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGTEXT</code></a> columns, a
        bulk <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code></a> or bulk
        <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a> could cause corruption.
       (Bug #49628)</p></li><li><p>
        Setting <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> to
        <code class="literal">DEFAULT</code> assigned a value different from the
        default.
       (Bug #49540)</p></li><li><p>
        For debug builds, with
        <a href="server-administration.html#sysvar_sql_safe_updates"><code class="literal">sql_safe_updates</code></a> enabled, a
        multiple-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> with the
        <code class="literal">IGNORE</code> modifier could raise an assertion.
       (Bug #49534)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> crashed trying to print column names for a
        subquery in the <code class="literal">FROM</code> clause when the table
        had gone out of scope.
       (Bug #49487)</p></li><li><p>
        For <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables, the test for
        using an index for <code class="literal">ORDER BY</code> sorting did not
        distinguish between primary keys and secondary indexes and
        expected primary key values to be concatenated to index values
        the way they are to secondary key values.
       (Bug #49324)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> no longer permits you to execute an
        SQL statement on a connection after doing a
        <code class="literal">send</code> command, unless you do a
        <code class="literal">reap</code> first. This was previously accepted but
        could produce unpredictable results.
       (Bug #49269)</p></li><li><p>
        Valgrind warnings for several logging messages were corrected.
       (Bug #49130)</p></li><li><p>
        For debug builds on Windows, warnings about incorrect use of
        debugging directives were written to the error log. The
        directives were rewritten to eliminate these messages.
       (Bug #49025)</p></li><li><p>
        Plugins in a binary release could not be installed into a debug
        version of the server.
       (Bug #49022)</p></li><li><p>
        On POSIX systems, calls to <code class="literal">select()</code> with a
        file descriptor set larger than <code class="literal">FD_SETSIZE</code>
        resulted in unpredictable I/O errors; for example, when a large
        number of tables required repair.
       (Bug #48929)</p></li><li><p>
        A dependent subquery containing
        <a href="functions.html#function_count"><code class="literal">COUNT(DISTINCT
        <em class="replaceable"><code>col_name</code></em>))</code></a> could be
        evaluated incorrectly.
       (Bug #48920)</p></li><li><p>
        If a stored function contained a
        <a href="sql-syntax.html#return" title="12.6.5.7. RETURN Syntax"><code class="literal">RETURN</code></a> statement with an
        <code class="literal">ENUM</code> value in the <code class="literal">ucs2</code>
        character set, <a href="sql-syntax.html#show-create-function" title="12.7.5.10. SHOW CREATE FUNCTION Syntax"><code class="literal">SHOW CREATE
        FUNCTION</code></a> and <code class="literal">SELECT DTD_IDENTIFIER FROM
        INFORMATION_SCHEMA.ROUTINES</code> returned incorrect values.
       (Bug #48766)</p></li><li><p>
        An <code class="literal">.ARZ</code> file missing from the database
        directory caused the server to crash.
       (Bug #48757)</p></li><li><p>
        Running <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> on a
        view <code class="literal">v1</code> that contained a function which
        accessed another view <code class="literal">v2</code> could trigger a
        infinite loop if the view referenced within the function
        (<code class="literal">v2</code>) caused a warning to be raised while
        being opened.
       (Bug #48449)</p></li><li><p>
        Invalid memory reads could occur following a query that
        referenced a <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table multiple
        times with a write lock.
       (Bug #48438)</p></li><li><p>
        For debug builds, creating a view containing a row constructor
        raised an assertion.
       (Bug #48294)</p></li><li><p>
        An aliasing violation in the C API could lead to a crash.
       (Bug #48284)</p></li><li><p>
        Slow <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements were not
        always logged to the slow query log because execution time for
        multiple-statement stored procedures was assessed incorrectly.
       (Bug #47905)</p></li><li><p>
        For debug builds, killing a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> retrieving from a view
        that was processing a function raised an assertion.
       (Bug #47736)</p></li><li><p>
        Failure to open a view with a nonexistent
        <code class="literal">DEFINER</code> was improperly handled and the server
        crashed later attempting to lock the view.
       (Bug #47734)</p></li><li><p>
        If a prepared statement used both a <code class="literal">MERGE</code>
        table and a stored function or trigger, execution sometimes
        failed with a <span class="errortext">No such table</span> error.
       (Bug #47648)</p></li><li><p>
        <a href="sql-syntax.html#create-view" title="12.1.20. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> raised an assertion
        if a temporary table existed with the same name as the view.
       (Bug #47635)</p></li><li><p>
        Renaming a column of an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        table caused the server to go out of sync with the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> data dictionary. To avoid
        this issue, renaming a column uses the older technique of
        copying all the table data rather than updating the table
        in-place.
       (Bug #47621)</p></li><li><p>
        If a temporary table was created with the same name as a view
        referenced in a stored routine, routine execution could raise an
        assertion.
       (Bug #47313)</p></li><li><p>
        Selecting from the process list in the embedded server caused a
        crash.
       (Bug #47304)</p><p>References: See also Bug #43733.</p></li><li><p>
        Programs did not exit if the option file specified by
        <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> was not found.
       (Bug #47216)</p></li><li><p>
        Attempts to print octal numbers with
        <code class="literal">my_vsnprintf()</code> could cause a crash.
       (Bug #47212)</p></li><li><p>
        Corrected a potential problem of unintended file overwriting
        when the <code class="literal">MY_DONT_OVERWRITE_FILE</code> flag was
        used.
       (Bug #47126)</p></li><li><p>
        Deadlock occurred if one session was running a
        multiple-statement transaction that involved a single
        partitioned table and another session attempted to alter the
        table.
       (Bug #46654)</p></li><li><p>
        Valgrind warnings about memory allocation overruns for handling
        <a href="sql-syntax.html#create-function" title="12.1.12. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statements for
        UDFs were corrected.
       (Bug #46570)</p></li><li><p>
        The server could crash attempting to flush privileges after
        receipt of a <code class="literal">SIGHUP</code> signal.
       (Bug #46495)</p></li><li><p>
        If <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT INTO
        <em class="replaceable"><code>tbl_name</code></em></code></a> invoked a stored
        function that modified <em class="replaceable"><code>tbl_name</code></em>, the
        server crashed.
       (Bug #46374)</p></li><li><p>
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statements within a
        transaction that already holds metadata locks could lead to
        deadlocks.
      </p><p>
        Before this fix, all handlers for <code class="literal">TEMPORARY</code>
        tables were reset whenever any base table was opened.
       (Bug #46224)</p></li><li><p>
        For queries that used <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT(DISTINCT
        ...)</code></a>, the value of
        <a href="server-administration.html#sysvar_max_heap_table_size"><code class="literal">max_heap_table_size</code></a> was used
        for memory allocation, which could be excessive. Now the minimum
        of <a href="server-administration.html#sysvar_max_heap_table_size"><code class="literal">max_heap_table_size</code></a> and
        <a href="server-administration.html#sysvar_tmp_table_size"><code class="literal">tmp_table_size</code></a> is used.
       (Bug #46018)</p></li><li><p>
        Improperly closing tables when <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
        DELAYED</code></a> needed to reopen tables could cause an
        assertion failure.
       (Bug #45949)</p><p>References: See also Bug #18484.</p></li><li><p>
        Grouping by a subquery in a query with a
        <code class="literal">DISTINCT</code> aggregate function led to incorrect
        and unordered grouping values.
       (Bug #45640)</p></li><li><p>
        For an IPv6-enabled MySQL server, privileges specified using
        standard IPv4 addresses for hosts were not matched (only
        IPv4-mapped addresses were handled correctly).
      </p><p>
        As part of the fix for this bug, a new build option
        <code class="option">--disable-ipv6</code> has been introduced. Compiling
        MySQL with this option causes all IPv6-specific code in the
        server to be ignored.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p xmlns="">
          If the server has been compiled using
          <code class="option">--disable-ipv6</code>, it is not able to resolve
          hostnames correctly when run in an IPv6 environment.
        </p></div><p>(Bug #45606)</p><p>References: See also Bug #38247, Bug #43006, Bug #45283, Bug #45584.</p></li><li><p>
        The hostname cache failed to work correctly.
       (Bug #45584)</p><p>References: See also Bug #38247, Bug #43006, Bug #45283, Bug #45606.</p></li><li><p>
        A Windows Installation using the GUI installer would fail with:
      </p><pre class="programlisting">MySQL Server 5.1 Setup Wizard ended prematurely

The wizard was interrupted before MySQL Server 5.1. could be completely installed.

Your system has not been modified. To complete installation at another time, please run
setup again.

Click Finish to exit the wizard</pre><p>
        This was due to a step in the MSI installer that could fail to
        execute correctly on some environments.
       (Bug #45418)</p></li><li><p>
        Propagation of a large unsigned numeric constant in
        <code class="literal">WHERE</code> expressions could lead to incorrect
        results. This also affected
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a>, which printed incorrect numeric constants in
        such transformed <code class="literal">WHERE</code> expressions.
       (Bug #45360)</p></li><li><p>
        There was no timeout for attempts to acquire metadata locks (for
        example, a <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> attempt for
        a table that was open in another transaction would not time
        out).
      </p><p>
        To handle such situations, there is now a
        <a href="server-administration.html#sysvar_lock_wait_timeout"><code class="literal">lock_wait_timeout</code></a> system
        variable that specifies the timeout in seconds for attempts to
        acquire metadata locks. The permitted values range from 1 to
        31536000 (1 year). The default is 31536000.
      </p><p>
        This timeout applies to all statements that use metadata locks.
        These include DML and DDL operations on tables, views, stored
        procedures, and stored functions, as well as
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>,
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a>, and <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a>
        statements.
      </p><p>
        The timeout value applies separately for each metadata lock
        attempt. A given statement can require more than one lock, so it
        is possible for the statement to block for longer than the
        <a href="server-administration.html#sysvar_lock_wait_timeout"><code class="literal">lock_wait_timeout</code></a> value before
        reporting a timeout error. When lock timeout occurs,
        <a href="error-handling.html#error_er_lock_wait_timeout"><code class="literal">ER_LOCK_WAIT_TIMEOUT</code></a> is
        reported.
      </p><p>
        <a href="server-administration.html#sysvar_lock_wait_timeout"><code class="literal">lock_wait_timeout</code></a> does not
        apply to delayed inserts, which always execute with a timeout of
        1 year. This is done to avoid unnecessary timeouts because a
        session that issues a delayed insert receives no notification of
        delayed insert timeouts.
      </p><p>
        In addition: The unused
        <a href="server-administration.html#sysvar_table_lock_wait_timeout"><code class="literal">table_lock_wait_timeout</code></a> system
        variable was removed. The <code class="literal">LOW_PRIORITY</code>
        modifier for <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
        TABLES ... WRITE</code></a> locks now has no effect. The meaning
        of <code class="literal">LOW_PRIORITY</code> remains as before in other
        contexts, such as for <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements.
        <a href="storage-engines.html#sysvar_innodb_table_locks"><code class="literal">innodb_table_locks=0</code></a> no longer
        has an effect for tables locked explicitly with
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        WRITE</code></a>. It still has an effect for tables locked for
        read or write by
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        WRITE</code></a> implicitly (for example, through triggers) or by
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES ...
        READ</code></a>.
       (Bug #45225, Bug #56272)</p></li><li><p>
        Valgrind warnings about uninitialized variables in optimizer
        code were corrected.
       (Bug #45195)</p></li><li><p>
        Killing a delayed-insert thread could cause a server crash.
       (Bug #45067)</p></li><li><p>
        Execution of <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLES</code></a> or <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLES WITH READ LOCK</code></a> concurrently with
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> resulted in deadlock.
       (Bug #45066)</p></li><li><p>
        The <a href="connectors-apis.html#mysql-real-connect" title="21.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> C API
        function only attempted to connect to the first IP address
        returned for a hostname. This could be a problem if a hostname
        mapped to multiple IP address and the server was not bound to
        the first one returned. Now
        <a href="connectors-apis.html#mysql-real-connect" title="21.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> attempts to
        connect to all IPv4 or IPv6 addresses that a domain name maps
        to.
       (Bug #45017)</p><p>References: See also Bug #47757.</p></li><li><p>
        For plugins that did not have command-line options other than
        the ones to select the plugin itself, those options were not
        displayed in the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> help message.
       (Bug #44797)</p></li><li><p>
        Some plugins configured as mandatory could be disabled at server
        startup.
       (Bug #44691)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> took a shared row lock when
        executing <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements
        inside a stored function as a part of a transaction using
        <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a>. This
        prevented other transactions from updating the row.
       (Bug #44613)</p></li><li><p>
        MySQL Server permitted the creation of a merge table based on
        views but crashed when attempts were made to read from that
        table. The following example demonstrates this:
      </p><pre class="programlisting">#Create a test table
CREATE TABLE tmp (id int, c char(2));                                           

#Create two VIEWs upon it
CREATE VIEW v1 AS SELECT * FROM tmp;                                            
CREATE VIEW v2 AS SELECT * FROM tmp;                                            

#Finally create a MERGE table upon the VIEWs
CREATE TABLE merge (id int, c char(2))
ENGINE=MERGE UNION(v1, v2);

#Reading from the merge table lead to a crash
SELECT * FROM merge;</pre><p>
        The final statement generated the crash.
       (Bug #44040)</p></li><li><p>
        A natural join of <code class="literal">INFORMATION_SCHEMA</code> tables
        could cause an assertion failure.
       (Bug #43834)</p></li><li><p>
        When used in conjunction with <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
        TABLES</code></a>, <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        TABLE <em class="replaceable"><code>tbl_list</code></em></code></a> waited for
        all tables with old versions to clear from the table definition
        list, rather than only the named tables.
       (Bug #43685)</p></li><li><p>
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statements are now not
        permitted if a table lock has been acquired with
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>.
       (Bug #43272)</p></li><li><p>
        In the embedded server, stack overflow checks for recursive
        stored procedure calls did not work and stack overflow could
        occur.
       (Bug #43201)</p></li><li><p>
        The server could crash if an attempt to open a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table child
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table failed.
       (Bug #42862)</p></li><li><p>
        Sign loss could occur in several contexts:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a> could lose the
            sign of negative arguments.
          </p></li><li><p>
            <a href="functions.html#function_maketime"><code class="literal">MAKETIME()</code></a> could lose the
            sign of negative arguments.
          </p></li><li><p>
            Comparison of <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> values
            could lose the sign of operands.
          </p></li></ul></div><p>(Bug #42661, Bug #42662, Bug #42664)</p></li><li><p>
        Setting <a href="server-administration.html#sysvar_key_buffer_size"><code class="literal">key_buffer_size</code></a> to a
        negative value could lead to very large allocations. Now an
        error occurs.
       (Bug #42103)</p></li><li><p>
        An assertion failure could occur if
        <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> was started on an
        <code class="literal">InnoDB</code> table and the table was altered to a
        different storage engine during the optimization operation.
       (Bug #42074)</p></li><li><p>
        The state of a thread for the embedded server was always
        displayed as <code class="literal">Writing to net</code>, which is
        incorrect because there is no network connection for the
        embedded server.
       (Bug #41971)</p></li><li><p>
        The patch for Bug #10374 broke named-pipe and shared-memory
        connections on Windows.
       (Bug #41860)</p></li><li><p>
        Purging the stored-routine cache could take a long time and
        render the server unresponsive.
       (Bug #41804)</p></li><li><p>
        Command-line options for enumeration-type plugin variables were
        not honored.
       (Bug #41010)</p></li><li><p>
        System variables could be set to invalid values.
       (Bug #40988)</p></li><li><p>
        The <code class="literal">CSV</code> storage engine did not parse
        <code class="literal">'\X'</code> characters when they occurred in
        unquoted fields.
       (Bug #40814)</p></li><li><p>
        When archive tables were joined on their primary keys, a query
        returned no result if the optimizer chose to use this index.
       (Bug #40677)</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> did not treat dashes and
        underscores as equivalent in option names. Thanks to Erik
        Ljungstrom for the patch to fix this bug.
       (Bug #40368)</p></li><li><p>
        <a href="sql-syntax.html#show-create-view" title="12.7.5.14. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a> returned invalid
        SQL if the definition contained a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
        <code class="literal">'<em class="replaceable"><code>string</code></em>'</code> statement
        where the <em class="replaceable"><code>string</code></em> was longer than the
        maximum length of a column name, due to the fact that this text
        was also used as an alias (in the <code class="literal">AS</code> clause).
      </p><p>
        Because not all names retrieved from arbitrary
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements can be used as
        view column names due to length and format restrictions, the
        server now checks the conformity of automatically generated
        column names and rewrites according to a predefined format any
        names that are not acceptable as view column names before
        storing the final view definition on disk.
      </p><p>
        In such cases, the name is now rewritten as
        <code class="literal">Name_exp_<em class="replaceable"><code>pos</code></em></code>,
        where <em class="replaceable"><code>pos</code></em> is the position of the
        column. To avoid this conversion scheme, define explicit, valid
        names for view columns using the
        <em class="replaceable"><code>column_list</code></em> clause of the
        <a href="sql-syntax.html#create-view" title="12.1.20. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> statement.
      </p><p>
        As part of this fix, aliases are now generated only for
        top-level statements.
       (Bug #40277)</p></li><li><p>
        Threads were set to the <code class="literal">Table lock</code> state in
        such a way that use of this state by other threads to check for
        a lock wait was subject to a race condition.
       (Bug #39897)</p></li><li><p>
        Plugin shutdown could lead to an assertion failure caused by
        using an already destroyed mutex in the metadata locking
        subsystem.
       (Bug #39674)</p></li><li><p>
        Dropping a locked <code class="literal">Maria</code> table leads to an
        assertion failure.
       (Bug #39395)</p></li><li><p>
        Host name lookup failure could lead to a server crash.
       (Bug #39153)</p></li><li><p>
        <code class="literal">flush_cache_records()</code> did not correctly check
        for errors that should cause statement execution to stop,
        leading to a server crash.
       (Bug #39022)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> logged an error repeatedly
        trying to load a page into the buffer pool, filling the error
        log and using excessive disk space. Now the number of attempts
        is limited to 100, after which the operation aborts with a
        message.
       (Bug #38901)</p></li><li><p>
        Valgrind warnings that occurred for <a href="sql-syntax.html#show-table-status" title="12.7.5.37. SHOW TABLE STATUS Syntax"><code class="literal">SHOW
        TABLE STATUS</code></a> with <code class="literal">InnoDB</code> tables
        were silenced.
       (Bug #38479)</p></li><li><p>
        An IPv6-enabled MySQL server did not resolve the IP addresses of
        incoming connections correctly, with the result that a
        connection that attempted to match any privilege table entries
        using fully-qualified domain names for hostnames or hostnames
        using wildcards were dropped.
       (Bug #38247)</p><p>References: See also Bug #43006, Bug #45283, Bug #45584, Bug #45606.</p></li><li><p>
        For <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE
        ... LIKE</code></a> with a <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a>
        source table that included a <code class="literal">UNION</code> clause,
        that clause was omitted from the definition of the destination
        table.
       (Bug #37371)</p></li><li><p>
        Previously, statements inside a stored program did not clear the
        warning list. For example, warnings or errors generated by
        statements within a trigger or stored function would be
        accumulated and added to the message list for the statement that
        activated the trigger or invoked the function,
        “<span class="quote">polluting</span>” the output of <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW
        WARNINGS</code></a> or <a href="sql-syntax.html#show-errors" title="12.7.5.18. SHOW ERRORS Syntax"><code class="literal">SHOW ERRORS</code></a>
        for the outer statement. Normally, messages for a statement that
        can generate messages replace messages from the previous such
        statement. The effect was that a statement could have a
        different effect on the message list depending on whether it
        executed inside or outside of a stored program.
      </p><p>
        Now within a stored program, successive statements that can
        generate messages update the message list and replace messages
        from the previous such statement. Only messages from the last of
        these statements is copied to the message list for the outer
        statement.
       (Bug #36649)</p></li><li><p>
        <a href="programs.html#myisampack" title="4.6.5. myisampack — Generate Compressed, Read-Only MyISAM Tables"><span><strong class="command">myisampack --join</strong></span></a> did not create the
        destination table <code class="filename">.frm</code> file.
       (Bug #36573)</p></li><li><p>
        The parser incorrectly permitted MySQL error code 0 to be
        specified for a condition handler. (This is incorrect because
        the condition must be a failure condition and 0 indicates
        success.)
       (Bug #36510)</p></li><li><p>
        When parsing or formatting interval values of
        <code class="literal">DAY_MICROSECOND</code> type, fractional seconds were
        not handled correctly when more-significant fields were implied
        or omitted.
       (Bug #36466)</p></li><li><p>
        <a href="programs.html#mysql-install-db" title="4.4.3. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> failed if run as
        <code class="literal">root</code> and the root directory
        (<code class="literal">/</code>) was not writable.
       (Bug #36462)</p></li><li><p>
        <a href="connectors-apis.html#mysql-stmt-prepare" title="21.9.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> did not
        reset the list of messages (those messages available using
        <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a>).
       (Bug #36004)</p></li><li><p>
        A global read lock obtained with
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a> did not prevent sessions from creating tables.
       (Bug #35935)</p></li><li><p>
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> left temporary files on the disk
        after shutdown, leading to the pollution of the temporary
        directory, which eventually caused
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> to fail. This caused problems in
        testing and other situations where
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> might be invoked many times in a
        relatively short period of time.
       (Bug #35543)</p></li><li><p>
        When building MySQL when using a different target directory (for
        example using the <code class="literal">VPATH</code> environment
        variable), the build of the embedded <code class="literal">readline</code>
        component failed.
       (Bug #35250)</p></li><li><p>
        String-valued system variables could be assigned literal values,
        but could not be assigned values using expressions. Now
        expressions are legal.
       (Bug #34883, Bug #46314)</p></li><li><p>
        The <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> system variable
        could be assigned the illegal value of <code class="literal">'?'</code>.
       (Bug #34834)</p></li><li><p>
        Compiling MySQL on FreeBSD failed due to missing definitions for
        certain network constants.
       (Bug #34292)</p></li><li><p>
        Creation of a temporary <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column could create a column
        with the wrong maximum length.
       (Bug #33969)</p></li><li><p>
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT INTO ...
        VALUES(DEFAULT)</code></a> failed to insert the correct value for
        <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns. For
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables, an empty value was
        inserted. For <a href="storage-engines.html#csv-storage-engine" title="13.7. The CSV Storage Engine"><code class="literal">CSV</code></a> tables, the table
        became corrupt.
       (Bug #33717)</p></li><li><p>
        When <a href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a> was enabled, the
        server incorrectly prevented data modifications to
        <code class="literal">TEMPORARY</code> tables belonging to transactional
        storage engines such as <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>.
       (Bug #33669)</p></li><li><p>
        Constant expressions in <code class="literal">WHERE</code>,
        <code class="literal">HAVING</code>, or <code class="literal">ON</code> clauses were
        not cached, but were evaluated for each row. This caused a
        slowdown of query execution, especially if constant user-defined
        functions or stored functions were used.
       (Bug #33546)</p></li><li><p>
        Plugins could find the unqualified form of their system
        variables but not the qualified form. For example, a plugin
        <code class="literal">p</code> with a system variable
        <code class="literal">sv</code> could find <code class="literal">sv</code> but not
        <code class="literal">p_sv</code>.
       (Bug #32902)</p></li><li><p>
        Killing a statement that invoked a stored function could return
        an incorrect error message indicating table corruption rather
        than that the statement had been interrupted.
       (Bug #32140)</p></li><li><p>
        Occurrence of an error within a stored routine did not always
        cause immediate statement termination.
       (Bug #31881)</p></li><li><p>
        For <a href="sql-syntax.html#drop-function" title="12.1.23. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION
        <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>func_name</code></em></code></a>
        (that is, when the function name is qualified with the database
        name), the statement should apply only to a stored function
        named <code class="filename">func_name</code> in the given database.
        However, if a UDF with the same name existed, the statement
        dropped the UDF instead.
       (Bug #31767)</p></li><li><p>
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> sometimes miscalculated the number of
        digits required when storing a floating-point number in a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> column. This caused the
        value to be truncated, or (when using a debug build) caused the
        server to crash.
       (Bug #26788)</p><p>References: See also Bug #12860.</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> could not be used to
        add columns to a table if the table had an index on a
        <code class="literal">utf8</code> column with a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> data type.
       (Bug #26180)</p></li><li><p>
        If an operation had an <code class="literal">InnoDB</code> table, and two
        triggers, <code class="literal">AFTER UPDATE</code> and <code class="literal">AFTER
        INSERT</code>, competing for different resources (such as two
        distinct <code class="literal">MyISAM</code> tables), the triggers were
        unable to execute concurrently. In addition,
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> and
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements for the
        <code class="literal">InnoDB</code> table were unable to run concurrently.
       (Bug #26141)</p></li><li><p>
        Statements to create, alter, or drop a view were not waiting for
        completion of statements that were using the view, which led to
        incorrect sequences of statements in the binary log when
        statement-based logging was enabled.
       (Bug #25144)</p></li><li><p>
        Previously, the server handled character data types for a stored
        routine parameter, local routine variable created with
        <a href="sql-syntax.html#declare" title="12.6.3. DECLARE Syntax"><code class="literal">DECLARE</code></a>, or stored function
        return value as follows: If the <code class="literal">CHARACTER SET</code>
        attribute was present, the <code class="literal">COLLATE</code> attribute
        was not supported, so the character set's default collation was
        used. (This includes use of <code class="literal">BINARY</code>, which in
        this context specifies the binary collation of the character
        set.) If there was no <code class="literal">CHARACTER SET</code>
        attribute, the database character set and its default collation
        were used.
      </p><p>
        Now for character data types, if there is a <code class="literal">CHARACTER
        SET</code> attribute in the declaration, the specified
        character set and its default collation is used. If the
        <code class="literal">COLLATE</code> is also present, that collation is
        used rather than the default collation. If there is no
        <code class="literal">CHARACTER SET</code> attribute, the database
        character set and collation in effect at routine creation time
        are used. (The database character set and collation are given by
        the value of the
        <a href="server-administration.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a> and
        <a href="server-administration.html#sysvar_collation_database"><code class="literal">collation_database</code></a> system
        variables.)
       (Bug #24690)</p></li><li><p>
        <code class="literal">Data truncated for column
        <em class="replaceable"><code>col_num</code></em> at row
        <em class="replaceable"><code>row_num</code></em></code> warnings were
        generated for some (constant) values that did not have too high
        precision.
       (Bug #24541)</p></li><li><p>
        A statement that caused a circular wait among statements did not
        return a deadlock error. Now the server detects deadlock and
        returns <a href="error-handling.html#error_er_lock_deadlock"><code class="literal">ER_LOCK_DEADLOCK</code></a>.
       (Bug #22876)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        LIKE</code></a> did not always produce an error is the source
        table column defaults were illegal for the current version of
        MySQL. (This could occur if the table was created using an older
        server that was less restrictive about legal default values.)
       (Bug #22090)</p></li><li><p>
        Several data-modification statements were not being counted
        toward the <code class="literal">MAX_UPDATES_PER_HOUR</code> user resource
        limit.
       (Bug #21793)</p></li><li><p>
        When inserting an extraordinarly large value into a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> column, the value could be
        truncated in such a way that the new value cannot be reloaded
        manually or from the output of <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>.
       (Bug #21497)</p></li><li><p>
        The value of
        <a href="replication.html#sysvar_sql_slave_skip_counter"><code class="literal">sql_slave_skip_counter</code></a> was
        empty when displayed by <a href="sql-syntax.html#show-variables" title="12.7.5.40. SHOW VARIABLES Syntax"><code class="literal">SHOW
        VARIABLES</code></a> or
        <a href="information-schema.html#variables-table" title="19.10. The INFORMATION_SCHEMA GLOBAL_VARIABLES and
      SESSION_VARIABLES
      Tables"><code class="literal">INFORMATION_SCHEMA.GLOBAL_VARIABLES</code></a>.
       (Bug #20413, Bug #37187)</p></li><li><p>
        For <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statements
        issued for a table while an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> operation on the table was in progress, the
        server could return a spurious <code class="literal">Server shutdown in
        progress</code> error.
       (Bug #18484)</p><p>References: See also Bug #45949.</p></li><li><p>
        Delayed-insert threads were counted as connected but not as
        created, incorrectly leading to a
        <a href="server-administration.html#statvar_Threads_connected"><code class="literal">Threads_connected</code></a> value
        greater than the
        <a href="server-administration.html#statvar_Threads_created"><code class="literal">Threads_created</code></a> value.
       (Bug #17954)</p></li><li><p>
        The character set was not being properly initialized for
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> with a type such as
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR(2) BINARY</code></a>, which resulted in
        incorrect results or a server crash.
       (Bug #17903)</p></li><li><p>
        Stored procedure exception handlers were catching fatal errors
        (such as out of memory errors), which could cause execution not
        to stop to due a continue handler. Now fatal errors are not
        caught by exception handlers and a fatal error is returned to
        the client.
       (Bug #15192)</p></li><li><p>
        Zero-padding of exponent values was not the same across
        platforms.
       (Bug #12860)</p></li><li><p>
        For <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>, the parser did
        not enforce that parentheses were present in a <code class="literal">CHECK
        (<em class="replaceable"><code>expr</code></em>)</code> clause; now it does.
        The parser did not enforce that <code class="literal">CONSTRAINT
        [<em class="replaceable"><code>symbol</code></em>]</code> without a
        following <code class="literal">CHECK</code> clause was illegal; now it
        does.
       (Bug #11714, Bug #35578, Bug #38696)</p></li><li><p>
        If a connection was waiting for a
        <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> lock or a
        <a href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a> call, and the connection
        aborted, the server did not detect this and thus did not close
        the connection. This caused a waste of system resources
        allocated to dead connections. Now the server checks such a
        connection every five seconds to see whether it has been
        aborted. If so, the connection is killed (and any lock request
        is aborted).
       (Bug #10374)</p></li><li><p>
        <a href="programs.html#perror" title="4.8.1. perror — Explain Error Codes"><span><strong class="command">perror</strong></span></a> did not work for errors described in
        the <code class="filename">sql/share/errmsg.txt</code> file.
       (Bug #10143)</p></li><li><p>
        The grammar for <code class="literal">GROUP BY</code>, when used with
        <code class="literal">WITH CUBE</code> or <code class="literal">WITH ROLLUP</code>,
        caused a conflict with the grammar for view definitions that
        included <code class="literal">WITH CHECK OPTION</code>.
       (Bug #9801)</p></li><li><p>
        For the <a href="functions.html#operator_div"><code class="literal">DIV</code></a> operator, incorrect
        results could occur for noninteger operands that exceed
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> range. Now, if either
        operand has a noninteger type, the operands are converted to
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> and divided using
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> arithmetic before
        converting the result to <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>.
        If the result exceeds <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>
        range, an error occurs.
       (Bug #8457, Bug #11745058)</p><p>References: See also Bug #59241.</p></li><li><p>
        Labels in stored routines did not work if the character set was
        not <code class="literal">latin1</code>.
       (Bug #7088)</p></li><li><p>
        Previously, for some Asian CJK character sets, the
        <a href="functions.html#function_upper"><code class="literal">UPPER()</code></a> and
        <a href="functions.html#function_lower"><code class="literal">LOWER()</code></a> functions worked only for
        basic Latin letters (<code class="literal">A-Z</code>,
        <code class="literal">a-z</code>). The affected character sets are
        <code class="literal">ujis</code>, <code class="literal">sjis</code>,
        <code class="literal">gb2312</code>, <code class="literal">cp932</code>,
        <code class="literal">eucjpms</code>, <code class="literal">big5</code>,
        <code class="literal">euckr</code>, and <code class="literal">gbk</code>.
      </p><p>
        Now <a href="functions.html#function_upper"><code class="literal">UPPER()</code></a> and
        <a href="functions.html#function_lower"><code class="literal">LOWER()</code></a> perform case conversion
        correctly for all characters in these character sets, with the
        exception that if a character set contains a character in only
        one lettercase, conversion to the other lettercase cannot be
        done.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-2"></a>D.1.21. Changes in MySQL 5.5.2 (12 February 2010)</h3></div></div></div><p><span class="bold"><strong>InnoDB Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        This release includes <code class="literal">InnoDB</code> 1.0.6. This
        version is considered of Release Candidate (RC) quality.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Replication</strong></span>: 
        Introduced the
        <a href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
        system variable. Enabling this variable causes updates using the
        statement-based logging format to tables using nontransactional
        engines to be written directly to the binary log, rather than to
        the transaction cache.
      </p><p>
        Before enabling this variable, be certain that you have no
        dependencies between transactional and nontransactional tables.
        A statement that both selects from an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table and inserts into a
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table is an example of such
        a dependency. For more information, see
        <a href="replication.html#replication-options-binary-log" title="15.1.3.4. Binary Log Options and Variables">Section 15.1.3.4, “Binary Log Options and Variables”</a>.
       (Bug #46364)</p><p>References: See also Bug #28976, Bug #40116.</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        For servers built with yaSSL, a preauthorization buffer overflow
        could cause memory corruption or a server crash. We thank Evgeny
        Legerov from Intevydis for providing us with a proof-of-concept
        script that permitted us to reproduce this bug.
       (Bug #50227, CVE-2009-4484)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: <span class="bold"><strong>Partitioning</strong></span>: 
        When used on partitioned tables, the
        <code class="literal">records_in_range</code> handler call checked more
        partitions than necessary. The fix for this issue reduces the
        number of unpruned partitions checked for statistics in
        partition range checking, which has resulted in some partition
        operations being performed up to 2-10 times faster than before
        this change was made, when testing with tables having 1024
        partitions.
       (Bug #48846)</p><p>References: See also Bug #37252, Bug #47261.</p></li><li><p><span class="bold"><strong>Performance</strong></span>: 
        The method for comparing <code class="literal">INFORMATION_SCHEMA</code>
        names and database names was nonoptimal and an improvement was
        made: When the database name length is already known, a length
        check is made first and content comparison skipped if the
        lengths are unequal.
       (Bug #49501)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: 
        The <a href="functions.html#function_md5"><code class="literal">MD5()</code></a> and
        <a href="functions.html#function_sha1"><code class="literal">SHA1()</code></a> functions had excessive
        overhead for short strings.
       (Bug #49491)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In <code class="filename">plugin.h</code>, the
        <code class="literal">MYSQL_REPLICATION_PLUGIN</code> symbol was out of
        synchrony with its value in MySQL 6.0 because the lower-valued
        <code class="literal">MYSQL_AUDIT_PLUGIN</code> was not present. To
        correct this, <code class="literal">MYSQL_AUDIT_PLUGIN</code> has been
        added in MySQL 5.5, changing the value of
        <code class="literal">MYSQL_REPLICATION_PLUGIN</code> from 5 to 6.
        Attempts to load the audit plugin produce an error occurs
        because only the <code class="literal">MYSQL_AUDIT_PLUGIN</code> symbol
        was added, not the audit plugin itself. This error will go away
        when the audit plugin is added to MySQL 5.5 (in 5.5.3).
        Replication plugins from earlier 5.5.x releases must be
        recompiled against the current release before they will work
        with the current release.
       (Bug #49894)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> function is now marked
        as unsafe for statement-based replication. Using this function
        now generates a warning when
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=STATEMENT</code></a> and
        causes the format to switch to row-based logging when
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=MIXED</code></a>.
      </p><p>
        This change is being introduced because, when
        <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> was logged in statement
        mode, the seed was also written to the binary log, so the
        replication slave generated the same sequence of random numbers
        as was generated on the master. While this could make
        replication work in some cases, the order of affected rows was
        still not guaranteed when this function was used in statements
        that could update multiple rows, such as
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> or
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a>; if the master and the slave retrieved rows in
        different order, they began to diverge.
       (Bug #49222)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When an <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE
        ... REORGANIZE PARTITION</code></a> statement on an
        <code class="literal">InnoDB</code> table failed due to
        <a href="storage-engines.html#sysvar_innodb_lock_wait_timeout"><code class="literal">innodb_lock_wait_timeout</code></a>
        expiring while waiting for a lock, <code class="literal">InnoDB</code> did
        not clean up any temporary files or tables which it had created.
        Attempting to reissue the <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement following the timeout could lead to
        storage engine errors, or possibly a crash of the server.
       (Bug #47343)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        Creating or dropping a table with 1023 transactions active
        caused an assertion failure.
       (Bug #49238)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        If <a href="storage-engines.html#sysvar_innodb_force_recovery"><code class="literal">innodb_force_recovery</code></a> was
        set to 4 or higher, the server could crash when opening an
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table containing an
        auto-increment column. MySQL versions 5.1.31 and later were
        affected.
       (Bug #46193)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>
        could in some circumstances crash the server. This occurred
        because the I/O thread could concurrently access the relay log
        I/O cache while another thread was performing the
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>,
        which closes and reopens the relay log and, while doing so,
        initializes (or re-initializes) its I/O cache. This could cause
        problems if some other thread (in this case, the I/O thread) is
        accessing it at the same time.
      </p><p>
        Now the thread performing the
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>
        operation takes a lock on the relay log before actually flushing
        it.
       (Bug #50364)</p><p>References: See also Bug #53657.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        With semisynchronous replication, memory allocated for handling
        transactions could be freed while still in use, resulting in a
        server crash.
       (Bug #50157)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        In some cases, inserting into a table with many columns could
        cause the binary log to become corrupted.
       (Bug #50018)</p><p>References: See also Bug #42749.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication, setting a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> or
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> column of a
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> table to
        <code class="literal">NULL</code>, then trying to delete from the table,
        caused the slave to fail with the error <span class="errortext">Can't find
        record in <em class="replaceable"><code>table</code></em></span>.
       (Bug #49481, Bug #49482)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement that loaded data into a table having
        a column name that had to be quoted (such as <code class="literal">`key`
        INT</code>) caused replication to fail when logging in mixed
        or statement mode. In such cases, the master wrote the
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> event into the binary
        log without quoting the column name.
       (Bug #49479)</p><p>References: See also Bug #47927. This bug is a regression of Bug #43746.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When logging in row-based mode, DDL statements are actually
        logged as statements; however, statements that affected
        temporary tables and followed DDL statements failed to reset the
        binary log format to <code class="literal">ROW</code>, with the result
        that these statements were logged using the statement-based
        format. Now the state of
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is restored after
        a DDL statement has been written to the binary log.
       (Bug #49132)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Spatial data types caused row-based replication to crash.
       (Bug #48776)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based logging, the statement
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE t IF
        NOT EXIST ... SELECT</code></a> was logged as
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TEMPORARY
        TABLE t IF NOT EXIST ... SELECT</code></a> when
        <code class="literal">t</code> already existed as a temporary table. This
        was caused by the fact that the temporary table was opened and
        the results of the <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> were
        inserted into it when a temporary table existed and had the same
        name.
      </p><p>
        Now, when this statement is executed, <code class="literal">t</code> is
        created as a base table, the results of the
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> are inserted into
        it—even if there already exists a temporary table having
        the same name—and the statement is logged correctly.
       (Bug #47418)</p><p>References: See also Bug #47442.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Due to a change in the size of event representations in the
        binary log, when replicating from a MySQL 4.1 master to a slave
        running MySQL 5.0.60 or later, the
        <a href="sql-syntax.html#start-slave" title="12.4.2.5. START SLAVE Syntax"><code class="literal">START SLAVE
        UNTIL</code></a> statement did not function correctly, stopping
        at the wrong position in the log. Now the slave detects that the
        master is using the older version of the binary log format, and
        corrects for the difference in event size, so that the slave
        stops in the correct position.
       (Bug #47142)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Manually removing entries from the binary log index file on a
        replication master could cause the server to repeatedly send the
        same binary log file to slaves.
       (Bug #28421)</p></li><li><p>
        The SSL certificates in the test suite were about to expire.
        They have been updated with expiration dates in the year 2015.
       (Bug #50642)</p></li><li><p>
        <code class="literal">SPATIAL</code> indexes were permitted on columns
        with nonspatial data types, resulting in a server crash for
        subsequent table inserts.
       (Bug #50574)</p></li><li><p>
        Index prefixes could be specified with a length greater than the
        associated column, resulting in a server crash for subsequent
        table inserts.
       (Bug #50542)</p></li><li><p>
        Use of loose index scan optimization for an aggregate function
        with <code class="literal">DISTINCT</code> (for example,
        <a href="functions.html#function_count"><code class="literal">COUNT(DISTINCT)</code></a>) could produce
        incorrect results.
       (Bug #50539)</p></li><li><p>
        The <code class="literal">printstack</code> function does not exist on
        Solaris 8 or earlier, which led to a compilation failure.
       (Bug #50409)</p></li><li><p>
        A user could see tables in
        <a href="information-schema.html#tables-table" title="19.22. The INFORMATION_SCHEMA TABLES Table"><code class="literal">INFORMATION_SCHEMA.TABLES</code></a> without
        appropriate privileges for them.
       (Bug #50276)</p></li><li><p>
        Debug output for join structures was garbled.
       (Bug #50271)</p></li><li><p>
        The server crashed when an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
        background thread attempted to write a message containing a
        partitioned table name to the error log.
       (Bug #50201)</p></li><li><p>
        Within a stored routine, selecting the result of
        <a href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a> with a routine
        parameter argument into a user variable could return incorrect
        results.
       (Bug #50096)</p></li><li><p>
        The <code class="literal">filesort</code> sorting method applied to a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR(0)</code></a> column could lead to a
        server crash.
       (Bug #49897)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN EXTENDED UNION
        ... ORDER BY</code></a> caused a crash when the <code class="literal">ORDER
        BY</code> referred to a nonconstant or full-text function or
        a subquery.
       (Bug #49734)</p></li><li><p>
        Some prepared statements could raise an assertion when
        re-executed.
       (Bug #49570)</p></li><li><p>
        <a href="server-administration.html#sysvar_sql_buffer_result"><code class="literal">sql_buffer_result</code></a> had an effect
        on non-<a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements,
        contrary to the documentation.
       (Bug #49552)</p></li><li><p>
        In some cases a subquery need not be evaluated because it
        returns only aggregate values that can be calculated from table
        metadata. This sometimes was not handled by the enclosing
        subquery, resulting in a server crash.
       (Bug #49512)</p></li><li><p>
        Mixing full-text searches and row expressions caused a crash.
       (Bug #49445)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> now recognizes the
        <code class="literal">MTR_TESTCASE_TIMEOUT</code>,
        <code class="literal">MTR_SUITE_TIMEOUT</code>,
        <code class="literal">MTR_SHUTDOWN_TIMEOUT</code>, and
        <code class="literal">MTR_START_TIMEOUT</code> environment variables. If
        they are set, their values are used to set the
        <code class="option">--testcase-timeout</code>,
        <code class="option">--suite-timeout</code>,
        <code class="option">--shutdown-timeout</code>, and
        <code class="option">--start-timeout</code> options, respectively.
       (Bug #49210)</p></li><li><p>
        Several <code class="literal">strmake()</code> calls had an incorrect
        length argument (too large by one).
       (Bug #48983)</p></li><li><p>
        On Fedora 12, <code class="literal">strmov()</code> did not guarantee
        correct operation for overlapping source and destination buffer.
        Calls were fixed to use an overlap-safe version instead.
       (Bug #48866)</p></li><li><p>
        With one thread waiting for a lock on a table, if another thread
        dropped the table and created a new table with the same name and
        structure, the first thread did not notice that the table had
        been re-created and tried to used cached metadata that belonged
        to the old table but had been freed.
       (Bug #48157)</p></li><li><p>
        If an invocation of a stored procedure failed in the table-open
        stage, subsequent invocations that did not fail in that stage
        could cause a crash.
       (Bug #47649)</p></li><li><p>
        A crash occurred when a user variable that was assigned to a
        subquery result was used as a result field in a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement with aggregate
        functions.
       (Bug #47371)</p></li><li><p>
        When the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client was invoked with the
        <a href="programs.html#option_mysql_vertical"><code class="option">--vertical</code></a> option, it ignored the
        <a href="programs.html#option_mysql_skip-column-names"><code class="option">--skip-column-names</code></a> option.
       (Bug #47147)</p></li><li><p>
        The optimizer could continue to execute a query after a storage
        engine reported an error, leading to a server crash.
       (Bug #46175)</p></li><li><p>
        If <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> encountered an error
        in the query, a memory leak occurred.
       (Bug #45989)</p></li><li><p>
        A race condition on the privilege hash tables permitted one
        thread to try to delete elements that had already been deleted
        by another thread. A consequence was that
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET
        PASSWORD</code></a> or
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        PRIVILEGES</code></a> could cause a crash.
       (Bug #35589, Bug #35591)</p></li><li><p>
        1) In rare cases, if a thread was interrupted during a
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
        PRIVILEGES</code></a> operation, a debug assertion occurred later
        due to improper diagnostics area setup. 2) A
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> operation could cause a
        console error message referring to a diagnostic area state
        without first ensuring that the state existed.
       (Bug #33982)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> with both
        <code class="literal">DROP COLUMN</code> and <code class="literal">ADD COLUMN</code>
        clauses could crash or lock up the server.
       (Bug #31145)</p></li><li><p>
        The <a href="server-administration.html#statvar_Table_locks_waited"><code class="literal">Table_locks_waited</code></a> waited
        variable was not incremented in the cases that a lock had to be
        waited for but the waiting thread was killed or the request was
        aborted.
       (Bug #30331)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-1"></a>D.1.22. Changes in MySQL 5.5.1 (04 January 2010)</h3></div></div></div><p>
        When the publishing process for MySQL 5.5.1 was already running,
        the MySQL team was informed about a security problem in the SSL
        connect area (a possibility to crash the server). The problem is
        caused by a buffer overflow in the yaSSL library. MySQL Servers
        using OpenSSL are not affected; it can occur only when SSL
        (using yaSSL) is enabled.
      </p><p>
        This problem is under detailed investigation with the various
        versions, configurations, and platforms. When that has finished,
        the problem will be fixed as soon as possible, and new binaries
        for the affected versions will be released. However, building
        and testing these binaries in the various configurations on the
        various platforms will take some time. The bug is tracked with
        CVE ID CVE-2009-4484. We repeat the general security hint: If it
        is not <span class="emphasis"><em>absolutely</em></span> necessary that external
        machines can connect to your database instance, we recommend
        that the server's connection port be blocked by a firewall to
        prevent any such illegitimate accesses.
      </p><p>
        Update: This bug is fixed in MySQL 5.5.2.
      </p><p><span class="bold"><strong>InnoDB Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">InnoDB</code> has been upgraded to version 1.0.6.
        This version is considered of Release Candidate (RC) quality.
        <a href="storage-engines.html#innodb-changes" title="13.4.12. InnoDB Storage Engine Change History">Section 13.4.12, “InnoDB Storage Engine Change History”</a>, may contain information in
        addition to those changes reported here.
      </p></li></ul></div><p><span class="bold"><strong>RPM Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The version information in RPM package files has been changed:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The “<span class="quote">level</span>” field of a MySQL version number is
            now also included in the RPM version and in the package file
            name.
          </p></li><li><p>
            The RPM “<span class="quote">release</span>” value now counts from 1, not
            0.
          </p></li></ul></div><p>
        For example, the generic x86 server RPM file of 5.5.1-m2 is
        named
        <code class="filename">MySQL-server-5.5.1_m2-1.glibc23.i386.rpm</code>.
        This improves consistency with other formats that also include
        the level in the file name (for this version:
        “<span class="quote">m2</span>”). For example, the <code class="filename">tar.gz</code>
        file name is
        <code class="filename">mysql-5.5.1-m2-linux-i686-glibc23.tar.gz</code>.
        The different separator, underscore <code class="literal">'_'</code> for
        RPM, is required by the syntax of RPM.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        The <a href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> function is
        now supported in partitioning expressions using
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns. For example,
        it now possible to create a partitioned table such as this one:
      </p><pre class="programlisting">CREATE TABLE t (c TIMESTAMP) 
PARTITION BY RANGE ( UNIX_TIMESTAMP(c) ) (
    PARTITION p0 VALUES LESS THAN (631148400),
    PARTITION p1 VALUES LESS THAN (946681200),
    PARTITION p2 VALUES LESS THAN (MAXVALUE)
);</pre><p>
        All other expressions involving
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values are now rejected
        with an error for attempts to create a new partitioned table or
        to alter an existing partitioned table.
      </p><p>
        When accessing an existing partitioned table having a
        timezone-dependent partitioning function (where the table was
        using a previous version of MySQL), a warning rather than an
        error is issued. In such cases, you should fix the table. One
        way of doing this is to alter the table's partitioning
        expression so that it uses
        <a href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a>.
       (Bug #42849)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Performance</strong></span>: 
        When the query cache is fragmented, the size of the free block
        lists in the memory bins grows, which causes query cache
        invalidation to become slow. There is now a 50ms timeout for a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement waiting for the
        query cache lock. If the timeout expires, the statement executes
        without using the query cache.
       (Bug #39253)</p><p>References: See also Bug #21074.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The file names for the semisynchronous plugins were prefixed
        with <code class="filename">lib</code>, unlike file names for other
        plugins. The file names no longer have a
        <code class="filename">lib</code> prefix.
      </p><p>
        This change introduces an incompatibility if the plugins had
        been installed using the previous names. To handle this,
        uninstall the older version before installing the newer version.
        For example, use these statements for the master side plugins on
        Unix:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UNINSTALL PLUGIN rpl_semi_sync_master;</code></strong>
mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';</code></strong>
</pre><p>
        If you do not uninstall the older version first, attempting to
        install the newer version results in an error:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';</code></strong>
ERROR 1125 (HY000): Function 'rpl_semi_sync_master' already exists
</pre><p>
        For the slave side, similar statements apply:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UNINSTALL PLUGIN rpl_semi_sync_slave;</code></strong>
mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN rpl_semi_sync_slave SONAME 'semisync_slave.so';</code></strong>
</pre></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The following functions have been marked unsafe for
        statement-based replication:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>
          </p></li><li><p>
            <a href="functions.html#function_version"><code class="literal">VERSION()</code></a>
          </p></li></ul></div><p>
        None of the functions just listed are guaranteed to replicate
        correctly when using the statement-based format because they can
        produce different results on the master and the slave. The use
        of any of these functions while
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is set to
        <code class="literal">STATEMENT</code> is logged with the warning,
        <span class="errortext">Statement is not safe to log in statement
        format</span>. When
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is set to
        <code class="literal">MIXED</code>, the binary logging format is
        automatically switched to the row-based format whenever one of
        these functions is used.
       (Bug #47995)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        After a binary upgrade to MySQL 5.1 from a MySQL 5.0
        installation that contains <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine"><code class="literal">ARCHIVE</code></a>
        tables:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Before MySQL 5.1.42, accessing those tables will cause the
            server to crash, even if you have run
            <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> or
            <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a>.
          </p></li><li><p>
            As of MySQL 5.1.42, the server will not open 5.0
            <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine"><code class="literal">ARCHIVE</code></a> tables at all.
          </p></li></ul></div><p>
        In either case, the solution is to use
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> to dump all 5.0
        <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine"><code class="literal">ARCHIVE</code></a> tables before upgrading,
        and reload them into MySQL 5.1 after upgrading. The same problem
        occurs for binary downgrades from MySQL 5.1 to 5.0.
       (Bug #47012)</p></li><li><p><span class="bold"><strong>InnoDB Storage Engine</strong></span>: 
        When compiling on Windows, an error in the
        <span><strong class="command">CMake</strong></span> definitions for
        <code class="literal">InnoDB</code> caused the engine to be built
        incorrectly.
       (Bug #49502)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> was
        invoked for a table that had been created using the
        <code class="literal">COLUMNS</code> keyword or the
        <a href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a> function, the output
        contained the wrong MySQL version number in the conditional
        comments.
       (Bug #49591)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        A query that searched on a <code class="literal">ucs2</code> column failed
        if the table was partitioned.
       (Bug #48737)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        In some cases, it was not possible to add a new column to a
        table that had subpartitions.
       (Bug #48276)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT
        COUNT(*)</code></a> from a partitioned table failed when using
        the <code class="literal">ONLY_FULL_GROUP_BY</code> SQL
        mode.
       (Bug #46923)</p><p>References: This bug was introduced by Bug #45807.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">SUBPARTITION BY KEY</code> failed with
        <code class="literal">DEFAULT CHARSET=utf8</code>.
       (Bug #45904)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based logging, <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
        TABLE</code></a> was written to the binary log even if the
        affected table was temporary, causing replication to fail.
       (Bug #48350)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A flaw in the implementation of the purging of binary logs could
        result in orphaned files being left behind in the following
        circumstances:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If the server failed or was killed while purging binary
            logs.
          </p><p>
            If the server failed or was killed after creating of a new
            binary log when the new log file was opened for the first
            time.
          </p></li></ul></div><p>
        In addition, if the slave was not connected during the purge
        operation, it was possible for a log file that was in use to be
        removed; this could lead data loss and possible inconsistencies
        between the master and slave.
       (Bug #45292)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the <code class="literal">STATEMENT</code> or
        <code class="literal">MIXED</code> logging format, the statements
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA CONCURRENT
        LOCAL INFILE</code></a> and
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA CONCURRENT
        INFILE</code></a> were logged as
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a> and
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a>, respectively (in other words, the
        <code class="literal">CONCURRENT</code> keyword was omitted). As a result,
        when using replication with either of these logging modes,
        queries on the slaves were blocked by the replication SQL thread
        while trying to execute the affected statements.
       (Bug #34628)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        When <a href="server-administration.html#sysvar_expire_logs_days"><code class="literal">expire_logs_days</code></a> was set,
        the thread performing the purge of the log files could deadlock,
        causing all binary log operations to stop.
       (Bug #49536)</p></li><li><p>
        For debug builds on Windows, <code class="literal">SAFEMALLOC</code> was
        defined inconsistently, leading to mismatches when using
        <code class="literal">my_malloc()</code> and <code class="literal">my_free()</code>.
       (Bug #49811)</p></li><li><p>
        The <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> script had incorrect
        shutdown logic.
       (Bug #49772)</p></li><li><p>
        The <code class="literal">push_warning_printf()</code> function was being
        called with an invalid error level,
        <code class="literal">MYSQL_ERROR::WARN_LEVEL_ERROR</code>, causing an
        assertion failure. To fix the problem,
        <code class="literal">MYSQL_ERROR::WARN_LEVEL_ERROR</code> has been
        replaced by <code class="literal">MYSQL_ERROR::WARN_LEVEL_WARN</code>.
       (Bug #49638)</p></li><li><p>
        The result of comparison between nullable
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a> columns was inconsistent.
       (Bug #49517)</p></li><li><p>
        A Valgrind error in
        <code class="literal">make_cond_for_table_from_pred()</code> was
        corrected. Thanks to Sergey Petrunya for the patch to fix this
        bug.
       (Bug #49506)</p></li><li><p>
        Incorrect cache initialization prevented storage of converted
        constant values and could produce incorrect comparison results.
       (Bug #49489)</p></li><li><p>
        Comparisons involving <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> values
        could produce incorrect results.
       (Bug #49480)</p><p>References: See also Bug #43668.</p></li><li><p>
        Valgrind warnings for <a href="sql-syntax.html#checksum-table" title="12.7.2.3. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM
        TABLE</code></a> were corrected.
       (Bug #49465)</p></li><li><p>
        Specifying an index algorithm (such as <code class="literal">BTREE</code>)
        for <code class="literal">SPATIAL</code> or <code class="literal">FULLTEXT</code>
        indexes caused a server crash. These index types do not support
        algorithm specification, and it is not longer permitted to do
        so.
       (Bug #49250)</p></li><li><p>
        The optimizer sometimes incorrectly handled conditions of the
        form <code class="literal">WHERE
        <em class="replaceable"><code>col_name</code></em>='<em class="replaceable"><code>const1</code></em>'
        AND
        <em class="replaceable"><code>col_name</code></em>='<em class="replaceable"><code>const2</code></em>'</code>.
       (Bug #49199)</p></li><li><p>
        Execution of <a href="functions.html#function_decode"><code class="literal">DECODE()</code></a> and
        <a href="functions.html#function_encode"><code class="literal">ENCODE()</code></a> could be inefficient
        because multiple executions within a single statement
        reinitialized the random generator multiple times even with
        constant parameters.
       (Bug #49141)</p></li><li><p>
        With binary logging enabled,
        <a href="sql-syntax.html#revoke" title="12.7.1.5. REVOKE Syntax"><code class="literal">REVOKE ... ON
        {PROCEDURE|FUNCTION} FROM ...</code></a> could cause a crash.
       (Bug #49119)</p></li><li><p>
        The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator did not work
        correctly when using an index for a <code class="literal">ucs2</code>
        column.
       (Bug #49028)</p></li><li><p>
        <code class="literal">check_key_in_view()</code> was missing a
        <code class="literal">DBUG_RETURN</code> in one code branch, causing a
        crash in debug builds.
       (Bug #48995)</p></li><li><p>
        If a query involving a table was terminated with
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a>, a subsequent
        <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> for that table
        caused a server crash.
       (Bug #48985)</p></li><li><p>
        Privileges for stored routines were ignored for mixed-case
        routine names.
       (Bug #48872)</p><p>References: See also Bug #41049.</p></li><li><p>
        Building MySQL on Fedora Core 12 64-bit failed, due to errors in
        <a href="programs.html#comp-err" title="4.4.1. comp_err — Compile MySQL Error Message File"><span><strong class="command">comp_err</strong></span></a>.
       (Bug #48864)</p></li><li><p>
        Concurrent <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> operations
        on an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table could raise an
        assertion.
       (Bug #48782)</p></li><li><p>
        Incomplete reset of internal <code class="literal">TABLE</code> structures
        could cause a crash with
        <a href="optimization.html#jointype_eq_ref"><code class="literal">eq_ref</code></a> table access in
        subqueries.
       (Bug #48709)</p></li><li><p>
        During query execution, ranges could be merged incorrectly for
        <a href="functions.html#operator_or"><code class="literal">OR</code></a> operations and return an
        incorrect result.
       (Bug #48665)</p></li><li><p>
        The <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> Table Monitor reported
        the <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> data types incorrectly.
       (Bug #48526)</p></li><li><p>
        Re-execution of a prepared statement could cause a server crash.
       (Bug #48508)</p></li><li><p>
        With row-based binary logging, the server crashed for statements
        of the form <code class="literal">CREATE TABLE IF NOT EXISTS
        <em class="replaceable"><code>existing_view</code></em> LIKE
        <em class="replaceable"><code>temporary_table</code></em></code>. This
        occurred because the server handled the existing view as a table
        when logging the statement.
       (Bug #48506)</p></li><li><p>
        The error message for
        <a href="error-handling.html#error_er_update_info"><code class="literal">ER_UPDATE_INFO</code></a> was subject to
        buffer overflow or truncation.
       (Bug #48500)</p></li><li><p>
        <code class="literal">DISTINCT</code> was ignored for queries with
        <code class="literal">GROUP BY WITH ROLLUP</code> and only
        <a href="optimization.html#jointype_const"><code class="literal">const</code></a> tables.
       (Bug #48475)</p></li><li><p>
        Loose index scan was inappropriately chosen for some
        <code class="literal">WHERE</code> conditions.
       (Bug #48472)</p></li><li><p>
        The server could crash and corrupt the tablespace if the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tablespace was configured
        with too small a value, or if
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> was
        enabled and many
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TEMPORARY
        TABLE</code></a> statements were executed and the temporary file
        directory filled up.
       (Bug #48469)</p></li><li><p>
        Parts of the range optimizer could be initialized incorrectly,
        resulting in Valgrind errors.
       (Bug #48459)</p></li><li><p>
        A bad typecast could cause query execution to allocate large
        amounts of memory.
       (Bug #48458)</p></li><li><p>
        <a href="sql-syntax.html#show-binlog-events" title="12.7.5.3. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a> could fail
        with a error: <code class="literal">Wrong offset or I/O error</code>.
       (Bug #48357)</p></li><li><p>
        Valgrind warnings related to binary logging of
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statements were corrected.
       (Bug #48340)</p></li><li><p>
        On Windows, <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> could not be
        built as a statically linked library.
       (Bug #48317)</p></li><li><p>
        <a href="programs.html#mysql-secure-installation" title="4.4.5. mysql_secure_installation — Improve MySQL Installation Security"><span><strong class="command">mysql_secure_installation</strong></span></a> did not work on
        Solaris.
       (Bug #48086)</p></li><li><p>
        When running <a href="programs.html#mysql-secure-installation" title="4.4.5. mysql_secure_installation — Improve MySQL Installation Security"><span><strong class="command">mysql_secure_installation</strong></span></a>, the
        command failed if the <code class="literal">root</code> password contained
        multiple space, <code class="literal">'\'</code>, <code class="literal">'#'</code>,
        or quote characters.
       (Bug #48031)</p></li><li><p>
        <code class="literal">MATCH IN BOOLEAN MODE</code> searches could return
        too many results inside a subquery.
       (Bug #47930)</p></li><li><p>
        User-defined collations with an ID less than 256 were not
        initialized correctly when loaded and caused a server crash.
       (Bug #47756)</p></li><li><p>
        If a session acquired a global read lock with
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a>, acquired a lock for one table with
        <a href="sql-syntax.html#lock-tables" title="12.3.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, and issued an
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statement for
        another table, deadlock could occur.
       (Bug #47682)</p></li><li><p>
        The <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client <code class="literal">status</code>
        command displayed an incorrect value for the server character
        set.
       (Bug #47671)</p></li><li><p>
        Connecting to a 4.1.x server from a 5.1.x or higher
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client resulted in a memory-free error
        when disconnecting.
       (Bug #47655)</p></li><li><p>
        Queries containing <code class="literal">GROUP BY ... WITH ROLLUP</code>
        that did not use indexes could return incorrect results.
       (Bug #47650)</p></li><li><p>
        Assignment of a system variable sharing the same base name as a
        declared stored program variable in the same context could lead
        to a crash.
       (Bug #47627)</p></li><li><p>
        On Solaris, the server printed no stack trace to the error log
        after a crash.
       (Bug #47391)</p></li><li><p>
        The first execution of
        <a href="sql-syntax.html#stop-slave" title="12.4.2.6. STOP SLAVE Syntax"><code class="literal">STOP SLAVE
        UNTIL</code></a> stopped too early.
       (Bug #47210)</p></li><li><p>
        The <a href="storage-engines.html#sysvar_innodb_file_format_check"><code class="literal">innodb_file_format_check</code></a>
        system variable could not be set at runtime to
        <code class="literal">DEFAULT</code> or to the value of a user-defined
        variable.
       (Bug #47167)</p></li><li><p>
        The <code class="literal">IGNORE</code> clause on a
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement masked an SQL
        statement error that occurred during trigger processing.
       (Bug #46425)</p></li><li><p>
        Valgrind errors for <code class="literal">InnoDB</code> were corrected.
       (Bug #45992, Bug #46656)</p></li><li><p>
        The return value was not checked for some
        <code class="literal">my_hash_insert()</code> calls.
       (Bug #45613)</p></li><li><p>
        It was possible for <code class="literal">init_available_charsets()</code>
        not to initialize correctly.
       (Bug #45058)</p></li><li><p>
        <code class="literal">GROUP BY</code> on a <code class="literal">constant</code>
        (single-row) <code class="literal">InnoDB</code> table joined to other
        tables caused a server crash.
       (Bug #44886)</p></li><li><p>
        For a
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR(<em class="replaceable"><code>N</code></em>)</code></a>
        column, <code class="literal">ORDER BY
        BINARY(<em class="replaceable"><code>col_name</code></em>)</code> sorted
        using only the first <em class="replaceable"><code>N</code></em> bytes of the
        column, even though column values could be longer than
        <em class="replaceable"><code>N</code></em> bytes if they contained multibyte
        characters.
       (Bug #44131)</p></li><li><p>
        For <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR(2)</code></a> values,
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a>,
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a>, and comparisons could
        yield incorrect results.
       (Bug #43668)</p></li><li><p>
        Comparison with <code class="literal">NULL</code> values sometimes did not
        produce a correct result.
       (Bug #42760)</p></li><li><p>
        In debug builds, killing a
        <a href="sql-syntax.html#load-xml" title="12.2.7. LOAD XML Syntax"><code class="literal">LOAD XML
        INFILE</code></a> statement raised an assertion.
      </p><p>
        Implemented in the course of fixing this bug,
        <span><strong class="command">mysqltest</strong></span> has a new
        <code class="literal">send_eval</code> command that combines the
        functionality of the existing <code class="literal">send</code> and
        <code class="literal">eval</code> commands.
       (Bug #42520)</p></li><li><p>
        The server could crash when attempting to access a
        non-conformant <code class="literal">mysql.proc</code> system table. For
        example, the server could crash when invoking stored
        procedure-related statements after an upgrade from MySQL 5.0 to
        5.1 without running <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>.
       (Bug #41726)</p></li><li><p>
        The <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> command added three columns
        to the <code class="literal">mysql.proc</code> table
        (<code class="literal">character_set_client</code>,
        <a href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a>, and
        <code class="literal">db_collation</code>), but did not populate the
        columns with correct values. This led to error messages reported
        during stored procedure execution.
       (Bug #41569)</p></li><li><p>
        Use of <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> monitoring
        (<a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE INNODB
        STATUS</code></a> or one of the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> Monitor tables) could cause
        a server crash due to invalid access to a shared variable in a
        concurrent environment.
       (Bug #38883)</p></li><li><p>
        When compressed <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> files were
        opened, they were always memory mapped, sometimes causing
        memory-swapping problems. To deal with this, a new system
        variable, <code class="literal">myisam_mmap_size</code>, was added to
        permit limiting the amount of memory used for memory mapping of
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> files.
       (Bug #37408)</p></li><li><p>
        On Windows, the <a href="programs.html#mysql-secure-installation" title="4.4.5. mysql_secure_installation — Improve MySQL Installation Security"><span><strong class="command">mysql_secure_installation</strong></span></a>
        command failed to load the <code class="literal">Term::ReadKey</code>
        module, which was required for correct operation.
       (Bug #35106)</p></li><li><p>
        If the <a href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> server option
        was set to a directory name with a trailing component separator
        character, the basename of the binary log files was empty, so
        that the created files were named <code class="filename">.000001</code>
        and <code class="filename">.index</code>. The same thing occurred with
        the <a href="replication.html#option_mysqld_log-bin-index"><code class="option">--log-bin-index</code></a>,
        <a href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a>, and
        <a href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> options. Now
        the server reports and error and exits.
       (Bug #34739)</p></li><li><p>
        If a comparison involved a constant value that required type
        conversion, the converted value might not be cached, resulting
        in repeated conversion and poorer performance.
       (Bug #34384)</p></li><li><p>
        Using the <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW
        ENGINE INNODB STATUS</code></a> statement when using partitions
        in <code class="literal">InnoDB</code> tables caused <code class="literal">Invalid
        (old?) table or database name</code> errors to be logged.
       (Bug #32430)</p></li><li><p>
        Output from <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql --html</strong></span></a> did not encode the
        <code class="literal">'&lt;'</code>, <code class="literal">'&gt;'</code>, or
        <code class="literal">'&amp;'</code> characters.
       (Bug #27884)</p></li><li><p>
        Under heavy load with a large query cache, invalidating part of
        the cache could cause the server to freeze (that is, to be
        unable to service other operations until the invalidation was
        complete).
       (Bug #21074)</p><p>References: See also Bug #39253.</p></li><li><p>
        On some Windows systems, <code class="literal">InnoDB</code> could report
        <code class="literal">Operating system error number 995 in a file
        operation</code> due to transient driver or hardware
        problems. <code class="literal">InnoDB</code> now retries the operation
        and adds <code class="literal">Retry attempt is made</code> to the error
        message.
       (Bug #3139)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-5-0"></a>D.1.23. Changes in MySQL 5.5.0 (07 December 2009, Milestone 2)</h3></div></div></div><p>
        Previously, MySQL development proceeded by including a large set
        of features and moving them over many versions within a release
        series through several stages of maturity (Alpha, Beta, and so
        forth). This development model had a disadvantage in that
        problems with only part of the code could hinder timely release
        of the whole. As you might have found when testing MySQL Server
        6.0, alpha quality code could jeopardize the stability of the
        entire release. (One consequence of this was that MySQL Server
        6.0 has been withdrawn.)
      </p><p>
        MySQL development now uses a milestone model. The move to this
        model provides for more frequent milestone releases, with each
        milestone proceeding through a small number of releases having a
        focus on a specific subset of thoroughly tested features.
        Following the releases for one milestone, development proceeds
        with the next milestone; that is, another small number of
        releases that focuses on the next small set of features, also
        thoroughly tested.
      </p><p>
        MySQL 5.5.0-m2 is the first release for Milestone 2. The new
        features of this milestone may be considered to be initially of
        beta quality. For subsequent Milestone 2 releases, we plan to
        use increasing version numbers (5.5.1 and higher) while
        continuing to employ the “<span class="quote">-m2</span>” suffix. For
        Milestone 3, we plan to change the suffix to “<span class="quote">-m3</span>”.
        Version designators with “<span class="quote">-alpha</span>” or
        “<span class="quote">-beta</span>” suffixes are no used.
      </p><p>
        You may notice that the MySQL 5.5.0 release is designated as
        Milestone 2 rather than Milestone 1. This is because MySQL 5.4
        was actually designated as Milestone 1, although we had not yet
        begun referring to milestone numbers as part of version numbers
        at the time.
      </p><p><span class="bold"><strong>InnoDB Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">InnoDB Plugin</code> is included in MySQL
        5.5 releases as the built-in version of
        <code class="literal">InnoDB</code>. The version of the
        <code class="literal">InnoDB</code> in this release is 1.0.5 and is
        considered of Release Candidate (RC) quality.
      </p><p>
        This version of <code class="literal">InnoDB</code> offers new features,
        improved performance and scalability, enhanced reliability and
        new capabilities for flexibility and ease of use. Among the
        features are “<span class="quote">Fast index creation,</span>” table and index
        compression, file format management, new
        <code class="literal">INFORMATION_SCHEMA</code> tables, capacity tuning,
        multiple background I/O threads, and group commit.
      </p><p>
        For information about these features, see
        <a href="http://dev.mysql.com/doc/innodb-plugin/1.0/en/index.html" target="_top">InnoDB Plugin 1.0 for MySQL 5.1 User’s Guide</a>. For general information
        about using <code class="literal">InnoDB</code> in MySQL, see
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine">Section 13.3, “The <code class="literal">InnoDB</code> Storage Engine”</a>.
      </p><p>
        In this version of <code class="literal">InnoDB</code>, the
        <code class="literal">innodb_file_io_threads</code> system variable has
        been removed and replaced with
        <a href="storage-engines.html#sysvar_innodb_read_io_threads"><code class="literal">innodb_read_io_threads</code></a> and
        <a href="storage-engines.html#sysvar_innodb_write_io_threads"><code class="literal">innodb_write_io_threads</code></a>. If you
        upgrade from MySQL 5.1 to MySQL 5.5 and previously explicitly
        set <code class="literal">innodb_file_io_threads</code> at server startup,
        you must change your configuration. Either remove any reference
        to <code class="literal">innodb_file_io_threads</code> or replace it with
        references to
        <a href="storage-engines.html#sysvar_innodb_read_io_threads"><code class="literal">innodb_read_io_threads</code></a> and
        <a href="storage-engines.html#sysvar_innodb_write_io_threads"><code class="literal">innodb_write_io_threads</code></a>.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        MySQL Server now includes a plugin services interface that
        complements the plugin API. The services interface enables
        server functionality to be exposed as a “<span class="quote">service</span>”
        that plugins can access using function calls. The
        <code class="literal">libmysqlservices</code> library provides access to
        the available services and dynamic plugins now must be linked
        against this library (use the <code class="literal">-lmysqlservices</code>
        flag). See <a href="extending-mysql.html#plugin-services" title="22.2.5. MySQL Services for Plugins">Section 22.2.5, “MySQL Services for Plugins”</a>.
       (Bug #48461)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Two status variables have been added to
        <a href="sql-syntax.html#show-status" title="12.7.5.36. SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> output.
        <a href="server-administration.html#statvar_Innodb_buffer_pool_read_ahead"><code class="literal">Innodb_buffer_pool_read_ahead</code></a>
        and
        <a href="server-administration.html#statvar_Innodb_buffer_pool_read_ahead_evicted"><code class="literal">Innodb_buffer_pool_read_ahead_evicted</code></a>
        indicate the number of pages read in by the
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> read-ahead background
        thread, and the number of such pages evicted without ever being
        accessed, respectively. Also, the status variables
        <code class="literal">Innodb_buffer_pool_read_ahead_rnd</code> and
        <code class="literal">Innodb_buffer_pool_read_ahead_seq</code> status
        variables have been removed.
       (Bug #42885)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The deprecated <code class="option">--default-table-type</code> server
        option has been removed (use
        <a href="server-administration.html#option_mysqld_default-storage-engine"><code class="option">--default-storage-engine</code></a>).
       (Bug #34818)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <a href="server-administration.html#sqlmode_traditional"><code class="literal">TRADITIONAL</code></a> SQL mode now
        includes
        <a href="server-administration.html#sqlmode_no_engine_substitution"><code class="literal">NO_ENGINE_SUBSTITUTION</code></a>.
       (Bug #21099)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several changes have been made regarding the language and
        character set of error messages:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The <a href="server-administration.html#sysvar_language"><code class="literal">language</code></a> system
            variable has been removed and replaced with the new
            <a href="server-administration.html#sysvar_lc_messages_dir"><code class="literal">lc_messages_dir</code></a> and
            <a href="server-administration.html#sysvar_lc_messages"><code class="literal">lc_messages</code></a> system
            variables. <a href="server-administration.html#sysvar_lc_messages_dir"><code class="literal">lc_messages_dir</code></a>
            has only a global value and is read only.
            <a href="server-administration.html#sysvar_lc_messages"><code class="literal">lc_messages</code></a> has global and
            session values and can be modified at runtime, so the error
            message language can be changed while the server is running,
            and individual clients each can have a different error
            message language by changing their session
            <a href="server-administration.html#sysvar_lc_messages"><code class="literal">lc_messages</code></a> value to a
            different locale name.
          </p></li><li><p>
            The <a href="server-administration.html#option_mysqld_language"><code class="option">--language</code></a> option for
            specifying the directory for the error message file is now
            deprecated. The new
            <a href="server-administration.html#sysvar_lc_messages_dir"><code class="literal">lc_messages_dir</code></a> and
            <a href="server-administration.html#sysvar_lc_messages"><code class="literal">lc_messages</code></a> system
            variables should be used instead, and the server treats
            <a href="server-administration.html#option_mysqld_language"><code class="option">--language</code></a> as an alias for
            <a href="server-administration.html#sysvar_lc_messages_dir"><code class="literal">lc_messages_dir</code></a>.
          </p></li><li><p>
            Error messages previously were constructed in a mix of
            character sets. This issue is resolved by constructing error
            messages internally within the server using UTF-8 and
            returning them to the client in the character set specified
            by the
            <a href="server-administration.html#sysvar_character_set_results"><code class="literal">character_set_results</code></a>
            system variable. The content of error messages therefore may
            in some cases differ from the messags returned previously.
          </p></li></ul></div><p>
        See <a href="globalization.html#error-message-language" title="9.2. Setting the Error Message Language">Section 9.2, “Setting the Error Message Language”</a>, and
        <a href="globalization.html#charset-errors" title="9.1.6. Character Set for Error Messages">Section 9.1.6, “Character Set for Error Messages”</a>.
      </p><p>References: See also Bug #46218, Bug #46236.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        New <code class="literal">PARTITION BY RANGE
        COLUMNS(<em class="replaceable"><code>column_list</code></em>)</code> and
        <code class="literal">PARTITION BY LIST
        COLUMNS(<em class="replaceable"><code>column_list</code></em>)</code>
        options are added for the <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE</code></a> and
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE</code></a> statements.
      </p><p>
        A major benefit of <code class="literal">RANGE COLUMNS</code> and
        <code class="literal">LIST COLUMNS</code> partitioning is that they make
        it possible to define ranges or lists based on column values
        that use string, date, or datetime values.
      </p><p>
        These new extensions also broaden the scope of partition pruning
        to provide better coverage for queries using comparisons on
        multiple columns in the <code class="literal">WHERE</code> clause, some
        examples being <code class="literal">WHERE a = 1 AND b &lt; 10</code> and
        <code class="literal">WHERE a = 1 AND b = 10 AND c &lt; 10</code>.
      </p><p>
        See <a href="partitioning.html#partitioning-range" title="17.2.1. RANGE Partitioning">Section 17.2.1, “<code class="literal">RANGE</code> Partitioning”</a>,
        <a href="partitioning.html#partitioning-list" title="17.2.2. LIST Partitioning">Section 17.2.2, “<code class="literal">LIST</code> Partitioning”</a>, and
        <a href="partitioning.html#partitioning-pruning" title="17.4. Partition Pruning">Section 17.4, “Partition Pruning”</a>.
      </p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        A new <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> option,
        <code class="literal">TRUNCATE PARTITION</code>, makes it possible to
        delete rows from one or more selected partitions only. Unlike
        the case with <code class="literal">ALTER TABLE ... DROP PARTITION</code>,
        <a href="sql-syntax.html#alter-table-partition-operations" title="12.1.7.1. ALTER TABLE Partition Operations"><code class="literal">ALTER
        TABLE ... TRUNCATE PARTITION</code></a> merely deletes all rows
        from the specified partition or partitions, and does not change
        the definition of the table.
      </p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        It is now possible to assign indexes on partitioned
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables to key caches using
        the <a href="sql-syntax.html#cache-index" title="12.7.6.2. CACHE INDEX Syntax"><code class="literal">CACHE INDEX</code></a> and to preload
        such indexes into the cache using
        <a href="sql-syntax.html#load-index" title="12.7.6.5. LOAD INDEX INTO
        CACHE Syntax"><code class="literal">LOAD INDEX INTO
        CACHE</code></a> statements. Cache assignment and preloading of
        indexes for such tables can be performed for one, several, or
        all partitions of the table.
      </p><p>
        This functionality is supported for only those partitioned
        tables that employ the <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>
        storage engine.
      </p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The global server variable
        <a href="replication.html#sysvar_sync_relay_log"><code class="literal">sync_relay_log</code></a> is introduced
        for use on replication slaves. Setting this variable to a
        nonzero integer value <em class="replaceable"><code>N</code></em> causes the
        slave to synchronize the relay log to disk after every
        <em class="replaceable"><code>N</code></em> events. Setting its value to 0
        permits the operating system to handle synchronization of the
        file. The action of this variable, when enabled, is analogous to
        how the <a href="replication.html#sysvar_sync_binlog"><code class="literal">sync_binlog</code></a> variable
        works with regard to binary logs on a replication master.
      </p><p>
        The global server variables
        <a href="replication.html#sysvar_sync_master_info"><code class="literal">sync_master_info</code></a> and
        <a href="replication.html#sysvar_sync_relay_log_info"><code class="literal">sync_relay_log_info</code></a> are
        introduced for use on replication slaves to control
        synchronization of, respectively, the
        <code class="filename">master.info</code> and
        <code class="filename">relay.info</code> files.
      </p><p>
        In each case, setting the variable to a nonzero integer value
        <em class="replaceable"><code>N</code></em> causes the slave to synchronize the
        corresponding file to disk after every
        <em class="replaceable"><code>N</code></em> events. Setting its value to 0
        permits the operating system to handle synchronization of the
        file instead.
      </p><p>
        The actions of these variables, when enabled, are analogous to
        how the <a href="replication.html#sysvar_sync_binlog"><code class="literal">sync_binlog</code></a> variable
        works with regard to binary logs on a replication master.
      </p><p>
        An additional system variable
        <a href="replication.html#sysvar_relay_log_recovery"><code class="literal">relay_log_recovery</code></a> is also now
        available. When enabled, this variable causes a replication
        slave to discard relay log files obtained from the replication
        master following a crash.
      </p><p>
        These variables can also be set in <code class="filename">my.cnf</code>,
        or by using the <a href="replication.html#sysvar_sync_relay_log"><code class="option">--sync-relay-log</code></a>,
        <a href="replication.html#sysvar_sync_master_info"><code class="option">--sync-master-info</code></a>,
        <a href="replication.html#sysvar_sync_relay_log_info"><code class="option">--sync-relay-log-info</code></a>, and
        <a href="replication.html#sysvar_relay_log_recovery"><code class="option">--relay-log-recovery</code></a> server
        options.
      </p><p>
        For more information, see
        <a href="replication.html#replication-options-slave" title="15.1.3.3. Replication Slave Options and Variables">Section 15.1.3.3, “Replication Slave Options and Variables”</a>.
       (Bug #31665, Bug #35542, Bug #40337)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Because <a href="sql-syntax.html#show-binlog-events" title="12.7.5.3. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a> cannot
        be used to read events from relay log files, a new
        <a href="sql-syntax.html#show-relaylog-events" title="12.7.5.33. SHOW RELAYLOG EVENTS Syntax"><code class="literal">SHOW RELAYLOG EVENTS</code></a> statement
        has been added for this purpose.
       (Bug #28777)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        In circular replication, it was sometimes possible for an event
        to propagate such that it would be reapplied on all servers.
        This could occur when the originating server was removed from
        the replication circle and so could no longer act as the
        terminator of its own events, as normally happens in circular
        replication.
      </p><p>
        To prevent this from occurring, a new
        <code class="literal">IGNORE_SERVER_IDS</code> option is introduced for
        the <code class="literal">CHANGE MASTER TO</code> statement. This option
        takes a list of replication server IDs; events having a server
        ID which appears in this list are ignored and not applied. For
        more information, see <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax">Section 12.4.2.1, “<code class="literal">CHANGE MASTER TO</code> Syntax”</a>.
      </p><p>
        In conjunction with the introduction of
        <code class="literal">IGNORE_SERVER_IDS</code>, <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW
        SLAVE STATUS</code></a> has two new fields.
        <code class="literal">Replicate_Ignore_Server_Ids</code> displays
        information about ignored servers.
        <code class="literal">Master_Server_Id</code> displays the
        <a href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> value from the
        master.
       (Bug #25998)</p><p>References: See also Bug #27808.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A replication heartbeat mechanism has been added to facilitate
        monitoring. This provides an alternative to checking log files,
        making it possible to detect in real time when a slave has
        failed.
      </p><p>
        Configuration of heartbeats is done using a new
        <code class="literal">MASTER_HEARTBEAT_PERIOD =
        <em class="replaceable"><code>interval</code></em></code> clause for the
        <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement (see
        <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax">Section 12.4.2.1, “<code class="literal">CHANGE MASTER TO</code> Syntax”</a>); monitoring can be done by
        checking the values of the status variables
        <a href="server-administration.html#statvar_Slave_heartbeat_period"><code class="literal">Slave_heartbeat_period</code></a> and
        <a href="server-administration.html#statvar_Slave_received_heartbeats"><code class="literal">Slave_received_heartbeats</code></a> (see
        <a href="server-administration.html#server-status-variables" title="5.1.5. Server Status Variables">Section 5.1.5, “Server Status Variables”</a>).
      </p><p>
        The addition of replication heartbeats addresses a number of
        issues:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Relay logs were rotated every
            <a href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a> seconds
            even if no statements were being replicated.
          </p></li><li><p>
            <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> displayed
            an incorrect value for
            <code class="literal">Seconds_Behind_Master</code> following a
            <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>
            statement.
          </p></li><li><p>
            Replication master-slave connections used
            <a href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a> for
            connection timeouts.
          </p></li></ul></div><p>(Bug #20435, Bug #29309, Bug #30932)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        MySQL now supports an interface for semisynchronous replication:
        A commit performed on the master side blocks before returning to
        the session that performed the transaction until at least one
        slave acknowledges that it has received and logged the events
        for the transaction. Semisynchronous replication is implemented
        through an optional plugin component. See
        <a href="replication.html#replication-semisync" title="15.3.8. Semisynchronous Replication">Section 15.3.8, “Semisynchronous Replication”</a>.
      </p></li><li><p>
        On Linux (and perhaps other systems), the performance of MySQL
        Server can be improved by using a different
        <code class="literal">malloc()</code> implementation, developed by Google
        and called <code class="literal">tcmalloc</code>. The gain is noticeable
        with a higher number of simultaneous users. To support use of
        this library, the following changes have been made:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The server is linked against the default
            <code class="literal">malloc()</code> provided by the respective
            platform.
          </p></li><li><p>
            Binary distributions for Linux include
            <code class="filename">libtcmalloc_minimal.so</code> (a shared
            library that can be linked against at runtime) in
            <code class="literal">pkglibdir</code> (that is, the same directory
            within the package where server plugins and similar object
            files are located). The version of
            <code class="literal">tcmalloc</code> included with MySQL comes from
            <code class="literal">google-perftools</code> 1.4.
          </p><p>
            If you want to try <code class="literal">tcmalloc</code> but are using
            a binary distribution for a non-Linux platform or a source
            distribution, you can install Google's
            <code class="literal">tcmalloc</code>. Some distributions provide it
            in a <code class="literal">google-perftools</code> package or with a
            similar name, or you can download it from Google at
            <a href="http://code.google.com/p/google-perftools/" target="_top">http://code.google.com/p/google-perftools/</a>
            and compile it yourself.
          </p></li><li><p>
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> now supports a
            <a href="programs.html#option_mysqld_safe_malloc-lib"><code class="option">--malloc-lib</code></a> option that
            enables administrators to specify that
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> should use
            <code class="literal">tcmalloc</code>.
          </p></li></ul></div><p>
        The <a href="programs.html#option_mysqld_safe_malloc-lib"><code class="option">--malloc-lib</code></a> option
        works by modifying the <code class="literal">LD_PRELOAD</code> environment
        value to affect dynamic linking to enable the loader to find the
        memory-allocation library when <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> runs:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If the option is not given, or is given without a value
            (<a href="programs.html#option_mysqld_safe_malloc-lib"><code class="option">--malloc-lib=</code></a>),
            <code class="literal">LD_PRELOAD</code> is not modified and no attempt
            is made to use <code class="literal">tcmalloc</code>.
          </p></li><li><p>
            If the option is given as
            <a href="programs.html#option_mysqld_safe_malloc-lib"><code class="option">--malloc-lib=tcmalloc</code></a>,
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> looks for a
            <code class="literal">tcmalloc</code> library in
            <code class="filename">/usr/lib</code> and then in the MySQL
            <code class="literal">pkglibdir</code> location (for example,
            <code class="filename">/usr/local/mysql/lib</code> or whatever is
            appropriate). If <code class="literal">tmalloc</code> is found, its
            path name is added to the beginning of the
            <code class="literal">LD_PRELOAD</code> value for
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. If <code class="literal">tcmalloc</code> is
            not found, <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> aborts with an
            error.
          </p></li><li><p>
            If the option is given as
            <a href="programs.html#option_mysqld_safe_malloc-lib"><code class="option">--malloc-lib=<em class="replaceable"><code>/path/to/some/library</code></em></code></a>,
            that full path is added to the beginning of the
            <code class="literal">LD_PRELOAD</code> value. If the full path points
            to a nonexistent or unreadable file,
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> aborts with an error.
          </p></li><li><p>
            For cases where <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> adds a path
            name to <code class="literal">LD_PRELOAD</code>, it adds the path to
            the beginning of any existing value the variable already
            has.
          </p></li></ul></div><p>
        As a result of the preceding changes, Linux users can use the
        <code class="filename">libtcmalloc_minimal.so</code> now included in
        binary packages by adding these lines to the
        <code class="filename">my.cnf</code> file:
      </p><pre class="programlisting">[mysqld_safe]
malloc-lib=tcmalloc</pre><p>
        Those lines also suffice for users on any platform who have
        installed a <code class="literal">tcmalloc</code> package in
        <code class="filename">/usr/lib</code>. To use a specific
        <code class="literal">tcmalloc</code> library, specify its full path name.
        Example:
      </p><pre class="programlisting">[mysqld_safe]
malloc-lib=/opt/lib/libtcmalloc_minimal.so</pre><p>(Bug #47549)</p></li><li><p>
        The <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> buffer pool is divided
        into two sublists: A new sublist containing blocks that are
        heavily used by queries, and an old sublist containing less-used
        blocks and from which candidates for eviction are taken. In the
        default operation of the buffer pool, a block when read in is
        loaded at the midpoint and then moved immediately to the head of
        the new sublist as soon as an access occurs. In the case of a
        table scan (such as performed for a <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>
        operation), each block read by the scan ends up moving to the
        head of the new sublist because multiple rows are accessed from
        each block. This occurs even for a one-time scan, where the
        blocks are not otherwise used by other queries. Blocks may also
        be loaded by the read-ahead background thread and then moved to
        the head of the new sublist by a single access. These effects
        can be disadvantageous because they push blocks that are in
        heavy use by other queries out of the new sublist to the old
        sublist where they become subject to eviction.
      </p><p>
        <code class="literal">InnoDB</code> now provides two system variables that
        enable LRU algorithm tuning:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="storage-engines.html#sysvar_innodb_old_blocks_pct"><code class="literal">innodb_old_blocks_pct</code></a>
          </p><p>
            Specifies the approximate percentage of the buffer pool used
            for the old block sublist. The range of values is 5 to 95.
            The default value is 37 (that is, 3/8 of the pool).
          </p></li><li><p>
            <a href="storage-engines.html#sysvar_innodb_old_blocks_time"><code class="literal">innodb_old_blocks_time</code></a>
          </p><p>
            Specifies how long in milliseconds (ms) a block inserted
            into the old sublist must stay there after its first access
            before it can be moved to the new sublist. The default value
            is 0: A block inserted into the old sublist moves
            immediately to the new sublist the first time it is
            accessed, no matter how soon after insertion the access
            occurs. If the value is greater than 0, blocks remain in the
            old sublist until an access occurs at least that many ms
            after the first access. For example, a value of 1000 causes
            blocks to stay in the old sublist for 1 second after the
            first access before they become eligible to move to the new
            sublist.
          </p></li></ul></div><p>
        See <a href="optimization.html#innodb-buffer-pool" title="7.9.1. The InnoDB Buffer Pool">Section 7.9.1, “The <code class="literal">InnoDB</code> Buffer Pool”</a>.
       (Bug #45015)</p></li><li><p>
        The <code class="literal">have_community_features</code> system variable
        was renamed to <a href="server-administration.html#sysvar_have_profiling"><code class="literal">have_profiling</code></a>.
      </p><p>
        Previously, to enable profiling, it was necessary to run
        <span><strong class="command">configure</strong></span> with the
        <code class="option">--enable-community-features</code> and
        <a href="http://dev.mysql.com/doc/refman/5.1/en/source-configuration-options.html#option_configure_enable-profiling" target="_top"><code class="option">--enable-profiling</code></a> options.
        Now only <a href="http://dev.mysql.com/doc/refman/5.1/en/source-configuration-options.html#option_configure_enable-profiling" target="_top"><code class="option">--enable-profiling</code></a> is
        needed.
       (Bug #44651)</p></li><li><p>
        Columns that provide a catalog value in
        <code class="literal">INFORMATION_SCHEMA</code> tables (for example,
        <code class="literal">TABLES.TABLE_CATALOG</code>) now have a value of
        <code class="literal">def</code> rather than <code class="literal">NULL</code>.
       (Bug #35427)</p></li><li><p>
        Previously, <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> would not dump the
        <code class="literal">INFORMATION_SCHEMA</code> database and ignored it if
        it was named on the command line. Now,
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> will dump
        <code class="literal">INFORMATION_SCHEMA</code> if it is named on the
        command line. Currently, this requires that the
        <a href="programs.html#option_mysqldump_lock-tables"><code class="option">--skip-lock-tables</code></a>
        (or <a href="programs.html#option_mysqldump_skip-opt"><code class="option">--skip-opt</code></a>) option be
        given.
       (Bug #33762)</p></li><li><p>
        Several undocumented C API functions were removed:
        <code class="function">mysql_manager_close()</code>,
        <code class="function">mysql_manager_command()</code>,
        <code class="function">mysql_manager_connect()</code>,
        <code class="function">mysql_manager_fetch_line()</code>,
        <code class="function">mysql_manager_init()</code>,
        <code class="function">mysql_disable_reads_from_master()</code>,
        <code class="function">mysql_disable_rpl_parse()</code>,
        <code class="function">mysql_enable_reads_from_master()</code>,
        <code class="function">mysql_enable_rpl_parse()</code>,
        <code class="function">mysql_master_query()</code>,
        <code class="function">mysql_master_send_query()</code>,
        <code class="function">mysql_reads_from_master_enabled()</code>,
        <code class="function">mysql_rpl_parse_enabled()</code>,
        <code class="function">mysql_rpl_probe()</code>,
        <code class="function">mysql_rpl_query_type()</code>,
        <code class="function">mysql_set_master()</code>,
        <code class="function">mysql_slave_query()</code>, and
        <code class="function">mysql_slave_send_query()</code>.
       (Bug #31952, Bug #31954)</p></li><li><p>
        Sinhala collations <code class="literal">utf8_sinhala_ci</code> and
        <code class="literal">ucs2_sinhala_ci</code> were added for the
        <code class="literal">utf8</code> and <code class="literal">ucs2</code> character
        sets.
       (Bug #26474)</p></li><li><p>
        If the value of the
        <a href="server-administration.html#option_mysqld_log-warnings"><code class="option">--log-warnings</code></a> option is greater
        than 1, the server now writes access-denied errors for new
        connection attempts to the error log (for example, if a client
        user name or password is incorrect).
       (Bug #25822)</p></li><li><p>
        On Windows, use of POSIX I/O interfaces in
        <code class="literal">mysys</code> was replaced with Win32 API calls
        (<code class="function">CreateFile()</code>,
        <code class="function">WriteFile()</code>, and so forth) and the default
        maximum number of open files has been increased to 16384. The
        maximum can be increased further by using the
        <a href="server-administration.html#option_mysqld_open-files-limit"><code class="option">--open-files-limit=<em class="replaceable"><code>N</code></em></code></a>
        option at server startup.
       (Bug #24509)</p></li><li><p>
        MySQL now implements the SQL standard
        <a href="sql-syntax.html#signal" title="12.6.7.4. SIGNAL Syntax"><code class="literal">SIGNAL</code></a> and
        <a href="sql-syntax.html#resignal" title="12.6.7.3. RESIGNAL Syntax"><code class="literal">RESIGNAL</code></a> statements. See
        <a href="sql-syntax.html#condition-handling" title="12.6.7. Condition Handling">Section 12.6.7, “Condition Handling”</a>.
       (Bug #11661)</p></li><li><p>
        The undocumented, deprecated, and not useful <code class="literal">SHOW
        COLUMN TYPES</code> statement has been removed.
       (Bug #5299)</p></li><li><p>
        The <code class="literal">libmysqlclient</code> client library is now
        built as a thread-safe library. The
        <code class="literal">libmysqlclient_r</code> client library is still
        present for compatibility, but is just a symlink to
        <code class="literal">libmysqlclient</code>.
      </p></li><li><p>
        The <a href="functions.html#function_format"><code class="literal">FORMAT()</code></a> function now
        supports an optional third parameter that enables a locale to be
        specified to be used for the result number's decimal point,
        thousands separator, and grouping between separators.
        Permissible locale values are the same as the legal values for
        the <a href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> system
        variable (see <a href="globalization.html#locale-support" title="9.7. MySQL Server Locale Support">Section 9.7, “MySQL Server Locale Support”</a>). For example,
        the result from
        <a href="functions.html#function_format"><code class="literal">FORMAT(1234567.89,2,'de_DE')</code></a> is
        <code class="literal">1.234.567,89</code>. If no locale is specified, the
        default is <code class="literal">'en_US'</code>.
      </p></li><li><p>
        The Greek locale <code class="literal">'el_GR'</code> is now a permissible
        value for the <a href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a>
        system variable.
      </p></li><li><p>
        Previously, in the absence of other information, the MySQL
        client programs <code class="literal">mysql</code>,
        <code class="literal">mysqladmin</code>, <code class="literal">mysqlcheck</code>,
        <code class="literal">mysqlimport</code>, and <code class="literal">mysqlshow</code>
        used the compiled-in default character set, usually
        <code class="literal">latin1</code>.
      </p><p>
        Now these clients can autodetect which character set to use
        based on the operating system setting, such as the value of the
        <code class="literal">LANG</code> or <code class="literal">LC_ALL</code> locale
        environment language on Unix system or the code page setting on
        Windows systems. For systems on which the locale is available
        from the OS, the client uses it to set the default character set
        rather than using the compiled-in default. Thus, users can
        configure the locale in their environment for use by MySQL
        clients. For example, setting <code class="literal">LANG</code> to
        <code class="literal">ru_RU.KOI8-R</code> causes the
        <code class="literal">koi8r</code> character set to be used. The OS
        character set is mapped to the closest MySQL character set if
        there is no exact match. If the client does not support the
        matching character set, it uses the compiled-in default. (For
        example, <code class="literal">ucs2</code> is not supported as a
        connection character set.)
      </p><p>
        An implication of this change is that if your environment is
        configured to use a non-<code class="literal">latin1</code> locale, MySQL
        client programs will use a different connection character set
        than previously, as though you had issued an implicit
        <a href="sql-syntax.html#set-option" title="12.7.4. SET Syntax"><code class="literal">SET NAMES</code></a>
        statement. If the previous behavior is required, start the
        client with the <code class="option">--default-character-set=latin1</code>
        option.
      </p><p>
        Third-party applications that wish to use character set
        autodetection based on the OS setting can use the following
        <a href="connectors-apis.html#mysql-options" title="21.9.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> call before
        connecting to the server:
      </p><pre class="programlisting">mysql_options(mysql,
              MYSQL_SET_CHARSET_NAME,
              MYSQL_AUTODETECT_CHARSET_NAME);</pre><p>
        See <a href="globalization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.
      </p></li><li><p>
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> now has an
        <a href="programs.html#option_mysql_upgrade_upgrade-system-tables"><code class="option">--upgrade-system-tables</code></a>
        option that causes only the system tables to be upgraded. With
        this option, data upgrades are not performed.
      </p></li><li><p>
        The <a href="server-administration.html#priv_create-tablespace"><code class="literal">CREATE TABLESPACE</code></a> privilege
        has been introduced. This privilege exists at the global
        (superuser) level and enables you to create, alter, and drop
        tablespaces and logfile groups.
      </p></li><li><p>
        The server now supports a Debug Sync facility for thread
        synchronization during testing and debugging. To compile in this
        facility, configure MySQL with the
        <code class="option">--enable-debug-sync</code> option. The
        <a href="server-administration.html#sysvar_debug_sync"><code class="literal">debug_sync</code></a> system variable
        provides the user interface Debug Sync.
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> and
        <span><strong class="command">mysql-test-run.pl</strong></span> support a
        <a href="server-administration.html#option_mysqld_debug-sync-timeout"><code class="option">--debug-sync-timeout</code></a> option to
        enable the facility and set the default synchronization point
        timeout.
      </p></li><li><p>
        Added the <a href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a> function,
        which converts a date or datetime value to a number of seconds
        since the year 0. This is a general-purpose function, but is
        useful for partitioning. You may use this function in
        partitioning expressions, and partition pruning is supported for
        tables defined using such expressions.
      </p></li><li><p>
        Parser performance was improved for identifier scanning and
        conversion of ASCII string literals.
      </p></li><li><p>
        The <a href="sql-syntax.html#load-xml" title="12.2.7. LOAD XML Syntax"><code class="literal">LOAD XML
        INFILE</code></a> statement was added. This statement makes it
        possible to read data directly from XML files into database
        tables. For more information, see <a href="sql-syntax.html#load-xml" title="12.2.7. LOAD XML Syntax">Section 12.2.7, “<code class="literal">LOAD XML</code> Syntax”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Security Fix</strong></span>: 
        It was possible to circumvent privileges through the creation of
        <code class="literal">MyISAM</code> tables employing the <code class="literal">DATA
        DIRECTORY</code> and <code class="literal">INDEX DIRECTORY</code>
        options to overwrite existing table files in the MySQL data
        directory. Use of the MySQL data directory in <code class="literal">DATA
        DIRECTORY</code> and <code class="literal">INDEX DIRECTORY</code> is no
        longer permitted. This is now also true of these options when
        used with partitioned tables and individual partitions of such
        tables.
       (Bug #32167, CVE-2008-2079)</p><p>References: See also Bug #39277.</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        MySQL clients linked against OpenSSL could be tricked not to
        check server certificates.
       (Bug #47320, CVE-2009-4028)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The server crashed if an account without the proper privileges
        attempted to create a stored procedure.
       (Bug #44658)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: 
        The server unnecessarily acquired a query cache mutex even with
        the query cache disabled, resulting in a small performance
        decrement which could show up as threads often in the
        “<span class="quote">invalidating query cache entries (table)</span>” state,
        particularly on a replication slave with row-based replication.
        Now if the server is started with
        <code class="literal">query_cache_type</code> set to 0, it does not
        acquire the query cache mutex. This has the implication that the
        query cache cannot be enabled at runtime.
       (Bug #38551)</p></li><li><p><span class="bold"><strong>Performance</strong></span>: 
        The <code class="literal">InnoDB</code> adaptive hash latch is released
        (if held) for several potentially long-running operations. This
        improves throughput for other queries if the current query is
        removing a temporary table, changing a temporary table from
        memory to disk, using
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        SELECT</code></a>, or performing a <code class="literal">MyISAM</code>
        repair on a table used within a transaction.
       (Bug #32149)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Concurrent transactions that inserted rows into a table with an
        <code class="literal">AUTO_INCREMENT</code> column could break
        statement-based or mixed-format replication error 1062
        <span class="errortext">Duplicate entry '...' for key 'PRIMARY'</span>
        on the slave. This was especially likely to happen when one of
        the transactions activated a trigger that inserted rows into the
        table with the <code class="literal">AUTO_INCREMENT</code> column,
        although other conditions could also cause the issue to
        manifest.
      </p><p>
        As part of the fix for this issue, any statement that causes a
        trigger or function to update an
        <code class="literal">AUTO_INCREMENT</code> column is now considered
        unsafe for statement-based replication. For more information,
        see <a href="replication.html#replication-features-auto-increment" title="15.4.1.1. Replication and AUTO_INCREMENT">Section 15.4.1.1, “Replication and <code class="literal">AUTO_INCREMENT</code>”</a>.
       (Bug #45677)</p><p>References: See also Bug #42415, Bug #48608, Bug #50440, Bug #53079.</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For system variables that take values of <code class="literal">ON</code>
        or <code class="literal">OFF</code>, <code class="literal">OF</code> was accepted as
        a legal variable. Now system variables that take
        “<span class="quote">enumeration</span>” values must be assigned the full
        value. This affects some other variables that previously could
        be assigned using unambiguous prefixes of permissible values,
        such as <a href="server-administration.html#sysvar_tx_isolation"><code class="literal">tx_isolation</code></a>.
       (Bug #34828)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In binary installations of MySQL, the supplied
        <span><strong class="command">binary-configure</strong></span> script would start and
        configure MySQL, even when command help was requested with the
        <code class="option">--help</code> command-line option. The
        <code class="option">--help</code> option, if provided, no longer starts
        and installs the server.
       (Bug #30954)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Access privileges for several statements are more accurately
        checked:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="sql-syntax.html#check-table" title="12.7.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> requires some
            privilege for the table.
          </p></li><li><p>
            <a href="sql-syntax.html#checksum-table" title="12.7.2.3. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM TABLE</code></a> requires
            <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> for the table.
          </p></li><li><p>
            <code class="literal">CREATE TABLE ... LIKE</code> requires
            <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> for the source table
            and <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a> for the
            destination table.
          </p></li><li><p>
            <a href="sql-syntax.html#show-columns" title="12.7.5.6. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a> displays
            information only for those columns for which you have some
            privilege.
          </p></li><li><p>
            <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> requires
            some privilege for the table (previously required
            <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>).
          </p></li><li><p>
            <a href="sql-syntax.html#show-create-view" title="12.7.5.14. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a> requires
            <a href="server-administration.html#priv_show-view"><code class="literal">SHOW VIEW</code></a> and
            <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> for the view.
          </p></li><li><p>
            <a href="sql-syntax.html#show-index" title="12.7.5.23. SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> requires some
            privilege for any column.
          </p></li><li><p>
            <a href="sql-syntax.html#show-open-tables" title="12.7.5.25. SHOW OPEN TABLES Syntax"><code class="literal">SHOW OPEN TABLES</code></a> displays
            only tables for which you have some privilege on any column.
          </p></li></ul></div><p>(Bug #27145)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> transactions replicated to a
        transactional slave left the slave in an unstable condition.
        This was due to the fact that, when replicating from a
        nontransactional storage engine to a transactional engine with
        <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> disabled, no
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a> and
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> statements were written to
        the binary log; thus, on the slave, a never-ending transaction
        was started.
      </p><p>
        The fix for this issue includes enforcing
        <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> mode on the slave by
        replicating all <code class="literal">autocommit=1</code> statements from
        the master.
       (Bug #29288)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
        required the value for <code class="literal">RELAY_LOG_FILE</code> to be
        an absolute path, whereas the <code class="literal">MASTER_LOG_FILE</code>
        path could be relative.
      </p><p>
        The inconsistent behavior is resolved by permitting relative
        paths for <code class="literal">RELAY_LOG_FILE</code>, and by using the
        same basename for <code class="literal">RELAY_LOG_FILE</code> as for
        <code class="literal">MASTER_LOG_FILE</code>. For more information, see
        <a href="sql-syntax.html#change-master-to" title="12.4.2.1. CHANGE MASTER TO Syntax">Section 12.4.2.1, “<code class="literal">CHANGE MASTER TO</code> Syntax”</a>.
       (Bug #12190, Bug #11745232)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        An option that requires a value, when specified in an option
        file without a value, was assigned the text of the next line in
        the file as the value. Now, if you fail to specify a required
        value in an option file, the server aborts with an error.
      </p><p>
        This change does not effect how options are handled by the
        server when they are used on the command line. For example,
        starting the server using <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe
        <code class="option">--relay-log --relay-log-index</code> &amp;</strong></span></a>
        causes the server to create relay log files named
        <code class="filename">--relay-log-index.000001</code>,
        <code class="filename">--relay-log-index.000002</code>, and so on,
        because the <a href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> option
        expects an argument.
       (Bug #25192)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        An <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
        ADD PARTITION</code></a> statement that caused
        <a href="server-administration.html#sysvar_open_files_limit"><code class="literal">open_files_limit</code></a> to be exceeded
        led to a MySQL server crash.
       (Bug #46922)</p><p>References: See also Bug #47343.</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When performing an
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a> into a partitioned table,
        <a href="server-administration.html#sysvar_read_buffer_size"><code class="literal">read_buffer_size</code></a> bytes of
        memory were allocated for every partition in the target table,
        resulting in consumption of large amounts of memory when the
        table had many partitions (more than 100).
      </p><p>
        This fix changes the method used to estimate the buffer size
        required for each partition and limits the total buffer size to
        a maximum of approximately 10 times
        <a href="server-administration.html#sysvar_read_buffer_size"><code class="literal">read_buffer_size</code></a>.
       (Bug #45840)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        The cardinality of indexes on partitioned tables was calculated
        using the first partition in the table, which could result in
        suboptimal query execution plans being chosen. Now the partition
        having the most records is used instead, which should result in
        better use of indexes and thus improved performance of queries
        against partitioned tables in many if not most cases.
       (Bug #44059)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Truncating a partitioned <code class="literal">MyISAM</code> table did not
        reset the <code class="literal">AUTO_INCREMENT</code> value.
       (Bug #35111)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        For partitioned tables with more than ten partitions, a full
        table scan was used in some cases when only a subset of the
        partitions were needed.
       (Bug #33730)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using statement-based or mixed-format replication, the
        database name was not written to the binary log when executing a
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement. This caused problems when the table
        being loaded belonged to a database other than the current
        database; data could be loaded into the wrong table (if a table
        having the same name existed in the current database) or
        replication could fail (if no table having that name existed in
        the current database). Now a table referenced in a
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement is always logged using its fully
        qualified name when the database to which it belongs is not the
        current database.
       (Bug #48297)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a session was closed on the master, temporary tables
        belonging to that session were logged with the wrong database
        names when either of the following conditions was true:
      </p><div class="orderedlist"><ol type="1"><li><p>
            The length of the name of the database to which the
            temporary table belonged was greater than the length of the
            current database name.
          </p></li><li><p>
            The current database was not set.
          </p></li></ol></div><p>(Bug #48216)</p><p>References: See also Bug #46861, Bug #48297.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication, changes to nontransactional
        tables that occurred early in a transaction were not immediately
        flushed upon committing a statement. This behavior could break
        consistency since changes made to nontransactional tables become
        immediately visible to other connections.
       (Bug #47678)</p><p>References: See also Bug #47287, Bug #46864, Bug #43929, Bug #11752675, Bug #46129. This bug is a regression of Bug #40116.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a>
        <a href="programs.html#option_mysqlbinlog_verbose"><code class="option">--verbose</code></a> was used to read a
        binary log that had been written using row-based format, the
        output for events that updated some but not all columns of
        tables was not correct.
       (Bug #47323)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Performing <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE ... DISABLE KEYS</code></a> on a slave table caused
        row-based replication to fail.
       (Bug #47312)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using the row-based format to replicate a transaction
        involving both transactional and nontransactional engines, which
        contained a DML statement affecting multiple rows, the statement
        failed. If this transaction was followed by a
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>, the master and the slave
        could diverge, because the statement was correctly rolled back
        on the master, but was applied on the slave.
       (Bug #47287)</p><p>References: See also Bug #46864.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#commit" title="12.3.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a>
        statements were not included in the output of
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a>.
       (Bug #46998)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A problem with the <code class="literal">BINLOG</code> statement in the
        output of <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> could break
        replication; statements could be logged with the server ID
        stored within events by the <code class="literal">BINLOG</code> statement
        rather than the ID of the running server. With this fix, the
        server ID of the server executing the statements can no longer
        be overridden by the server ID stored in the binary log's
        <code class="literal">format description</code> statement.
       (Bug #46640)</p><p>References: This bug was introduced by Bug #32407.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication,
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TEMPORARY TABLE
        IF EXISTS</code></a> was written to the binary log if the table
        named in the statement did not exist, even though a
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TEMPORARY
        TABLE</code></a> statement should never be logged in row-based
        logging mode, whether the table exists or not.
       (Bug #46572)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The internal function
        <code class="function">get_master_version_and_clock()</code> (defined in
        <code class="filename">sql/slave.cc</code>) ignored errors and passed
        directly when queries failed, or when queries succeeded but the
        result retrieved was empty. Now this function tries to reconnect
        the master if a query fails due to transient network problems,
        and to fail otherwise. The I/O thread now prints a warning if
        the same system variables do not exist on master (in the event
        the master is a very old version of MySQL, compared to the
        slave.)
       (Bug #45214)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Replicating <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> or
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> columns declared as
        <code class="literal">NULL</code> on the master but <code class="literal">NOT
        NULL</code> on the slave caused the slave to crash.
       (Bug #43789)</p><p>References: See also Bug #38850, Bug #43783, Bug #43785, Bug #47741, Bug #48091.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        By default, all statements executed by the
        <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> program on the master are
        written to the binary log, then replicated to the slave. In some
        cases, this can result in problems; for example, it attempted to
        alter log tables on replicated databases (this failed due to
        logging being enabled).
      </p><p>
        As part of this fix, a <a href="programs.html#mysql-upgrade" title="4.4.7. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> option,
        <code class="option">--write-binlog</code>, is added. Its inverse,
        <code class="option">--skip-write-binlog</code>, can be used to disable
        binary logging while the upgrade is in progress.
       (Bug #43579)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Two issues encountered on replication slaves during startup were
        fixed:
      </p><div class="orderedlist"><ol type="1"><li><p>
            A failure while allocating the master info structure caused
            the slave to crash.
          </p></li><li><p>
            A failure during recovery caused the relay log file not to
            be properly initialized which led to a crash on the slave.
          </p></li></ol></div><p>(Bug #43075)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When the logging format was set without binary logging being
        enabled, the server failed to start. Now in such cases, the
        server starts successfully,
        <a href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is set, and a
        warning is logged instead of an error.
       (Bug #42928)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        On the master, if a binary log event is larger than
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>, the error
        message
        <a href="error-handling.html#error_er_master_fatal_error_reading_binlog"><code class="literal">ER_MASTER_FATAL_ERROR_READING_BINLOG</code></a>
        is sent to a slave when it requests a dump from the master, thus
        leading the I/O thread to stop. On a slave, the I/O thread stops
        when receiving a packet larger than
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>.
      </p><p>
        In both cases, however, there was no
        <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">Last_IO_Error</code></a>
        reported, which made it difficult to determine why the slave had
        stopped in such cases. Now,
        <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">Last_IO_Error</code></a>
        is reported when
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> is exceeded,
        and provides the reason for which the slave I/O thread stopped.
       (Bug #42914)</p><p>References: See also Bug #14068, Bug #47200, Bug #47303.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using statement-based replication and the transaction
        isolation level was set to <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ
        COMMITTED</code></a> or a less strict level,
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> returned an error even if
        the statement in question was filtered out according to the
        <a href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> or
        <a href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> rules in
        effect at the time.
       (Bug #42829)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based format, replication failed with the error
        <span class="errortext">Could not execute Write_rows event on table ...;
        Field '...' doesn't have a default value</span> when an
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> was made on the master
        without specifying a value for a column having no default, even
        if strict server SQL mode was not in use and the statement would
        otherwise have succeeded on the master. Now the SQL mode is
        checked, and the statement is replicated unless strict mode is
        in effect. For more information, see
        <a href="server-administration.html#server-sql-mode" title="5.1.6. Server SQL Modes">Section 5.1.6, “Server SQL Modes”</a>.
       (Bug #38173)</p><p>References: See also Bug #38262, Bug #43992.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> was set equal
        to <code class="literal">1</code> after starting a transaction, the binary
        log did not commit the outstanding transaction. This happened
        because the binary log commit function saw only the values of
        the new settings, and decided that there was nothing to commit.
      </p><p>
        This issue was first observed when using the
        <code class="literal">Falcon</code> storage engine, but it is possible
        that it affected other storage engines as well.
       (Bug #37221)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a> did
        not close and reopen the binary log index file.
       (Bug #34582)</p><p>References: See also Bug #48738.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        An error message relating to permissions required for
        <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> was confusing.
       (Bug #34227)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The <a href="programs.html#option_mysqlbinlog_base64-output"><code class="option">--base64-output</code></a> option
        for <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> was not honored for all types
        of events. This interfered in some cases with performing
        point-in-time recovery.
       (Bug #32407)</p><p>References: See also Bug #46640, Bug #34777.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The value of <code class="literal">Slave_IO_running</code> in the output
        of <a href="sql-syntax.html#show-slave-status" title="12.7.5.35. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> did not
        distinguish between all 3 possible states of the slave I/O
        thread (not running; running but not connected; connected). Now
        the value <code class="literal">Connecting</code> (rather than
        <code class="literal">No</code>) is shown when the slave I/O thread is
        running but the slave is not connected to a replication master.
      </p><p>
        The server system variable <code class="literal">Slave_running</code> also
        reflects this change, and is now consistent with what is shown
        for <code class="literal">Slave_IO_running</code>.
       (Bug #30703, Bug #41613, Bug #51089)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Queries written to the slow query log on the master were not
        written to the slow query log on the slave.
       (Bug #23300)</p><p>References: See also Bug #48632.</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Valgrind revealed an issue with <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> that
        was corrected: memory corruption in replication slaves when
        switching databases.
       (Bug #19022)</p></li><li><p><span class="bold"><strong>API</strong></span>: 
        The fix for Bug #24507 could lead in some cases to client
        application failures due to a race condition. Now the server
        waits for the “<span class="quote">dummy</span>” thread to return before
        exiting, thus making sure that only one thread can initialize
        the POSIX threads library.
       (Bug #42850)</p></li><li><p>
        Certain <code class="literal">INTERVAL</code> expressions could cause a
        crash on 64-bit systems.
       (Bug #48739)</p></li><li><p>
        Following a literal, the <code class="literal">COLLATE</code> clause was
        mishandled such that different results could be produced
        depending on whether an index was used.
       (Bug #48447)</p></li><li><p>
        <a href="functions.html#function_sum"><code class="literal">SUM()</code></a> artificially increased the
        precision of a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> argument,
        which was truncated when a temporary table was created to hold
        the results.
       (Bug #48370)</p><p>References: See also Bug #45261.</p></li><li><p>
        <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
        <a href="sql-syntax.html#revoke" title="12.7.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> crashed if a user name was
        specified as <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>.
       (Bug #48319)</p></li><li><p>
        If an outer query was invalid, a subquery might not be set up.
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> did not expect this and caused a crash by
        trying to dereference improperly set up information.
       (Bug #48295)</p></li><li><p>
        A query containing a view using temporary tables and multiple
        tables in the <code class="literal">FROM</code> clause and
        <code class="literal">PROCEDURE ANALYSE()</code> caused a server crash.
      </p><p>
        As a result of this bug fix, <code class="literal">PROCEDURE
        ANALYSE()</code> is legal only in a top-level
        <code class="literal">SELECT</code>.
       (Bug #48293)</p><p>References: See also Bug #46184.</p></li><li><p>
        Error handling was missing for
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements containing
        subqueries in the <code class="literal">WHERE</code> clause and that
        assigned a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> result to a
        user variable. The server could crash as a result.
       (Bug #48291)</p></li><li><p>
        An assertion could fail if the optimizer used a
        <code class="literal">SPATIAL</code> index.
       (Bug #48258, Bug #47019)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> mishandled memory-allocation
        failures in the <code class="literal">os_mem_alloc_large()</code>
        function.
       (Bug #48237)</p></li><li><p>
        <code class="literal">WHERE</code> clauses with
        <code class="literal"><em class="replaceable"><code>outer_value_list</code></em> NOT IN
        <em class="replaceable"><code>subquery</code></em></code> were handled
        incorrectly if the outer value list contained multiple items at
        least one of which could be <code class="literal">NULL</code>.
       (Bug #48177)</p></li><li><p>
        Searches using a nondefault collation could return different
        results for a table depending on whether partitioning was used.
       (Bug #48161)</p></li><li><p>
        A combination of <code class="literal">GROUP BY WITH ROLLUP</code>,
        <code class="literal">DISTINCT</code> and the
        <a href="optimization.html#jointype_const"><code class="literal">const</code></a> join type in a query
        caused a server crash when the optimizer used a temporary table
        to resolve <code class="literal">DISTINCT</code>.
       (Bug #48131)</p></li><li><p>
        The subquery optimizer had a memory leak.
       (Bug #48060)</p></li><li><p>
        Server shutdown failed on Windows.
       (Bug #48047)</p></li><li><p>
        In some cases, using a null microsecond part in a
        <code class="literal">WHERE</code> condition (for example, <code class="literal">WHERE
        date_time_field &lt;= 'YYYY-MM-DD HH:MM:SS.0000'</code>)
        could lead to incorrect results due to improper
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> comparison.
       (Bug #47963)</p></li><li><p>
        A build configured using the <code class="option">--without-server</code>
        option did not compile the yaSSL code, so if
        <code class="option">--with-ssl</code> was also used, the build failed.
       (Bug #47957)</p></li><li><p>
        When a query used a <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> value formatted using
        any separator characters other than hyphen
        (<code class="literal">'-'</code>) and a <code class="literal">&gt;=</code>
        condition matching only the greatest value in an indexed column,
        the result was empty if an index range scan was employed.
       (Bug #47925)</p></li><li><p>
        <code class="filename">mysys/mf_keycache.c</code> requires threading, but
        no test was made for thread support.
       (Bug #47923)</p></li><li><p>
        For debug builds, an assertion could fail during the next
        statement executed for a temporary table after a multiple-table
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> involving that table
        modified an <code class="literal">AUTO_INCREMENT</code> column with a
        user-supplied value.
       (Bug #47919)</p></li><li><p>
        The <code class="filename">mysys/mf_strip.c</code> file, which defines
        the <code class="function">strip_sp()</code> function, has been removed
        from the MySQL source. The function was no longer used within
        the main build, and the supplied function was causing symbol
        errors on Windows builds.
       (Bug #47857)</p></li><li><p>
        When building storage engines on Windows it was not possible to
        specify additional libraries within the <span><strong class="command">CMake</strong></span>
        file required for the build. An
        <code class="literal">${engine}_LIBS</code> macro has been included in the
        files to support these additional storage-engine specific
        libraries.
       (Bug #47797)</p></li><li><p>
        When building a pluggable storage engine on Windows, the engine
        name could be based on the directory name where the engine was
        located, rather than the configured storage engine name.
       (Bug #47795)</p></li><li><p>
        During cleanup of a stored procedure's internal structures, the
        flag to ignore the errors for
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT IGNORE</code></a>
        or <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE
        IGNORE</code></a> was not cleaned up, which could result in a
        server crash.
       (Bug #47788)</p></li><li><p>
        If the first argument to
        <a href="functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB()</code></a> function was a
        geometry value, the function just returned its value. However,
        it failed to preserve the argument's
        <code class="literal">null_value</code> flag, which caused an unexpected
        <code class="literal">NULL</code> value to be returned to the caller,
        resulting in a server crash.
       (Bug #47780)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> could crash when updating
        spatial values.
       (Bug #47777)</p></li><li><p>
        The <code class="literal">pthread_cond_wait()</code> implementations for
        Windows could deadlock in some rare circumstances.
       (Bug #47768)</p></li><li><p>
        The encoding of values for <code class="literal">SET
        <em class="replaceable"><code>system_variable</code></em> =
        <em class="replaceable"><code>identifier</code></em></code> statements was
        incorrect, resulting in incorrect error messages.
       (Bug #47597)</p></li><li><p>
        On Windows, when an idle named pipe connection was forcibly
        closed with a <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL</code></a> statement or
        because the server was being shut down, the thread that was
        closing the connection would hang infinitely.
      </p><p>
        As a result of the work done for this bug, the
        <a href="server-administration.html#sysvar_net_read_timeout"><code class="literal">net_read_timeout</code></a>,
        <a href="server-administration.html#sysvar_net_write_timeout"><code class="literal">net_write_timeout</code></a>, and
        <a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a>, system variables
        now apply to connections over all transports, not just to
        TCP/IP.
       (Bug #47571, Bug #31621)</p></li><li><p>
        On Mac OS X or Windows, sending a <code class="literal">SIGHUP</code>
        signal to the server or an asynchronous flush (triggered by
        <a href="server-administration.html#sysvar_flush_time"><code class="literal">flush_time</code></a>) caused the server
        to crash.
       (Bug #47525)</p></li><li><p>
        Debug builds could not be compiled with the Sun Studio compiler.
       (Bug #47474)</p></li><li><p>
        Queries of the form <code class="literal">SELECT SUM(DISTINCT
        <em class="replaceable"><code>varchar_key</code></em>) FROM
        <em class="replaceable"><code>tbl_name</code></em></code> caused a server
        crash.
       (Bug #47421)</p></li><li><p>
        A function call could end without throwing an error or setting
        the return value. For example, this could happen when an error
        occurred while calculating the return value. This is fixed by
        setting the value to <code class="literal">NULL</code> when an error
        occurs during evaluation of an expression.
       (Bug #47412)</p></li><li><p>
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin debug</strong></span></a> could crash on 64-bit
        systems.
       (Bug #47382)</p></li><li><p>
        A simple <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> with implicit
        grouping could return many rows rather than a single row if the
        query was ordered by the aggregated column in the select list.
       (Bug #47280)</p></li><li><p>
        An assertion could be raised for <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE</code></a> if there was a pending
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT DELAYED</code></a>
        or <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE
        DELAYED</code></a> for the same table.
       (Bug #47274)</p></li><li><p>
        <code class="literal">InnoDB</code> raised errors in some cases in a
        manner not compatible with <code class="literal">SIGNAL</code> and
        <code class="literal">RESIGNAL</code>.
       (Bug #47233)</p></li><li><p>
        A multiple-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> involving
        a natural join and a mergeable view raised an assertion.
       (Bug #47150)</p></li><li><p>
        On FreeBSD, memory mapping for
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> tables could fail if
        underlying tables were empty.
       (Bug #47139)</p></li><li><p>
        Solaris binary packages now are compiled with
        <code class="option">-g0</code> rather than <code class="option">-g</code>.
       (Bug #47137)</p></li><li><p>
        If an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> table was created with
        the <code class="literal">AUTO_INCREMENT</code> table option to specify an
        initial auto-increment value, and an index was added in a
        separate operation later, the auto-increment value was lost
        (subsequent inserts began at 1 rather than the specified value).
       (Bug #47125)</p></li><li><p>
        Incorrect handling of predicates involving
        <code class="literal">NULL</code> by the range optimizer could lead to an
        infinite loop during query execution.
       (Bug #47123)</p></li><li><p>
        <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> caused a server crash for
        certain valid queries.
       (Bug #47106)</p></li><li><p>
        Repair by sort or parallel repair of
        <a href="storage-engines.html#myisam-storage-engine" title="13.5. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables might not fail over
        to repair with key cache.
       (Bug #47073)</p></li><li><p>
        <code class="literal">InnoDB</code> did not compile on some Solaris
        systems.
       (Bug #47058)</p></li><li><p>
        On Windows, when a failed I/O operation occurred with return
        code of <code class="literal">ERROR_WORKING_SET_QUOTA</code>,
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> intentionally crashed the
        server. Now <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> sleeps for 100ms
        and retries the failed operation.
       (Bug #47055)</p></li><li><p>
        The <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config</strong></span></a> script contained a reference
        to <code class="literal">@innodb_system_libs@</code> that was not replaced
        with the corresponding library flags during the build process
        and ended up in the output of <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config
        --libs</strong></span></a>.
       (Bug #47007)</p></li><li><p>
        The <span><strong class="command">configure</strong></span> option
        <code class="option">--without-server</code> did not work.
       (Bug #46980)</p></li><li><p>
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> now ignores negative values
        supplied by a user for an <code class="literal">AUTO_INCREMENT</code>
        column when calculating the next value to store in the data
        dictionary. Setting <code class="literal">AUTO_INCREMENT</code> columns to
        negative values is undefined behavior and this change should
        bring the behavior of <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> closer
        to what users expect.
       (Bug #46965)</p></li><li><p>
        Failed multiple-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>
        statements could raise an assertion.
       (Bug #46958)</p></li><li><p>
        When MySQL crashed (or a snapshot was taken that simulates a
        crash), it was possible that internal XA transactions (used to
        synchronize the binary log and
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>) could be left in a
        <code class="literal">PREPARED</code> state, whereas they should be rolled
        back. This occurred when the
        <a href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> value changed before
        the restart, because that value was used to construct XID
        values.
      </p><p>
        Now the restriction is relaxed that the
        <a href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> value be consistent
        for XID values to be considered valid. The rollback phase should
        then be able to clean up all pending XA transactions.
       (Bug #46944)</p></li><li><p>
        When creating a new instance on Windows using
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-nt</strong></span></a> and the
        <code class="literal">--install</code> parameter, the value of the service
        would be set incorrectly, resulting in a failure to start the
        configured service.
       (Bug #46917)</p></li><li><p>
        The test suite was missing from RPM packages.
       (Bug #46834)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, an unnecessary table
        rebuild for <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> could
        sometimes occur for metadata-only changes.
       (Bug #46760)</p></li><li><p>
        The server could crash for queries with the following elements:
        1. An “<span class="quote">impossible where</span>” in the outermost
        <code class="literal">SELECT</code>; 2. An aggregate in the outermost
        <code class="literal">SELECT</code>; 3. A correlated subquery with a
        <code class="literal">WHERE</code> clause that includes an outer field
        reference as a top-level <code class="literal">WHERE</code> sargable
        predicate;
       (Bug #46749)</p></li><li><p>
        <code class="literal">InnoDB</code> did not compile using
        <span><strong class="command">gcc</strong></span> 4.1 on PowerPC systems.
       (Bug #46718)</p></li><li><p>
        If <code class="literal">InnoDB</code> reached its limit on the number of
        concurrent transactions (1023), it wrote a descriptive message
        to the error log but returned a misleading error message to the
        client, or an assertion failure occurred.
       (Bug #46672)</p><p>References: See also Bug #18828.</p></li><li><p>
        A Valgrind error during index creation by
        <code class="literal">InnoDB</code> was corrected.
       (Bug #46657)</p></li><li><p>
        Concurrent <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT INTO
        ... SELECT</code></a> statements for an <code class="literal">InnoDB</code>
        table could cause an <code class="literal">AUTO_INCREMENT</code> assertion
        failure.
       (Bug #46650)</p></li><li><p>
        The Serbian locale name <code class="literal">'sr_YU'</code> is obsolete.
        It is still recognized for backward compatibility, but
        <code class="literal">'sr_RS'</code> now should be used instead.
       (Bug #46633)</p></li><li><p>
        On Solaris and HP-UX systems with the environment set to the
        default <code class="literal">C</code> locale, MySQL client programs
        issued an <code class="literal">Unknown OS character set</code> error.
       (Bug #46619)</p></li><li><p>
        <a href="sql-syntax.html#show-create-trigger" title="12.7.5.13. SHOW CREATE TRIGGER Syntax"><code class="literal">SHOW CREATE TRIGGER</code></a> for a
        <a href="storage-engines.html#merge-storage-engine" title="13.10. The MERGE Storage Engine"><code class="literal">MERGE</code></a> table trigger caused an
        assertion failure.
       (Bug #46614)</p></li><li><p>
        <a href="functions.html#operator_div"><code class="literal">DIV</code></a> operations that are out of
        range generated an error <code class="literal">Error (Code 1264): Out of
        range value</code> (correct), but also an error:
        <code class="literal">Error (Code 1041): Out of memory</code> (incorrect).
       (Bug #46606)</p></li><li><p>
        If a transaction was rolled back inside
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> due to a deadlock or lock
        wait timeout, and a statement in the transaction had an
        <code class="literal">IGNORE</code> clause, the server could crash at the
        end of the statement or on shutdown.
       (Bug #46539)</p></li><li><p>
        <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> for a table that
        was opened with <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> did not
        close the handler and left it in an inconsistent state that
        could lead to a server crash. Now <a href="sql-syntax.html#truncate-table" title="12.1.33. TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
        TABLE</code></a> for a table closes all open handlers for the
        table.
       (Bug #46456)</p></li><li><p>
        Trailing spaces were not ignored for user-defined collations
        that mapped spaces to a character other than 0x20.
       (Bug #46448)</p><p>References: See also Bug #29468.</p></li><li><p>
        The server crashed if a shutdown occurred while a connection was
        idle. This happened because of a <code class="literal">NULL</code> pointer
        dereference while logging to the error log.
       (Bug #46267)</p></li><li><p>
        Dropping an <code class="literal">InnoDB</code> table that used an unknown
        collation (created on a different server, for example) caused a
        server crash.
       (Bug #46256)</p></li><li><p>
        The GPL and commercial license headers had different sizes, so
        that error log, backtrace, core dump, and cluster trace file
        line numbers could be off by one if they were not checked
        against the version of the source used for the build. (For
        example, checking a GPL build backtrace against commercial
        sources.)
       (Bug #46216)</p></li><li><p>
        A query containing a subquery in the <code class="literal">FROM</code>
        clause and <code class="literal">PROCEDURE ANALYSE()</code> caused a
        server crash.
       (Bug #46184)</p><p>References: See also Bug #48293.</p></li><li><p>
        After an error such as a table-full condition,
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT IGNORE</code></a>
        could cause an assertion failure for debug builds.
       (Bug #46075)</p></li><li><p>
        On 64-bit systems,
        <a href="storage-engines.html#option_mysqld_innodb"><code class="option">--skip-innodb</code></a>
        did not skip <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> startup.
       (Bug #46043)</p></li><li><p>
        <code class="literal">InnoDB</code> did not disallow creation of an index
        with the name <code class="literal">GEN_CLUST_INDEX</code>, which is used
        internally.
       (Bug #46000)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        SELECT</code></a> could cause a server crash if no default
        database was selected.
       (Bug #45998)</p></li><li><p>
        Configuring MySQL for DTrace support resulted in a build failure
        on Solaris if the directory for the <span><strong class="command">dtrace</strong></span>
        executable was not in <code class="literal">PATH</code>.
       (Bug #45810)</p></li><li><p>
        An infinite hang and 100% CPU usage occurred after a handler
        tried to open a merge table.
      </p><p>
        If the command <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin shutdown</strong></span></a> was
        executed during the hang, the debug server generated the
        following assert:
      </p><pre class="programlisting">mysqld: table.cc:407: void free_table_share(TABLE_SHARE*): Assertion `share-&gt;ref_count ==
0' failed.
090610 14:54:04 - mysqld got signal 6 ;</pre><p>(Bug #45781)</p></li><li><p>
        During the build of the Red Hat IA64 MySQL server RPM, the
        system library link order was incorrect. This made the resulting
        Red Hat IA64 RPM depend on "libc.so.6.1(GLIBC_PRIVATE)(64bit)",
        thus preventing installation of the package.
       (Bug #45706)</p></li><li><p>
        The <code class="literal">caseinfo</code> member of the
        <code class="literal">CHARSET_INFO</code> structure was not initialized
        for user-defined Unicode collations, leading to a server crash.
       (Bug #45645)</p></li><li><p>
        Appending values to an <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> or
        <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> definition is a metadata
        change for which <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> need
        not rebuild the table, but it was being rebuilt anyway.
       (Bug #45567)</p></li><li><p>
        The <a href="server-administration.html#sysvar_socket"><code class="literal">socket</code></a> system variable was
        unavailable on Windows.
       (Bug #45498)</p></li><li><p>
        The combination of <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> in the select list with
        <code class="literal">WHERE</code> and <code class="literal">GROUP BY</code> clauses
        could lead to incorrect results.
       (Bug #45386)</p></li><li><p>
        Truncation of <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values
        could lead to assertion failures; for example, when deducing the
        type of a table column from a literal
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> value.
       (Bug #45261)</p><p>References: See also Bug #48370.</p></li><li><p>
        Client flags were incorrectly initialized for the embedded
        server, causing several tests in the <code class="literal">jp</code> test
        suite to fail.
       (Bug #45159)</p></li><li><p>
        Concurrent execution of statements requiring a table-level lock
        and statements requiring a non-table-level write lock for a
        table could deadlock.
       (Bug #45143)</p></li><li><p>
        For settings of
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> greater
        than 0, some queries for <code class="literal">INFORMATION_SCHEMA</code>
        tables left entries with incorrect lettercase in the table
        definition cache.
       (Bug #44738)</p></li><li><p>
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> could fail to find the
        <span><strong class="command">logger</strong></span> program.
       (Bug #44736)</p></li><li><p>
        Some Perl scripts in AIX packages contained an incorrect path to
        the <span><strong class="command">perl</strong></span> executable.
       (Bug #44643)</p></li><li><p>
        With <code class="literal">InnoDB</code>, renaming a table column and then
        creating an index on the renamed column caused a server crash to
        the <code class="filename">.frm</code> file and the
        <code class="literal">InnoDB</code> data directory going out of sync. Now
        <code class="literal">InnoDB</code> 1.0.5 returns an error instead:
        <code class="literal">ERROR 1034 (HY000): Incorrect key file for table
        '<em class="replaceable"><code>tbl_name</code></em>'; try to repair
        it</code>. To work around the problem, create another table
        with the same structure and copy the original table to it.
       (Bug #44571)</p></li><li><p>
        For debug builds, executing a stored procedure as a prepared
        statement could sometimes cause an assertion failure.
       (Bug #44521)</p></li><li><p>
        Using <a href="connectors-apis.html#mysql-stmt-execute" title="21.9.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to
        call a stored procedure could cause a server crash.
       (Bug #44495)</p></li><li><p>
        <code class="literal">InnoDB</code> did not always disallow creating
        tables containing columns with names that match the names of
        internal columns, such as <code class="literal">DB_ROW_ID</code>,
        <code class="literal">DB_TRX_ID</code>, <code class="literal">DB_ROLL_PTR</code>,
        and <code class="literal">DB_MIX_ID</code>.
       (Bug #44369)</p></li><li><p>
        An <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> error message incorrectly
        referred to the nonexistent
        <code class="literal">innodb_max_files_open</code> variable rather than to
        <a href="storage-engines.html#sysvar_innodb_open_files"><code class="literal">innodb_open_files</code></a>.
       (Bug #44338)</p></li><li><p>
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT ... WHERE ... IN
        (NULL, ...)</code></a> was executed using a full table scan, even
        if the same query without the <code class="literal">NULL</code> used an
        efficient range scan.
       (Bug #44139)</p><p>References: See also Bug #18360.</p></li><li><p>
        <code class="literal">InnoDB</code> use of <code class="literal">SELECT
        MAX(<em class="replaceable"><code>autoinc_column</code></em>)</code> could
        cause a crash when MySQL data dictionaries went out of sync.
       (Bug #44030)</p></li><li><p>
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statements were written to the binary log in
        such a way that parsing problems could occur when re-executing
        the statement from the log.
       (Bug #43746)</p></li><li><p>
        Selecting from the process list in the embedded server caused a
        crash.
       (Bug #43733)</p><p>References: See also Bug #47304.</p></li><li><p>
        Attempts to enable <a href="server-administration.html#sysvar_large_pages"><code class="literal">large_pages</code></a>
        with a shared memory segment larger than 4GB caused a server
        crash.
       (Bug #43606)</p></li><li><p>
        For <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>, renaming a
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column unnecessarily
        caused a table copy operation.
       (Bug #43508)</p></li><li><p>
        The weekday names for the Romanian
        <a href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> locale
        <code class="literal">'ro_RO'</code> were incorrect. Thanks to Andrei
        Boros for the patch to fix this bug.
       (Bug #43207)</p></li><li><p>
        <a href="sql-syntax.html#xa" title="12.3.7. XA Transactions"><code class="literal">XA START</code></a> could
        cause an assertion failure or server crash when it is called
        after a unilateral rollback issued by the Resource Manager (both
        in a regular transaction and after an XA transaction).
       (Bug #43171)</p></li><li><p>
        Redefining a trigger could cause an assertion failure.
       (Bug #43054)</p></li><li><p>
        The <code class="literal">FORCE INDEX FOR ORDER BY</code> index hint was
        ignored when join buffering was used.
       (Bug #43029)</p></li><li><p>
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> did not clear the
        message list.
       (Bug #43012, Bug #43138)</p></li><li><p>
        The <code class="literal">NUM_FLAG</code> bit of the
        <code class="literal">MYSQL_FIELD.flags</code> member now is set for
        columns of type <code class="literal">MYSQL_TYPE_NEWDECIMAL</code>.
       (Bug #42980)</p></li><li><p>
        Incorrect handling of range predicates combined with
        <a href="functions.html#operator_or"><code class="literal">OR</code></a> operators could yield incorrect
        results.
       (Bug #42846)</p></li><li><p>
        Failure to treat <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> values as
        unsigned could lead to unpredictable results.
       (Bug #42803)</p></li><li><p>
        For the embedded server on Windows,
        <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> crashed when
        <a href="storage-engines.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> was
        enabled and a table name was in full path format.
       (Bug #42383)</p></li><li><p>
        <a href="sql-syntax.html#show-errors" title="12.7.5.18. SHOW ERRORS Syntax"><code class="literal">SHOW ERRORS</code></a> returned an empty
        result set after an attempt to drop a nonexistent table.
       (Bug #42364)</p></li><li><p>
        If the server was started with an option that had a missing or
        invalid value, a subsequent error that normally would cause the
        server to shut down could cause it to crash instead.
       (Bug #42244)</p></li><li><p>
        Some queries with nested outer joins could lead to crashes or
        incorrect results because an internal data structure was handled
        improperly.
       (Bug #42116)</p></li><li><p>
        The server used the wrong lock type (always
        <code class="literal">TL_READ</code> instead of
        <code class="literal">TL_READ_NO_INSERT</code> when appropriate) for
        tables used in subqueries of
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements. This led in
        some cases to replication failure because statements were
        written in the wrong order to the binary log.
       (Bug #42108)</p></li><li><p>
        A Valgrind warning in <code class="literal">open_tables()</code> was
        corrected.
       (Bug #41759)</p></li><li><p>
        In a replication scenario with
        <a href="storage-engines.html#sysvar_innodb_locks_unsafe_for_binlog"><code class="literal">innodb_locks_unsafe_for_binlog</code></a>
        enabled on the slave, where rows were changed only on the slave
        (not through replication), in some rare cases, many messages of
        the following form were written to the slave error log:
        <code class="literal">InnoDB: Error: unlock row could not find a 4 mode lock
        on the record</code>.
       (Bug #41756)</p></li><li><p>
        After renaming a user, granting that user privileges could
        result in the user having privileges additional to those
        granted.
       (Bug #41597)</p></li><li><p>
        The <span><strong class="command">mysql-stress-test.pl</strong></span> test script was
        missing from the <code class="literal">noinstall</code> packages on
        Windows.
       (Bug #41546)</p></li><li><p>
        With a nonstandard <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> page
        size, some error messages became inaccurate.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          Changing the page size is not a supported operation and there
          is no guarantee that <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> will
          function normally with a page size other than 16KB. Problems
          compiling or running InnoDB may occur. In particular,
          <code class="literal">ROW_FORMAT=COMPRESSED</code> in
          <code class="literal">InnoDB</code> assumes that the page size is at
          most 16KB and uses 14-bit pointers.
        </p><p xmlns="">
          A version of <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> built for one
          page size cannot use data files or log files from a version
          built for a different page size.
        </p></div><p>(Bug #41490)</p></li><li><p>
        In some cases, the server did not recognize lettercase
        differences between <a href="sql-syntax.html#grant" title="12.7.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>
        attributes such as table name or user name. For example, a user
        was able to perform operations on a table with privileges of
        another user with the same user name but in a different
        lettercase.
      </p><p>
        In consequence of this bug fix, the collation for the
        <code class="literal">Routine_name</code> column of the
        <code class="literal">mysql.proc</code> table is changed from
        <code class="literal">utf8_bin</code> to
        <code class="literal">utf8_general_ci</code>.
       (Bug #41049)</p><p>References: See also Bug #48872.</p></li><li><p>
        When a storage engine plugin failed to initialize before
        allocating a slot number, it would acidentally unplug the engine
        installed in slot 0.
       (Bug #41013)</p></li><li><p>
        Optimized builds of <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> crashed when built
        with Sun Studio on SPARC platforms.
       (Bug #40244)</p></li><li><p>
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> failed if a column
        name in a <code class="literal">FOREIGN KEY</code> clause was given in a
        lettercase different from the corresponding index definition.
       (Bug #39932)</p></li><li><p>
        The <a href="connectors-apis.html#mysql-stmt-close" title="21.9.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a> C API
        function did not flush all pending data associated with the
        prepared statement.
       (Bug #39519)</p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA</code> access optimizations did
        not work properly in some cases.
       (Bug #39270)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> neglected to preserve
        <code class="literal">ROW_FORMAT</code> information from the original
        table, which could cause subsequent <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> and <a href="sql-syntax.html#optimize-table" title="12.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE
        TABLE</code></a> statements to lose the row format for
        <code class="literal">InnoDB</code> tables.
       (Bug #39200)</p></li><li><p>
        Simultaneous <a href="sql-syntax.html#analyze-table" title="12.7.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>
        operations for an <a href="storage-engines.html#innodb-storage-engine" title="13.3. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables
        could be subject to a race condition.
       (Bug #38996)</p></li><li><p>
        <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> option-processing code had a
        memory leak.
       (Bug #38468)</p></li><li><p>
        The <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a> privilege
        incorrectly permitted <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE
        TABLE</code></a>.
       (Bug #38347)</p></li><li><p>
        Setting the <a href="server-administration.html#sysvar_general_log_file"><code class="literal">general_log_file</code></a> or
        <a href="server-administration.html#sysvar_slow_query_log_file"><code class="literal">slow_query_log_file</code></a> system
        variable to a nonconstant expression caused the variable to
        become unset.
       (Bug #38124)</p></li><li><p>
        For certain <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements
        using <a href="optimization.html#jointype_ref"><code class="literal">ref</code></a> access, MySQL
        estimated an incorrect number of rows, which could lead to
        inefficient query plans.
       (Bug #38049)</p></li><li><p>
        A workload consisting of
        <a href="sql-syntax.html#create-table" title="12.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
        SELECT</code></a> and DML operations could cause deadlock.
       (Bug #37433)</p></li><li><p>
        The MySQL client library mishandled
        <code class="literal">EINPROGRESS</code> errors for connections in
        nonblocking mode. This could lead to replication failures on
        hosts capable of resolving both IPv4 and IPv6 network addresses,
        when trying to resolve <code class="literal">localhost</code>.
       (Bug #37267)</p><p>References: See also Bug #44344.</p></li><li><p>
        Previously, <code class="literal">InnoDB</code> performed <code class="literal">REPLACE
        INTO T SELECT ... FROM S WHERE ...</code> by setting shared
        next-key locks on rows from <code class="literal">S</code>. Now
        <code class="literal">InnoDB</code> selects rows from <code class="literal">S</code>
        with shared locks or as a consistent read, as for
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a>. This reduces lock contention between sessions.
       (Bug #37232)</p></li><li><p>
        Some warnings were being reported as errors.
       (Bug #36777)</p></li><li><p>
        Privileges for <a href="sql-syntax.html#show-create-view" title="12.7.5.14. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a>
        were not being checked correctly.
       (Bug #35996)</p></li><li><p>
        Different invocations of <a href="sql-syntax.html#checksum-table" title="12.7.2.3. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM
        TABLE</code></a> could return different results for a table
        containing columns with spatial data types.
       (Bug #35570)</p></li><li><p>
        Result set metadata for columns retrieved from
        <code class="literal">INFORMATION_SCHEMA</code> tables did not have the
        <code class="literal">db</code> or <code class="literal">org_table</code> members of
        the <code class="literal">MYSQL_FIELD</code> structure set.
       (Bug #35428)</p></li><li><p>
        <a href="sql-syntax.html#show-create-event" title="12.7.5.9. SHOW CREATE EVENT Syntax"><code class="literal">SHOW CREATE EVENT</code></a> output did not
        include the <code class="literal">DEFINER</code> clause.
       (Bug #35297)</p></li><li><p>
        For its warning count, the
        <a href="connectors-apis.html#mysql-info" title="21.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API function
        could print the number of truncated data items rather than the
        number of warnings.
       (Bug #34898)</p></li><li><p>
        Concurrent execution of
        <a href="sql-syntax.html#flush" title="12.7.6.3. FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a>
        along with <a href="sql-syntax.html#show-function-status" title="12.7.5.21. SHOW FUNCTION STATUS Syntax"><code class="literal">SHOW FUNCTION STATUS</code></a>
        or <a href="sql-syntax.html#show-procedure-status" title="12.7.5.29. SHOW PROCEDURE STATUS Syntax"><code class="literal">SHOW PROCEDURE STATUS</code></a> could
        cause a server crash.
       (Bug #34895)</p></li><li><p>
        Executing <a href="sql-syntax.html#show-binary-logs" title="12.7.5.2. SHOW BINARY LOGS Syntax"><code class="literal">SHOW
        MASTER LOGS</code></a> as a prepared statement without binary
        logging enabled caused a crash for debug builds.
       (Bug #34741)</p></li><li><p>
        There were spurious warnings about <code class="literal">"Truncated incorrect
        DOUBLE value"</code> in queries with <code class="literal">MATCH ...
        AGAINST</code> and <code class="literal">&gt;</code> or
        <code class="literal">&lt;</code> with a constant (which was reported as
        an incorrect <code class="literal">DOUBLE</code> value) in the
        <code class="literal">WHERE</code> condition.
       (Bug #34374)</p></li><li><p>
        A <code class="literal">COMMENT</code> longer than 64 characters caused
        <a href="sql-syntax.html#create-procedure" title="12.1.15. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE PROCEDURE</code></a> to fail.
       (Bug #34197)</p></li><li><p>
        <a href="connectors-apis.html#mysql-real-connect" title="21.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> did not
        check whether the <code class="literal">MYSQL</code> connection handler
        was already connected and connected again even if so. Now a
        <a href="error-handling.html#error_cr_already_connected"><code class="literal">CR_ALREADY_CONNECTED</code></a> error
        occurs.
       (Bug #33831)</p></li><li><p>
        <a href="sql-syntax.html#install-plugin" title="12.7.3.3. INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> and
        <a href="sql-syntax.html#uninstall-plugin" title="12.7.3.4. UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> did not handle
        plugin identifiers consistently with respect to lettercase.
       (Bug #33731)</p></li><li><p>
        The default values for the general query log and slow query log
        file are documented to be based on the server host name and
        located in the data directory. However, they were in fact being
        based on the basename and location of the process ID (PID) file.
        The name and location defaults for the PID file are based on the
        server host name and data directory, so if it was not assigned a
        different name explicitly, its defaults were used and the
        general query log and slow query log file defaults were as
        documented. But if the PID file was assigned a value with the
        <a href="server-administration.html#option_mysqld_pid-file"><code class="option">--pid-file</code></a> option, the defaults
        for the general query log and slow query log file were
        incorrect. This has been rectified so that the defaults for all
        three files are based on the server host name and data
        directory.
      </p><p>
        A remaining problem is that the binary log and relay log
        <code class="filename">.<em class="replaceable"><code>NNNNNN</code></em></code> and
        <code class="filename">.index</code> basename defaults are based on the
        PID file basename, contrary to the documentation. This issue is
        to be addressed as Bug #45359.
       (Bug #33693)</p></li><li><p>
        The <a href="sql-syntax.html#show-function-code" title="12.7.5.20. SHOW FUNCTION CODE Syntax"><code class="literal">SHOW FUNCTION CODE</code></a> and
        <a href="sql-syntax.html#show-procedure-code" title="12.7.5.28. SHOW PROCEDURE CODE Syntax"><code class="literal">SHOW PROCEDURE CODE</code></a> statements
        are not present in nondebug builds, but attempting to use them
        resulted in a “<span class="quote">syntax error</span>” message. Now the error
        message indicates that the statements are disabled and that you
        must use a debug build.
       (Bug #33637)</p></li><li><p>
        The <a href="functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a> and
        <a href="functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a> functions could return
        <code class="literal">NULL</code>, but the result metadata indicated
        <code class="literal">NOT NULL</code>. Thanks to Hiromichi Watari for the
        patch to fix this bug.
       (Bug #33629)</p></li><li><p>
        Instance Manager (<span><strong class="command">mysqlmanager</strong></span>) has been
        removed, but a reference to it still appeared in the
        <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> script.
       (Bug #33472)</p></li><li><p>
        There was a race condition between the event scheduler and the
        server shutdown thread.
       (Bug #32771)</p></li><li><p>
        When an <code class="literal">InnoDB</code> tablespace filled up, an error
        was logged to the client, but not to the error log. Also, the
        error message was misleading and did not indicate the real
        source of the problem.
       (Bug #31183)</p></li><li><p>
        <a href="sql-syntax.html#alter-table" title="12.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements that added
        a column and added a nonpartial index on the column failed to
        add the index.
       (Bug #31031)</p></li><li><p>
        For <a href="optimization.html#jointype_const"><code class="literal">const</code></a> tables that were
        optimized away, <a href="sql-syntax.html#explain" title="12.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        EXTENDED</code></a> displayed them in the <code class="literal">FROM</code>
        clause. Now they are not displayed. If all tables are optimized
        away, <code class="literal">FROM DUAL</code> is displayed.
       (Bug #30302)</p></li><li><p>
        There were cases where string-to-number conversions would
        produce warnings for <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> values
        but not for <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> values.
       (Bug #28299)</p></li><li><p>
        In <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>, using <span><strong class="keycap">Control+C</strong></span> to
        kill the current query resulted in a <code class="literal">ERROR 1053
        (08S01): Server shutdown in progress" message</code> if the
        query was waiting for a lock.
       (Bug #28141)</p></li><li><p>
        When building MySQL on Windows from source, the
        <code class="literal">WITH_BERKELEY_STORAGE_ENGINE</code> option would
        fail to configure <code class="literal">BDB</code> support correctly.
       (Bug #27693)</p></li><li><p>
        The default database is no longer changed to
        <code class="literal">NULL</code> (“<span class="quote">no database</span>”) if
        <a href="sql-syntax.html#drop-database" title="12.1.21. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> for that database
        failed.
       (Bug #26704)</p></li><li><p>
        <a href="sql-syntax.html#drop-table" title="12.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> for
        <code class="literal">INFORMATION_SCHEMA</code> tables produced an
        <code class="literal">Unknown table</code> error rather than the more
        appropriate <code class="literal">Access denied</code>.
       (Bug #24062)</p></li><li><p>
        <code class="literal">SELECT COUNT(DISTINCT)</code> was slow compared with
        <code class="literal">SELECT DISTINCT</code>. Now the server can use loose
        index scan for certain forms of aggregate functions that use
        <code class="literal">DISTINCT</code>. See
        <a href="optimization.html#loose-index-scan" title="7.13.10.1. Loose Index Scan">Section 7.13.10.1, “Loose Index Scan”</a>.
       (Bug #21849, Bug #38213)</p></li><li><p>
        Referring to a stored function qualified with the name of one
        database and tables in another database caused a “<span class="quote">table
        doesn't exist</span>” error.
       (Bug #18444)</p></li><li><p>
        A <span class="errortext">Table ... doesn't exist</span> error could
        occur for statements that called a function defined in another
        database.
       (Bug #17199)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-odbc-news"></a>D.2. MySQL Connector/ODBC (MyODBC) Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-x">D.2.1. Changes in MySQL Connector/ODBC Version 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-x">D.2.2. Changes in MySQL Connector/ODBC Version 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-x">D.2.3. Changes in MySQL Connector/ODBC Version 3.51.x</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-news-5-1-x"></a>D.2.1. Changes in MySQL Connector/ODBC Version 5.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-10">D.2.1.1. Changes in MySQL Connector/ODBC 5.1.10 (02 February 2012)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-9">D.2.1.2. Changes in MySQL Connector/ODBC 5.1.9 (06 October 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-8">D.2.1.3. Changes in MySQL Connector/ODBC 5.1.8 (07 November 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-7">D.2.1.4. Changes in MySQL Connector/ODBC 5.1.7 (24 August 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-6">D.2.1.5. Changes in MySQL Connector/ODBC 5.1.6 (09 November 2009)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-5">D.2.1.6. Changes in MySQL Connector/ODBC 5.1.5 (18 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-4">D.2.1.7. Changes in MySQL Connector/ODBC 5.1.4 (15 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-3">D.2.1.8. Changes in MySQL Connector/ODBC 5.1.3 (26 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-2">D.2.1.9. Changes in MySQL Connector/ODBC 5.1.2 (13 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-1">D.2.1.10. Changes in MySQL Connector/ODBC 5.1.1 (13 December 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-1-0">D.2.1.11. Changes in MySQL Connector/ODBC 5.1.0 (10 September 2007)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-10"></a>D.2.1.1. Changes in MySQL Connector/ODBC 5.1.10 (02 February 2012)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">SQLFetch</code> has to return error if indicator
        pointer is <code class="literal">NULL</code> for <code class="literal">NULL</code>
        value.
       (Bug #13542600)</p></li><li><p>
        In some cases, a <code class="literal">TIMESTAMP</code> field could be
        described as <code class="literal">SQL_NO_NULLS</code>.
       (Bug #13532987)</p></li><li><p>
        A failure on one statement causes another statement to fail.
       (Bug #13097201, Bug #62657)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-9"></a>D.2.1.2. Changes in MySQL Connector/ODBC 5.1.9 (06 October 2011)</h4></div></div></div><p>
        Only the source code and Windows binaries are available with
        this release.
      </p><p>
        The 64-bit MSI installer no longer contains 32-bit and 64-bit
        builds of the driver, like it did in previous versions. It now
        only includes 64-bit support.
      </p><p><span class="bold"><strong>Pluggable Authentication Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The binaries for this distribution of Connector/ODBC can now
        connect to MySQL server accounts that use the PAM or Windows
        Native Authentication Plugins for authentication. See
        <a href="server-administration.html#pam-authentication-plugin" title="5.5.6.2. The PAM Authentication Plugin">Section 5.5.6.2, “The PAM Authentication Plugin”</a>, and
        <a href="server-administration.html#windows-authentication-plugin" title="5.5.6.3. The Windows Native Authentication Plugin">Section 5.5.6.3, “The Windows Native Authentication Plugin”</a>. These
        capabilities result from linking the Connector/ODBC binaries
        against the MySQL 5.5.16 <code class="literal">libmysql</code> rather than
        the MySQL 5.1 <code class="literal">libmysql</code> used previously. The
        newer <code class="literal">libmysql</code> includes the client-side
        support needed for the server-side PAM and Windows
        authentication plugins.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Some catalog functions (such as <code class="literal">SQLColumns()</code>,
        <code class="literal">SQLStatistics()</code>, and
        <code class="literal">SQLPrimaryKeys()</code>) would only return one row,
        when called after pre-execution failed.
       (Bug #12824839)</p></li><li><p>
        The CLI installer script
        <code class="filename">mysqlodbc-installer</code> was missing
        documentation about how to configure the optional data source
        parameters.
       (Bug #12810058)</p></li><li><p>
        The <code class="filename">Install.bat</code> script contained leftover
        <code class="literal">3.51</code> information, and did not properly
        install the <code class="literal">5.1</code> Connector/ODBC connector.
       (Bug #12781039)</p></li><li><p>
        An off-by-one error, where <code class="literal">sqlwcharchr</code> might
        read one <code class="literal">SQLWCHAR</code> after the end of a string.
       (Bug #61586)</p></li><li><p>
        <code class="literal">SQLExecute</code> would return
        <code class="literal">SQL_SUCCESS_WITH_INFO</code> instead of
        <code class="literal">SQL_ERROR</code>, when column parameter binding was
        enabled.
       (Bug #59772)</p></li><li><p>
        The Connector/ODBC driver did not call
        <a href="connectors-apis.html#mysql-thread-end" title="21.9.8.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a> when a thread
        ended, which caused error messages like: <code class="literal">Error in
        my_thread_global_end(): 1 threads didn't exit</code>.
       (Bug #57727)</p></li><li><p>
        When using MySQL Connector/ODBC to fetch data, if a
        <code class="literal">net_write_timeout</code> condition occurred, the
        operation returned the standard "end of data" status, rather
        than an error.
       (Bug #39878)</p></li><li><p>
        MS Access fields with <code class="literal">VARCHAR NOT NULL</code>
        columns could not be altered.
       (Bug #31067)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-8"></a>D.2.1.3. Changes in MySQL Connector/ODBC 5.1.8 (07 November 2010)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Documentation in <code class="filename">.CHM</code> and
        <code class="filename">.HLP</code> format has been removed from the
        distribution.
       (Bug #56232)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        For some procedure and parameter combinations
        <code class="literal">SQLProcedureColumns()</code> did not work correctly.
        For example, it could not return records for an existing
        procedure with correct parameters supplied.
      </p><p>
        Further, it returned incorrect data for column 7,
        <code class="literal">TYPE_NAME</code>. For example, it returned
        <code class="literal">VARCHAR(20)</code> instead of
        <code class="literal">VARCHAR</code>.
       (Bug #57182)</p></li><li><p>
        The MySQL Connector/ODBC MSI installer did not set the
        <code class="literal">InstallLocation</code> value in the Microsoft
        Windows registry.
       (Bug #56978)</p></li><li><p>
        In bulk upload mode, <code class="literal">SQLExecute</code> would return
        <code class="literal">SQL_SUCCESS</code>, even when the uploaded data
        contained errors, such as primary key duplication, and foreign
        key violation.
       (Bug #56804)</p></li><li><p>
        <code class="literal">SQLDescribeCol</code> and
        <code class="literal">SQLColAttribute</code> could not be called before
        <code class="literal">SQLExecute</code>, if the query was parameterized
        and not all parameters were bound.
      </p><p>
        Note, MSDN states that “<span class="quote">For performance reasons, an
        application should not call
        <code class="literal">SQLColAttribute/SQLDescribeCol</code> before
        executing a statement.</span>” However, it should still be
        possible to do so if performance reasons are not paramount.
       (Bug #56717)</p></li><li><p>
        When <code class="literal">SQLNumResultCols()</code> was called between
        <code class="literal">SQLPrepare()</code> and
        <code class="literal">SQLExecute()</code> the driver ran <code class="literal">SET
        @@sql_select_limit=1</code>, which limited the resultset to
        just one row.
       (Bug #56677)</p></li><li><p>
        After installing MySQL Connector/ODBC, the system DSN created could not be
        configured or deleted. An error dialog was displayed, showing
        the error message “<span class="quote">Invalid attribute string</span>”.
      </p><p>
        In this case the problem was due to the fact that the driver
        could not parse the NULL-separated connection string.
       (Bug #56233)</p></li><li><p>
        When used after a call to <code class="literal">SQLTables()</code>,
        <code class="literal">SQLRowCount()</code> did not return the correct
        value.
       (Bug #55870)</p></li><li><p>
        When attempting to install the latest Connector/ODBC 5.1.6 on
        Windows using the MSI, with an existing 5.1.x version already
        installed, the following error was generated:
      </p><pre class="programlisting">Another version of this product is already installed.  Installation of this version
cannot continue.  To configure or remove the existing version of this product, use
Add/Remove Programs on the Control Panel.</pre><p>
        Also, the version number displayed in the ODBC Data Source
        Administrator/Drivers tab did not get updated when removing or
        installing a new version of 5.1.x.
       (Bug #54314)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-7"></a>D.2.1.4. Changes in MySQL Connector/ODBC 5.1.7 (24 August 2010)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/ODBC has been changed to support the
        <code class="literal">CLIENT_INTERACTIVE</code> flag.
       (Bug #48603)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">SQLColAttribute(SQL_DESC_PRECISION...)</code>
        function returned incorrect results for type identifiers that
        have a negative value:
      </p><pre class="programlisting">#define SQL_LONGVARCHAR       (-1) returned 4294967295
#define SQL_BINARY            (-2) returned 4294967294
#define SQL_VARBINARY         (-3) returned 4294967293
#define SQL_LONGVARBINARY     (-4) returned 4294967292
#define SQL_BIGINT            (-5) returned 4294967291
#define SQL_TINYINT           (-6) returned 4294967290
#define SQL_BIT               (-7) returned 4294967289</pre><p>
        They were returned as 32-bit unsigned integer values. This only
        happened on 64-bit Linux.
       (Bug #55024)</p></li><li><p>
        <code class="literal">SQLColAttribute</code> for
        <code class="literal">SQL_DESC_OCTET_LENGTH</code> returned length
        including terminating null byte. It should not have included the
        null byte.
       (Bug #54206)</p></li><li><p>
        The <code class="literal">SQLColumns</code> function returned the
        incorrect transfer octet length into the column
        <code class="literal">BUFFER_LENGTH</code> for <code class="literal">DECIMAL</code>
        type.
       (Bug #53235)</p></li><li><p>
        <code class="literal">SQLForeignKeys()</code> did not return the correct
        information. The list of foreign keys in other tables should not
        have included foreign keys that point to unique constraints in
        the specified table.
       (Bug #51422)</p></li><li><p>
        When executing the <code class="literal">SQLProcedureColumns()</code> ODBC
        function, the driver reported the following error:
      </p><pre class="programlisting">MySQL server does not provide the requested information</pre><p>(Bug #50400)</p></li><li><p>
        In contrast to all other ODBC catalog functions
        <code class="literal">SQLTablePrivileges</code> required the user to have
        <code class="literal">SELECT</code> privilege on MySQL schemata, otherwise
        the function returned with an error:
      </p><pre class="programlisting">SQL Error. Native Code: 1142, SQLState: HY000, Return Code: -1
[MySQL][ODBC 5.1 Driver][mysqld-5.0.67-community-nt]SELECT command denied to user
'repadmin'@'localhost' for table 'tables_priv'
[Error][SQL Error]Error executing SQLTablePrivileges for object cat: myrep, object Name:
xxxxxxxxxx</pre><p>(Bug #50195)</p></li><li><p>
        MySQL Connector/ODBC manually added a <code class="literal">LIMIT</code> clause to the
        end of certain SQL statements, causing errors for statements
        that contained code that should be positioned after the
        <code class="literal">LIMIT</code> clause.
       (Bug #49726)</p></li><li><p>
        If <code class="literal">NO_BACKSLASH_ESCAPES</code> mode was used on a
        server, escaping binary data led to server query parsing errors.
       (Bug #49029)</p></li><li><p>
        Bulk upload operations did not work for queries that used
        parameters.
       (Bug #48310)</p></li><li><p>
        Retrieval of the current catalog at the moment when a connection
        was not ready, such as when the connection had been broken or
        when not all pending results had been processed, resulted in the
        application crashing.
       (Bug #46910)</p></li><li><p>
        Describing a view or table caused <code class="literal">SQLPrepare</code>
        to prefetch table data. For large tables this created an
        intolerable performance hit.
       (Bug #46411)</p></li><li><p>
        If an application was invoked by the root user,
        <code class="literal">SQLDriverConnect()</code> was not able to use the
        username and password in the connection string to connect to the
        database.
       (Bug #45378)</p></li><li><p>
        Calling <code class="literal">SQLColAttribute</code> on a date column did
        not set <code class="literal">SQL_DESC_DATETIME_INTERVAL_CODE</code>.
        <code class="literal">SQLColAttribute</code> returned
        <code class="literal">SQL_SUCCESS</code> but the integer passed in was not
        set to <code class="literal">SQL_CODE_DATE</code>.
       (Bug #44576)</p></li><li><p>
        Conversions for many types were missing from the file
        <code class="filename">driver/info.c</code>.
       (Bug #43855)</p></li><li><p>
        The <code class="literal">SQLTables()</code> function required
        approximately two to four minutes to return the list of 400
        tables in a database. The <code class="literal">SHOW TABLE STATUS</code>
        query used by <code class="literal">SQLTables()</code> was extremely slow
        for InnoDB tables with a large number of rows because the query
        was calculating the approximate number of rows in each table.
        Further, the results could not be cached due to
        non-deterministic nature of the result set (the row count was
        re-calculated every time), impacting performance further.
       (Bug #43664)</p></li><li><p>
        Executing <code class="literal">SQLForeignKeys</code> to get imported
        foreign keys for tables took an excessively long time. For
        example, getting imported foreign keys for 252 tables to
        determine parent/child dependencies took about 3 minutes and 14
        seconds for the 5.1.5 driver, whereas it took 3 seconds for the
        3.5x.x driver.
       (Bug #39562)</p></li><li><p>
        <code class="literal">SQLDescribeCol</code> returned incorrect column
        definitions for <code class="literal">SQLTables</code> result.
       (Bug #37621)</p></li><li><p>
        When opening <code class="literal">ADO.Recordset</code> from Microsoft
        Access 2003, a run-time error occurred:
      </p><pre class="programlisting">ErrNo: -2147467259 ErrMessage: Data provider or other service returned an E_FAIL status.</pre><p>(Bug #36996)</p></li><li><p>
        <code class="literal">SQLPrimaryKeysW</code> returned mangled strings for
        table name, column name and primary key name.
       (Bug #36441)</p></li><li><p>
        On Windows, the SOCKET parameter to the DSN was used as the
        named pipe name to connect to. This was not exposed in the
        Windows setup GUI.
       (Bug #34477)</p></li><li><p>
        MySQL Connector/ODBC returned a value of zero for a column with a non-zero
        value. This happened when the column had a data type of
        <code class="literal">BIT</code>, and any numeric type was used in
        <code class="literal">SQLBindCol</code>.
       (Bug #32821)</p></li><li><p>
        Option for handling bad dates was not available in the GUI.
       (Bug #30539)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-6"></a>D.2.1.5. Changes in MySQL Connector/ODBC 5.1.6 (09 November 2009)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        In the MySQL Data Source Configuration dialog, an excessive
        number of tabs were required to navigate to selection of a
        database. MySQL Connector/ODBC has been changed to make the tab order more
        practical, thereby enabling faster configuration of a Data
        Source.
       (Bug #42905)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        An error randomly occurred on Windows 2003 Servers (German
        language Version) serving classic ASP scripts on IIS6 MDAC
        version 2.8 SP2 on Windows 2003 SP2. The application connected
        to MySQL Server 5.0.44-log with a charset of UTF-8 Unicode
        (utf8). The MySQL server was running on Gentoo Linux.
      </p><p>
        The script error occurred sporadically on the following line of
        code:
      </p><pre class="programlisting">SET my_conn = Server.CreateObject("ADODB.Connection")
my_conn.Open ConnString  &lt;- ERROR</pre><p>
        The connection was either a DSN or the explicit connection
        string:
      </p><pre class="programlisting">Driver={MySQL ODBC 5.1 Driver};SERVER=abc.abc.abc.abc;DATABASE=dbname;UID=uidname;PWD=pwdname;PORT=3306;OPTION=67108864;</pre><p>
        The error occurred on connections established using either a DNS
        or a connection string.
      </p><p>
        When IISState and Debug Diagnostic Tool 1.0.0.152 was used to
        analyse the code, the following crash analysis was generated:
      </p><pre class="programlisting">MYODBC5!UTF16TOUTF32+6In 4640-1242788336.dmp the assembly instruction at
myodbc5!utf16toutf32+6 in C:\Programme\MySQL\Connector ODBC 5.1\myodbc5.dll from MySQL AB
has caused an access violation exception (0xC0000005) when trying to read from memory
location 0x194dd000 on thread 33</pre><p>(Bug #44971)</p></li><li><p>
        MySQL Connector/ODBC overwrote the query log. MySQL Connector/ODBC was changed to append
        the log, rather than overwrite it.
       (Bug #44965)</p></li><li><p>
        MySQL Connector/ODBC failed to build with MySQL 5.1.30 due to incorrect use
        of the data type <code class="literal">bool</code>.
       (Bug #42120)</p></li><li><p>
        Inserting a new record using <code class="literal">SQLSetPos</code> did
        not correspond to the database name specified in the
        <code class="literal">SELECT</code> statement when querying tables from
        databases other than the current one.
      </p><p>
        <code class="literal">SQLSetPos</code> attempted to do the
        <code class="literal">INSERT</code> in the current database, but finished
        with a <code class="literal">SQL_ERROR</code> result and “<span class="quote">Table does
        not exist</span>” message from MySQL Server.
       (Bug #41946)</p></li><li><p>
        Calling <code class="literal">SQLDescribeCol()</code> with a NULL buffer
        and nonzero buffer length caused a crash.
       (Bug #41942)</p></li><li><p>
        MySQL Connector/ODBC updated some fields with random values, rather than with
        <code class="literal">NULL</code>.
       (Bug #41256)</p></li><li><p>
        When a column of type <code class="literal">DECIMAL</code> containing
        <code class="literal">NULL</code> was accessed, MySQL Connector/ODBC returned a 0
        rather than a <code class="literal">NULL</code>.
       (Bug #41081)</p></li><li><p>
        In Access 97, when linking a table containing a
        <code class="literal">LONGTEXT</code> or <code class="literal">TEXT</code> field to
        a MySQL Connector/ODBC DSN, the fields were shown as
        <code class="literal">TEXT(255)</code> in the table structure. Data was
        therefore truncated to 255 characters.
       (Bug #40932)</p></li><li><p>
        Calling <code class="literal">SQLDriverConnect()</code> with a
        <code class="literal">NULL</code> pointer for the output buffer caused a
        crash if <code class="literal">SQL_DRIVER_NOPROMPT</code> was also
        specified:
      </p><pre class="programlisting">SQLDriverConnect(dbc, NULL, "DSN=myodbc5", SQL_NTS, NULL, 0, NULL, SQL_DRIVER_NOPROMPT)</pre><p>(Bug #40316)</p></li><li><p>
        Setting the ADO <code class="literal">Recordset</code> decimal field value
        to 44.56 resulted in an incorrect value of 445600.0000 being
        stored when the record set was updated with the
        <code class="literal">Update</code> method.
       (Bug #39961)</p></li><li><p>
        The <code class="literal">SQLTablesW</code> API gave incorrect results.
        For example, table name and table type were returned as
        <code class="literal">NULL</code> rather than as the correct values.
       (Bug #39957)</p></li><li><p>
        Connector/ODBC would crash when a character set was being used
        on the server that was not supported in the client, for example
        cp1251:
      </p><pre class="programlisting">[MySQL][ODBC 5.1 Driver][mysqld-5.0.27-community-nt]Restricted data type attribute violation</pre><p>
        The fix causes Connector/ODBC to return an error message instead
        of crashing.
       (Bug #39831)</p></li><li><p>
        Binding <code class="literal">SQL_C_BIT</code> to an
        <code class="literal">INTEGER</code> column did not work.
      </p><p>
        The <code class="literal">sql_get_data()</code> function only worked
        correctly for <code class="literal">BOOLEAN</code> columns that
        corresponded to <code class="literal">SQL_C_BIT</code> buffers.
       (Bug #39644)</p></li><li><p>
        When the <code class="methodname">SQLTables</code> method was called
        with <code class="literal">NULL</code> passed as the
        <code class="literal">tablename</code> parameter, only one row in the
        <code class="literal">resultset</code>, with table name of
        <code class="literal">NULL</code> was returned, instead of all tables for
        the given database.
       (Bug #39561)</p></li><li><p>
        The <code class="literal">SQLGetInfo()</code> function returned 0 for
        <code class="literal">SQL_CATALOG_USAGE</code> information.
       (Bug #39560)</p></li><li><p>
        Connector/ODBC 5.1.5 was not able to connect if the connection
        string parameters contained spaces or tab symbols. For example,
        if the <code class="literal">SERVER</code> parameter was specified as
        “<span class="quote">SERVER= localhost</span>” instead of
        “<span class="quote">SERVER=localhost</span>” the following error message will
        be displayed:
      </p><pre class="programlisting">[MySQL][ODBC 5.1 Driver] Unknown MySQL server host ' localhost' (11001).</pre><p>(Bug #39085)</p></li><li><p>
        The pointer passed to the
        <code class="methodname">SQLDriverConnect</code> method to retrieve the
        output connection string length was one greater than it should
        have been due to the inclusion of the NULL terminator.
       (Bug #38949)</p></li><li><p>
        Data-at-execution parameters were not supported during
        positioned update. This meant updating a long text field with a
        cursor update would erroneously set the value to null. This
        would lead to the error <code class="literal">Column 'column_name' cannot be
        null</code> while updating the database, even when
        <code class="literal">column_name</code> had been assigned a valid nonnull
        string.
       (Bug #37649)</p></li><li><p>
        The <code class="methodname">SQLDriverConnect</code> method truncated
        the <code class="literal">OutputConnectionString</code> parameter to 52
        characters.
       (Bug #37278)</p></li><li><p>
        The connection string option <code class="literal">Enable
        Auto-reconnect</code> did not work. When the connection
        failed, it could not be restored, and the errors generated were
        the same as if the option had not been selected.
       (Bug #37179)</p></li><li><p>
        Insertion of data into a <code class="literal">LONGTEXT</code> table field
        did not work. If such an attempt was made the corresponding
        field would be found to be empty on examination, or contain
        random characters.
       (Bug #36071)</p></li><li><p>
        No result record was returned for
        <code class="literal">SQLGetTypeInfo</code> for the
        <code class="literal">TIMESTAMP</code> data type. An application would
        receive the result <code class="literal">return code 100
        (SQL_NO_DATA_FOUND)</code>.
       (Bug #30626)</p></li><li><p>
        It was not possible to use MySQL Connector/ODBC to connect to a server using
        SSL. The following error was generated:
      </p><pre class="programlisting">Runtime error '-2147467259 (80004005)':

[MySQL][ODBC 3.51 Driver]SSL connection error.</pre><p>(Bug #29955)</p></li><li><p>
        When the <code class="literal">recordSet.Update</code> function was called
        to update an <code class="literal">adLongVarChar</code> field, the field
        was updated but the recordset was immediately lost. This
        happened with driver cursors, whether the cursor was opened in
        optimistic or pessimistic mode.
      </p><p>
        When the next update was called the test code would exit with
        the following error:
      </p><pre class="programlisting">-2147467259 : Query-based update failed because the row to update could not be found.</pre><p>(Bug #26950)</p></li><li><p>
        Microsoft Access was not able to read <code class="literal">BIGINT</code>
        values properly from a table with just two columns of type
        <code class="literal">BIGINT</code> and <code class="literal">VARCHAR</code>.
        <code class="literal">#DELETE</code> appeared instead of the correct
        values.
       (Bug #17679)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-5"></a>D.2.1.6. Changes in MySQL Connector/ODBC 5.1.5 (18 August 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        ODBC <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> string format is
        not handled properly by Connector/ODBC. When passing a
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> or
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> to Connector/ODBC, in the
        ODBC format: {d &lt;date&gt;} or {ts &lt;timestamp&gt;}, the
        string that represents this is copied once into the SQL
        statement, and then added again, as an escaped string.
       (Bug #37342)</p></li><li><p>
        The connector failed to prompt for additional information
        required to create a DSN-less connection from an application
        such as Microsoft Excel.
       (Bug #37254)</p></li><li><p>
        <code class="literal">SQLDriverConnect</code> does not return
        <code class="literal">SQL_NO_DATA</code> on cancel. The ODBC documentation
        specifies that this method should return
        <code class="literal">SQL_NO_DATA</code> when the user cancels the dialog
        to connect. The connector, however, returns
        <code class="literal">SQL_ERROR</code>.
       (Bug #36293)</p></li><li><p>
        Assigning a string longer than 67 characters to the
        <code class="literal">TableType</code> parameter resulted in a buffer
        overrun when the <code class="function">SQLTables()</code> function was
        called.
       (Bug #36275)</p></li><li><p>
        The ODBC connector randomly uses logon information stored in
        <code class="literal">odbc-profile</code>, or prompts the user for
        connection information and ignores any settings stored in
        <code class="literal">odbc-profile</code>.
       (Bug #36203)</p></li><li><p>
        After having successfully established a connection, a crash
        occurs when calling <code class="function">SQLProcedures()</code>
        followed by <code class="function">SQLFreeStmt()</code>, using the ODBC C
        API.
       (Bug #36069)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-4"></a>D.2.1.7. Changes in MySQL Connector/ODBC 5.1.4 (15 April 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Wrong result obtained when using <code class="function">sum()</code> on a
        <code class="literal">decimal(8,2)</code> field type.
       (Bug #35920)</p></li><li><p>
        The driver installer could not create a new DSN if many other
        drivers were already installed.
       (Bug #35776)</p></li><li><p>
        The <code class="function">SQLColAttribute()</code> function returned
        <code class="literal">SQL_TRUE</code> when querying the
        <code class="literal">SQL_DESC_FIXED_PREC_SCALE (SQL_COLUMN_MONEY)</code>
        attribute of a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> column.
        Previously, the correct value of <code class="literal">SQL_FALSE</code>
        was returned; this is now again the case.
       (Bug #35581)</p></li><li><p>
        On Linux, <code class="function">SQLGetDiagRec()</code> returned
        <code class="literal">SQL_SUCCESS</code> in cases when it should have
        returned <code class="literal">SQL_NO_DATA</code>.
       (Bug #33910)</p></li><li><p>
        The driver crashes ODBC Administrator on attempting to add a new
        DSN.
       (Bug #32057)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-3"></a>D.2.1.8. Changes in MySQL Connector/ODBC 5.1.3 (26 March 2008)</h4></div></div></div><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: 
        You must uninstall previous 5.1.x editions of MySQL Connector/ODBC before
        installing the new version.
      </p></li><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        The installer for 64-bit Windows installs both the 32-bit and
        64-bit driver. Please note that Microsoft does not yet supply a
        64-bit bridge from ADO to ODBC.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: 
        In previous versions, the SSL certificate would automatically be
        verified when used as part of the MySQL Connector/ODBC connection. The
        default mode is now to ignore the verificate of certificates. To
        enforce verification of the SSL certificate during connection,
        use the <code class="option">SSLVERIFY</code> DSN parameter, setting the
        value to 1.
       (Bug #29955, Bug #34648)</p></li><li><p>
        Inserting characters to a UTF8 table using surrogate pairs would
        fail and insert invalid data.
       (Bug #34672)</p></li><li><p>
        Installation of MySQL Connector/ODBC would fail because it was unable to
        uninstall a previous installed version. The file being requested
        would match an older release version than any installed version
        of the connector.
       (Bug #34522)</p></li><li><p>
        Using <code class="literal">SqlGetData</code> in combination with
        <code class="literal">SQL_C_WCHAR</code> would return overlapping data.
       (Bug #34429)</p></li><li><p>
        Descriptor records were not cleared correctly when calling
        <code class="literal">SQLFreeStmt(SQL_UNBIND)</code>.
       (Bug #34271)</p></li><li><p>
        The dropdown selection for databases on a server when creating a
        DSN was too small. The list size now automatically adjusts up to
        a maximum size of 20 potential databases.
       (Bug #33918)</p></li><li><p>
        Microsoft Access would be unable to use
        <code class="literal">DBEngine.RegisterDatabase</code> to create a DSN
        using the MySQL Connector/ODBC driver.
       (Bug #33825)</p></li><li><p>
        MySQL Connector/ODBC erroneously reported that it supported the
        <code class="literal">CAST()</code> and <code class="literal">CONVERT()</code> ODBC
        functions for parsing values in SQL statements, which could lead
        to bad SQL generation during a query.
       (Bug #33808)</p></li><li><p>
        Using a linked table in Access 2003 where the table has a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> column as the first column
        in the table, and is configured as the primary key, shows
        <code class="literal">#DELETED</code> for all rows of the table.
       (Bug #24535)</p></li><li><p>
        Updating a <code class="literal">RecordSet</code> when the query involves
        a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> field would fail.
       (Bug #19065)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-2"></a>D.2.1.9. Changes in MySQL Connector/ODBC 5.1.2 (13 February 2008)</h4></div></div></div><p>
        MySQL Connector/ODBC 5.1.2-beta, a new version of the ODBC
        driver for the MySQL database management system, has been
        released. This release is the second beta (feature-complete)
        release of the new 5.1 series and is suitable for use with any
        MySQL server version since MySQL 4.1, including MySQL 5.0, 5.1,
        and 6.0. (It will not work with 4.0 or earlier releases.)
      </p><p>
        Keep in mind that this is a beta release, and as with any other
        pre-production release, caution should be taken when installing
        on production level systems or systems with critical data.
      </p><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        The installer for 64-bit Windows installs both the 32-bit and
        64-bit driver. Please note that Microsoft does not yet supply a
        64-bit bridge from ADO to ODBC.
      </p></li><li><p>
        Due to differences with the installation process used on Windows
        and potential registry corruption, it is recommended that
        uninstall any existing versions of MySQL Connector/ODBC 5.1.x before
        upgrading.
      </p><p>References: See also Bug #34571.</p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Explicit descriptors are implemented.
       (Bug #32064)</p></li><li><p>
        A full implementation of SQLForeignKeys based on the information
        available from INFORMATION_SCHEMA in 5.0 and later versions of
        the server has been implemented.
      </p></li><li><p>
        Changed <code class="literal">SQL_ATTR_PARAMSET_SIZE</code> to return an
        error until support for it is implemented.
      </p></li><li><p>
        Disabled <code class="literal">MYSQL_OPT_SSL_VERIFY_SERVER_CERT</code>
        when using an SSL connection.
      </p></li><li><p>
        <code class="literal">SQLForeignKeys</code> uses
        <code class="literal">INFORMATION_SCHEMA</code> when it is available on
        the server, which enables more complete information to be
        returned.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="option">SSLCIPHER</code> option would be incorrectly
        recorded within the SSL configuration on Windows.
       (Bug #33897)</p></li><li><p>
        Within the GUI interface, when connecting to a MySQL server on a
        nonstandard port, the connection test within the GUI would fail.
        The issue was related to incorrect parsing of numeric values
        within the DSN when the option was not configured as the last
        parameter within the DSN.
       (Bug #33822)</p></li><li><p>
        Specifying a nonexistent database name within the GUI dialog
        would result in an empty list, not an error.
       (Bug #33615)</p></li><li><p>
        When deleting rows from a static cursor, the cursor position
        would be incorrectly reported.
       (Bug #33388)</p></li><li><p>
        <code class="function">SQLGetInfo()</code> reported characters for
        <code class="literal">SQL_SPECIAL_CHARACTERS</code> that were not encoded
        correctly.
       (Bug #33130)</p></li><li><p>
        Retrieving data from a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
        column would fail within <code class="literal">SQLGetData</code>when the
        target data type was <code class="literal">SQL_C_WCHAR</code> due to
        incorrect handling of the character buffer.
       (Bug #32684)</p></li><li><p>
        Renaming an existing DSN entry would create a new entry with the
        new name without deleting the old entry.
       (Bug #31165)</p></li><li><p>
        Reading a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column that had
        been used to store UTF8 data would result in the wrong
        information being returned during a query.
       (Bug #28617)</p></li><li><p>
        <code class="literal">SQLForeignKeys</code> would return an empty string
        for the schema columns instead of <code class="literal">NULL</code>.
       (Bug #19923)</p></li><li><p>
        When accessing column data,
        <code class="literal">FLAG_COLUMN_SIZE_S32</code> did not limit the octet
        length or display size reported for fields, causing problems
        with Microsoft Visual FoxPro.
      </p><p>
        The list of ODBC functions that could have caused failures in
        Microsoft software when retrieving the length of
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGBLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGTEXT</code></a> columns
        includes:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLColumns</code>
            </p></li><li><p>
              <code class="literal">SQLColAttribute</code>
            </p></li><li><p>
              <code class="literal">SQLColAttributes</code>
            </p></li><li><p>
              <code class="literal">SQLDescribeCol</code>
            </p></li><li><p>
              <code class="literal">SQLSpecialColumns</code> (theoretically can
              have the same problem)
            </p></li></ul></div><p>
       (Bug #12805, Bug #30890)</p></li><li><p>
        Dynamic cursors on statements with parameters were not
        supported.
       (Bug #11846)</p></li><li><p>
        Evaluating a simple numeric expression when using the OLEDB for
        ODBC provider and ADO would return an error, instead of the
        result.
       (Bug #10128)</p></li><li><p>
        Adding or updating a row using <code class="function">SQLSetPos()</code>
        on a result set with aliased columns would fail.
       (Bug #6157)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-1"></a>D.2.1.10. Changes in MySQL Connector/ODBC 5.1.1 (13 December 2007)</h4></div></div></div><p>
        MySQL Connector/ODBC 5.1.1-beta, a new version of the ODBC
        driver for the MySQL database management system, has been
        released. This release is the first beta (feature-complete)
        release of the new 5.1 series and is suitable for use with any
        MySQL server version since MySQL 4.1, including MySQL 5.0, 5.1,
        and 6.0. (It will not work with 4.0 or earlier releases.)
      </p><p>
        Keep in mind that this is a beta release, and as with any other
        pre-production release, caution should be taken when installing
        on production level systems or systems with critical data.
      </p><p>
        Includes changes from
        <a href="news.html#connector-odbc-news-3-51-21" title="D.2.3.10. Changes in MySQL Connector/ODBC 3.51.21 (08 October 2007)">Connector/ODBC
        3.51.21</a> and
        <a href="news.html#connector-odbc-news-3-51-22" title="D.2.3.9. Changes in MySQL Connector/ODBC 3.51.22 (13 November 2007)">3.51.22</a>.
      </p><p>
        Built using MySQL 5.0.52.
      </p><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        The installer for 64-bit Windows installs both the 32-bit and
        64-bit driver. Please note that Microsoft does not yet supply a
        64-bit bridge from ADO to ODBC.
      </p></li><li><p>
        Due to differences with the installation process used on Windows
        and potential registry corruption, it is recommended that
        uninstall any existing versions of MySQL Connector/ODBC 5.1.x before
        upgrading.
      </p><p>References: See also Bug #34571.</p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Replaced myodbc3i (now myodbc-installer) with MySQL Connector/ODBC 5.0
        version.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Removed monitor (myodbc3m) and dsn-editor (myodbc3c).
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Do not permit <code class="literal">SET NAMES</code> in initial statement
        and in executed statements.
      </p></li><li><p>
        A wrapper for the
        <code class="function">SQLGetPrivateProfileStringW()</code> function,
        which is required for Unicode support, has been created. This
        function is missing from the unixODBC driver manager.
       (Bug #32685)</p></li><li><p>
        Added MSI installer for Windows 64-bit.
       (Bug #31510)</p></li><li><p>
        Implemented support for <code class="function">SQLCancel()</code>.
       (Bug #15601)</p></li><li><p>
        Added support for <code class="literal">SQL_NUMERIC_STRUCT</code>.
       (Bug #3028, Bug #24920)</p></li><li><p>
        Removed nonthreadsafe configuration of the driver. The driver is
        now always built against the threadsafe version of libmysql.
      </p></li><li><p>
        Implemented native Windows setup library
      </p></li><li><p>
        Replaced the internal library which handles creation and loading
        of DSN information. The new library, which was originally a part
        of MySQL Connector/ODBC 5.0, supports Unicode option values.
      </p></li><li><p>
        The Windows installer now places files in a subdirectory of the
        <code class="filename">Program Files</code> directory instead of the
        Windows system directory.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">SET NAMES</code> statement has been disabled
        because it causes problems in the ODBC driver when determining
        the current client character set.
       (Bug #32596)</p></li><li><p>
        <code class="literal">SQLDescribeColW</code> returned UTF-8 column as
        <code class="literal">SQL_VARCHAR</code> instead of
        <code class="literal">SQL_WVARCHAR</code>.
       (Bug #32161)</p></li><li><p>
        ADO was unable to open record set using dynamic cursor.
       (Bug #32014)</p></li><li><p>
        ADO applications would not open a <code class="literal">RecordSet</code>
        that contained a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> field.
       (Bug #31720)</p></li><li><p>
        Memory usage would increase considerably.
       (Bug #31115)</p></li><li><p>
        SQL statements are limited to 64KB.
       (Bug #30983, Bug #30984)</p></li><li><p>
        <code class="literal">SQLSetPos</code> with <code class="literal">SQL_DELETE</code>
        advances dynamic cursor incorrectly.
       (Bug #29765)</p></li><li><p>
        Using an ODBC prepared statement with bound columns would
        produce an empty result set when called immediately after
        inserting a row into a table.
       (Bug #29239)</p></li><li><p>
        ADO Not possible to update a client side cursor.
       (Bug #27961)</p></li><li><p>
        Recordset <code class="function">Update()</code> fails when using
        <code class="literal">adUseClient</code> cursor.
       (Bug #26985)</p></li><li><p>
        MySQL Connector/ODBC would fail to connect to the server if the password
        contained certain characters, including the semicolon and other
        punctuation marks.
       (Bug #16178)</p></li><li><p>
        Fixed <code class="literal">SQL_ATTR_PARAM_BIND_OFFSET</code>, and fixed
        row offsets to work with updatable cursors.
      </p></li><li><p>
        <code class="function">SQLSetConnectAttr()</code> did not clear previous
        errors, possibly confusing <code class="function">SQLError()</code>.
      </p></li><li><p>
        <code class="function">SQLError()</code> incorrectly cleared the error
        information, making it unavailable from subsequent calls to
        <code class="function">SQLGetDiagRec()</code>.
      </p></li><li><p>
        NULL pointers passed to <code class="function">SQLGetInfo()</code> could
        result in a crash.
      </p></li><li><p>
        <code class="literal">SQL_ODBC_SQL_CONFORMANCE</code> was not handled by
        <code class="function">SQLGetInfo()</code>.
      </p></li><li><p>
        <code class="function">SQLCopyDesc()</code> did not correctly copy all
        records.
      </p></li><li><p>
        Diagnostics were not correctly cleared on connection and
        environment handles.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-1-0"></a>D.2.1.11. Changes in MySQL Connector/ODBC 5.1.0 (10 September 2007)</h4></div></div></div><p>
        This release is the first of the new 5.1 series and is suitable
        for use with any MySQL server version since MySQL 4.1, including
        MySQL 5.0, 5.1, and 6.0. (It will not work with 4.0 or earlier
        releases.)
      </p><p>
        Keep in mind that this is a alpha release, and as with any other
        pre-production release, caution should be taken when installing
        on production level systems or systems with critical data. Not
        all of the features planned for the final Connector/ODBC 5.1
        release are implemented.
      </p><p>
        Functionality is based on Connector/ODBC 3.51.20.
      </p><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        There are no installer packages for Microsoft Windows x64
        Edition.
      </p></li><li><p>
        Due to differences with the installation process used on Windows
        and potential registry corruption, it is recommended that
        uninstall any existing versions of MySQL Connector/ODBC 5.1.x before
        upgrading.
      </p><p>References: See also Bug #34571.</p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for Unicode functions
        (<code class="literal">SQLConnectW</code>, etc).
      </p></li><li><p>
        Added descriptor support (<code class="literal">SQLGetDescField</code>,
        <code class="literal">SQLGetDescRec</code>, etc).
      </p></li><li><p>
        Added support for <code class="literal">SQL_C_WCHAR</code>.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-news-5-0-x"></a>D.2.2. Changes in MySQL Connector/ODBC Version 5.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-12">D.2.2.1. Changes in MySQL Connector/ODBC 5.0.12 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-11">D.2.2.2. Changes in MySQL Connector/ODBC 5.0.11 (31 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-10">D.2.2.3. Changes in MySQL Connector/ODBC 5.0.10 (14 December 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-9">D.2.2.4. Changes in MySQL Connector/ODBC 5.0.9 (22 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-8">D.2.2.5. Changes in MySQL Connector/ODBC 5.0.8 (17 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-7">D.2.2.6. Changes in MySQL Connector/ODBC 5.0.7 (08 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-6">D.2.2.7. Changes in MySQL Connector/ODBC 5.0.6 (03 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-5">D.2.2.8. Changes in MySQL Connector/ODBC 5.0.5 (17 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-3">D.2.2.9. Changes in Connector/ODBC 5.0.3 (Connector/ODBC 5.0 Alpha 3) (20 June
        2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-2">D.2.2.10. Changes in Connector/ODBC 5.0.2 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-5-0-1">D.2.2.11. Changes in Connector/ODBC 5.0.1 (Connector/ODBC 5.0 Alpha 2) (05 June
        2006)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-12"></a>D.2.2.1. Changes in MySQL Connector/ODBC 5.0.12 (Never released)</h4></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          Development on Connector/ODBC 5.0.x has ceased. New features
          and functionality will be incorporated into Connector/ODBC
          5.1.
        </p></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Inserting <code class="literal">NULL</code> values into a
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> column from Access
        reports an error.
       (Bug #27896)</p></li><li><p>
        Tables with <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns would be
        incorrectly identified, returning an <code class="literal">Unknown SQL type -
        65535</code> error.
       (Bug #20127)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-11"></a>D.2.2.2. Changes in MySQL Connector/ODBC 5.0.11 (31 January 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for ODBC v2 statement options using attributes.
      </p></li><li><p>
        Driver now builds and is partially tested under Linux with the
        iODBC driver manager.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connection string parsing for DSN-less connections could fail to
        identify some parameters.
       (Bug #25316)</p></li><li><p>
        Updates of <code class="literal">MEMO</code> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns from within
        Microsoft Access would fail.
       (Bug #25263)</p></li><li><p>
        Transaction support has been added and tested.
       (Bug #25045)</p></li><li><p>
        Internal function, <code class="literal">my_setpos_delete_ignore()</code>
        could cause a crash.
       (Bug #22796)</p></li><li><p>
        Fixed occasional mis-handling of the
        <code class="literal">SQL_NUMERIC_C</code> type.
      </p></li><li><p>
        Fixed the binding of certain integer types.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-10"></a>D.2.2.3. Changes in MySQL Connector/ODBC 5.0.10 (14 December 2006)</h4></div></div></div><p>
        Connector/ODBC 5.0.10 is the sixth BETA release.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Significant performance improvement when retrieving large text
        fields in pieces using <code class="literal">SQLGetData()</code> with a
        buffer smaller than the whole data. Mainly used in Access when
        fetching very large text fields.
       (Bug #24876)</p></li><li><p>
        Added initial unicode support in data and metadata.
       (Bug #24837)</p></li><li><p>
        Added initial support for removing braces when calling stored
        procedures and retrieving result sets from procedure calls.
       (Bug #24485)</p></li><li><p>
        Added loose handling of retrieving some diagnostic data.
       (Bug #15782)</p></li><li><p>
        Added wide-string type info for
        <code class="literal">SQLGetTypeInfo()</code>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Editing DSN no longer crashes ODBC data source administrator.
       (Bug #24675)</p></li><li><p>
        String query parameters are new escaped correctly.
       (Bug #19078)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-9"></a>D.2.2.4. Changes in MySQL Connector/ODBC 5.0.9 (22 November 2006)</h4></div></div></div><p>
        Connector/ODBC 5.0.9 is the fifth BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for column binding as SQL_NUMERIC_STRUCT.
      </p></li><li><p>
        Added recognition of <code class="literal">SQL_C_SHORT</code> and
        <code class="literal">SQL_C_TINYINT</code> as C types.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed wildcard handling of and listing of catalogs and tables in
        <code class="literal">SQLTables</code>.
      </p></li><li><p>
        Added limit of display size when requested using
        <code class="literal">SQLColAttribute</code>/<code class="literal">SQL_DESC_DISPLAY_SIZE</code>.
      </p></li><li><p>
        Fixed buffer length return for SQLDriverConnect.
      </p></li><li><p>
        ODBC v2 behavior in driver now supports ODBC v3 date/time types
        (since DriverManager maps them).
      </p></li><li><p>
        Catch use of <code class="literal">SQL_ATTR_PARAMSET_SIZE</code> and
        report error until we fully support.
      </p></li><li><p>
        Fixed statistics to fail if it couldn't be completed.
      </p></li><li><p>
        Corrected retrieval multiple field types bit and blob/text.
      </p></li><li><p>
        Fixed SQLGetData to clear the NULL indicator correctly during
        multiple calls.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-8"></a>D.2.2.5. Changes in MySQL Connector/ODBC 5.0.8 (17 November 2006)</h4></div></div></div><p>
        Connector/ODBC 5.0.8 is the fourth BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Also made <code class="literal">SQL_DESC_NAME</code> only fill in the name
        if there was a data pointer given, otherwise just the length.
      </p></li><li><p>
        Fixed display size to be length if max length isn’t available.
      </p></li><li><p>
        Made distinction between
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>/<a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>
        (and VAR versions).
      </p></li><li><p>
        Wildcards now support escaped chars and underscore matching
        (needed to link tables with underscores in access).
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed binding using <code class="literal">SQL_C_LONG</code>.
      </p></li><li><p>
        Fixed using wrong pointer for
        <code class="literal">SQL_MAX_DRIVER_CONNECTIONS</code> in
        <code class="literal">SQLGetInfo</code>.
      </p></li><li><p>
        Set default return to <code class="literal">SQL_SUCCESS</code> if nothing
        is done for <code class="literal">SQLSpecialColumns</code>.
      </p></li><li><p>
        Fixed MDiagnostic to use correct v2/v3 error codes.
      </p></li><li><p>
        Allow SQLDescribeCol to be called to retrieve the length of the
        column name, but not the name itself.
      </p></li><li><p>
        Length now used when handling bind parameter (needed in
        particular for <code class="literal">SQL_WCHAR</code>) - this enables
        updating char data in MS Access.
      </p></li><li><p>
        Updated retrieval of descriptor fields to use the right pointer
        types.
      </p></li><li><p>
        Fixed handling of numeric pointers in SQLColAttribute.
      </p></li><li><p>
        Fixed type returned for <code class="literal">MYSQL_TYPE_LONG</code> to
        <code class="literal">SQL_INTEGER</code> instead of
        <code class="literal">SQL_TINYINT</code>.
      </p></li><li><p>
        Fix size return from <code class="literal">SQLDescribeCol</code>.
      </p></li><li><p>
        Fixed string length to chars, not bytes, returned by
        SQLGetDiagRec.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-7"></a>D.2.2.6. Changes in MySQL Connector/ODBC 5.0.7 (08 November 2006)</h4></div></div></div><p>
        Connector/ODBC 5.0.7 is the third BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for <code class="literal">SQLStatistics</code> to
        <code class="literal">MYODBCShell</code>.
      </p></li><li><p>
        Improved trace/log.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        SQLBindParameter now handles <code class="literal">SQL_C_DEFAULT</code>.
      </p></li><li><p>
        Corrected incorrect column index within
        <code class="literal">SQLStatistics</code>. Many more tables can now be
        linked into MS Access.
      </p></li><li><p>
        Fixed <code class="literal">SQLDescribeCol</code> returning column name
        length in bytes rather than chars.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-6"></a>D.2.2.7. Changes in MySQL Connector/ODBC 5.0.6 (03 November 2006)</h4></div></div></div><p>
        Connector/ODBC 5.0.6 is the second BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p><span class="bold"><strong>Features, Limitations, and Notes on this Release</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/ODBC supports both <code class="literal">User</code> and
        <code class="literal">System</code> DSNs.
      </p></li><li><p>
        Installation is provided in the form of a standard Microsoft
        System Installer (MSI).
      </p></li><li><p>
        You no longer have to have MySQL Connector/ODBC 3.51 installed before
        installing this version.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        You no longer have to have MySQL Connector/ODBC 3.51 installed before
        installing this version.
      </p></li><li><p>
        MySQL Connector/ODBC supports both <code class="literal">User</code> and
        <code class="literal">System</code> DSNs.
      </p></li><li><p>
        Installation is provided in the form of a standard Microsoft
        System Installer (MSI).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-5"></a>D.2.2.8. Changes in MySQL Connector/ODBC 5.0.5 (17 October 2006)</h4></div></div></div><p>
        Connector/ODBC 5.0.5 is the first BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>
        You no longer have to have Connector/ODBC 3.51 installed before
        installing this version.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        You no longer have to have MySQL Connector/ODBC 3.51 installed before
        installing this version.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-3"></a>D.2.2.9. Changes in Connector/ODBC 5.0.3 (Connector/ODBC 5.0 Alpha 3) (20 June
        2006)</h4></div></div></div><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>
        Features, limitations and notes on this release:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The following ODBC API functions have been added in this
            release:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">SQLBindParameter</code>
              </p></li><li><p>
                <code class="literal">SQLBindCol</code>
              </p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-2"></a>D.2.2.10. Changes in Connector/ODBC 5.0.2 (Never released)</h4></div></div></div><p>
        Connector/ODBC 5.0.2 was an internal implementation and testing
        release.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-5-0-1"></a>D.2.2.11. Changes in Connector/ODBC 5.0.1 (Connector/ODBC 5.0 Alpha 2) (05 June
        2006)</h4></div></div></div><p>
        Features, limitations and notes on this release:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Connector/ODBC 5.0 is Unicode aware.
          </p></li><li><p>
            Connector/ODBC is currently limited to basic applications.
            ADO applications and Microsoft Office are not supported.
          </p></li><li><p>
            Connector/ODBC must be used with a Driver Manager.
          </p></li><li><p>
            The following ODBC API functions are implemented:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">SQLAllocHandle</code>
              </p></li><li><p>
                <code class="literal">SQLCloseCursor</code>
              </p></li><li><p>
                <code class="literal">SQLColAttribute</code>
              </p></li><li><p>
                <code class="literal">SQLColumns</code>
              </p></li><li><p>
                <code class="literal">SQLConnect</code>
              </p></li><li><p>
                <code class="literal">SQLCopyDesc</code>
              </p></li><li><p>
                <code class="literal">SQLDisconnect</code>
              </p></li><li><p>
                <code class="literal">SQLExecDirect</code>
              </p></li><li><p>
                <code class="literal">SQLExecute</code>
              </p></li><li><p>
                <code class="literal">SQLFetch</code>
              </p></li><li><p>
                <code class="literal">SQLFreeHandle</code>
              </p></li><li><p>
                <code class="literal">SQLFreeStmt</code>
              </p></li><li><p>
                <code class="literal">SQLGetConnectAttr</code>
              </p></li><li><p>
                <code class="literal">SQLGetData</code>
              </p></li><li><p>
                <code class="literal">SQLGetDescField</code>
              </p></li><li><p>
                <code class="literal">SQLGetDescRec</code>
              </p></li><li><p>
                <code class="literal">SQLGetDiagField</code>
              </p></li><li><p>
                <code class="literal">SQLGetDiagRec</code>
              </p></li><li><p>
                <code class="literal">SQLGetEnvAttr</code>
              </p></li><li><p>
                <code class="literal">SQLGetFunctions</code>
              </p></li><li><p>
                <code class="literal">SQLGetStmtAttr</code>
              </p></li><li><p>
                <code class="literal">SQLGetTypeInfo</code>
              </p></li><li><p>
                <code class="literal">SQLNumResultCols</code>
              </p></li><li><p>
                <code class="literal">SQLPrepare</code>
              </p></li><li><p>
                <code class="literal">SQLRowcount</code>
              </p></li><li><p>
                <code class="literal">SQLTables</code>
              </p></li></ul></div><p>
            The following ODBC API function are implemented, but not yet
            support all the available attributes/options:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">SQLSetConnectAttr</code>
              </p></li><li><p>
                <code class="literal">SQLSetDescField</code>
              </p></li><li><p>
                <code class="literal">SQLSetDescRec</code>
              </p></li><li><p>
                <code class="literal">SQLSetEnvAttr</code>
              </p></li><li><p>
                <code class="literal">SQLSetStmtAttr</code>
              </p></li></ul></div></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-news-3-51-x"></a>D.2.3. Changes in MySQL Connector/ODBC Version 3.51.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-30">D.2.3.1. Changes in MySQL Connector/ODBC 3.51.30 (02 February 2012)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-29">D.2.3.2. Changes in MySQL Connector/ODBC 3.51.29 (04 October 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-28">D.2.3.3. Changes in MySQL Connector/ODBC 3.51.28 (09 February 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-27">D.2.3.4. Changes in MySQL Connector/ODBC 3.51.27 (20 November 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-26">D.2.3.5. Changes in MySQL Connector/ODBC 3.51.26 (07 July 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-25">D.2.3.6. Changes in MySQL Connector/ODBC 3.51.25 (11 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-24">D.2.3.7. Changes in MySQL Connector/ODBC 3.51.24 (14 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-23">D.2.3.8. Changes in MySQL Connector/ODBC 3.51.23 (09 January 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-22">D.2.3.9. Changes in MySQL Connector/ODBC 3.51.22 (13 November 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-21">D.2.3.10. Changes in MySQL Connector/ODBC 3.51.21 (08 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-20">D.2.3.11. Changes in MySQL Connector/ODBC 3.51.20 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-19">D.2.3.12. Changes in MySQL Connector/ODBC 3.51.19 (10 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-18">D.2.3.13. Changes in MySQL Connector/ODBC 3.51.18 (08 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-17">D.2.3.14. Changes in MySQL Connector/ODBC 3.51.17 (14 July 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-16">D.2.3.15. Changes in MySQL Connector/ODBC 3.51.16 (14 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-15">D.2.3.16. Changes in MySQL Connector/ODBC 3.51.15 (07 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-14">D.2.3.17. Changes in MySQL Connector/ODBC 3.51.14 (08 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-13">D.2.3.18. Changes in MySQL Connector/ODBC 3.51.13 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-12">D.2.3.19. Changes in MySQL Connector/ODBC 3.51.12 (11 February 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-odbc-news-3-51-11">D.2.3.20. Changes in MySQL Connector/ODBC 3.51.11 (28 January 2005)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-30"></a>D.2.3.1. Changes in MySQL Connector/ODBC 3.51.30 (02 February 2012)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">SQLFetch</code> has to return error if indicator
        pointer is <code class="literal">NULL</code> for <code class="literal">NULL</code>
        value.
       (Bug #13542600)</p></li><li><p>
        In some cases, a <code class="literal">TIMESTAMP</code> field could be
        described as <code class="literal">SQL_NO_NULLS</code>.
       (Bug #13532987)</p></li><li><p>
        A failure on one statement causes another statement to fail.
       (Bug #13097201, Bug #62657)</p></li><li><p>
        MySQL Connector/ODBC manually added a <code class="literal">LIMIT</code> clause to the
        end of certain SQL statements, causing errors for statements
        that contained code that should be positioned after the
        <code class="literal">LIMIT</code> clause.
       (Bug #49726)</p></li><li><p>
        Describing a view or table caused <code class="literal">SQLPrepare</code>
        to prefetch table data. For large tables this created an
        intolerable performance hit.
       (Bug #46411)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-29"></a>D.2.3.2. Changes in MySQL Connector/ODBC 3.51.29 (04 October 2011)</h4></div></div></div><p><span class="bold"><strong>Pluggable Authentication Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The binaries for this distribution of Connector/ODBC can now
        connect to MySQL server accounts that use the PAM or Windows
        Native Authentication Plugins for authentication. See
        <a href="server-administration.html#pam-authentication-plugin" title="5.5.6.2. The PAM Authentication Plugin">Section 5.5.6.2, “The PAM Authentication Plugin”</a>, and
        <a href="server-administration.html#windows-authentication-plugin" title="5.5.6.3. The Windows Native Authentication Plugin">Section 5.5.6.3, “The Windows Native Authentication Plugin”</a>. These
        capabilities result from linking the Connector/ODBC binaries
        against the MySQL 5.5.16 <code class="literal">libmysql</code> rather than
        the MySQL 5.1 <code class="literal">libmysql</code> used previously. The
        newer <code class="literal">libmysql</code> includes the client-side
        support needed for the server-side PAM and Windows
        authentication plugins.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Some catalog functions (such as <code class="literal">SQLColumns()</code>,
        <code class="literal">SQLStatistics()</code>, and
        <code class="literal">SQLPrimaryKeys()</code>) would only return one row,
        when called after pre-execution failed.
       (Bug #12824839)</p></li><li><p>
        An off-by-one error, where <code class="literal">sqlwcharchr</code> might
        read one <code class="literal">SQLWCHAR</code> after the end of a string.
       (Bug #61586)</p></li><li><p>
        <code class="literal">SQLExecute</code> would return
        <code class="literal">SQL_SUCCESS_WITH_INFO</code> instead of
        <code class="literal">SQL_ERROR</code>, when column parameter binding was
        enabled.
       (Bug #59772)</p></li><li><p>
        The Connector/ODBC driver did not call
        <a href="connectors-apis.html#mysql-thread-end" title="21.9.8.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a> when a thread
        ended, which caused error messages like: <code class="literal">Error in
        my_thread_global_end(): 1 threads didn't exit</code>.
       (Bug #57727)</p></li><li><p>
        MS Access fields with <code class="literal">VARCHAR NOT NULL</code>
        columns could not be altered.
       (Bug #31067)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-28"></a>D.2.3.3. Changes in MySQL Connector/ODBC 3.51.28 (09 February 2011)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">SQLColAttribute(...SQL_DESC_CASE_SENSITIVE...)</code>
        returned <code class="literal">SQL_FALSE</code> for binary types and
        <code class="literal">SQL_TRUE</code> for the rest. It should have
        returned <code class="literal">SQL_TRUE</code> for binary types, and
        <code class="literal">SQL_FALSE</code> for the rest.
       (Bug #54212)</p></li><li><p>
        <code class="literal">SQLColAttribute</code> for
        <code class="literal">SQL_DESC_OCTET_LENGTH</code> returned length
        including terminating null byte. It should not have included the
        null byte.
       (Bug #54206)</p></li><li><p>
        If <code class="literal">NO_BACKSLASH_ESCAPES</code> mode was used on a
        server, escaping binary data led to server query parsing errors.
       (Bug #49029)</p></li><li><p>
        Inserting a new record using <code class="literal">SQLSetPos</code> did
        not correspond to the database name specified in the
        <code class="literal">SELECT</code> statement when querying tables from
        databases other than the current one.
      </p><p>
        <code class="literal">SQLSetPos</code> attempted to do the
        <code class="literal">INSERT</code> in the current database, but finished
        with a <code class="literal">SQL_ERROR</code> result and “<span class="quote">Table does
        not exist</span>” message from MySQL Server.
       (Bug #41946)</p></li><li><p>
        When using MySQL Connector/ODBC to fetch data, if a
        <code class="literal">net_write_timeout</code> condition occurred, the
        operation returned the standard "end of data" status, rather
        than an error.
       (Bug #39878)</p></li><li><p>
        No result record was returned for
        <code class="literal">SQLGetTypeInfo</code> for the
        <code class="literal">TIMESTAMP</code> data type. An application would
        receive the result <code class="literal">return code 100
        (SQL_NO_DATA_FOUND)</code>.
       (Bug #30626)</p></li><li><p>
        Microsoft Access was not able to read <code class="literal">BIGINT</code>
        values properly from a table with just two columns of type
        <code class="literal">BIGINT</code> and <code class="literal">VARCHAR</code>.
        <code class="literal">#DELETE</code> appeared instead of the correct
        values.
       (Bug #17679)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-27"></a>D.2.3.4. Changes in MySQL Connector/ODBC 3.51.27 (20 November 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The client program hung when the network connection to the
        server was interrupted.
       (Bug #40407)</p></li><li><p>
        The connection string option <code class="literal">Enable
        Auto-reconnect</code> did not work. When the connection
        failed, it could not be restored, and the errors generated were
        the same as if the option had not been selected.
       (Bug #37179)</p></li><li><p>
        It was not possible to use MySQL Connector/ODBC to connect to a server using
        SSL. The following error was generated:
      </p><pre class="programlisting">Runtime error '-2147467259 (80004005)':

[MySQL][ODBC 3.51 Driver]SSL connection error.</pre><p>(Bug #29955)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-26"></a>D.2.3.5. Changes in MySQL Connector/ODBC 3.51.26 (07 July 2008)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        There is a new connection option,
        <code class="literal">FLAG_NO_BINARY_RESULT</code>. When set this option
        disables charset 63 for columns with an empty
        <code class="literal">org_table</code>.
       (Bug #29402)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When an <code class="classname">ADOConnection</code> is created and
        attempts to open a schema with
        <code class="methodname">ADOConnection.OpenSchema</code> an access
        violation occurs in <code class="literal">myodbc3.dll</code>.
       (Bug #30770)</p></li><li><p>
        When <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> was
        invoked and then the field values read, the result was truncated
        and unusable if the table had many rows and indexes.
       (Bug #24131)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-25"></a>D.2.3.6. Changes in MySQL Connector/ODBC 3.51.25 (11 April 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="function">SQLColAttribute()</code> function returned
        <code class="literal">SQL_TRUE</code> when querying the
        <code class="literal">SQL_DESC_FIXED_PREC_SCALE (SQL_COLUMN_MONEY)</code>
        attribute of a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> column.
        Previously, the correct value of <code class="literal">SQL_FALSE</code>
        was returned; this is now again the case.
       (Bug #35581)</p></li><li><p>
        The driver crashes ODBC Administrator on attempting to add a new
        DSN.
       (Bug #32057)</p></li><li><p>
        When accessing column data,
        <code class="literal">FLAG_COLUMN_SIZE_S32</code> did not limit the octet
        length or display size reported for fields, causing problems
        with Microsoft Visual FoxPro.
      </p><p>
        The list of ODBC functions that could have caused failures in
        Microsoft software when retrieving the length of
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGBLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGTEXT</code></a> columns
        includes:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLColumns</code>
            </p></li><li><p>
              <code class="literal">SQLColAttribute</code>
            </p></li><li><p>
              <code class="literal">SQLColAttributes</code>
            </p></li><li><p>
              <code class="literal">SQLDescribeCol</code>
            </p></li><li><p>
              <code class="literal">SQLSpecialColumns</code> (theoretically can
              have the same problem)
            </p></li></ul></div><p>
       (Bug #12805, Bug #30890)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-24"></a>D.2.3.7. Changes in MySQL Connector/ODBC 3.51.24 (14 March 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        Accessing a parameter with the type of
        <code class="literal">SQL_C_CHAR</code>, but with a numeric type and a
        length of zero, the parameter marker would get stripped from the
        query. In addition, an SQL injection was possible if the
        parameter value had a nonzero length and was not numeric, the
        text would be inserted verbatim.
       (Bug #34575)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        In previous versions, the SSL certificate would automatically be
        verified when used as part of the MySQL Connector/ODBC connection. The
        default mode is now to ignore the verificate of certificates. To
        enforce verification of the SSL certificate during connection,
        use the <code class="option">SSLVERIFY</code> DSN parameter, setting the
        value to 1.
       (Bug #29955, Bug #34648)</p></li><li><p>
        When using ADO, the count of parameters in a query would always
        return zero.
       (Bug #33298)</p></li><li><p>
        Using tables with a single quote or other nonstandard characters
        in the table or column names through ODBC would fail.
       (Bug #32989)</p></li><li><p>
        When using Crystal Reports, table and column names would be
        truncated to 21 characters, and truncated columns in tables
        where the truncated name was the duplicated would lead to only a
        single column being displayed.
       (Bug #32864)</p></li><li><p>
        <code class="function">SQLExtendedFetch()</code> and
        <code class="function">SQLFetchScroll()</code> ignored the rowset size if
        the <code class="literal">Don't cache result</code> DSN option was set.
       (Bug #32420)</p></li><li><p>
        When using the ODBC <code class="literal">SQL_TXN_READ_COMMITTED</code>
        option, 'dirty' records would be read from tables as if the
        option had not been applied.
       (Bug #31959)</p></li><li><p>
        When creating a System DSN using the ODBC Administrator on Mac
        OS X, a User DSN would be created instead. The root cause is a
        problem with the iODBC driver manager used on Mac OS X. The fix
        works around this issue.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          ODBC Administrator may still be unable to register a System
          DSN unless the <code class="filename">/Library/ODBC/odbc.ini</code>
          file has the correct permissions. You should ensure that the
          file is writable by the <code class="literal">admin</code> group.
        </p></div><p>(Bug #31495)</p></li><li><p>
        Calling <code class="literal">SQLFetch</code> or
        <code class="literal">SQLFetchScroll</code> would return negative data
        lengths when using <code class="literal">SQL_C_WCHAR</code>.
       (Bug #31220)</p></li><li><p>
        <code class="literal">SQLSetParam()</code> caused memory allocation errors
        due to driver manager's mapping of deprecated functions (buffer
        length -1).
       (Bug #29871)</p></li><li><p>
        Static cursor was unable to be used through ADO when dynamic
        cursors were enabled.
       (Bug #27351)</p></li><li><p>
        Using <code class="literal">connection.Execute</code> to create a record
        set based on a table without declaring the cmd option as
        <code class="literal">adCmdTable</code> will fail when communicating with
        versions of MySQL 5.0.37 and higher. The issue is related to the
        way that <code class="literal">SQLSTATE</code> is returned when ADO tries
        to confirm the existence of the target object.
       (Bug #27158)</p></li><li><p>
        Updating a <code class="literal">RecordSet</code> when the query involves
        a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> field would fail.
       (Bug #19065)</p></li><li><p>
        With some connections to MySQL databases using MySQL Connector/ODBC, the
        connection would mistakenly report 'user cancelled' for accesses
        to the database information.
       (Bug #16653)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-23"></a>D.2.3.8. Changes in MySQL Connector/ODBC 3.51.23 (09 January 2008)</h4></div></div></div><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        There are no installer packages for Microsoft Windows x64
        Edition.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/ODBC would incorrectly return <code class="literal">SQL_SUCCESS</code>
        when checking for distributed transaction support.
       (Bug #32727)</p></li><li><p>
        When using unixODBC or directly linked applications where the
        thread level is set to less than 3 (within
        <code class="filename">odbcinst.ini</code>), a thread synchronization
        issue would lead to an application crash. This was because
        <code class="function">SQLAllocStmt()</code> and
        <code class="function">SQLFreeStmt()</code> did not synchronize access to
        the list of statements associated with a connection.
       (Bug #32587)</p></li><li><p>
        Cleaning up environment handles in multithread environments
        could result in a five (or more) second delay.
       (Bug #32366)</p></li><li><p>
        Renaming an existing DSN entry would create a new entry with the
        new name without deleting the old entry.
       (Bug #31165)</p></li><li><p>
        Setting the default database using the
        <code class="option">DefaultDatabase</code> property of an ADO
        <code class="literal">Connection</code> object would fail with the error
        <code class="literal">Provider does not support this property</code>. The
        <code class="function">SQLGetInfo()</code> returned the wrong value for
        <code class="literal">SQL_DATABASE_NAME</code> when no database was
        selected.
       (Bug #3780)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-22"></a>D.2.3.9. Changes in MySQL Connector/ODBC 3.51.22 (13 November 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The workaround for this bug was removed due to the fixes in
        MySQL Server 5.0.48 and 5.1.21.
      </p><p>References: This regression was introduced by Bug #10491.</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">English</code> locale would be used when
        formatting floating point values. The <code class="literal">C</code>
        locale is now used for these values.
       (Bug #32294)</p></li><li><p>
        When accessing information about supported operations, the
        driver would return incorrect information about the support for
        <a href="sql-syntax.html#union" title="12.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>.
       (Bug #32253)</p></li><li><p>
        Unsigned integer values greater than the maximum value of a
        signed integer would be handled incorrectly.
       (Bug #32171)</p></li><li><p>
        The wrong result was returned by <code class="literal">SQLGetData()</code>
        when the data was an empty string and a zero-sized buffer was
        specified.
       (Bug #30958)</p></li><li><p>
        Added the <code class="literal">FLAG_COLUMN_SIZE_S32</code> option to
        limit the reported column size to a signed 32-bit integer. This
        option is automatically enabled for ADO applications to provide
        a work around for a bug in ADO.
       (Bug #13776)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-21"></a>D.2.3.10. Changes in MySQL Connector/ODBC 3.51.21 (08 October 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When using a rowset/cursor and add a new row with a number of
        fields, subsequent rows with fewer fields will include the
        original fields from the previous row in the final
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement.
       (Bug #31246)</p></li><li><p>
        Uninitiated memory could be used when C/ODBC internally calls
        <code class="literal">SQLGetFunctions()</code>.
       (Bug #31055)</p></li><li><p>
        The wrong <code class="literal">SQL_DESC_LITERAL_PREFIX</code> would be
        returned for date/time types.
       (Bug #31009)</p></li><li><p>
        The wrong <code class="literal">COLUMN_SIZE</code> would be returned by
        <code class="literal">SQLGetTypeInfo</code> for the TIME columns
        (<code class="literal">SQL_TYPE_TIME</code>).
       (Bug #30939)</p></li><li><p>
        Clicking outside the character set selection box when
        configuring a new DSN could cause the wrong character set to be
        selected.
       (Bug #30568)</p></li><li><p>
        Not specifying a user in the DSN dialog would raise a warning
        even though the parameter is optional.
       (Bug #30499)</p></li><li><p>
        <code class="literal">SQLSetParam()</code> caused memory allocation errors
        due to driver manager's mapping of deprecated functions (buffer
        length -1).
       (Bug #29871)</p></li><li><p>
        When using ADO, a column marked as
        <code class="literal">AUTO_INCREMENT</code> could incorrectly report that
        the column permitted <code class="literal">NULL</code> values. This was
        dur to an issue with <code class="literal">NULLABLE</code> and
        <code class="literal">IS_NULLABLE</code> return values from the call to
        <code class="literal">SQLColumns()</code>.
       (Bug #26108)</p></li><li><p>
        MySQL Connector/ODBC would return the wrong the error code when the server
        disconnects the active connection because the configured
        <a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a> has expired.
        Previously it would return <code class="literal">HY000</code>. MySQL Connector/ODBC now
        correctly returns an <code class="literal">SQLSTATE</code> of
        <code class="literal">08S01</code>.
       (Bug #3456)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-20"></a>D.2.3.11. Changes in MySQL Connector/ODBC 3.51.20 (10 September 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Using <code class="literal">FLAG_NO_PROMPT</code> doesn't suppress the
        dialogs normally handled by <code class="literal">SQLDriverConnect</code>.
       (Bug #30840)</p></li><li><p>
        The specified length of the user name and authentication
        parameters to <code class="literal">SQLConnect()</code> were not being
        honored.
       (Bug #30774)</p></li><li><p>
        The wrong column size was returned for binary data.
       (Bug #30547)</p></li><li><p>
        <code class="literal">SQLGetData()</code> will now always return
        <code class="literal">SQL_NO_DATA_FOUND</code> on second call when no data
        left, even if requested size is 0.
       (Bug #30520)</p></li><li><p>
        <code class="literal">SQLGetConnectAttr()</code> did not reflect the
        connection state correctly.
       (Bug #14639)</p></li><li><p>
        Removed check box in setup dialog for
        <code class="literal">FLAG_FIELD_LENGTH</code> (identified as
        <code class="literal">Don't Optimize Column Width</code> within the GUI
        dialog), which was removed from the driver in 3.51.18.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-19"></a>D.2.3.12. Changes in MySQL Connector/ODBC 3.51.19 (10 August 2007)</h4></div></div></div><p>
        Connector/ODBC 3.51.19 fixes a specific issue with the 3.51.18
        release. For a list of changes in the 3.51.18 release, see
        <a href="news.html#connector-odbc-news-3-51-18" title="D.2.3.13. Changes in MySQL Connector/ODBC 3.51.18 (08 August 2007)">Section D.2.3.13, “Changes in MySQL Connector/ODBC 3.51.18 (08 August 2007)”</a>.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Because of Bug #10491 in the server, character string results
        were sometimes incorrectly identified as
        <code class="literal">SQL_VARBINARY</code>. Until this server bug is
        corrected, the driver will identify all variable-length strings
        as <code class="literal">SQL_VARCHAR</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-18"></a>D.2.3.13. Changes in MySQL Connector/ODBC 3.51.18 (08 August 2007)</h4></div></div></div><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        Binary packages for Sun Solaris are now available as
        <code class="literal">PKG</code> packages.
      </p></li><li><p>
        Binary packages as disk images with installers are now available
        for Mac OS X.
      </p></li><li><p>
        A binary package without an installer is available for Microsoft
        Windows x64 Edition. There are no installer packages for
        Microsoft Windows x64 Edition.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="option">FLAG_DEBUG</code> option was removed.
      </p></li><li><p>
        When connecting to a specific database when using a DSN, the
        system tables from the <code class="literal">mysql</code> database are no
        longer also available. Previously, tables from the mysql
        database (catalog) were listed as <code class="literal">SYSTEM
        TABLES</code> by <code class="literal">SQLTables()</code> even when a
        different catalog was being queried.
       (Bug #28662)</p></li><li><p>
        Installed for Mac OS X has been re-instated. The installer
        registers the driver at a system (not user) level and makes it
        possible to create both user and system DSNs using the MySQL Connector/ODBC
        driver. The installer also fixes the situation where the
        necessary drivers would bge installed local to the user, not
        globally.
       (Bug #15326, Bug #10444)</p></li><li><p>
        MySQL Connector/ODBC now supports batched statements. To enable cached
        statement support, you must switch enable the batched statement
        option (<code class="literal">FLAG_MULTI_STATEMENTS</code>, 67108864, or
        <span class="guilabel">Allow multiple statements</span> within a GUI
        configuration). Be aware that batched statements create an
        increased chance of SQL injection attacks and you must ensure
        that your application protects against this scenario.
       (Bug #7445)</p></li><li><p>
        The <code class="literal">SQL_ATTR_ROW_BIND_OFFSET_PTR</code> is now
        supported for row bind offsets.
       (Bug #6741)</p></li><li><p>
        The <code class="literal">TRACE</code> and <code class="literal">TRACEFILE</code>
        DSN options have been removed. Use the ODBC driver manager trace
        options instead.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When using a table with multiple
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns, the final
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column within the table
        definition would not be updateable. Note that there is still a
        limitation in MySQL server regarding multiple
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns.
       (Bug #30081)</p><p>References: See also Bug #9927.</p></li><li><p>
        Fixed an issue where the <span><strong class="command">myodbc3i</strong></span> would
        update the user ODBC configuration file
        (<code class="filename">~/Library/ODBC/odbcinst.ini</code>) instead of
        the system <code class="filename">/Library/ODBC/odbcinst.ini</code>. This
        was caused because <span><strong class="command">myodbc3i</strong></span> was not honoring
        the <code class="literal">s</code> and <code class="literal">u</code> modifiers for
        the <code class="option">-d</code> command-line option.
       (Bug #29964)</p></li><li><p>
        Getting table metadata (through the
        <code class="literal">SQLColumns()</code> would fail, returning a bad
        table definition to calling applications.
       (Bug #29888)</p></li><li><p>
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> column types would
        return <code class="literal">FALSE</code> in place of
        <code class="literal">SQL_SUCCESS</code> when requesting the column type
        information.
       (Bug #28657)</p></li><li><p>
        The <code class="literal">SQL_COLUMN_TYPE</code>,
        <code class="literal">SQL_COLUMN_DISPLAY</code> and
        <code class="literal">SQL_COLUMN_PRECISION</code> values would be returned
        incorrectly by <code class="literal">SQLColumns()</code>,
        <code class="literal">SQLDescribeCol()</code> and
        <code class="literal">SQLColAttribute()</code> when accessing character
        columns, especially those generated through
        <code class="function">concat()</code>. The lengths returned should now
        conform to the ODBC specification. The
        <code class="literal">FLAG_FIELD_LENGTH</code> option no longer has any
        affect on the results returned.
       (Bug #27862)</p></li><li><p>
        Obtaining the length of a column when using a character set for
        the connection of <code class="literal">utf8</code> would result in the
        length being returned incorrectly.
       (Bug #19345)</p></li><li><p>
        The <code class="literal">SQLColumns()</code> function could return
        incorrect information about
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns, indicating
        that the field was not nullable.
       (Bug #14414)</p></li><li><p>
        The <code class="literal">SQLColumns()</code> function could return
        incorrect information about <code class="literal">AUTO_INCREMENT</code>
        columns, indicating that the field was not nullable.
       (Bug #14407)</p></li><li><p>
        A binary package without an installer is available for Microsoft
        Windows x64 Edition. There are no installer packages for
        Microsoft Windows x64 Edition.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        <code class="literal">BIT(n)</code> columns are now treated as
        <code class="literal">SQL_BIT</code> data where <code class="literal">n = 1</code>
        and binary data where <code class="literal">n &gt; 1</code>.
      </p></li><li><p>
        The wrong value from <code class="literal">SQL_DESC_LITERAL_SUFFIX</code>
        was returned for binary fields.
      </p></li><li><p>
        The <code class="literal">SQL_DATETIME_SUB</code> column in SQLColumns()
        was not correctly set for date and time types.
      </p></li><li><p>
        The value for <code class="literal">SQL_DESC_FIXED_PREC_SCALE</code> was
        not returned correctly for values in MySQL 5.0 and later.
      </p></li><li><p>
        The wrong value for <code class="literal">SQL_DESC_TYPE</code> was
        returned for date and time types.
      </p></li><li><p>
        <code class="literal">SQLConnect()</code> and
        <code class="literal">SQLDriverConnect()</code> were rewritten to
        eliminate duplicate code and ensure all options were supported
        using both connection methods.
        <code class="literal">SQLDriverConnect()</code> now only requires the
        setup library to be present when the call requires it.
      </p></li><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        Binary packages as disk images with installers are now available
        for Mac OS X.
      </p></li><li><p>
        Binary packages for Sun Solaris are now available as
        <code class="literal">PKG</code> packages.
      </p></li><li><p>
        The wrong value for <code class="literal">DECIMAL_DIGITS</code> in
        <code class="literal">SQLColumns()</code> was reported for
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> fields, as well as the
        wrong value for the scale parameter to
        <code class="literal">SQLDescribeCol()</code>, and the
        <code class="literal">SQL_DESC_SCALE</code> attribute from
        <code class="literal">SQLColAttribute()</code>.
      </p></li><li><p>
        The <code class="literal">SQL_DATA_TYPE</code> column in
        <code class="literal">SQLColumns()</code> results did not report the
        correct value for date and time types.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-17"></a>D.2.3.14. Changes in MySQL Connector/ODBC 3.51.17 (14 July 2007)</h4></div></div></div><p><span class="bold"><strong>Platform-Specific Notes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        Binary packages for Sun Solaris are now available as
        <code class="literal">PKG</code> packages.
      </p></li><li><p>
        Binary packages as disk images with installers are now available
        for Mac OS X.
      </p></li><li><p>
        A binary package without an installer is available for Microsoft
        Windows x64 Edition. There are no installer packages for
        Microsoft Windows x64 Edition.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        It is now possible to specify a different character set as part
        of the DSN or connection string. This must be used instead of
        the <code class="literal">SET NAMES</code> statement. You can also
        configure the character set value from the GUI configuration.
       (Bug #9498, Bug #6667)</p></li><li><p>
        Fixed calling convention ptr and wrong free in
        <span><strong class="command">myodbc3i</strong></span>, and fixed the null terminating (was
        only one, not two) when writing DSN to string.
      </p></li><li><p>
        Dis-allow NULL ptr for null indicator when calling SQLGetData()
        if value is null. Now returns SQL_ERROR w/state 22002.
      </p></li><li><p>
        The setup library has been split into its own RPM package, to
        enable installing the driver itself with no GUI dependencies.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">myodbc3i</code> did not correctly format driver
        info, which could cause the installation to fail.
       (Bug #29709)</p></li><li><p>
        MySQL Connector/ODBC crashed with Crystal Reports due to a rproblem with
        <code class="literal">SQLProcedures()</code>.
       (Bug #28316)</p></li><li><p>
        Fixed a problem where the GUI would crash when configuring or
        removing a System or User DSN.
       (Bug #27315)</p></li><li><p>
        Fixed error handling of out-of-memory and bad connections in
        catalog functions. This might raise errors in code paths that
        had ignored them in the past.
       (Bug #26934)</p></li><li><p>
        For a stored procedure that returns multiple result sets,
        MySQL Connector/ODBC returned only the first result set.
       (Bug #16817)</p></li><li><p>
        Calling <code class="literal">SQLGetDiagField</code> with
        <code class="literal">RecNumber 0, DiagIdentifier NOT 0</code> returned
        <code class="literal">SQL_ERROR</code>, preventing access to diagnostic
        header fields.
       (Bug #16224)</p></li><li><p>
        Added a new DSN option
        (<code class="literal">FLAG_ZERO_DATE_TO_MIN</code>) to retrieve
        <code class="literal">XXXX-00-00</code> dates as the minimum permitted
        ODBC date (<code class="literal">XXXX-01-01</code>). Added another option
        (<code class="literal">FLAG_MIN_DATE_TO_ZERO</code>) to mirror this but
        for bound parameters. <code class="literal">FLAG_MIN_DATE_TO_ZERO</code>
        only changes <code class="literal">0000-01-01</code> to
        <code class="literal">0000-00-00</code>.
       (Bug #13766)</p></li><li><p>
        If there was more than one unique key on a table, the correct
        fields were not used in handling <code class="literal">SQLSetPos()</code>.
       (Bug #10563)</p></li><li><p>
        When inserting a large <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
        field, MySQL Connector/ODBC would crash due to a memory allocation error.
       (Bug #10562)</p></li><li><p>
        The driver was using
        <code class="function">mysql_odbc_escape_string()</code>, which does not
        handle the
        <a href="server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a> SQL mode.
        Now it uses
        <a href="connectors-apis.html#mysql-real-escape-string" title="21.9.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>,
        which does.
       (Bug #9498)</p></li><li><p>
        <code class="literal">SQLColumns()</code> did not handle many of its
        parameters correctly, which could lead to incorrect results. The
        table name argument was not handled as a pattern value, and most
        arguments were not escaped correctly when they contained
        nonalphanumeric characters.
       (Bug #8860)</p></li><li><p>
        There are no binary packages for Microsoft Windows x64 Edition.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        Correctly return error if <code class="literal">SQLBindCol</code> is
        called with an invalid column.
      </p></li><li><p>
        Fixed possible crash if <code class="literal">SQLBindCol()</code> was not
        called before <code class="literal">SQLSetPos()</code>.
      </p></li><li><p>
        The Mac OS X binary packages are only provided as tarballs,
        there is no installer.
      </p></li><li><p>
        The binary packages for Sun Solaris are only provided as
        tarballs, not the PKG format.
      </p></li><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-16"></a>D.2.3.15. Changes in MySQL Connector/ODBC 3.51.16 (14 June 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/ODBC now supports using SSL for communication. This is not
        yet exposed in the setup GUI, but must be enabled through
        configuration files or the DSN.
       (Bug #12918)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Calls to SQLNativeSql() could cause stack corruption due to an
        incorrect pointer cast.
       (Bug #28758)</p></li><li><p>
        Using cursors on results sets with multi-column keys could
        select the wrong value.
       (Bug #28255)</p></li><li><p>
        <code class="literal">SQLForeignKeys</code> does not escape
        <code class="literal">_</code> and <code class="literal">%</code> in the table name
        arguments.
       (Bug #27723)</p></li><li><p>
        When using stored procedures, making a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> or second stored procedure
        call after an initial stored procedure call, the second
        statement will fail.
       (Bug #27544)</p></li><li><p>
        SQLTables() did not distinguish tables from views.
       (Bug #23031)</p></li><li><p>
        Return values from <code class="literal">SQLTables()</code> may be
        truncated.
       (Bug #22797)</p></li><li><p>
        Data in <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns would fail
        to be read correctly.
       (Bug #16917)</p></li><li><p>
        Specifying strings as parameters using the
        <code class="literal">adBSTR</code> or <code class="literal">adVarWChar</code>
        types, (<code class="literal">SQL_WVARCHAR</code> and
        <code class="literal">SQL_WLONGVARCHAR</code>) would be incorrectly
        quoted.
       (Bug #16235)</p></li><li><p>
        SQL_WVARCHAR and SQL_WLONGVARCHAR parameters were not properly
        quoted and escaped.
       (Bug #16235)</p></li><li><p>
        Using <code class="literal">BETWEEN</code> with date values, the wrong
        results could be returned.
       (Bug #15773)</p></li><li><p>
        When using the <code class="literal">Don't Cache Results</code> (option
        value <code class="literal">1048576</code>) with Microsoft Access, the
        connection will fail using DAO/VisualBasic.
       (Bug #4657)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-15"></a>D.2.3.16. Changes in MySQL Connector/ODBC 3.51.15 (07 May 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/ODBC would incorrectly claim to support
        <code class="literal">SQLProcedureColumns</code> (by returning true when
        queried about <code class="literal">SQLPROCEDURECOLUMNS</code> with
        <code class="literal">SQLGetFunctions</code>), but this functionality is
        not supported.
       (Bug #27591)</p></li><li><p>
        An incorrect transaction isolation level may not be returned
        when accessing the connection attributes.
       (Bug #27589)</p></li><li><p>
        Adding a new DSN with the <code class="literal">myodbc3i</code> utility
        under AIX would fail.
       (Bug #27220)</p></li><li><p>
        When inserting data using bulk statements (through
        <code class="literal">SQLBulkOperations</code>), the indicators for all
        rows within the insert would not updated correctly.
       (Bug #24306)</p></li><li><p>
        Using <code class="literal">SQLProcedures</code> does not return the
        database name within the returned resultset.
       (Bug #23033)</p></li><li><p>
        The <code class="literal">SQLTransact()</code> function did not support an
        empty connection handle.
       (Bug #21588)</p></li><li><p>
        Using <code class="literal">SQLDriverConnect</code> instead of
        <code class="literal">SQLConnect</code> could cause later operations to
        fail.
       (Bug #7912)</p></li><li><p>
        When using blobs and parameter replacement in a statement with
        <code class="literal">WHERE CURSOR OF</code>, the SQL is truncated.
       (Bug #5853)</p></li><li><p>
        MySQL Connector/ODBC would return too many foreign key results when accessing
        tables with similar names.
       (Bug #4518)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-14"></a>D.2.3.17. Changes in MySQL Connector/ODBC 3.51.14 (08 March 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Use of <code class="literal">SQL_ATTR_CONNECTION_TIMEOUT</code> on the
        server has now been disabled. If you attempt to set this
        attribute on your connection the
        <code class="literal">SQL_SUCCESS_WITH_INFO</code> will be returned, with
        an error number/string of <code class="literal">HYC00: Optional feature not
        supported</code>.
       (Bug #19823)</p></li><li><p>
        Added auto is null option to MySQL Connector/ODBC option parameters.
       (Bug #10910)</p></li><li><p>
        Added auto-reconnect option to MySQL Connector/ODBC option parameters.
      </p></li><li><p>
        Added support for the <code class="literal">HENV</code> handlers in
        <code class="literal">SQLEndTran()</code>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        On 64-bit systems, some types would be incorrectly returned.
       (Bug #26024)</p></li><li><p>
        When retrieving <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> columns,
        C/ODBC would incorrectly interpret the type of the string and
        could interpret it as a <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> type
        instead.
       (Bug #25846)</p></li><li><p>
        MySQL Connector/ODBC may insert the wrong parameter values when using
        prepared statements under 64-bit Linux.
       (Bug #22446)</p></li><li><p>
        Using MySQL Connector/ODBC, with <code class="literal">SQLBindCol</code> and binding
        the length to the return value from
        <code class="literal">SQL_LEN_DATA_AT_EXEC</code> fails with a memory
        allocation error.
       (Bug #20547)</p></li><li><p>
        Using <code class="literal">DataAdapter</code>, MySQL Connector/ODBC may continually
        consume memory when reading the same records within a loop
        (Windows Server 2003 SP1/SP2 only).
       (Bug #20459)</p></li><li><p>
        When retrieving data from columns that have been compressed
        using <code class="literal">COMPRESS()</code>, the retrieved data would be
        truncated to 8KB.
       (Bug #20208)</p></li><li><p>
        The ODBC driver name and version number were incorrectly
        reported by the driver.
       (Bug #19740)</p></li><li><p>
        A string format exception would be raised when using iODBC,
        MySQL Connector/ODBC and the embedded MySQL server.
       (Bug #16535)</p></li><li><p>
        The <code class="literal">SQLDriverConnect()</code> ODBC method did not
        work with recent MySQL Connector/ODBC releases.
       (Bug #12393)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-13"></a>D.2.3.18. Changes in MySQL Connector/ODBC 3.51.13 (Never released)</h4></div></div></div><p>
        Connector/ODBC 3.51.13 was an internal implementation and
        testing release.
      </p><p>This section has no changelog entries.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-12"></a>D.2.3.19. Changes in MySQL Connector/ODBC 3.51.12 (11 February 2005)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        N/A
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Using stored procedures with ADO, where the
        <code class="literal">CommandType</code> has been set correctly to
        <code class="literal">adCmdStoredProc</code>, calls to stored procedures
        would fail.
       (Bug #15635)</p></li><li><p>
        File DSNs could not be saved.
       (Bug #12019)</p></li><li><p>
        <code class="literal">SQLColumns()</code> returned no information for
        tables that had a column named using a reserved word.
       (Bug #9539)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-news-3-51-11"></a>D.2.3.20. Changes in MySQL Connector/ODBC 3.51.11 (28 January 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">mysql_list_dbcolumns()</code> and
        <code class="literal">insert_fields()</code> were retrieving all rows from
        a table. Fixed the queries generated by these functions to
        return no rows.
       (Bug #8198)</p></li><li><p>
        <code class="literal">SQLGetTypoInfo()</code> returned
        <code class="literal">tinyblob</code> for <code class="literal">SQL_VARBINARY</code>
        and nothing for <code class="literal">SQL_BINARY</code>. Fixed to return
        <code class="literal">varbinary</code> for
        <code class="literal">SQL_VARBINARY</code>, <code class="literal">binary</code> for
        <code class="literal">SQL_BINARY</code>, and <code class="literal">longblob</code>
        for <code class="literal">SQL_LONGVARBINARY</code>.
       (Bug #8138)</p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-net-news"></a>D.3. MySQL Connector/Net Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-5-x">D.3.1. Changes in MySQL Connector/Net Version 6.5.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-4-x">D.3.2. Changes in MySQL Connector/Net Version 6.4.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-x">D.3.3. Changes in MySQL Connector/Net Version 6.3.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-x">D.3.4. Changes in MySQL Connector/Net Version 6.2.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-x">D.3.5. Changes in MySQL Connector/Net Version 6.1.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-x">D.3.6. Changes in MySQL Connector/Net Version 6.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-3-x">D.3.7. Changes in MySQL Connector/Net Version 5.3.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-x">D.3.8. Changes in MySQL Connector/Net Version 5.2.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-x">D.3.9. Changes in MySQL Connector/Net Version 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-x">D.3.10. Changes in MySQL Connector/Net Version 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-x">D.3.11. Changes in MySQL Connector/Net Version 1.0.x</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-9-0">D.3.12. Changes in MySQL Connector/Net Version 0.9.0 (30 August 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-76">D.3.13. Changes in MySQL Connector/Net Version 0.76</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-75">D.3.14. Changes in MySQL Connector/Net Version 0.75</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-74">D.3.15. Changes in MySQL Connector/Net Version 0.74</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-71">D.3.16. Changes in MySQL Connector/Net Version 0.71</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-70">D.3.17. Changes in MySQL Connector/Net Version 0.70</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-68">D.3.18. Changes in MySQL Connector/Net Version 0.68</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-65">D.3.19. Changes in MySQL Connector/Net Version 0.65</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-60">D.3.20. Changes in MySQL Connector/Net Version 0.60</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-50">D.3.21. Changes in MySQL Connector/Net Version 0.50</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-6-5-x"></a>D.3.1. Changes in MySQL Connector/Net Version 6.5.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-5-1">D.3.1.1. Changes in MySQL Connector/Net 6.5.1 (23 January 2012)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-5-0">D.3.1.2. Changes in MySQL Connector/Net 6.5.0 (22 December 2011)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-5-1"></a>D.3.1.1. Changes in MySQL Connector/Net 6.5.1 (23 January 2012)</h4></div></div></div><p class="release-level">
        Second beta release.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        IntelliSense would emit an error when the "<code class="literal">-</code>"
        (minus) character was typed.
       (Bug #13522344)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-5-0"></a>D.3.1.2. Changes in MySQL Connector/Net 6.5.0 (22 December 2011)</h4></div></div></div><p class="release-level">
        First beta release.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added exception and command injector support.
      </p></li><li><p>
        Added fractional seconds support, as per MySQL Server 5.6 and
        above. For more information, see
        <a href="data-types.html#fractional-seconds" title="10.3.4. Fractional Seconds in Time Values">Section 10.3.4, “Fractional Seconds in Time Values”</a>
      </p></li><li><p>
        Added better partial-trust support, thus allowing Connector/NET
        to run in a partial trust scenario. It will work correctly in a
        medium-trust level environment when the library is installed in
        the GAC.
      </p></li><li><p>
        Adds a <code class="literal">MySqlClientPermission</code> class to help
        users define the security polices for the database connections
        within any application using a MySQL database.
      </p></li><li><p>
        Added better IntelliSense support, including auto-completion
        when editing stored procedures or <code class="literal">.mysql</code>
        files.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-6-4-x"></a>D.3.2. Changes in MySQL Connector/Net Version 6.4.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-4-4">D.3.2.1. Changes in MySQL Connector/Net 6.4.4 (26 September 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-4-3">D.3.2.2. Changes in MySQL Connector/Net 6.4.3 (03 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-4-2">D.3.2.3. Changes in MySQL Connector/Net 6.4.2 (29 June 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-4-1">D.3.2.4. Changes in MySQL Connector/Net 6.4.1 (06 June 2011, Alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-4-4"></a>D.3.2.1. Changes in MySQL Connector/Net 6.4.4 (26 September 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.4.3.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/Net now enables clients to connect to the server
        through accounts that use Windows native authentication. See
        <a href="server-administration.html#windows-authentication-plugin" title="5.5.6.3. The Windows Native Authentication Plugin">Section 5.5.6.3, “The Windows Native Authentication Plugin”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p> (Bug #12897149)</p></li><li><p>
        When creating a tableadapter through a Dataset form in Visual
        Studio, the <code class="literal">MaxLength</code> of the field for a
        <code class="literal">CHAR</code> column could be set to 3 times the
        length of the table column. Although this many bytes could be
        needed to hold a UTF-8 character value, the length value was not
        appropriate for restricting the length of a
        <code class="literal">TextBox</code>.
       (Bug #12860224, Bug #62094)</p></li><li><p>
        An error <code class="literal">out of sync with server</code> could occur
        when connecting in the Visual Studio Entity Framework.
       (Bug #12853286, Bug #61806)</p></li><li><p>
        When adding a <code class="literal">MEDIUMTEXT</code> or
        <code class="literal">LONGTEXT</code> column Visual Studio, the facet
        <code class="literal">Fixed length</code> had to be set to
        <code class="literal">false</code>, even though these types allow
        arbitrary lengths.
       (Bug #12848277, Bug #54915)</p></li><li><p>
        Executing a LINQ to Entity query could result in a
        <code class="literal">NullReferenceException</code> error.
       (Bug #12776598, Bug #61729)</p></li><li><p>
        <code class="literal">MySqlDataReader.Close</code> was modified to use
        Default behavior when clearing remaining result sets.
       (Bug #61690, Bug #12723423)</p></li><li><p>
        <code class="literal">MySqlScript</code> was modified to enable correct
        processing of the <code class="literal">DELIMITER</code> command when not
        followed by a new line.
       (Bug #61680, Bug #12732279)</p></li><li><p>
        The ASP.NET membership provider was modified to create and query
        all related tables using lowercase names.
       (Bug #61108, Bug #12702009)</p></li><li><p>
        On Model First changed column types generated in SQL scripts to
        produce more suitable <code class="literal">MySql</code> types.
       (Bug #59244, Bug #12707104)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-4-3"></a>D.3.2.2. Changes in MySQL Connector/Net 6.4.3 (03 July 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.4.2.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When creating a tableadapter through a Dataset form in Visual
        Studio, the <code class="literal">MaxLength</code> of the field for a
        <code class="literal">CHAR</code> column could be set to 3 times the
        length of the table column. Although this many bytes could be
        needed to hold a UTF-8 character value, the length value was not
        appropriate for restricting the length of a
        <code class="literal">TextBox</code>.
       (Bug #12860224, Bug #62094)</p></li><li><p>
        <code class="literal">SchemaDefinition-5.5.ssdl</code> was modified to
        treat <code class="literal">CHAR(36)</code> columns as a GUID.
       (Bug #61657, Bug #12708208)</p></li><li><p>
        <code class="literal">SqlFragment.QuoteIdentifier</code> was modified to
        add MySQL quotes around identifiers.
       (Bug #61635, Bug #12707285)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-4-2"></a>D.3.2.3. Changes in MySQL Connector/Net 6.4.2 (29 June 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.4.1.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Modified <code class="literal">MySqlConnection.BeginTransaction</code> to
        throw a <code class="literal">NotSupportedException</code> for
        <code class="literal">Snapshot</code> isolation level.
       (Bug #61589, Bug #12698020)</p></li><li><p>
        Modified <code class="literal">ProviderManifest.xml</code> to map
        <code class="literal">TIMESTAMP</code> database columns to the
        <code class="literal">DateTime</code> .NET type.
       (Bug #55351, Bug #12652602)</p></li><li><p>
        Fixed Entity Framework provider <code class="literal">GROUP BY</code>
        clause generation by adding all group-by keys to the
        <code class="literal">SELECT</code> statement.
       (Bug #46742, Bug #12622129)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-4-1"></a>D.3.2.4. Changes in MySQL Connector/Net 6.4.1 (06 June 2011, Alpha)</h4></div></div></div><p class="release-level">
        First alpha release.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Calling a stored procedure with output parameters caused a
        marked performance decrease.
       (Bug #60366, Bug #12425959)</p></li><li><p>
        Changed how the procedure schema collection is retrieved. If the
        connection string contains “<span class="quote"><code class="literal">use procedure
        bodies=true</code></span>” then a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> is performed on the
        <code class="literal">mysql.proc</code> table directly, as this is up to
        50 times faster than the current Information Schema
        implementation. If the connection string contains
        “<span class="quote"><code class="literal">use procedure bodies=false</code></span>”,
        then the Information Schema collection is queried.
       (Bug #36694)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-6-3-x"></a>D.3.3. Changes in MySQL Connector/Net Version 6.3.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-3-9">D.3.3.1. Changes in MySQL Connector/Net 6.3.9 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-8">D.3.3.2. Changes in MySQL Connector/Net 6.3.8 (16 December 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-7">D.3.3.3. Changes in MySQL Connector/Net 6.3.7 (22 June 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-6">D.3.3.4. Changes in MySQL Connector/Net 6.3.6 (03 January 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-5">D.3.3.5. Changes in MySQL Connector/Net 6.3.5 (12 October 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-4">D.3.3.6. Changes in MySQL Connector/Net 6.3.4 (01 September 2010, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-3">D.3.3.7. Changes in MySQL Connector/Net 6.3.3 (27 July 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-2">D.3.3.8. Changes in MySQL Connector/Net 6.3.2 (24 May 2010, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-1">D.3.3.9. Changes in MySQL Connector/Net 6.3.1 (02 March 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-3-0">D.3.3.10. Changes in MySQL Connector/Net 6.3.0 (16 February 2010, alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-9"></a>D.3.3.1. Changes in MySQL Connector/Net 6.3.9 (Not yet released)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.8.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        In Visual Studio's Server Explorer, right-clicking on a table in
        the Tables tree and selecting Create Trigger could cause an
        error, <code class="literal">Object reference not set to an instance of an
        object</code>.
       (Bug #13511801)</p></li><li><p> (Bug #11750161, Bug #40555)</p></li><li><p>
        Connector/NET would incorrectly map decimal values to ANSI
        strings.
       (Bug #62246, Bug #13050570)</p></li><li><p>
        Connector/NET incorrectly maps
        <code class="literal">PrimitiveTypeKind.Byte</code> to
        <code class="literal">tinyint</code>, instead of
        <code class="literal">utinyint</code>. And
        <code class="literal">PrimitiveTypeKind.SByte</code> mapping was added, to
        <code class="literal">tinyint</code>.
       (Bug #62135, Bug #13061713)</p></li><li><p>
        On Model First changed column types generated in SQL scripts to
        produce more suitable <code class="literal">MySql</code> types.
       (Bug #59244, Bug #12707104)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-8"></a>D.3.3.2. Changes in MySQL Connector/Net 6.3.8 (16 December 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.7.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The columns added in descending sort order were not included in
        the index, as defined within the Server Explorer.
       (Bug #13481709)</p></li><li><p>
        When creating a foreign key relationship in Table Designer,
        changes to the <code class="literal">ON UPDATE</code> and <code class="literal">ON
        CASCADE</code> settings were not reflected in the actual
        table definition, as displayed by <code class="literal">SHOW CREATE
        TABLE</code>.
       (Bug #13481348)</p></li><li><p>
        The comment property and index type were not added in the
        definition of the index, as defined within the Server Explorer.
       (Bug #13481314)</p></li><li><p>
        Removing a method was not affecting the indexes list of the
        table object, as defined within the Table Designer.
       (Bug #13481313)</p></li><li><p>
        When a new column was added in Table Designer without selecting
        an associated data type, an error would occur trying to save the
        column definition.
       (Bug #13481298)</p></li><li><p>
        The default value for <code class="literal">VARCHAR</code> and
        <code class="literal">CHAR</code> field types would contain single
        quotation marks.
       (Bug #13442506)</p></li><li><p> (Bug #11750161, Bug #40555)</p></li><li><p>
        Connector/NET experienced poor performance when adding
        parameters to the <code class="literal">MySQLCommand</code>.
       (Bug #62653, Bug #13331475)</p></li><li><p>
        The Unicode quotation mark character <code class="literal">U+0022</code>
        was not escaped by the <code class="literal">MySQLHelper</code> class.
       (Bug #62585, Bug #13092886)</p></li><li><p>
        Using a return parameter without a name resulted in an
        <code class="literal">IndexOutOfRangeException</code> exception.
       (Bug #62416, Bug #13006969)</p></li><li><p>
        The <code class="literal">Mono</code> runtime did not support hashed
        passwords.
       (Bug #62203, Bug #13041618)</p></li><li><p>
        <code class="literal">MySqlDataReader.Close</code> was modified to use
        Default behavior when clearing remaining result sets.
       (Bug #61690, Bug #12723423)</p></li><li><p>
        <code class="literal">MySqlScript</code> was modified to enable correct
        processing of the <code class="literal">DELIMITER</code> command when not
        followed by a new line.
       (Bug #61680, Bug #12732279)</p></li><li><p>
        <code class="literal">SchemaDefinition-5.5.ssdl</code> was modified to
        treat <code class="literal">CHAR(36)</code> columns as a GUID.
       (Bug #61657, Bug #12708208)</p></li><li><p>
        <code class="literal">SqlFragment.QuoteIdentifier</code> was modified to
        add MySQL quotes around identifiers.
       (Bug #61635, Bug #12707285)</p></li><li><p>
        Modified <code class="literal">MySqlConnection.BeginTransaction</code> to
        throw a <code class="literal">NotSupportedException</code> for
        <code class="literal">Snapshot</code> isolation level.
       (Bug #61589, Bug #12698020)</p></li><li><p>
        The ASP.NET membership provider was modified to create and query
        all related tables using lowercase names.
       (Bug #61108, Bug #12702009)</p></li><li><p>
        Modified <code class="literal">ProviderManifest.xml</code> to map
        <code class="literal">TIMESTAMP</code> database columns to the
        <code class="literal">DateTime</code> .NET type.
       (Bug #55351, Bug #12652602)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-7"></a>D.3.3.3. Changes in MySQL Connector/Net 6.3.7 (22 June 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.6.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Calling a stored procedure with output parameters caused a
        marked performance decrease.
       (Bug #60366, Bug #12425959)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net 6.3.6 did not work with Visual Studio 2010.
       (Bug #60723, Bug #12394470)</p></li><li><p>
        <code class="literal">MysqlDataReader.GetSchemaTable</code> returned
        incorrect values and types.
       (Bug #59989, Bug #11776346)</p></li><li><p>
        All queries other than <code class="literal">INSERT</code> were executed
        individually instead of as a batch even though batching was
        enabled for the connection.
       (Bug #59616, Bug #11850286)</p></li><li><p>
        MySQL Connector/Net generated an exception when executing a query consisting
        of ';', for example:
      </p><pre class="programlisting">mycmd(";",mycon)
mycmd.executenonquery()</pre><p>
        The exception generated was:
      </p><pre class="programlisting">System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at MySql.Data.MySqlClient.MySqlCommand.TrimSemicolons(String sql)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()</pre><p>(Bug #59537, Bug #11766433)</p></li><li><p>
        Setting <code class="literal">Membership.ApplicationName</code> had no
        effect.
       (Bug #59438, Bug #11770465)</p></li><li><p>
        A <code class="literal">NullReferenceException</code> was thrown on
        disposal of a <code class="literal">TransactionScope</code> object.
       (Bug #59346, Bug #11766272)</p></li><li><p>
        The setup wizard failed with the error “<span class="quote">Setup Wizard ended
        prematurely because of an error</span>”. This was because it
        assumed .NET Framework version 4.0 was located on the C: drive,
        when it was actually located on the E: drive.
       (Bug #59301)</p></li><li><p>
        Fixed Entity Framework provider <code class="literal">GROUP BY</code>
        clause generation by adding all group-by keys to the
        <code class="literal">SELECT</code> statement.
       (Bug #46742, Bug #12622129)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-6"></a>D.3.3.4. Changes in MySQL Connector/Net 6.3.6 (03 January 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.5.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Changed how the procedure schema collection is retrieved. If the
        connection string contains “<span class="quote"><code class="literal">use procedure
        bodies=true</code></span>” then a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> is performed on the
        <code class="literal">mysql.proc</code> table directly, as this is up to
        50 times faster than the current Information Schema
        implementation. If the connection string contains
        “<span class="quote"><code class="literal">use procedure bodies=false</code></span>”,
        then the Information Schema collection is queried.
       (Bug #36694)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MembershipProvider</code> did not generate hashes
        correctly if the algorithm was keyed. The Key of the algorithm
        should have been set if the <code class="literal">HashAlgorithm</code> was
        <code class="literal">KeyedHashAlgorithm</code>.
       (Bug #58906)</p></li><li><p>
        Code introduced to fix bug #54863 proved problematic on .NET
        version 3.5 and above.
       (Bug #58853)</p></li><li><p>
        The <code class="literal">MySqlTokenizer</code> contained unnecessary
        <code class="literal">Substring</code> and <code class="literal">Trim</code> calls:
      </p><pre class="programlisting">string token = sql.Substring(startIndex, stopIndex - startIndex).Trim();</pre><p>
        The variable <code class="literal">token</code> was not used anywhere in
        the code.
       (Bug #58757)</p></li><li><p>
        <code class="literal">MySqlCommand.ExecuteReader(CommandBehavior)</code>
        threw a <code class="literal">NullReferenceException</code> when being
        called with <code class="literal">CommandBehavior.CloseConnection</code>,
        if the SQL statement contained a syntax error, or contained
        invalid data such as an invalid column name.
       (Bug #58652)</p></li><li><p>
        <code class="literal">ReadFieldLength()</code> returned incorrect value
        for <code class="literal">BIGINT</code> autoincrement columns.
       (Bug #58373)</p></li><li><p>
        When attempting to create an ADO.NET Entity Data Model, MySQL
        connections were not available.
       (Bug #58278)</p></li><li><p>
        MySQL Connector/Net did not support the <code class="literal">utf8mb4</code> character
        set. When attempting to connect to <code class="literal">utf8mb4</code>
        tables or columns, an exception
        <code class="literal">KeyNotFoundException</code> was generated.
       (Bug #58244)</p></li><li><p>
        Installation of MySQL Connector/Net 6.3.5 failed. The error reported was:
      </p><pre class="programlisting">MySQL Connector Net 6.3.5 Setup Wizard ended 
prematurely because of an error. Your system has not been modified.</pre><p>(Bug #57654)</p></li><li><p>
        When the tracing driver was used and an SQL statement was longer
        than 300 characters, an ArgumentOutOfRangeExcpetion occurred if
        the statement also contained a quoted character, and the 300th
        character was in the middle of a quoted token.
       (Bug #57641)</p></li><li><p>
        Calling the <code class="literal">Read()</code> method on a
        <code class="literal">DataReader</code> obtained from
        <code class="literal">MySqlHelper.ExecuteReader</code> generated the
        following exception:
      </p><pre class="programlisting">Unhandled Exception: MySql.Data.MySqlClient.MySqlException: Invalid attempt to R
ead when reader is closed.
   at MySql.Data.MySqlClient.MySqlDataReader.Read()
   at MySqlTest.MainClass.Main(String[] args)</pre><p>(Bug #57501)</p></li><li><p>
        Default values returned for text columns were not quoted. This
        meant that the <code class="literal">COLUMN_DEFAULT</code> field of the
        <code class="literal">GetSchema</code> columns collection did not return a
        valid SQL expression.
       (Bug #56509)</p></li><li><p>
        When using MySQL Connector/Net on Mono 2.8 using .NET 4.0, attempting to
        connect to a MySQL database generated the following exception:
      </p><pre class="programlisting">Unhandled Exception: System.MissingMethodException: Method not found:
 'System.Data.Common.DbConnection.EnlistTransaction'.
  at (wrapper remoting-invoke-with-check)
 MySql.Data.MySqlClient.MySqlConnection:Open ()</pre><p>(Bug #56509)</p></li><li><p>
        MySQL Connector/Net for .NET/Mono attempted to dynamically load the assembly
        <code class="filename">Mono.Posix.dll</code> when a Unix socket was used
        to connect to the server. This failed and the connector was not
        able to use a Unix socket unless the
        <code class="filename">Mono.Posix.dll</code> assembly was previously
        loaded by the program.
       (Bug #56410)</p></li><li><p>
        The ADO.NET Entity Data Model could not add stored procedures
        from MySQL Server 5.0.45 but worked fine using MySQL Server 5.1.
       (Bug #55349)</p></li><li><p>
        In the ADO.NET Entity Data Model Wizard, the time to update a
        model scaled abnormally as the number of entities increased.
       (Bug #48791, Bug #12596237)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-5"></a>D.3.3.5. Changes in MySQL Connector/Net 6.3.5 (12 October 2010)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.4.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A typed dataset did not get the table name.
       (Bug #57894, Bug #11764989)</p></li><li><p>
        Setting <code class="literal">MySqlCommand.CommandTimeout</code> to 0 had
        no effect. It should have resulted in an infinite timeout.
       (Bug #57265)</p></li><li><p>
        When performing a row-by-row update, only the first row was
        updated and all other rows were ignored.
       (Bug #57092)</p></li><li><p>
        MySQL Connector/Net experienced two problems as follows:
        </p><div class="orderedlist"><ol type="1"><li><p>
              A call to
              <code class="literal">System.Data.Objects.ObjectContext.DatabaseExists()</code>
              returned false, even if the database existed.
            </p></li><li><p>
              A call to
              <code class="literal">System.Data.Objects.ObjectContext.CreateDatabase()</code>
              created a database but with a name other than the one
              specified in the connection string. It then failed to use
              it when EDM objects were processed.
            </p></li></ol></div><p>
       (Bug #56859)</p></li><li><p>
        Setting the <code class="literal">Default Command Timeout</code>
        connection string option had no effect.
       (Bug #56806)</p></li><li><p>
        When an output parameter was declared as type
        <code class="literal">MySqlDbType.Bit</code>, it failed to return with the
        correct value.
       (Bug #56756)</p></li><li><p>
        <code class="literal">MySqlHelper.ExecuteReader</code> did not include an
        overload accepting <code class="literal">MySqlParameter</code> objects
        when using a <code class="literal">MySqlConnection</code>. However,
        <code class="literal">MySqlHelper</code> did include an overload for
        <code class="literal">MySqlParameter</code> objects when using a string
        object containing the connection string to the database.
       (Bug #56755)</p></li><li><p>
        MySQL Connector/Net 6.1.3 (GA) would not install on a Windows Server 2008
        (Web Edition) clean installation. There were two problems:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If .NET framework version 4.0 was not installed,
            installation failed because c:\windows\microsoft.net\v4.0.*
            did not exist.
          </p></li><li><p>
            If .NET 4.0 was subsequently installed, then the following
            error was generated:
</p><pre class="programlisting">InstallFiles: File: MySql.Data.Entity.dll,  Directory: ,  Size: 229888
MSI (s) (E0:AC) [15:20:26:196]: Assembly Error:The assembly is built by a runtime newer
than the currently loaded runtime, and cannot be loaded.
MSI (s) (E0:AC) [15:20:26:196]: Note: 1: 1935 2:  3: 0x8013101B 4: IStream 5: Commit 6: 
MSI (s) (E0:A0) [15:20:26:196]: Note: 1: 1304 2: MySql.Data.Entity.dll 
Error 1304. Error writing to file: MySql.Data.Entity.dll. Verify that you have access to
that directory.</pre><p>
          </p></li></ul></div><p>(Bug #56580)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-4"></a>D.3.3.6. Changes in MySQL Connector/Net 6.3.4 (01 September 2010, Generally Available)</h4></div></div></div><p class="release-level">
        First GA release. This release fixes bugs since 6.3.3.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The calculation of <code class="literal">lockAge</code> in the Session
        Provider sometimes generated a
        <code class="literal">System.Data.SqlTypes.SqlNullValueException</code>.
       (Bug #55701)</p></li><li><p>
        Attempting to read <code class="literal">Double.MinValue</code> from a
        <code class="literal">DOUBLE</code> column in MySQL table generated the
        following exception:
      </p><pre class="programlisting">System.OverflowException : Value was either too large or too small for a Double.

--OverflowException
at System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo
numfmt)
at MySql.Data.Types.MySqlDouble.MySql.Data.Types.IMySqlValue.ReadValue(MySqlPacket
packet, Int64 length, Boolean nullVal)
at MySql.Data.MySqlClient.NativeDriver.ReadColumnValue(Int32 index, MySqlField field,
IMySqlValue valObject)
at MySql.Data.MySqlClient.ResultSet.ReadColumnData(Boolean outputParms)
at MySql.Data.MySqlClient.ResultSet.NextRow(CommandBehavior behavior)
at MySql.Data.MySqlClient.MySqlDataReader.Read()</pre><p>(Bug #55644)</p></li><li><p>
        Calling <code class="literal">MySqlDataAdapter.Update(DataTable)</code>
        resulted in an unacceptable performance hit when updating large
        amounts of data.
       (Bug #55609)</p></li><li><p>
        If using MySQL Server 5.0.x it was not possible to alter stored
        routines in Visual Studio. If the stored routine was clicked,
        and the context sensitive menu option, Alter Routine, selected,
        the following error was generated:
      </p><pre class="programlisting">Unable to load object with error: Object reference not
set to an instance of an object</pre><p>(Bug #55170)</p></li><li><p>
        EventLog was not disposed in the SessionState provider.
       (Bug #52550)</p></li><li><p>
        When attempting to carry out an operation such as:
      </p><pre class="programlisting">from p in db.Products where p.PostedDate&gt;=DateTime.Now select p;</pre><p>
        Where <code class="literal">p.PostedDate</code> is a
        <code class="literal">DateTimeOffset</code>, and the underlying column
        type is a <code class="literal">TIMESTAMP</code>, the following exception
        was generated:
      </p><pre class="programlisting">MySqlException occurred
Unable to serialize date/time value</pre><p>
        MySQL Connector/Net has now been changed so that all
        <code class="literal">TIMESTAMP</code> columns will be surfaced as
        <code class="literal">DateTime</code>.
       (Bug #52550)</p></li><li><p>
        Stored procedure enumeration code generated an error if a
        procedure was used in a dataset that did not return any
        resultsets.
       (Bug #50671)</p></li><li><p>
        The <code class="literal">INSERT</code> command was significantly slower
        with MySQL Connector/Net 6.x compared to 5.x, when compression was enabled.
       (Bug #48243)</p></li><li><p>
        Opening a connection in the Visual Studio Server Explorer and
        choosing to alter an existing routine required another
        authentication at the server.
       (Bug #44715)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-3"></a>D.3.3.7. Changes in MySQL Connector/Net 6.3.3 (27 July 2010)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.2.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlDataAdapter.Update()</code> generated
        concurrency violations for custom stored procedure driven update
        commands that used
        <code class="literal">UpdateRowSource.FirstReturnedRecord</code>.
       (Bug #54895)</p></li><li><p>
        Several calls to <code class="literal">DataAdapter.Update()</code> with
        intervening changes to <code class="literal">DataTable</code> resulted in
        <code class="literal">ConcurrencyException</code> exceptions being
        generated.
       (Bug #54863)</p></li><li><p>
        MySQL Connector/Net generated a null reference exception when
        <code class="literal">TransactionScope</code> was used by multiple
        threads.
       (Bug #54681)</p></li><li><p>
        The icon for the MySQL Web Configuration Tool was not displayed
        in Visual Studio for Web Application Projects.
       (Bug #54571)</p></li><li><p>
        The <code class="literal">MySqlHelper</code> object did not have an
        overloaded version of the <code class="literal">ExecuteReader</code>
        method that accepted a <code class="literal">MySqlConnection</code>
        object.
       (Bug #54570)</p></li><li><p>
        If <code class="literal">MySqlDataAdapter</code> was used with an
        <code class="literal">INSERT</code> command where the
        <code class="literal">VALUES</code> clause contained an expression with
        parentheses in it, and set the
        <code class="literal">adapter.UpdateBatchSize</code> parameter to be
        greater than one, then the call to
        <code class="literal">adapter.Update</code> either generated an exception
        or failed to batch the commands, executing each insert
        individually.
       (Bug #54386)</p></li><li><p>
        The method
        <code class="literal">MySql.Data.Common.QueryNormalizer.CollapseValueList</code>
        generated an <code class="literal">ArgumentOutOfRangeException</code>.
       (Bug #54152, Bug #53865)</p></li><li><p>
        MySQL Connector/Net did not process <code class="literal">Thread.Abort()</code>
        correctly, and failed to cancel queries currently running on the
        server.
       (Bug #54012)</p></li><li><p>
        MySQL Connector/Net 6.3.2 failed to install on Windows Vista.
       (Bug #53975)</p></li><li><p>
        Garbage Collector disposal of a
        <code class="literal">MySqlConnection</code> object caused the following
        exception:
      </p><pre class="programlisting">System.IO.EndOfStreamException: Attempted to read past the end of the stream.
MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset,
Int32 count)
MySql.Data.MySqlClient.MySqlStream.LoadPacket()
Outer Exception Reading from the stream has failed.
...</pre><p>(Bug #53457)</p></li><li><p>
        MySQL Connector/Net did not throw an <code class="literal">EndOfStreamException</code>
        exception when <code class="literal">net_write_timeout</code> was
        exceeded.
       (Bug #53439)</p></li><li><p>
        After a timeout exception, if an attempt was made to reuse a
        connection returned to the connection pool the following
        exception was generated:
      </p><pre class="programlisting">[MySqlException (0x80004005): There is already an open DataReader associated with this
Connection which must be closed first.]
   MySql.Data.MySqlClient.MySqlCommand.CheckState() +278
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) +43
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader() +6
   Controls.SimpleCommand.ExecuteReader(String SQL) in ...:323
   Albums.GetImagesByAlbum(SimpleCommand Cmd, Int32 iAlbum, String Order, String Limit)
in ...:13
   Forecast.Page_Load(Object sender, EventArgs e) in ...:70
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean
includeStagesAfterAsyncPoint) +627</pre><p>(Bug #53357)</p></li><li><p>
        Membership schema creation failed if the default schema
        collation was not Latin1.
       (Bug #53174)</p></li><li><p>
        The MySQL Connector/Net installation failed due to
        <code class="filename">machine.config</code> files not being present in
        configuration folders.
      </p><p>
        MySQL Connector/Net has been changed to skip over configuration folders that
        do not contain a <code class="filename">machine.config</code> file.
       (Bug #52352)</p></li><li><p>
        <code class="literal">CHAR(36)</code> columns were not recognized as GUIDs
        when used in views with entity models.
       (Bug #52085)</p></li><li><p>
        When an application was subjected to increased concurrent load,
        MySQL Connector/Net generated the following error when calling stored
        procedures:
      </p><pre class="programlisting">A DataTable named \'Procedure Parameters\'
already belongs to this DataSet.
      </pre><p>(Bug #49118)</p></li><li><p>
        When the connection string option “<span class="quote">Connection Reset =
        True</span>” was used, a connection reset used the previously
        used encoding for the subsequent authentication operation. This
        failed, for example, if UCS2 was used to read the last column
        before the reset.
       (Bug #47153)</p></li><li><p>
        When batching was used in <code class="literal">MySqlDataAdapter</code>, a
        connection was not opened automatically in
        <code class="literal">MySqlDataAdapter.Update()</code>. This resulted in
        an <code class="literal">InvalidOperationException</code> exception being
        generated, with the message text “<span class="quote">connection must be valid
        and open</span>”.
      </p><p>
        MySQL Connector/Net has been changed to behave more like SQL Server: if the
        connection is closed, it is opened for the duration of update
        operation.
       (Bug #38411)</p></li><li><p>
        Database name was emitted into typed datasets. This prevented
        users using the configured default database.
       (Bug #33870)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-2"></a>D.3.3.8. Changes in MySQL Connector/Net 6.3.2 (24 May 2010, beta)</h4></div></div></div><p class="release-level">
        First Beta release. This release fixes bugs since 6.3.1.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Procedure cacheing had a problem whereby if you created a
        procedure, dropped it, and recreated it with a different number
        of parameters an exception was generated.
      </p><p>
        MySQL Connector/Net has been changed so that if the procedure is recreated
        with a different number of parameters, it will still be
        recognized.
       (Bug #52562)</p></li><li><p>
        MySQL Connector/Net has been changed to include
        <code class="literal">MySqlDataReader.GetFieldType(string
        columnname)</code>. Further,
        <code class="literal">MySqlDataReader.GetOrdinal()</code> now includes the
        name of the column in the exception if the column is not found.
       (Bug #47467)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        After an exception, the internal datareader,
        <code class="literal">MySqlCommand.Connection.Reader</code>, was not
        properly closed (it was not set to null). If another query was
        subsequently executed on that command object an exception was
        generated with the message “<span class="quote">There is already an open
        DataReader associated with this Connection which must be closed
        first.</span>”
       (Bug #55558)</p></li><li><p>
        MySQL Connector/Net generated an exception when used to read a
        <code class="literal">TEXT</code> column containing more than 32767 bytes.
       (Bug #54040)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">MySqlConnection.Abort()</code> method
        contained a <code class="literal">try...catch</code> construct, with an
        empty <code class="literal">catch</code> block. This meant that any
        exception generated at this point would not be caught.
       (Bug #52769)</p></li><li><p>
        The procedure cache affected the MySQL Connector/Net performance, reducing it
        by around 65%. This was due to unnecessary calls of
        <code class="literal">String.Format()</code>, related to debug logging.
        Even though the logging was disabled the string was still being
        formatted, resulting in impaired performance.
       (Bug #52475)</p></li><li><p>
        If <code class="literal">FunctionsReturnString=true</code> was used in the
        connection string, the decimal separator (according to locale)
        was not interpreted.
       (Bug #52187)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">LoadCharsetMap()</code> function of
        the <code class="literal">CharSetMap</code> class set the following
        incorrect mapping:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("latin1", 1));</pre><p>
        This meant that, for example, the Euro sign was not handled
        correctly.
      </p><p>
        The correct mapping should have been:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("windows-1252", 1));</pre><p>
        This is because MySQL's <code class="literal">latin1</code> character set
        is the same as the <code class="literal">windows-cp1252</code> character
        set and it extends the official ISO 8859-1 or IANA latin1.
       (Bug #51927)</p></li><li><p>
        A non-terminated string in SQL threw a CLR exception rather than
        a syntax exception.
       (Bug #51788)</p></li><li><p>
        When calling <code class="literal">ExecuteNonQuery</code> on a command
        object, the following exception occurred:
      </p><pre class="programlisting">Index and length must refer to a location within the string.
Parameter name: length</pre><p>(Bug #51610)</p></li><li><p>
        MySQL Connector/Net 6.3.1 failed to install.
       (Bug #51407, Bug #51604)</p></li><li><p>
        When using table per type inheritance and listing the contents
        of the parent table, the result of the query was a list of child
        objects, even though there was no related child record with the
        same parent Id.
       (Bug #49850)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-1"></a>D.3.3.9. Changes in MySQL Connector/Net 6.3.1 (02 March 2010)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.3.0.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/Net was not compatible with Visual Studio wizards that
        used square brackets to delimit symbols.
      </p><p>
        Connector/Net has been changed to include a new connection
        string option <code class="literal">Sql Server mode</code> that supports
        use of square brackets to delimit symbols.
       (Bug #35852)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Specifying a connection string where an option had no value
        generated an error, rather than the value being set to the
        default. For example, a connection string such as the following
        would result in an error:
      </p><pre class="programlisting">server=localhost;user=root;compress=;database=test;port=3306;password=123456;</pre><p>(Bug #51209)</p></li><li><p>
        The method <code class="literal">Command.TrimSemicolons</code> used
        <code class="literal">StringBuilder</code>, and therefore allocated memory
        for the query even if it did not need to be trimmed. This led to
        excessive memory consumption when executing a number of large
        queries.
       (Bug #51149)</p></li><li><p>
        <code class="literal">MySqlCommand.Parameters.Clear()</code> did not work.
       (Bug #50444)</p></li><li><p>
        Binary Columns were not displayed in the Query Builder of Visual
        Studio.
       (Bug #50171)</p></li><li><p>
        When the <code class="literal">UpdateBatchSize</code> property was set to
        a value greater than 1, only the first row was applied to the
        database.
       (Bug #50123)</p></li><li><p>
        When trying to create stored procedures from an SQL script, a
        <code class="literal">MySqlException</code> was thrown when attempting to
        redefine the <code class="literal">DELIMITER</code>:
      </p><pre class="programlisting">        MySql.Data.MySqlClient.MySqlException was unhandled
        Message="You have an error in your SQL syntax; check the manual that corresponds to your
        MySQL server version for the right syntax to use near 'DELIMITER' at line 1"
        Source="MySql.Data"
        ErrorCode=-2147467259
        Number=1064
        StackTrace:
        à MySql.Data.MySqlClient.MySqlStream.ReadPacket()
        à MySql.Data.MySqlClient.NativeDriver.ReadResult(UInt64&amp; affectedRows, Int64&amp;
        lastInsertId)
        à MySql.Data.MySqlClient.MySqlDataReader.GetResultSet()
        à MySql.Data.MySqlClient.MySqlDataReader.NextResult()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
      à MySql.Data.MySqlClient.MySqlScript.Execute()</pre><p>
        Note: The <code class="literal">MySqlScript</code> class has been fixed to
        support the delimiter statement as it is found in SQL scripts.
       (Bug #46429)</p></li><li><p>
        A connection string set in <code class="filename">web.config</code> could
        not be reused after Visual Studio 2008 Professional was shut
        down. It continued working for the existing controls, but did
        not work for new controls added.
       (Bug #41629)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-3-0"></a>D.3.3.10. Changes in MySQL Connector/Net 6.3.0 (16 February 2010, alpha)</h4></div></div></div><p class="release-level">
        First alpha release of 6.3.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Nested transaction scopes were not supported. MySQL Connector/Net now
        implements nested transaction scopes. A per-thread stack of
        scopes is maintained, which is necessary to handle nested scopes
        with the <code class="literal">RequiresNew</code> or
        <code class="literal">Suppress</code> options.
       (Bug #45098)</p></li><li><p>
        Support for MySQL Server 4.1 has been removed from MySQL Connector/Net
        starting with version 6.3.0. The connector will now throw an
        exception if you try to connect to a server of version less than
        5.0.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When adding a data set in Visual Studio 2008, the following
        error was generated:
      </p><pre class="programlisting">Relations couldn't be addded. Column 'REFERENCED_TABLE_CATALOG' does not belong to table.</pre><p>
        This was due to a 'REFERENCED_TABLE_CATALOG' column not being
        included in the foreign keys collection.
       (Bug #48974)</p></li><li><p>
        Attempting to execute a load data local infile on a file where
        the user did not have write permissions, or the file was open in
        an editor gave an access denied error.
       (Bug #48944)</p></li><li><p>
        The method <code class="literal">MySqlDataReader.GetSchemaTable()</code>
        returned 0 in the <code class="literal">NumericPrecision</code> field for
        decimal and newdecimal columns.
       (Bug #48171)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-6-2-x"></a>D.3.4. Changes in MySQL Connector/Net Version 6.2.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-2-6">D.3.4.1. Changes in MySQL Connector/Net 6.2.6 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-5">D.3.4.2. Changes in MySQL Connector/Net 6.2.5 (01 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-4">D.3.4.3. Changes in MySQL Connector/Net 6.2.4 (30 August 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-3">D.3.4.4. Changes in MySQL Connector/Net 6.2.3 (10 April 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-2">D.3.4.5. Changes in MySQL Connector/Net 6.2.2 (22 December 2009, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-1">D.3.4.6. Changes in MySQL Connector/Net 6.2.1 (16 November 2009, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-2-0">D.3.4.7. Changes in MySQL Connector/Net 6.2.0 (21 October 2009, alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-6"></a>D.3.4.1. Changes in MySQL Connector/Net 6.2.6 (Not yet released)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.2.5.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlScript</code> was modified to enable correct
        processing of the <code class="literal">DELIMITER</code> command when not
        followed by a new line.
       (Bug #61680, Bug #12732279)</p></li><li><p>
        The ASP.NET membership provider was modified to create and query
        all related tables using lowercase names.
       (Bug #61108, Bug #12702009)</p></li><li><p>
        On Model First changed column types generated in SQL scripts to
        produce more suitable <code class="literal">MySql</code> types.
       (Bug #59244, Bug #12707104)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-5"></a>D.3.4.2. Changes in MySQL Connector/Net 6.2.5 (01 July 2011)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.2.4.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">SchemaDefinition-5.5.ssdl</code> was modified to
        treat <code class="literal">CHAR(36)</code> columns as a GUID.
       (Bug #61657, Bug #12708208)</p></li><li><p>
        <code class="literal">SqlFragment.QuoteIdentifier</code> was modified to
        add MySQL quotes around identifiers.
       (Bug #61635, Bug #12707285)</p></li><li><p>
        Modified <code class="literal">MySqlConnection.BeginTransaction</code> to
        throw a <code class="literal">NotSupportedException</code> for
        <code class="literal">Snapshot</code> isolation level.
       (Bug #61589, Bug #12698020)</p></li><li><p>
        <code class="literal">MysqlDataReader.GetSchemaTable</code> returned
        incorrect values and types.
       (Bug #59989, Bug #11776346)</p></li><li><p>
        All queries other than <code class="literal">INSERT</code> were executed
        individually instead of as a batch even though batching was
        enabled for the connection.
       (Bug #59616, Bug #11850286)</p></li><li><p>
        MySQL Connector/Net generated an exception when executing a query consisting
        of ';', for example:
      </p><pre class="programlisting">mycmd(";",mycon)
mycmd.executenonquery()</pre><p>
        The exception generated was:
      </p><pre class="programlisting">System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at MySql.Data.MySqlClient.MySqlCommand.TrimSemicolons(String sql)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()</pre><p>(Bug #59537, Bug #11766433)</p></li><li><p>
        Setting <code class="literal">Membership.ApplicationName</code> had no
        effect.
       (Bug #59438, Bug #11770465)</p></li><li><p>
        A <code class="literal">NullReferenceException</code> was thrown on
        disposal of a <code class="literal">TransactionScope</code> object.
       (Bug #59346, Bug #11766272)</p></li><li><p>
        <code class="literal">MembershipProvider</code> did not generate hashes
        correctly if the algorithm was keyed. The Key of the algorithm
        should have been set if the <code class="literal">HashAlgorithm</code> was
        <code class="literal">KeyedHashAlgorithm</code>.
       (Bug #58906)</p></li><li><p>
        Code introduced to fix bug #54863 proved problematic on .NET
        version 3.5 and above.
       (Bug #58853)</p></li><li><p>
        The <code class="literal">MySqlTokenizer</code> contained unnecessary
        <code class="literal">Substring</code> and <code class="literal">Trim</code> calls:
      </p><pre class="programlisting">string token = sql.Substring(startIndex, stopIndex - startIndex).Trim();</pre><p>
        The variable <code class="literal">token</code> was not used anywhere in
        the code.
       (Bug #58757)</p></li><li><p>
        <code class="literal">MySqlCommand.ExecuteReader(CommandBehavior)</code>
        threw a <code class="literal">NullReferenceException</code> when being
        called with <code class="literal">CommandBehavior.CloseConnection</code>,
        if the SQL statement contained a syntax error, or contained
        invalid data such as an invalid column name.
       (Bug #58652)</p></li><li><p>
        <code class="literal">ReadFieldLength()</code> returned incorrect value
        for <code class="literal">BIGINT</code> autoincrement columns.
       (Bug #58373)</p></li><li><p>
        MySQL Connector/Net did not support the <code class="literal">utf8mb4</code> character
        set. When attempting to connect to <code class="literal">utf8mb4</code>
        tables or columns, an exception
        <code class="literal">KeyNotFoundException</code> was generated.
       (Bug #58244)</p></li><li><p>
        A typed dataset did not get the table name.
       (Bug #57894, Bug #11764989)</p></li><li><p>
        Setting <code class="literal">MySqlCommand.CommandTimeout</code> to 0 had
        no effect. It should have resulted in an infinite timeout.
       (Bug #57265)</p></li><li><p>
        When performing a row-by-row update, only the first row was
        updated and all other rows were ignored.
       (Bug #57092)</p></li><li><p>
        Setting the <code class="literal">Default Command Timeout</code>
        connection string option had no effect.
       (Bug #56806)</p></li><li><p>
        When an output parameter was declared as type
        <code class="literal">MySqlDbType.Bit</code>, it failed to return with the
        correct value.
       (Bug #56756)</p></li><li><p>
        <code class="literal">MySqlHelper.ExecuteReader</code> did not include an
        overload accepting <code class="literal">MySqlParameter</code> objects
        when using a <code class="literal">MySqlConnection</code>. However,
        <code class="literal">MySqlHelper</code> did include an overload for
        <code class="literal">MySqlParameter</code> objects when using a string
        object containing the connection string to the database.
       (Bug #56755)</p></li><li><p>
        Default values returned for text columns were not quoted. This
        meant that the <code class="literal">COLUMN_DEFAULT</code> field of the
        <code class="literal">GetSchema</code> columns collection did not return a
        valid SQL expression.
       (Bug #56509)</p></li><li><p>
        MySQL Connector/Net for .NET/Mono attempted to dynamically load the assembly
        <code class="filename">Mono.Posix.dll</code> when a Unix socket was used
        to connect to the server. This failed and the connector was not
        able to use a Unix socket unless the
        <code class="filename">Mono.Posix.dll</code> assembly was previously
        loaded by the program.
       (Bug #56410)</p></li><li><p>
        Modified <code class="literal">ProviderManifest.xml</code> to map
        <code class="literal">TIMESTAMP</code> database columns to the
        <code class="literal">DateTime</code> .NET type.
       (Bug #55351, Bug #12652602)</p></li><li><p>
        The ADO.NET Entity Data Model could not add stored procedures
        from MySQL Server 5.0.45 but worked fine using MySQL Server 5.1.
       (Bug #55349)</p></li><li><p>
        Fixed Entity Framework provider <code class="literal">GROUP BY</code>
        clause generation by adding all group-by keys to the
        <code class="literal">SELECT</code> statement.
       (Bug #46742, Bug #12622129)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-4"></a>D.3.4.3. Changes in MySQL Connector/Net 6.2.4 (30 August 2010)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.2.3.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Procedure cacheing had a problem whereby if you created a
        procedure, dropped it, and recreated it with a different number
        of parameters an exception was generated.
      </p><p>
        MySQL Connector/Net has been changed so that if the procedure is recreated
        with a different number of parameters, it will still be
        recognized.
       (Bug #52562)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The calculation of <code class="literal">lockAge</code> in the Session
        Provider sometimes generated a
        <code class="literal">System.Data.SqlTypes.SqlNullValueException</code>.
       (Bug #55701)</p></li><li><p>
        Attempting to read <code class="literal">Double.MinValue</code> from a
        <code class="literal">DOUBLE</code> column in MySQL table generated the
        following exception:
      </p><pre class="programlisting">System.OverflowException : Value was either too large or too small for a Double.

--OverflowException
at System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo
numfmt)
at MySql.Data.Types.MySqlDouble.MySql.Data.Types.IMySqlValue.ReadValue(MySqlPacket
packet, Int64 length, Boolean nullVal)
at MySql.Data.MySqlClient.NativeDriver.ReadColumnValue(Int32 index, MySqlField field,
IMySqlValue valObject)
at MySql.Data.MySqlClient.ResultSet.ReadColumnData(Boolean outputParms)
at MySql.Data.MySqlClient.ResultSet.NextRow(CommandBehavior behavior)
at MySql.Data.MySqlClient.MySqlDataReader.Read()</pre><p>(Bug #55644)</p></li><li><p>
        After an exception, the internal datareader,
        <code class="literal">MySqlCommand.Connection.Reader</code>, was not
        properly closed (it was not set to null). If another query was
        subsequently executed on that command object an exception was
        generated with the message “<span class="quote">There is already an open
        DataReader associated with this Connection which must be closed
        first.</span>”
       (Bug #55558)</p></li><li><p>
        If using MySQL Server 5.0.x it was not possible to alter stored
        routines in Visual Studio. If the stored routine was clicked,
        and the context sensitive menu option, Alter Routine, selected,
        the following error was generated:
      </p><pre class="programlisting">Unable to load object with error: Object reference not
set to an instance of an object</pre><p>(Bug #55170)</p></li><li><p>
        <code class="literal">MySqlDataAdapter.Update()</code> generated
        concurrency violations for custom stored procedure driven update
        commands that used
        <code class="literal">UpdateRowSource.FirstReturnedRecord</code>.
       (Bug #54895)</p></li><li><p>
        Several calls to <code class="literal">DataAdapter.Update()</code> with
        intervening changes to <code class="literal">DataTable</code> resulted in
        <code class="literal">ConcurrencyException</code> exceptions being
        generated.
       (Bug #54863)</p></li><li><p>
        The icon for the MySQL Web Configuration Tool was not displayed
        in Visual Studio for Web Application Projects.
       (Bug #54571)</p></li><li><p>
        The <code class="literal">MySqlHelper</code> object did not have an
        overloaded version of the <code class="literal">ExecuteReader</code>
        method that accepted a <code class="literal">MySqlConnection</code>
        object.
       (Bug #54570)</p></li><li><p>
        If <code class="literal">MySqlDataAdapter</code> was used with an
        <code class="literal">INSERT</code> command where the
        <code class="literal">VALUES</code> clause contained an expression with
        parentheses in it, and set the
        <code class="literal">adapter.UpdateBatchSize</code> parameter to be
        greater than one, then the call to
        <code class="literal">adapter.Update</code> either generated an exception
        or failed to batch the commands, executing each insert
        individually.
       (Bug #54386)</p></li><li><p>
        The method
        <code class="literal">MySql.Data.Common.QueryNormalizer.CollapseValueList</code>
        generated an <code class="literal">ArgumentOutOfRangeException</code>.
       (Bug #54152, Bug #53865)</p></li><li><p>
        MySQL Connector/Net did not process <code class="literal">Thread.Abort()</code>
        correctly, and failed to cancel queries currently running on the
        server.
       (Bug #54012)</p></li><li><p>
        Garbage Collector disposal of a
        <code class="literal">MySqlConnection</code> object caused the following
        exception:
      </p><pre class="programlisting">System.IO.EndOfStreamException: Attempted to read past the end of the stream.
MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset,
Int32 count)
MySql.Data.MySqlClient.MySqlStream.LoadPacket()
Outer Exception Reading from the stream has failed.
...</pre><p>(Bug #53457)</p></li><li><p>
        MySQL Connector/Net did not throw an <code class="literal">EndOfStreamException</code>
        exception when <code class="literal">net_write_timeout</code> was
        exceeded.
       (Bug #53439)</p></li><li><p>
        After a timeout exception, if an attempt was made to reuse a
        connection returned to the connection pool the following
        exception was generated:
      </p><pre class="programlisting">[MySqlException (0x80004005): There is already an open DataReader associated with this
Connection which must be closed first.]
   MySql.Data.MySqlClient.MySqlCommand.CheckState() +278
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) +43
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader() +6
   Controls.SimpleCommand.ExecuteReader(String SQL) in ...:323
   Albums.GetImagesByAlbum(SimpleCommand Cmd, Int32 iAlbum, String Order, String Limit)
in ...:13
   Forecast.Page_Load(Object sender, EventArgs e) in ...:70
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean
includeStagesAfterAsyncPoint) +627</pre><p>(Bug #53357)</p></li><li><p>
        Membership schema creation failed if the default schema
        collation was not Latin1.
       (Bug #53174)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">MySqlConnection.Abort()</code> method
        contained a <code class="literal">try...catch</code> construct, with an
        empty <code class="literal">catch</code> block. This meant that any
        exception generated at this point would not be caught.
       (Bug #52769)</p></li><li><p>
        EventLog was not disposed in the SessionState provider.
       (Bug #52550)</p></li><li><p>
        The procedure cache affected the MySQL Connector/Net performance, reducing it
        by around 65%. This was due to unnecessary calls of
        <code class="literal">String.Format()</code>, related to debug logging.
        Even though the logging was disabled the string was still being
        formatted, resulting in impaired performance.
       (Bug #52475)</p></li><li><p>
        If <code class="literal">FunctionsReturnString=true</code> was used in the
        connection string, the decimal separator (according to locale)
        was not interpreted.
       (Bug #52187)</p></li><li><p>
        Periodically the session provider threw an
        <code class="literal">SqlNullValueException</code> exception. When this
        happened, the row within the
        <code class="literal">my_aspnet_Sessions</code> table had
        <code class="literal">locked</code> always set to '1'. The locked status
        never changed back to '0' and the user experienced the exception
        on every page, until their browser was closed and reopened
        (recreating a new sessionID), or the <code class="literal">locked</code>
        value was manually changed to '0'.
       (Bug #52175)</p></li><li><p>
        <code class="literal">CHAR(36)</code> columns were not recognized as GUIDs
        when used in views with entity models.
       (Bug #52085)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">LoadCharsetMap()</code> function of
        the <code class="literal">CharSetMap</code> class set the following
        incorrect mapping:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("latin1", 1));</pre><p>
        This meant that, for example, the Euro sign was not handled
        correctly.
      </p><p>
        The correct mapping should have been:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("windows-1252", 1));</pre><p>
        This is because MySQL's <code class="literal">latin1</code> character set
        is the same as the <code class="literal">windows-cp1252</code> character
        set and it extends the official ISO 8859-1 or IANA latin1.
       (Bug #51927)</p></li><li><p>
        Stored procedure enumeration code generated an error if a
        procedure was used in a dataset that did not return any
        resultsets.
       (Bug #50671)</p></li><li><p>
        When an application was subjected to increased concurrent load,
        MySQL Connector/Net generated the following error when calling stored
        procedures:
      </p><pre class="programlisting">A DataTable named \'Procedure Parameters\'
already belongs to this DataSet.
      </pre><p>(Bug #49118)</p></li><li><p>
        In the ADO.NET Entity Data Model Wizard, the time to update a
        model scaled abnormally as the number of entities increased.
       (Bug #48791, Bug #12596237)</p></li><li><p>
        The <code class="literal">INSERT</code> command was significantly slower
        with MySQL Connector/Net 6.x compared to 5.x, when compression was enabled.
       (Bug #48243)</p></li><li><p>
        When the connection string option “<span class="quote">Connection Reset =
        True</span>” was used, a connection reset used the previously
        used encoding for the subsequent authentication operation. This
        failed, for example, if UCS2 was used to read the last column
        before the reset.
       (Bug #47153)</p></li><li><p>
        Opening a connection in the Visual Studio Server Explorer and
        choosing to alter an existing routine required another
        authentication at the server.
       (Bug #44715)</p></li><li><p>
        When batching was used in <code class="literal">MySqlDataAdapter</code>, a
        connection was not opened automatically in
        <code class="literal">MySqlDataAdapter.Update()</code>. This resulted in
        an <code class="literal">InvalidOperationException</code> exception being
        generated, with the message text “<span class="quote">connection must be valid
        and open</span>”.
      </p><p>
        MySQL Connector/Net has been changed to behave more like SQL Server: if the
        connection is closed, it is opened for the duration of update
        operation.
       (Bug #38411)</p></li><li><p>
        Database name was emitted into typed datasets. This prevented
        users using the configured default database.
       (Bug #33870)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-3"></a>D.3.4.4. Changes in MySQL Connector/Net 6.2.3 (10 April 2010)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.2.2.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net has been changed to include
        <code class="literal">MySqlDataReader.GetFieldType(string
        columnname)</code>. Further,
        <code class="literal">MySqlDataReader.GetOrdinal()</code> now includes the
        name of the column in the exception if the column is not found.
       (Bug #47467)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A non-terminated string in SQL threw a CLR exception rather than
        a syntax exception.
       (Bug #51788)</p></li><li><p>
        When calling <code class="literal">ExecuteNonQuery</code> on a command
        object, the following exception occurred:
      </p><pre class="programlisting">Index and length must refer to a location within the string.
Parameter name: length</pre><p>(Bug #51610)</p></li><li><p>
        Specifying a connection string where an option had no value
        generated an error, rather than the value being set to the
        default. For example, a connection string such as the following
        would result in an error:
      </p><pre class="programlisting">server=localhost;user=root;compress=;database=test;port=3306;password=123456;</pre><p>(Bug #51209)</p></li><li><p>
        The method <code class="literal">Command.TrimSemicolons</code> used
        <code class="literal">StringBuilder</code>, and therefore allocated memory
        for the query even if it did not need to be trimmed. This led to
        excessive memory consumption when executing a number of large
        queries.
       (Bug #51149)</p></li><li><p>
        <code class="literal">MySqlCommand.Parameters.Clear()</code> did not work.
       (Bug #50444)</p></li><li><p>
        When the <code class="literal">MySqlScript.execute()</code> method was
        called, the following exception was generated:
      </p><pre class="programlisting">InvalidOperationException : The CommandText property has not been properly initialized.</pre><p>(Bug #50344)</p></li><li><p>
        When using the Compact Framework the following exception
        occurred when attempting to connect to a MySQL Server:
      </p><pre class="programlisting">System.InvalidOperationException was unhandled
  Message="Timeouts are not supported on this stream."</pre><p>(Bug #50321)</p></li><li><p>
        Binary Columns were not displayed in the Query Builder of Visual
        Studio.
       (Bug #50171)</p></li><li><p>
        When the <code class="literal">UpdateBatchSize</code> property was set to
        a value greater than 1, only the first row was applied to the
        database.
       (Bug #50123)</p></li><li><p>
        When using table per type inheritance and listing the contents
        of the parent table, the result of the query was a list of child
        objects, even though there was no related child record with the
        same parent Id.
       (Bug #49850)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetUInt64</code> returned an
        incorrect value when reading a <code class="literal">BIGINT
        UNSIGNED</code> column containing a value greater than
        2147483647.
       (Bug #49794)</p></li><li><p>
        A <code class="literal">FormatException</code> was generated when an empty
        string was returned from a stored function.
       (Bug #49642)</p></li><li><p>
        When trying to create stored procedures from an SQL script, a
        <code class="literal">MySqlException</code> was thrown when attempting to
        redefine the <code class="literal">DELIMITER</code>:
      </p><pre class="programlisting">        MySql.Data.MySqlClient.MySqlException was unhandled
        Message="You have an error in your SQL syntax; check the manual that corresponds to your
        MySQL server version for the right syntax to use near 'DELIMITER' at line 1"
        Source="MySql.Data"
        ErrorCode=-2147467259
        Number=1064
        StackTrace:
        à MySql.Data.MySqlClient.MySqlStream.ReadPacket()
        à MySql.Data.MySqlClient.NativeDriver.ReadResult(UInt64&amp; affectedRows, Int64&amp;
        lastInsertId)
        à MySql.Data.MySqlClient.MySqlDataReader.GetResultSet()
        à MySql.Data.MySqlClient.MySqlDataReader.NextResult()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
      à MySql.Data.MySqlClient.MySqlScript.Execute()</pre><p>
        Note: The <code class="literal">MySqlScript</code> class has been fixed to
        support the delimiter statement as it is found in SQL scripts.
       (Bug #46429)</p></li><li><p>
        Calling a User Defined Function using Entity SQL in the Entity
        Framework caused a <code class="literal">NullReferenceException</code>.
       (Bug #45277)</p></li><li><p>
        A connection string set in <code class="filename">web.config</code> could
        not be reused after Visual Studio 2008 Professional was shut
        down. It continued working for the existing controls, but did
        not work for new controls added.
       (Bug #41629)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-2"></a>D.3.4.5. Changes in MySQL Connector/Net 6.2.2 (22 December 2009, Generally Available)</h4></div></div></div><p class="release-level">
        First GA release of 6.2. This release fixes bugs since 6.2.1.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When adding a data set in Visual Studio 2008, the following
        error was generated:
      </p><pre class="programlisting">Relations couldn't be addded. Column 'REFERENCED_TABLE_CATALOG' does not belong to table.</pre><p>
        This was due to a 'REFERENCED_TABLE_CATALOG' column not being
        included in the foreign keys collection.
       (Bug #48974)</p></li><li><p>
        Attempting to execute a load data local infile on a file where
        the user did not have write permissions, or the file was open in
        an editor gave an access denied error.
       (Bug #48944)</p></li><li><p>
        The method <code class="literal">MySqlDataReader.GetSchemaTable()</code>
        returned 0 in the <code class="literal">NumericPrecision</code> field for
        decimal and newdecimal columns.
       (Bug #48171)</p></li><li><p>
        MySQL Connector/Net generated an invalid operation exception during a
        transaction rollback:
      </p><pre class="programlisting">System.InvalidOperationException: Connection must be valid and open to rollback
transaction
   at MySql.Data.MySqlClient.MySqlTransaction.Rollback()
   at MySql.Data.MySqlClient.MySqlConnection.CloseFully()
   at
MySql.Data.MySqlClient.MySqlPromotableTransaction.System.Transactions.IPromotableSinglePhaseNotification.Rollback(SinglePhaseEnlistment
singlePhaseEnlistment)
...</pre><p>(Bug #35330)</p></li><li><p>
        Connection objects were not garbage collected when not in use.
       (Bug #31996)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-1"></a>D.3.4.6. Changes in MySQL Connector/Net 6.2.1 (16 November 2009, beta)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.2.0.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">MySqlParameter</code> class now has a property
        named <code class="literal">PossibleValues</code>. This property is NULL
        unless the parameter is created by
        <code class="literal">MySqlCommandBuilder.DeriveParameters</code>.
        Further, it will be NULL unless the parameter is of type enum or
        set - in this case it will be a list of strings that are the
        possible values for the column. This feature is designed as an
        aid to the developer.
       (Bug #48586)</p></li><li><p>
        Prior to MySQL Connector/Net 6.2,
        <code class="literal">MySqlCommand.CommandTimeout</code> included user
        processing time, that is processing time not related to direct
        use of the connector. Timeout was implemented through a .NET
        Timer, that triggered after <code class="literal">CommandTimeout</code>
        seconds.
      </p><p>
        MySQL Connector/Net 6.2 introduced timeouts that are aligned with how
        Microsoft handles <code class="literal">SqlCommand.CommandTimeout</code>.
        This property is the cumulative timeout for all network reads
        and writes during command execution or processing of the
        results. A timeout can still occur in the
        <code class="literal">MySqlReader.Read</code> method after the first row
        is returned, and does not include user processing time, only IO
        operations.
      </p><p>
        Further details on this can be found in the relevant
        <a href="http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx" target="_top">Microsoft
        documentation</a>.
      </p></li><li><p>
        Starting with MySQL Connector/Net 6.2, there is a background job that runs
        every three minutes and removes connections from pool that have
        been idle (unused) for more than three minutes. The pool cleanup
        frees resources on both client and server side. This is because
        on the client side every connection uses a socket, and on the
        server side every connection uses a socket and a thread.
      </p><p>
        Prior to this change, connections were never removed from the
        pool, and the pool always contained the peak number of open
        connections. For example, a web application that peaked at 1000
        concurrent database connections would consume 1000 threads and
        1000 open sockets at the server, without ever freeing up those
        resources from the connection pool.
      </p></li><li><p>
        MySQL Connector/Net now supports the processing of certificates when
        connecting to an SSL-enabled MySQL Server. For further
        information see the connection string option SSL Mode in the
        section <a href="connectors-apis.html#connector-net-connection-options" title="21.2.6. Connector/Net Connection String Options Reference">Section 21.2.6, “Connector/Net Connection String Options Reference”</a> and
        the tutorial <a href="connectors-apis.html#connector-net-tutorials-ssl" title="21.2.4.7. Tutorial: Using SSL with MySQL Connector/Net">Section 21.2.4.7, “Tutorial: Using SSL with MySQL Connector/Net”</a>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Cloning of <code class="literal">MySqlCommand</code> was not typesafe. To
        clone a <code class="literal">MySqlCommand</code> it was necessary to do:
      </p><pre class="programlisting">        MySqlCommand clone = (MySqlCommand)((ICloneable)comm).Clone();
      </pre><p>
        MySQL Connector/Net was changed so that it was possible to do:
      </p><pre class="programlisting">        MySqlCommand clone = comm.Clone();
      </pre><p>(Bug #48460)</p></li><li><p>
        When used, the <code class="literal">Encrypt</code> connection string
        option caused a “<span class="quote">Keyword not supported</span>” exception
        to be generated.
      </p><p>
        This option is in fact obsolete, and the option SSL Mode should
        be used instead. Although the <code class="literal">Encrypt</code> option
        has been fixed so that it does not generate an exception, it
        will be removed completely in version 6.4.
       (Bug #48290)</p></li><li><p>
        When building the <code class="literal">MySql.Data</code> project with
        .NET Framework 3.5 installed, the following build output was
        displayed:
      </p><pre class="programlisting">Project file contains ToolsVersion="4.0", which is not supported by this version of
MSBuild. Treating the project as if it had ToolsVersion="3.5".</pre><p>
        The project had been created using the .NET Framework 4.0, which
        was beta, instead of using the 3.5 framework.
       (Bug #48271)</p></li><li><p>
        It was not possible to retrieve a value from a MySQL server
        table, if the value was larger than that supported by the .NET
        type <code class="literal">System.Decimal</code>.
      </p><p>
        MySQL Connector/Net was changed to expose the <code class="literal">MySqlDecimal</code>
        type, along with the supporting method
        <code class="literal">GetMySqlDecimal</code>.
       (Bug #48100)</p></li><li><p>
        An entity model created from a schema containing a table with a
        column of type <code class="literal">UNSIGNED BIGINT</code> and a view of
        the table did not behave correctly. When an entity was created
        and mapped to the view, the column that was of type
        <code class="literal">UNSIGNED BIGINT</code> was displayed as
        <code class="literal">BIGINT</code>.
       (Bug #47872)</p></li><li><p>
        MySQL Connector/Net session support did not work with MySQL Server versions
        prior to 5.0, as the Session Provider used a call to
        <code class="literal">TIMESTAMPDIFF</code>, which was not available on
        servers prior to 5.0.
       (Bug #47219)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-2-0"></a>D.3.4.7. Changes in MySQL Connector/Net 6.2.0 (21 October 2009, alpha)</h4></div></div></div><p class="release-level">
        The first alpha release of 6.2.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When using a <code class="literal">BINARY(16)</code> column to represent a
        GUID and having specified “<span class="quote">old guids = true</span>” in the
        connection string, the values were returned correctly until a
        null value was encountered in that field. After the null value
        was encountered a format exception was thrown with the following
        message:
      </p><pre class="programlisting">Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).</pre><p>(Bug #47928)</p></li><li><p>
        The Session Provider created invalid “<span class="quote">session
        expires</span>” on a random basis.
      </p><p>
        This was due to the fact that the Session Provider was
        incorrectly reading from the root
        <code class="filename">web.config</code>, rather than from the
        application specific <code class="filename">web.config</code>.
       (Bug #47815)</p></li><li><p>
        When loading the <code class="filename">MySQLClient-mono.sln</code> file
        included with the Connector/Net source into Mono Develop, the
        following error occurred:
      </p><pre class="programlisting">/home/tbedford/connector-net-src/6.1/MySQLClient-mono.sln(22):
Unsupported or unrecognized project:
'/home/tbedford/connector-net-src/6.1/Installer/Installer.wixproj'</pre><p>
        If the file was modified to remove this problem, then attempting
        to build the solution generated the following error:
      </p><pre class="programlisting">/home/tbedford/connector-net-src/6.1/MySql.Data/Provider/Source/Connection.cs(280,46):
error CS0115: `MySql.Data.MySqlClient.MySqlConnection.DbProviderFactory' is marked as an
override but no suitable property found to override</pre><p>(Bug #47048)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-6-1-x"></a>D.3.5. Changes in MySQL Connector/Net Version 6.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-1-7">D.3.5.1. Changes in MySQL Connector/Net 6.1.7 (Not released, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-6">D.3.5.2. Changes in MySQL Connector/Net 6.1.6 (Not released, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-5">D.3.5.3. Changes in MySQL Connector/Net 6.1.5 (30 August 2010, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-4">D.3.5.4. Changes in MySQL Connector/Net 6.1.4 (28 April 2010, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-3">D.3.5.5. Changes in MySQL Connector/Net 6.1.3 (16 November 2009, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-2">D.3.5.6. Changes in MySQL Connector/Net 6.1.2 (08 September 2009, Generally Available)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-1">D.3.5.7. Changes in MySQL Connector/Net 6.1.1 (20 August 2009, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-1-0">D.3.5.8. Changes in MySQL Connector/Net 6.1.0 (15 July 2009, alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-7"></a>D.3.5.1. Changes in MySQL Connector/Net 6.1.7 (Not released, Generally Available)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.1.6.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlScript</code> was modified to enable correct
        processing of the <code class="literal">DELIMITER</code> command when not
        followed by a new line.
       (Bug #61680, Bug #12732279)</p></li><li><p>
        <code class="literal">SchemaDefinition-5.5.ssdl</code> was modified to
        treat <code class="literal">CHAR(36)</code> columns as a GUID.
       (Bug #61657, Bug #12708208)</p></li><li><p>
        <code class="literal">SqlFragment.QuoteIdentifier</code> was modified to
        add MySQL quotes around identifiers.
       (Bug #61635, Bug #12707285)</p></li><li><p>
        The ASP.NET membership provider was modified to create and query
        all related tables using lowercase names.
       (Bug #61108, Bug #12702009)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-6"></a>D.3.5.2. Changes in MySQL Connector/Net 6.1.6 (Not released, Generally Available)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.1.5.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Modified <code class="literal">MySqlConnection.BeginTransaction</code> to
        throw a <code class="literal">NotSupportedException</code> for
        <code class="literal">Snapshot</code> isolation level.
       (Bug #61589, Bug #12698020)</p></li><li><p>
        <code class="literal">MysqlDataReader.GetSchemaTable</code> returned
        incorrect values and types.
       (Bug #59989, Bug #11776346)</p></li><li><p>
        All queries other than <code class="literal">INSERT</code> were executed
        individually instead of as a batch even though batching was
        enabled for the connection.
       (Bug #59616, Bug #11850286)</p></li><li><p>
        MySQL Connector/Net generated an exception when executing a query consisting
        of ';', for example:
      </p><pre class="programlisting">mycmd(";",mycon)
mycmd.executenonquery()</pre><p>
        The exception generated was:
      </p><pre class="programlisting">System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at MySql.Data.MySqlClient.MySqlCommand.TrimSemicolons(String sql)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()</pre><p>(Bug #59537, Bug #11766433)</p></li><li><p>
        Setting <code class="literal">Membership.ApplicationName</code> had no
        effect.
       (Bug #59438, Bug #11770465)</p></li><li><p>
        <code class="literal">MembershipProvider</code> did not generate hashes
        correctly if the algorithm was keyed. The Key of the algorithm
        should have been set if the <code class="literal">HashAlgorithm</code> was
        <code class="literal">KeyedHashAlgorithm</code>.
       (Bug #58906)</p></li><li><p>
        Code introduced to fix bug #54863 proved problematic on .NET
        version 3.5 and above.
       (Bug #58853)</p></li><li><p>
        The <code class="literal">MySqlTokenizer</code> contained unnecessary
        <code class="literal">Substring</code> and <code class="literal">Trim</code> calls:
      </p><pre class="programlisting">string token = sql.Substring(startIndex, stopIndex - startIndex).Trim();</pre><p>
        The variable <code class="literal">token</code> was not used anywhere in
        the code.
       (Bug #58757)</p></li><li><p>
        <code class="literal">MySqlCommand.ExecuteReader(CommandBehavior)</code>
        threw a <code class="literal">NullReferenceException</code> when being
        called with <code class="literal">CommandBehavior.CloseConnection</code>,
        if the SQL statement contained a syntax error, or contained
        invalid data such as an invalid column name.
       (Bug #58652)</p></li><li><p>
        <code class="literal">ReadFieldLength()</code> returned incorrect value
        for <code class="literal">BIGINT</code> autoincrement columns.
       (Bug #58373)</p></li><li><p>
        MySQL Connector/Net did not support the <code class="literal">utf8mb4</code> character
        set. When attempting to connect to <code class="literal">utf8mb4</code>
        tables or columns, an exception
        <code class="literal">KeyNotFoundException</code> was generated.
       (Bug #58244)</p></li><li><p>
        A typed dataset did not get the table name.
       (Bug #57894, Bug #11764989)</p></li><li><p>
        Setting <code class="literal">MySqlCommand.CommandTimeout</code> to 0 had
        no effect. It should have resulted in an infinite timeout.
       (Bug #57265)</p></li><li><p>
        When performing a row-by-row update, only the first row was
        updated and all other rows were ignored.
       (Bug #57092)</p></li><li><p>
        Setting the <code class="literal">Default Command Timeout</code>
        connection string option had no effect.
       (Bug #56806)</p></li><li><p>
        When an output parameter was declared as type
        <code class="literal">MySqlDbType.Bit</code>, it failed to return with the
        correct value.
       (Bug #56756)</p></li><li><p>
        <code class="literal">MySqlHelper.ExecuteReader</code> did not include an
        overload accepting <code class="literal">MySqlParameter</code> objects
        when using a <code class="literal">MySqlConnection</code>. However,
        <code class="literal">MySqlHelper</code> did include an overload for
        <code class="literal">MySqlParameter</code> objects when using a string
        object containing the connection string to the database.
       (Bug #56755)</p></li><li><p>
        Default values returned for text columns were not quoted. This
        meant that the <code class="literal">COLUMN_DEFAULT</code> field of the
        <code class="literal">GetSchema</code> columns collection did not return a
        valid SQL expression.
       (Bug #56509)</p></li><li><p>
        MySQL Connector/Net for .NET/Mono attempted to dynamically load the assembly
        <code class="filename">Mono.Posix.dll</code> when a Unix socket was used
        to connect to the server. This failed and the connector was not
        able to use a Unix socket unless the
        <code class="filename">Mono.Posix.dll</code> assembly was previously
        loaded by the program.
       (Bug #56410)</p></li><li><p>
        Modified <code class="literal">ProviderManifest.xml</code> to map
        <code class="literal">TIMESTAMP</code> database columns to the
        <code class="literal">DateTime</code> .NET type.
       (Bug #55351, Bug #12652602)</p></li><li><p>
        The ADO.NET Entity Data Model could not add stored procedures
        from MySQL Server 5.0.45 but worked fine using MySQL Server 5.1.
       (Bug #55349)</p></li><li><p>
        Fixed Entity Framework provider <code class="literal">GROUP BY</code>
        clause generation by adding all group-by keys to the
        <code class="literal">SELECT</code> statement.
       (Bug #46742, Bug #12622129)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-5"></a>D.3.5.3. Changes in MySQL Connector/Net 6.1.5 (30 August 2010, Generally Available)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.1.4.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The calculation of <code class="literal">lockAge</code> in the Session
        Provider sometimes generated a
        <code class="literal">System.Data.SqlTypes.SqlNullValueException</code>.
       (Bug #55701)</p></li><li><p>
        Attempting to read <code class="literal">Double.MinValue</code> from a
        <code class="literal">DOUBLE</code> column in MySQL table generated the
        following exception:
      </p><pre class="programlisting">System.OverflowException : Value was either too large or too small for a Double.

--OverflowException
at System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo
numfmt)
at MySql.Data.Types.MySqlDouble.MySql.Data.Types.IMySqlValue.ReadValue(MySqlPacket
packet, Int64 length, Boolean nullVal)
at MySql.Data.MySqlClient.NativeDriver.ReadColumnValue(Int32 index, MySqlField field,
IMySqlValue valObject)
at MySql.Data.MySqlClient.ResultSet.ReadColumnData(Boolean outputParms)
at MySql.Data.MySqlClient.ResultSet.NextRow(CommandBehavior behavior)
at MySql.Data.MySqlClient.MySqlDataReader.Read()</pre><p>(Bug #55644)</p></li><li><p>
        If using MySQL Server 5.0.x it was not possible to alter stored
        routines in Visual Studio. If the stored routine was clicked,
        and the context sensitive menu option, Alter Routine, selected,
        the following error was generated:
      </p><pre class="programlisting">Unable to load object with error: Object reference not
set to an instance of an object</pre><p>(Bug #55170)</p></li><li><p>
        <code class="literal">MySqlDataAdapter.Update()</code> generated
        concurrency violations for custom stored procedure driven update
        commands that used
        <code class="literal">UpdateRowSource.FirstReturnedRecord</code>.
       (Bug #54895)</p></li><li><p>
        Several calls to <code class="literal">DataAdapter.Update()</code> with
        intervening changes to <code class="literal">DataTable</code> resulted in
        <code class="literal">ConcurrencyException</code> exceptions being
        generated.
       (Bug #54863)</p></li><li><p>
        The icon for the MySQL Web Configuration Tool was not displayed
        in Visual Studio for Web Application Projects.
       (Bug #54571)</p></li><li><p>
        The <code class="literal">MySqlHelper</code> object did not have an
        overloaded version of the <code class="literal">ExecuteReader</code>
        method that accepted a <code class="literal">MySqlConnection</code>
        object.
       (Bug #54570)</p></li><li><p>
        If <code class="literal">MySqlDataAdapter</code> was used with an
        <code class="literal">INSERT</code> command where the
        <code class="literal">VALUES</code> clause contained an expression with
        parentheses in it, and set the
        <code class="literal">adapter.UpdateBatchSize</code> parameter to be
        greater than one, then the call to
        <code class="literal">adapter.Update</code> either generated an exception
        or failed to batch the commands, executing each insert
        individually.
       (Bug #54386)</p></li><li><p>
        The method
        <code class="literal">MySql.Data.Common.QueryNormalizer.CollapseValueList</code>
        generated an <code class="literal">ArgumentOutOfRangeException</code>.
       (Bug #54152, Bug #53865)</p></li><li><p>
        Garbage Collector disposal of a
        <code class="literal">MySqlConnection</code> object caused the following
        exception:
      </p><pre class="programlisting">System.IO.EndOfStreamException: Attempted to read past the end of the stream.
MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset,
Int32 count)
MySql.Data.MySqlClient.MySqlStream.LoadPacket()
Outer Exception Reading from the stream has failed.
...</pre><p>(Bug #53457)</p></li><li><p>
        MySQL Connector/Net did not throw an <code class="literal">EndOfStreamException</code>
        exception when <code class="literal">net_write_timeout</code> was
        exceeded.
       (Bug #53439)</p></li><li><p>
        After a timeout exception, if an attempt was made to reuse a
        connection returned to the connection pool the following
        exception was generated:
      </p><pre class="programlisting">[MySqlException (0x80004005): There is already an open DataReader associated with this
Connection which must be closed first.]
   MySql.Data.MySqlClient.MySqlCommand.CheckState() +278
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) +43
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader() +6
   Controls.SimpleCommand.ExecuteReader(String SQL) in ...:323
   Albums.GetImagesByAlbum(SimpleCommand Cmd, Int32 iAlbum, String Order, String Limit)
in ...:13
   Forecast.Page_Load(Object sender, EventArgs e) in ...:70
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean
includeStagesAfterAsyncPoint) +627</pre><p>(Bug #53357)</p></li><li><p>
        Membership schema creation failed if the default schema
        collation was not Latin1.
       (Bug #53174)</p></li><li><p>
        EventLog was not disposed in the SessionState provider.
       (Bug #52550)</p></li><li><p>
        <code class="literal">CHAR(36)</code> columns were not recognized as GUIDs
        when used in views with entity models.
       (Bug #52085)</p></li><li><p>
        Stored procedure enumeration code generated an error if a
        procedure was used in a dataset that did not return any
        resultsets.
       (Bug #50671)</p></li><li><p>
        When an application was subjected to increased concurrent load,
        MySQL Connector/Net generated the following error when calling stored
        procedures:
      </p><pre class="programlisting">A DataTable named \'Procedure Parameters\'
already belongs to this DataSet.
      </pre><p>(Bug #49118)</p></li><li><p>
        In the ADO.NET Entity Data Model Wizard, the time to update a
        model scaled abnormally as the number of entities increased.
       (Bug #48791, Bug #12596237)</p></li><li><p>
        The <code class="literal">INSERT</code> command was significantly slower
        with MySQL Connector/Net 6.x compared to 5.x, when compression was enabled.
       (Bug #48243)</p></li><li><p>
        When the connection string option “<span class="quote">Connection Reset =
        True</span>” was used, a connection reset used the previously
        used encoding for the subsequent authentication operation. This
        failed, for example, if UCS2 was used to read the last column
        before the reset.
       (Bug #47153)</p></li><li><p>
        Opening a connection in the Visual Studio Server Explorer and
        choosing to alter an existing routine required another
        authentication at the server.
       (Bug #44715)</p></li><li><p>
        When batching was used in <code class="literal">MySqlDataAdapter</code>, a
        connection was not opened automatically in
        <code class="literal">MySqlDataAdapter.Update()</code>. This resulted in
        an <code class="literal">InvalidOperationException</code> exception being
        generated, with the message text “<span class="quote">connection must be valid
        and open</span>”.
      </p><p>
        MySQL Connector/Net has been changed to behave more like SQL Server: if the
        connection is closed, it is opened for the duration of update
        operation.
       (Bug #38411)</p></li><li><p>
        Database name was emitted into typed datasets. This prevented
        users using the configured default database.
       (Bug #33870)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-4"></a>D.3.5.4. Changes in MySQL Connector/Net 6.1.4 (28 April 2010, Generally Available)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.1.3.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Procedure cacheing had a problem whereby if you created a
        procedure, dropped it, and recreated it with a different number
        of parameters an exception was generated.
      </p><p>
        MySQL Connector/Net has been changed so that if the procedure is recreated
        with a different number of parameters, it will still be
        recognized.
       (Bug #52562)</p></li><li><p>
        MySQL Connector/Net has been changed to include
        <code class="literal">MySqlDataReader.GetFieldType(string
        columnname)</code>. Further,
        <code class="literal">MySqlDataReader.GetOrdinal()</code> now includes the
        name of the column in the exception if the column is not found.
       (Bug #47467)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        In MySQL Connector/Net, the <code class="literal">MySqlConnection.Abort()</code> method
        contained a <code class="literal">try...catch</code> construct, with an
        empty <code class="literal">catch</code> block. This meant that any
        exception generated at this point would not be caught.
       (Bug #52769)</p></li><li><p>
        If <code class="literal">FunctionsReturnString=true</code> was used in the
        connection string, the decimal separator (according to locale)
        was not interpreted.
       (Bug #52187)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">LoadCharsetMap()</code> function of
        the <code class="literal">CharSetMap</code> class set the following
        incorrect mapping:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("latin1", 1));</pre><p>
        This meant that, for example, the Euro sign was not handled
        correctly.
      </p><p>
        The correct mapping should have been:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("windows-1252", 1));</pre><p>
        This is because MySQL's <code class="literal">latin1</code> character set
        is the same as the <code class="literal">windows-cp1252</code> character
        set and it extends the official ISO 8859-1 or IANA latin1.
       (Bug #51927)</p></li><li><p>
        A non-terminated string in SQL threw a CLR exception rather than
        a syntax exception.
       (Bug #51788)</p></li><li><p>
        When calling <code class="literal">ExecuteNonQuery</code> on a command
        object, the following exception occurred:
      </p><pre class="programlisting">Index and length must refer to a location within the string.
Parameter name: length</pre><p>(Bug #51610)</p></li><li><p>
        The method <code class="literal">Command.TrimSemicolons</code> used
        <code class="literal">StringBuilder</code>, and therefore allocated memory
        for the query even if it did not need to be trimmed. This led to
        excessive memory consumption when executing a number of large
        queries.
       (Bug #51149)</p></li><li><p>
        <code class="literal">MySqlCommand.Parameters.Clear()</code> did not work.
       (Bug #50444)</p></li><li><p>
        When the <code class="literal">MySqlScript.execute()</code> method was
        called, the following exception was generated:
      </p><pre class="programlisting">InvalidOperationException : The CommandText property has not been properly initialized.</pre><p>(Bug #50344)</p></li><li><p>
        Binary Columns were not displayed in the Query Builder of Visual
        Studio.
       (Bug #50171)</p></li><li><p>
        When the <code class="literal">UpdateBatchSize</code> property was set to
        a value greater than 1, only the first row was applied to the
        database.
       (Bug #50123)</p></li><li><p>
        When using table per type inheritance and listing the contents
        of the parent table, the result of the query was a list of child
        objects, even though there was no related child record with the
        same parent Id.
       (Bug #49850)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetUInt64</code> returned an
        incorrect value when reading a <code class="literal">BIGINT
        UNSIGNED</code> column containing a value greater than
        2147483647.
       (Bug #49794)</p></li><li><p>
        A <code class="literal">FormatException</code> was generated when an empty
        string was returned from a stored function.
       (Bug #49642)</p></li><li><p>
        When adding a data set in Visual Studio 2008, the following
        error was generated:
      </p><pre class="programlisting">Relations couldn't be addded. Column 'REFERENCED_TABLE_CATALOG' does not belong to table.</pre><p>
        This was due to a 'REFERENCED_TABLE_CATALOG' column not being
        included in the foreign keys collection.
       (Bug #48974)</p></li><li><p>
        Attempting to execute a load data local infile on a file where
        the user did not have write permissions, or the file was open in
        an editor gave an access denied error.
       (Bug #48944)</p></li><li><p>
        The method <code class="literal">MySqlDataReader.GetSchemaTable()</code>
        returned 0 in the <code class="literal">NumericPrecision</code> field for
        decimal and newdecimal columns.
       (Bug #48171)</p></li><li><p>
        When trying to create stored procedures from an SQL script, a
        <code class="literal">MySqlException</code> was thrown when attempting to
        redefine the <code class="literal">DELIMITER</code>:
      </p><pre class="programlisting">        MySql.Data.MySqlClient.MySqlException was unhandled
        Message="You have an error in your SQL syntax; check the manual that corresponds to your
        MySQL server version for the right syntax to use near 'DELIMITER' at line 1"
        Source="MySql.Data"
        ErrorCode=-2147467259
        Number=1064
        StackTrace:
        à MySql.Data.MySqlClient.MySqlStream.ReadPacket()
        à MySql.Data.MySqlClient.NativeDriver.ReadResult(UInt64&amp; affectedRows, Int64&amp;
        lastInsertId)
        à MySql.Data.MySqlClient.MySqlDataReader.GetResultSet()
        à MySql.Data.MySqlClient.MySqlDataReader.NextResult()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
      à MySql.Data.MySqlClient.MySqlScript.Execute()</pre><p>
        Note: The <code class="literal">MySqlScript</code> class has been fixed to
        support the delimiter statement as it is found in SQL scripts.
       (Bug #46429)</p></li><li><p>
        Calling a User Defined Function using Entity SQL in the Entity
        Framework caused a <code class="literal">NullReferenceException</code>.
       (Bug #45277)</p></li><li><p>
        A connection string set in <code class="filename">web.config</code> could
        not be reused after Visual Studio 2008 Professional was shut
        down. It continued working for the existing controls, but did
        not work for new controls added.
       (Bug #41629)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-3"></a>D.3.5.5. Changes in MySQL Connector/Net 6.1.3 (16 November 2009, Generally Available)</h4></div></div></div><p class="release-level">
        This release fixes bugs since 6.1.2.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Cloning of <code class="literal">MySqlCommand</code> was not typesafe. To
        clone a <code class="literal">MySqlCommand</code> it was necessary to do:
      </p><pre class="programlisting">        MySqlCommand clone = (MySqlCommand)((ICloneable)comm).Clone();
      </pre><p>
        MySQL Connector/Net was changed so that it was possible to do:
      </p><pre class="programlisting">        MySqlCommand clone = comm.Clone();
      </pre><p>(Bug #48460)</p></li><li><p>
        When building the <code class="literal">MySql.Data</code> project with
        .NET Framework 3.5 installed, the following build output was
        displayed:
      </p><pre class="programlisting">Project file contains ToolsVersion="4.0", which is not supported by this version of
MSBuild. Treating the project as if it had ToolsVersion="3.5".</pre><p>
        The project had been created using the .NET Framework 4.0, which
        was beta, instead of using the 3.5 framework.
       (Bug #48271)</p></li><li><p>
        If <code class="literal">MySqlConnection.GetSchema</code> was called for
        "Indexes" on a table named “<span class="quote">b`a`d</span>” as follows:
      </p><pre class="programlisting">DataTable schemaPrimaryKeys = connection.GetSchema(
  "Indexes",
  new string[] { null, schemaName, "b`a`d"});</pre><p>
        Then the following exception was generated:
      </p><pre class="programlisting">You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near 'a`d`' at line 1</pre><p>(Bug #48101)</p></li><li><p>
        It was not possible to retrieve a value from a MySQL server
        table, if the value was larger than that supported by the .NET
        type <code class="literal">System.Decimal</code>.
      </p><p>
        MySQL Connector/Net was changed to expose the <code class="literal">MySqlDecimal</code>
        type, along with the supporting method
        <code class="literal">GetMySqlDecimal</code>.
       (Bug #48100)</p></li><li><p>
        For some character sets such as UTF-8, a <code class="literal">CHAR</code>
        column would sometimes be incorrectly interpreted as a
        <code class="literal">GUID</code> by MySQL Connector/Net.
      </p><p>
        MySQL Connector/Net was changed so that a column would only be interpreted as
        a <code class="literal">GUID</code> if it had a character length of 36, as
        opposed to a byte length of 36.
       (Bug #47985)</p></li><li><p>
        When using a <code class="literal">BINARY(16)</code> column to represent a
        GUID and having specified “<span class="quote">old guids = true</span>” in the
        connection string, the values were returned correctly until a
        null value was encountered in that field. After the null value
        was encountered a format exception was thrown with the following
        message:
      </p><pre class="programlisting">Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).</pre><p>(Bug #47928)</p></li><li><p>
        An entity model created from a schema containing a table with a
        column of type <code class="literal">UNSIGNED BIGINT</code> and a view of
        the table did not behave correctly. When an entity was created
        and mapped to the view, the column that was of type
        <code class="literal">UNSIGNED BIGINT</code> was displayed as
        <code class="literal">BIGINT</code>.
       (Bug #47872)</p></li><li><p>
        The Session Provider created invalid “<span class="quote">session
        expires</span>” on a random basis.
      </p><p>
        This was due to the fact that the Session Provider was
        incorrectly reading from the root
        <code class="filename">web.config</code>, rather than from the
        application specific <code class="filename">web.config</code>.
       (Bug #47815)</p></li><li><p>
        Attempting to build MySQL Connector/Net 6.1 <code class="literal">MySQL.Data</code>
        from source code on Windows failed with the following error:
      </p><pre class="programlisting">...\clones\6.1\MySql.Data\Provider\Source\NativeDriver.cs(519,29): error CS0122:
'MySql.Data.MySqlClient.MySqlPacket.MySqlPacket()' is inaccessible due to its protection level</pre><p>(Bug #47354)</p></li><li><p>
        When tables were auto created for the Session State Provider
        they were set to use the MySQL Server's default collation,
        rather than the default collation set for the containing
        database.
       (Bug #47332)</p></li><li><p>
        When loading the <code class="filename">MySQLClient-mono.sln</code> file
        included with the Connector/Net source into Mono Develop, the
        following error occurred:
      </p><pre class="programlisting">/home/tbedford/connector-net-src/6.1/MySQLClient-mono.sln(22):
Unsupported or unrecognized project:
'/home/tbedford/connector-net-src/6.1/Installer/Installer.wixproj'</pre><p>
        If the file was modified to remove this problem, then attempting
        to build the solution generated the following error:
      </p><pre class="programlisting">/home/tbedford/connector-net-src/6.1/MySql.Data/Provider/Source/Connection.cs(280,46):
error CS0115: `MySql.Data.MySqlClient.MySqlConnection.DbProviderFactory' is marked as an
override but no suitable property found to override</pre><p>(Bug #47048)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-2"></a>D.3.5.6. Changes in MySQL Connector/Net 6.1.2 (08 September 2009, Generally Available)</h4></div></div></div><p class="release-level">
        This is the first GA release of 6.1. This release fixes bugs
        since 6.1.1.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The MySQL Connector/Net Session State Provider truncated session data to
        64KB, due to its column types being set to
        <code class="literal">BLOB</code>.
       (Bug #47339)</p></li><li><p>
        MySQL Connector/Net generated the following exception when using the Session
        State provider:
      </p><pre class="programlisting">You have an error in your SQL syntax; check the manual that corresponds to your MySQL
server version for the right syntax to use near 'MINUTEWHERE SessionId =
'dtmgga55x35oi255nrfrxe45' AND ApplicationId = 1 AND Loc' at line 1 
Description: An unhandled exception occurred during the execution of the current web
request. Please review the stack trace for more information about the error and where it
originated in the code. 

Exception Details: MySql.Data.MySqlClient.MySqlException: You have an error in your SQL
syntax; check the manual that corresponds to your MySQL server version for the right
syntax to use near 'MINUTEWHERE SessionId = 'dtmgga55x35oi255nrfrxe45' AND ApplicationId =
1 AND Loc' at line 1
      </pre><p>(Bug #46939)</p></li><li><p>
        If an error occurred during connection to a MySQL Server,
        deserializing the error message from the packet buffer caused a
        <code class="literal">NullReferenceException</code> to be thrown. When the
        method <code class="literal">MySqlPacket::ReadString()</code> attempted to
        retrieve the error message, the following line of code threw the
        exception:
      </p><pre class="programlisting">        string s = encoding.GetString(bits, (int)buffer.Position, end - (int)buffer.Position);
      </pre><p>
        This was due to the fact that the encoding field had not been
        initialized correctly.
       (Bug #46844)</p></li><li><p>
        Input parameters were missing from Stored Procedures when using
        them with ADO.NET Data Entities.
       (Bug #44985)</p></li><li><p>
        MySQL Connector/Net did not time out correctly. The command timeout was set
        to 30 secs, but MySQL Connector/Net hung for several hours.
       (Bug #43761)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-1"></a>D.3.5.7. Changes in MySQL Connector/Net 6.1.1 (20 August 2009, beta)</h4></div></div></div><p class="release-level">
        This is the first Beta release of 6.1.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        In the <code class="literal">MySqlDataReader</code> class the
        <code class="literal">GetSByte</code> function returned a
        <code class="literal">byte</code> value instead of an
        <code class="literal">sbyte</code> value.
       (Bug #46620)</p></li><li><p>
        The MySQL Connector/Net Profile Provider,
        <code class="literal">MySql.Web.Profile.MySQLProfileProvider</code>,
        generated an error when running on Mono. When an attempt was
        made to save a string in <code class="literal">Profile.Name</code> the
        string was not saved to the
        <code class="literal">my_aspnet_Profiles</code> table. If an attempt was
        made to force the save with <code class="literal">Profile.Save()</code>
        the following error was generated:
      </p><pre class="programlisting">        Server Error in '/mono' Application

        --------------------------------------------------------------------------------

        The requested feature is not implemented.
        Description: HTTP 500. Error processing request.

        Stack Trace: 

        System.NotImplementedException: The requested feature is not implemented.
        at MySql.Data.MySqlClient.MySqlConnection.EnlistTransaction
        (System.Transactions.Transaction transaction) [0x00000] 
        at MySql.Data.MySqlClient.MySqlConnection.Open () [0x00000] 
        at MySql.Web.Profile.MySQLProfileProvider.SetPropertyValues
        (System.Configuration.SettingsContext context,
        System.Configuration.SettingsPropertyValueCollection collection) [0x00000] 
        

        --------------------------------------------------------------------------------
        Version information: Mono Version: 2.0.50727.1433; ASP.NET Version: 2.0.50727.1433
      </pre><p>(Bug #46375)</p></li><li><p>
        An exception was generated when using
        <code class="literal">TIMESTAMP</code> columns with the Entity Framework.
       (Bug #46311)</p></li><li><p>
        MySQL Connector/Net sometimes hung, without generating an exception. This
        happened if a read from a stream failed returning a 0, causing
        the code in <code class="literal">LoadPacket()</code> to enter an infinite
        loop.
       (Bug #46308)</p></li><li><p>
        When using MySQL Connector/Net 6.0.4 and a MySQL Server 4.1 an exception was
        generated when trying to execute:
      </p><pre class="programlisting">        connection.GetSchema("Columns", ...);
      </pre><p>
        The exception generated was:
      </p><pre class="programlisting">        'connection.GetSchema("Columns")' threw an exception of type
        'System.ArgumentException'System.Data.DataTable {System.ArgumentException}
        base{"Input string was not in a correct format.Couldn't store &lt;'Select'&gt; in
        NUMERIC_PRECISION Column.  Expected type is UInt64."}System.Exception
        {System.ArgumentException}
      </pre><p>(Bug #46270)</p></li><li><p>
        The MySQL Connector/Net method
        <code class="literal">StoredProcedure.GetParameters(string)</code> ignored
        the programmer's setting of the
        <code class="literal">UseProcedureBodies</code> option. This broke any
        application for which the application's parameter names did not
        match the parameter names in the Stored Procedure, resulting in
        an <code class="literal">ArgumentException</code> with the message
        “<span class="quote">Parameter 'foo' not found in the collection.</span>” and
        the following stack trace:
      </p><pre class="programlisting">        MySql.Data.dll!MySql.Data.MySqlClient.MySqlParameterCollection.GetParameterFlexible(stri
        ng parameterName = "pStart", bool throwOnNotFound = true) Line 459C#
        MySql.Data.dll!MySql.Data.MySqlClient.StoredProcedure.Resolve() Line 157 + 0x25
        bytesC#
        MySql.Data.dll!MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(System.Data.CommandBeha
        vior behavior = SequentialAccess) Line 405 + 0xb bytesC#
        MySql.Data.dll!MySql.Data.MySqlClient.MySqlCommand.ExecuteDbDataReader(System.Data.Comma
        ndBehavior behavior = SequentialAccess) Line 884 + 0xb bytesC#
        System.Data.dll!System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(System
        .Data.CommandBehavior behavior) + 0xb bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.FillInternal(System.Data.DataSet
        dataset = {System.Data.DataSet}, System.Data.DataTable[] datatables = null, int
        startRecord = 0, int maxRecords = 0, string srcTable = "Table", System.Data.IDbCommand
        command = {MySql.Data.MySqlClient.MySqlCommand}, System.Data.CommandBehavior behavior) +
        0x83 bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.Fill(System.Data.DataSet dataSet, int
        startRecord, int maxRecords, string srcTable, System.Data.IDbCommand command,
        System.Data.CommandBehavior behavior) + 0x120 bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.Fill(System.Data.DataSet dataSet) +
        0x5f bytes
      </pre><p>(Bug #46213)</p></li><li><p>
        Conversion of MySQL <code class="literal">TINYINT(1)</code> to
        <code class="literal">boolean</code> failed.
       (Bug #46205, Bug #46359, Bug #41953)</p></li><li><p>
        When populating a MySQL database table in Visual Studio using
        the Table Editor, if a <code class="literal">VARCHAR(10)</code> column was
        changed to a <code class="literal">VARCHAR(20)</code> column an exception
        was generated:
      </p><pre class="programlisting">        SystemArgumentException: DataGridViewComboBoxCell value is not valid.
      To replace this default dialog please handle the DataError Event.</pre><p>(Bug #46100)</p></li><li><p>
        The Entity Framework provider was not calling
        <code class="literal">DBSortExpression</code> correctly when the
        <code class="literal">Skip</code> and <code class="literal">Take</code> methods were
        used, such as in the following statement:
      </p><pre class="programlisting">        TestModel.tblquarantine.OrderByDescending(q =&gt; q.MsgDate).Skip(100).Take(100).ToList();
      </pre><p>
        This resulted in the data being unsorted.
       (Bug #45723)</p></li><li><p>
        The MySQL Connector/Net 6.0.4 installer failed with an error. The error
        message generated was:
      </p><pre class="programlisting">        There is a problem with this Windows Installer package. A DLL required for this
        install to complete could not be run. Contact your support personnel or package vendor.
      </pre><p>
        When <span class="guibutton">OK</span> was clicked to acknowledge the
        error the installer exited.
       (Bug #45474)</p></li><li><p>
        Calling the Entity Framework <code class="literal">SaveChanges()</code>
        method of any MySQL ORM Entity with a column type
        <code class="literal">TIME</code>, generated an error message:
      </p><pre class="programlisting">Unknown PrimitiveKind Time</pre><p>(Bug #45457)</p></li><li><p>
        Insert into two tables failed when using the Entity Framework.
        The exception generated was:
      </p><pre class="programlisting">        The value given is not an instance of type 'Edm.Int32'
      </pre><p>(Bug #45077)</p></li><li><p>
        Errors occurred when using the Entity Framework with cultures
        that used a comma as the decimal separator. This was because the
        formatting for <code class="literal">SINGLE</code>,
        <code class="literal">DOUBLE</code> and <code class="literal">DECIMAL</code> values
        was not handled correctly.
       (Bug #44455)</p></li><li><p>
        When attempting to connect to MySQL using the Compact Framework
        version of MySQL Connector/Net, an
        <code class="literal">IndexOutOfRangeException</code> exception was
        generated on trying to open the connection.
       (Bug #43736)</p></li><li><p>
        When reading data, such as with a
        <code class="literal">MySqlDataAdapter</code> on a
        <code class="literal">MySqlConnection</code>, MySQL Connector/Net could potentially
        enter an infinite loop in
        <code class="literal">CompressedStream.ReadNextpacket()</code> if
        compression was enabled.
       (Bug #43678)</p></li><li><p>
        An error occurred when building MySQL Connector/Net from source code checked
        out from the public SVN repository. This happened on Linux using
        Mono and Nant. The Mono JIT compiler version was 1.2.6.0. The
        Nant version was 0.85.
      </p><p>
        When an attempt was made to build (for example) the MySQL Connector/Net 5.2
        branch using the command:
      </p><pre class="programlisting">        $ nant -buildfile:Client.build
      </pre><p>
        The following error occurred:
      </p><pre class="programlisting">        BUILD FAILED

        Error loading buildfile.
        Encoding name 'Windows-1252' not supported.
        Parameter name: name
      </pre><p>(Bug #42411)</p></li><li><p>
        MySQL Connector/Net CHM documentation stated that MySQL Server 3.23 was
        supported.
       (Bug #42110)</p></li><li><p>
        In the case of long network inactivity, especially when
        connection pooling was used, connections were sometimes dropped,
        for example, by firewalls.
      </p><p>
        Note: The bugfix introduced a new <code class="literal">keepalive</code>
        parameter, which prevents disconnects by sending an empty TCP
        packet after a specified timeout.
       (Bug #40684)</p></li><li><p>
        Calling a Stored Procedure with an output parameter through
        MySQL Connector/Net resulted in a memory leak. Calling the same Stored
        Procedure without an output parameter did not result in a memory
        leak.
       (Bug #36027)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-1-0"></a>D.3.5.8. Changes in MySQL Connector/Net 6.1.0 (15 July 2009, alpha)</h4></div></div></div><p class="release-level">
        This is the first Alpha release of 6.1.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Changed GUID type - The backend representation of a guid type
        has been changed to be CHAR(36). This is so you can use the
        server UUID() function to populate a GUID table. UUID generates
        a 36 character string. Developers of older applications can add
        <code class="literal">old guids=true</code> to the connection string and
        the old BINARY(16) type will be used instead.
      </p></li><li><p>
        Support for native output parameters - This is supported when
        connected to a server that supports native output parameters.
        This includes servers as of 5.5.3 and 6.0.8.
      </p></li><li><p>
        Session State Provider - This enables you to store the state of
        your website in a MySQL server.
      </p></li><li><p>
        Website Configuration Dialog - This is a new wizard that is
        activated by clicking a button on the toolbar at the top of the
        Visual Studio Solution Explorer. It works in conjunction with
        the ASP.Net administration pages, making it easier to activate
        and set advanced options for the different MySQL web providers
        included.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-6-0-x"></a>D.3.6. Changes in MySQL Connector/Net Version 6.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-6-0-8">D.3.6.1. Changes in MySQL Connector/Net 6.0.8 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-7">D.3.6.2. Changes in MySQL Connector/Net 6.0.7 (30 August 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-6">D.3.6.3. Changes in MySQL Connector/Net 6.0.6 (28 April 2010)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-5">D.3.6.4. Changes in MySQL Connector/Net 6.0.5 (12 November 2009)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-4">D.3.6.5. Changes in MySQL Connector/Net 6.0.4 (16 June 2009)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-3">D.3.6.6. Changes in MySQL Connector/Net 6.0.3 (28 April 2009)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-2">D.3.6.7. Changes in MySQL Connector/Net 6.0.2 (07 April 2009, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-1">D.3.6.8. Changes in MySQL Connector/Net 6.0.1 (02 April 2009, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-6-0-0">D.3.6.9. Changes in MySQL Connector/Net 6.0.0 (02 March 2009, alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-8"></a>D.3.6.1. Changes in MySQL Connector/Net 6.0.8 (Not released)</h4></div></div></div><p class="release-level">
        Fixes bugs since 6.0.7.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MysqlDataReader.GetSchemaTable</code> returned
        incorrect values and types.
       (Bug #59989, Bug #11776346)</p></li><li><p>
        All queries other than <code class="literal">INSERT</code> were executed
        individually instead of as a batch even though batching was
        enabled for the connection.
       (Bug #59616, Bug #11850286)</p></li><li><p>
        MySQL Connector/Net generated an exception when executing a query consisting
        of ';', for example:
      </p><pre class="programlisting">mycmd(";",mycon)
mycmd.executenonquery()</pre><p>
        The exception generated was:
      </p><pre class="programlisting">System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at MySql.Data.MySqlClient.MySqlCommand.TrimSemicolons(String sql)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()</pre><p>(Bug #59537, Bug #11766433)</p></li><li><p>
        Setting <code class="literal">Membership.ApplicationName</code> had no
        effect.
       (Bug #59438, Bug #11770465)</p></li><li><p>
        <code class="literal">MembershipProvider</code> did not generate hashes
        correctly if the algorithm was keyed. The Key of the algorithm
        should have been set if the <code class="literal">HashAlgorithm</code> was
        <code class="literal">KeyedHashAlgorithm</code>.
       (Bug #58906)</p></li><li><p>
        Code introduced to fix bug #54863 proved problematic on .NET
        version 3.5 and above.
       (Bug #58853)</p></li><li><p>
        The <code class="literal">MySqlTokenizer</code> contained unnecessary
        <code class="literal">Substring</code> and <code class="literal">Trim</code> calls:
      </p><pre class="programlisting">string token = sql.Substring(startIndex, stopIndex - startIndex).Trim();</pre><p>
        The variable <code class="literal">token</code> was not used anywhere in
        the code.
       (Bug #58757)</p></li><li><p>
        <code class="literal">MySqlCommand.ExecuteReader(CommandBehavior)</code>
        threw a <code class="literal">NullReferenceException</code> when being
        called with <code class="literal">CommandBehavior.CloseConnection</code>,
        if the SQL statement contained a syntax error, or contained
        invalid data such as an invalid column name.
       (Bug #58652)</p></li><li><p>
        <code class="literal">ReadFieldLength()</code> returned incorrect value
        for <code class="literal">BIGINT</code> autoincrement columns.
       (Bug #58373)</p></li><li><p>
        MySQL Connector/Net did not support the <code class="literal">utf8mb4</code> character
        set. When attempting to connect to <code class="literal">utf8mb4</code>
        tables or columns, an exception
        <code class="literal">KeyNotFoundException</code> was generated.
       (Bug #58244)</p></li><li><p>
        A typed dataset did not get the table name.
       (Bug #57894, Bug #11764989)</p></li><li><p>
        Setting <code class="literal">MySqlCommand.CommandTimeout</code> to 0 had
        no effect. It should have resulted in an infinite timeout.
       (Bug #57265)</p></li><li><p>
        When performing a row-by-row update, only the first row was
        updated and all other rows were ignored.
       (Bug #57092)</p></li><li><p>
        Setting the <code class="literal">Default Command Timeout</code>
        connection string option had no effect.
       (Bug #56806)</p></li><li><p>
        When an output parameter was declared as type
        <code class="literal">MySqlDbType.Bit</code>, it failed to return with the
        correct value.
       (Bug #56756)</p></li><li><p>
        Default values returned for text columns were not quoted. This
        meant that the <code class="literal">COLUMN_DEFAULT</code> field of the
        <code class="literal">GetSchema</code> columns collection did not return a
        valid SQL expression.
       (Bug #56509)</p></li><li><p>
        MySQL Connector/Net for .NET/Mono attempted to dynamically load the assembly
        <code class="filename">Mono.Posix.dll</code> when a Unix socket was used
        to connect to the server. This failed and the connector was not
        able to use a Unix socket unless the
        <code class="filename">Mono.Posix.dll</code> assembly was previously
        loaded by the program.
       (Bug #56410)</p></li><li><p>
        The ADO.NET Entity Data Model could not add stored procedures
        from MySQL Server 5.0.45 but worked fine using MySQL Server 5.1.
       (Bug #55349)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-7"></a>D.3.6.2. Changes in MySQL Connector/Net 6.0.7 (30 August 2010)</h4></div></div></div><p class="release-level">
        Fixes bugs since 6.0.6.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Attempting to read <code class="literal">Double.MinValue</code> from a
        <code class="literal">DOUBLE</code> column in MySQL table generated the
        following exception:
      </p><pre class="programlisting">System.OverflowException : Value was either too large or too small for a Double.

--OverflowException
at System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo
numfmt)
at MySql.Data.Types.MySqlDouble.MySql.Data.Types.IMySqlValue.ReadValue(MySqlPacket
packet, Int64 length, Boolean nullVal)
at MySql.Data.MySqlClient.NativeDriver.ReadColumnValue(Int32 index, MySqlField field,
IMySqlValue valObject)
at MySql.Data.MySqlClient.ResultSet.ReadColumnData(Boolean outputParms)
at MySql.Data.MySqlClient.ResultSet.NextRow(CommandBehavior behavior)
at MySql.Data.MySqlClient.MySqlDataReader.Read()</pre><p>(Bug #55644)</p></li><li><p>
        <code class="literal">MySqlDataAdapter.Update()</code> generated
        concurrency violations for custom stored procedure driven update
        commands that used
        <code class="literal">UpdateRowSource.FirstReturnedRecord</code>.
       (Bug #54895)</p></li><li><p>
        Several calls to <code class="literal">DataAdapter.Update()</code> with
        intervening changes to <code class="literal">DataTable</code> resulted in
        <code class="literal">ConcurrencyException</code> exceptions being
        generated.
       (Bug #54863)</p></li><li><p>
        The <code class="literal">MySqlHelper</code> object did not have an
        overloaded version of the <code class="literal">ExecuteReader</code>
        method that accepted a <code class="literal">MySqlConnection</code>
        object.
       (Bug #54570)</p></li><li><p>
        If <code class="literal">MySqlDataAdapter</code> was used with an
        <code class="literal">INSERT</code> command where the
        <code class="literal">VALUES</code> clause contained an expression with
        parentheses in it, and set the
        <code class="literal">adapter.UpdateBatchSize</code> parameter to be
        greater than one, then the call to
        <code class="literal">adapter.Update</code> either generated an exception
        or failed to batch the commands, executing each insert
        individually.
       (Bug #54386)</p></li><li><p>
        The method
        <code class="literal">MySql.Data.Common.QueryNormalizer.CollapseValueList</code>
        generated an <code class="literal">ArgumentOutOfRangeException</code>.
       (Bug #54152, Bug #53865)</p></li><li><p>
        Garbage Collector disposal of a
        <code class="literal">MySqlConnection</code> object caused the following
        exception:
      </p><pre class="programlisting">System.IO.EndOfStreamException: Attempted to read past the end of the stream.
MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset,
Int32 count)
MySql.Data.MySqlClient.MySqlStream.LoadPacket()
Outer Exception Reading from the stream has failed.
...</pre><p>(Bug #53457)</p></li><li><p>
        After a timeout exception, if an attempt was made to reuse a
        connection returned to the connection pool the following
        exception was generated:
      </p><pre class="programlisting">[MySqlException (0x80004005): There is already an open DataReader associated with this
Connection which must be closed first.]
   MySql.Data.MySqlClient.MySqlCommand.CheckState() +278
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) +43
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader() +6
   Controls.SimpleCommand.ExecuteReader(String SQL) in ...:323
   Albums.GetImagesByAlbum(SimpleCommand Cmd, Int32 iAlbum, String Order, String Limit)
in ...:13
   Forecast.Page_Load(Object sender, EventArgs e) in ...:70
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean
includeStagesAfterAsyncPoint) +627</pre><p>(Bug #53357)</p></li><li><p>
        Membership schema creation failed if the default schema
        collation was not Latin1.
       (Bug #53174)</p></li><li><p>
        EventLog was not disposed in the SessionState provider.
       (Bug #52550)</p></li><li><p>
        Stored procedure enumeration code generated an error if a
        procedure was used in a dataset that did not return any
        resultsets.
       (Bug #50671)</p></li><li><p>
        When an application was subjected to increased concurrent load,
        MySQL Connector/Net generated the following error when calling stored
        procedures:
      </p><pre class="programlisting">A DataTable named \'Procedure Parameters\'
already belongs to this DataSet.
      </pre><p>(Bug #49118)</p></li><li><p>
        In the ADO.NET Entity Data Model Wizard, the time to update a
        model scaled abnormally as the number of entities increased.
       (Bug #48791, Bug #12596237)</p></li><li><p>
        The <code class="literal">INSERT</code> command was significantly slower
        with MySQL Connector/Net 6.x compared to 5.x, when compression was enabled.
       (Bug #48243)</p></li><li><p>
        When the connection string option “<span class="quote">Connection Reset =
        True</span>” was used, a connection reset used the previously
        used encoding for the subsequent authentication operation. This
        failed, for example, if UCS2 was used to read the last column
        before the reset.
       (Bug #47153)</p></li><li><p>
        Opening a connection in the Visual Studio Server Explorer and
        choosing to alter an existing routine required another
        authentication at the server.
       (Bug #44715)</p></li><li><p>
        When batching was used in <code class="literal">MySqlDataAdapter</code>, a
        connection was not opened automatically in
        <code class="literal">MySqlDataAdapter.Update()</code>. This resulted in
        an <code class="literal">InvalidOperationException</code> exception being
        generated, with the message text “<span class="quote">connection must be valid
        and open</span>”.
      </p><p>
        MySQL Connector/Net has been changed to behave more like SQL Server: if the
        connection is closed, it is opened for the duration of update
        operation.
       (Bug #38411)</p></li><li><p>
        Database name was emitted into typed datasets. This prevented
        users using the configured default database.
       (Bug #33870)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-6"></a>D.3.6.3. Changes in MySQL Connector/Net 6.0.6 (28 April 2010)</h4></div></div></div><p class="release-level">
        Fixes bugs since 6.0.5.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Procedure cacheing had a problem whereby if you created a
        procedure, dropped it, and recreated it with a different number
        of parameters an exception was generated.
      </p><p>
        MySQL Connector/Net has been changed so that if the procedure is recreated
        with a different number of parameters, it will still be
        recognized.
       (Bug #52562)</p></li><li><p>
        MySQL Connector/Net has been changed to include
        <code class="literal">MySqlDataReader.GetFieldType(string
        columnname)</code>. Further,
        <code class="literal">MySqlDataReader.GetOrdinal()</code> now includes the
        name of the column in the exception if the column is not found.
       (Bug #47467)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        If using MySQL Server 5.0.x it was not possible to alter stored
        routines in Visual Studio. If the stored routine was clicked,
        and the context sensitive menu option, Alter Routine, selected,
        the following error was generated:
      </p><pre class="programlisting">Unable to load object with error: Object reference not
set to an instance of an object</pre><p>(Bug #55170)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">MySqlConnection.Abort()</code> method
        contained a <code class="literal">try...catch</code> construct, with an
        empty <code class="literal">catch</code> block. This meant that any
        exception generated at this point would not be caught.
       (Bug #52769)</p></li><li><p>
        If <code class="literal">FunctionsReturnString=true</code> was used in the
        connection string, the decimal separator (according to locale)
        was not interpreted.
       (Bug #52187)</p></li><li><p>
        In MySQL Connector/Net, the <code class="literal">LoadCharsetMap()</code> function of
        the <code class="literal">CharSetMap</code> class set the following
        incorrect mapping:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("latin1", 1));</pre><p>
        This meant that, for example, the Euro sign was not handled
        correctly.
      </p><p>
        The correct mapping should have been:
      </p><pre class="programlisting">mapping.Add("latin1", new CharacterSet("windows-1252", 1));</pre><p>
        This is because MySQL's <code class="literal">latin1</code> character set
        is the same as the <code class="literal">windows-cp1252</code> character
        set and it extends the official ISO 8859-1 or IANA latin1.
       (Bug #51927)</p></li><li><p>
        A non-terminated string in SQL threw a CLR exception rather than
        a syntax exception.
       (Bug #51788)</p></li><li><p>
        When calling <code class="literal">ExecuteNonQuery</code> on a command
        object, the following exception occurred:
      </p><pre class="programlisting">Index and length must refer to a location within the string.
Parameter name: length</pre><p>(Bug #51610)</p></li><li><p>
        The method <code class="literal">Command.TrimSemicolons</code> used
        <code class="literal">StringBuilder</code>, and therefore allocated memory
        for the query even if it did not need to be trimmed. This led to
        excessive memory consumption when executing a number of large
        queries.
       (Bug #51149)</p></li><li><p>
        <code class="literal">MySqlCommand.Parameters.Clear()</code> did not work.
       (Bug #50444)</p></li><li><p>
        When the <code class="literal">MySqlScript.execute()</code> method was
        called, the following exception was generated:
      </p><pre class="programlisting">InvalidOperationException : The CommandText property has not been properly initialized.</pre><p>(Bug #50344)</p></li><li><p>
        Binary Columns were not displayed in the Query Builder of Visual
        Studio.
       (Bug #50171)</p></li><li><p>
        When the <code class="literal">UpdateBatchSize</code> property was set to
        a value greater than 1, only the first row was applied to the
        database.
       (Bug #50123)</p></li><li><p>
        When using table per type inheritance and listing the contents
        of the parent table, the result of the query was a list of child
        objects, even though there was no related child record with the
        same parent Id.
       (Bug #49850)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetUInt64</code> returned an
        incorrect value when reading a <code class="literal">BIGINT
        UNSIGNED</code> column containing a value greater than
        2147483647.
       (Bug #49794)</p></li><li><p>
        A <code class="literal">FormatException</code> was generated when an empty
        string was returned from a stored function.
       (Bug #49642)</p></li><li><p>
        When adding a data set in Visual Studio 2008, the following
        error was generated:
      </p><pre class="programlisting">Relations couldn't be addded. Column 'REFERENCED_TABLE_CATALOG' does not belong to table.</pre><p>
        This was due to a 'REFERENCED_TABLE_CATALOG' column not being
        included in the foreign keys collection.
       (Bug #48974)</p></li><li><p>
        Attempting to execute a load data local infile on a file where
        the user did not have write permissions, or the file was open in
        an editor gave an access denied error.
       (Bug #48944)</p></li><li><p>
        The method <code class="literal">MySqlDataReader.GetSchemaTable()</code>
        returned 0 in the <code class="literal">NumericPrecision</code> field for
        decimal and newdecimal columns.
       (Bug #48171)</p></li><li><p>
        When trying to create stored procedures from an SQL script, a
        <code class="literal">MySqlException</code> was thrown when attempting to
        redefine the <code class="literal">DELIMITER</code>:
      </p><pre class="programlisting">        MySql.Data.MySqlClient.MySqlException was unhandled
        Message="You have an error in your SQL syntax; check the manual that corresponds to your
        MySQL server version for the right syntax to use near 'DELIMITER' at line 1"
        Source="MySql.Data"
        ErrorCode=-2147467259
        Number=1064
        StackTrace:
        à MySql.Data.MySqlClient.MySqlStream.ReadPacket()
        à MySql.Data.MySqlClient.NativeDriver.ReadResult(UInt64&amp; affectedRows, Int64&amp;
        lastInsertId)
        à MySql.Data.MySqlClient.MySqlDataReader.GetResultSet()
        à MySql.Data.MySqlClient.MySqlDataReader.NextResult()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
      à MySql.Data.MySqlClient.MySqlScript.Execute()</pre><p>
        Note: The <code class="literal">MySqlScript</code> class has been fixed to
        support the delimiter statement as it is found in SQL scripts.
       (Bug #46429)</p></li><li><p>
        Calling a User Defined Function using Entity SQL in the Entity
        Framework caused a <code class="literal">NullReferenceException</code>.
       (Bug #45277)</p></li><li><p>
        A connection string set in <code class="filename">web.config</code> could
        not be reused after Visual Studio 2008 Professional was shut
        down. It continued working for the existing controls, but did
        not work for new controls added.
       (Bug #41629)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-5"></a>D.3.6.4. Changes in MySQL Connector/Net 6.0.5 (12 November 2009)</h4></div></div></div><p class="release-level">
        This is a new release, fixing recently discovered bugs.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Cloning of <code class="literal">MySqlCommand</code> was not typesafe. To
        clone a <code class="literal">MySqlCommand</code> it was necessary to do:
      </p><pre class="programlisting">        MySqlCommand clone = (MySqlCommand)((ICloneable)comm).Clone();
      </pre><p>
        MySQL Connector/Net was changed so that it was possible to do:
      </p><pre class="programlisting">        MySqlCommand clone = comm.Clone();
      </pre><p>(Bug #48460)</p></li><li><p>
        If <code class="literal">MySqlConnection.GetSchema</code> was called for
        "Indexes" on a table named “<span class="quote">b`a`d</span>” as follows:
      </p><pre class="programlisting">DataTable schemaPrimaryKeys = connection.GetSchema(
  "Indexes",
  new string[] { null, schemaName, "b`a`d"});</pre><p>
        Then the following exception was generated:
      </p><pre class="programlisting">You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near 'a`d`' at line 1</pre><p>(Bug #48101)</p></li><li><p>
        It was not possible to retrieve a value from a MySQL server
        table, if the value was larger than that supported by the .NET
        type <code class="literal">System.Decimal</code>.
      </p><p>
        MySQL Connector/Net was changed to expose the <code class="literal">MySqlDecimal</code>
        type, along with the supporting method
        <code class="literal">GetMySqlDecimal</code>.
       (Bug #48100)</p></li><li><p>
        An entity model created from a schema containing a table with a
        column of type <code class="literal">UNSIGNED BIGINT</code> and a view of
        the table did not behave correctly. When an entity was created
        and mapped to the view, the column that was of type
        <code class="literal">UNSIGNED BIGINT</code> was displayed as
        <code class="literal">BIGINT</code>.
       (Bug #47872)</p></li><li><p>
        When loading the <code class="filename">MySQLClient-mono.sln</code> file
        included with the Connector/Net source into Mono Develop, the
        following error occurred:
      </p><pre class="programlisting">/home/tbedford/connector-net-src/6.1/MySQLClient-mono.sln(22):
Unsupported or unrecognized project:
'/home/tbedford/connector-net-src/6.1/Installer/Installer.wixproj'</pre><p>
        If the file was modified to remove this problem, then attempting
        to build the solution generated the following error:
      </p><pre class="programlisting">/home/tbedford/connector-net-src/6.1/MySql.Data/Provider/Source/Connection.cs(280,46):
error CS0115: `MySql.Data.MySqlClient.MySqlConnection.DbProviderFactory' is marked as an
override but no suitable property found to override</pre><p>(Bug #47048)</p></li><li><p>
        If an error occurred during connection to a MySQL Server,
        deserializing the error message from the packet buffer caused a
        <code class="literal">NullReferenceException</code> to be thrown. When the
        method <code class="literal">MySqlPacket::ReadString()</code> attempted to
        retrieve the error message, the following line of code threw the
        exception:
      </p><pre class="programlisting">        string s = encoding.GetString(bits, (int)buffer.Position, end - (int)buffer.Position);
      </pre><p>
        This was due to the fact that the encoding field had not been
        initialized correctly.
       (Bug #46844)</p></li><li><p>
        In the <code class="literal">MySqlDataReader</code> class the
        <code class="literal">GetSByte</code> function returned a
        <code class="literal">byte</code> value instead of an
        <code class="literal">sbyte</code> value.
       (Bug #46620)</p></li><li><p>
        The MySQL Connector/Net Profile Provider,
        <code class="literal">MySql.Web.Profile.MySQLProfileProvider</code>,
        generated an error when running on Mono. When an attempt was
        made to save a string in <code class="literal">Profile.Name</code> the
        string was not saved to the
        <code class="literal">my_aspnet_Profiles</code> table. If an attempt was
        made to force the save with <code class="literal">Profile.Save()</code>
        the following error was generated:
      </p><pre class="programlisting">        Server Error in '/mono' Application

        --------------------------------------------------------------------------------

        The requested feature is not implemented.
        Description: HTTP 500. Error processing request.

        Stack Trace: 

        System.NotImplementedException: The requested feature is not implemented.
        at MySql.Data.MySqlClient.MySqlConnection.EnlistTransaction
        (System.Transactions.Transaction transaction) [0x00000] 
        at MySql.Data.MySqlClient.MySqlConnection.Open () [0x00000] 
        at MySql.Web.Profile.MySQLProfileProvider.SetPropertyValues
        (System.Configuration.SettingsContext context,
        System.Configuration.SettingsPropertyValueCollection collection) [0x00000] 
        

        --------------------------------------------------------------------------------
        Version information: Mono Version: 2.0.50727.1433; ASP.NET Version: 2.0.50727.1433
      </pre><p>(Bug #46375)</p></li><li><p>
        An exception was generated when using
        <code class="literal">TIMESTAMP</code> columns with the Entity Framework.
       (Bug #46311)</p></li><li><p>
        MySQL Connector/Net sometimes hung, without generating an exception. This
        happened if a read from a stream failed returning a 0, causing
        the code in <code class="literal">LoadPacket()</code> to enter an infinite
        loop.
       (Bug #46308)</p></li><li><p>
        When using MySQL Connector/Net 6.0.4 and a MySQL Server 4.1 an exception was
        generated when trying to execute:
      </p><pre class="programlisting">        connection.GetSchema("Columns", ...);
      </pre><p>
        The exception generated was:
      </p><pre class="programlisting">        'connection.GetSchema("Columns")' threw an exception of type
        'System.ArgumentException'System.Data.DataTable {System.ArgumentException}
        base{"Input string was not in a correct format.Couldn't store &lt;'Select'&gt; in
        NUMERIC_PRECISION Column.  Expected type is UInt64."}System.Exception
        {System.ArgumentException}
      </pre><p>(Bug #46270)</p></li><li><p>
        The MySQL Connector/Net method
        <code class="literal">StoredProcedure.GetParameters(string)</code> ignored
        the programmer's setting of the
        <code class="literal">UseProcedureBodies</code> option. This broke any
        application for which the application's parameter names did not
        match the parameter names in the Stored Procedure, resulting in
        an <code class="literal">ArgumentException</code> with the message
        “<span class="quote">Parameter 'foo' not found in the collection.</span>” and
        the following stack trace:
      </p><pre class="programlisting">        MySql.Data.dll!MySql.Data.MySqlClient.MySqlParameterCollection.GetParameterFlexible(stri
        ng parameterName = "pStart", bool throwOnNotFound = true) Line 459C#
        MySql.Data.dll!MySql.Data.MySqlClient.StoredProcedure.Resolve() Line 157 + 0x25
        bytesC#
        MySql.Data.dll!MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(System.Data.CommandBeha
        vior behavior = SequentialAccess) Line 405 + 0xb bytesC#
        MySql.Data.dll!MySql.Data.MySqlClient.MySqlCommand.ExecuteDbDataReader(System.Data.Comma
        ndBehavior behavior = SequentialAccess) Line 884 + 0xb bytesC#
        System.Data.dll!System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(System
        .Data.CommandBehavior behavior) + 0xb bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.FillInternal(System.Data.DataSet
        dataset = {System.Data.DataSet}, System.Data.DataTable[] datatables = null, int
        startRecord = 0, int maxRecords = 0, string srcTable = "Table", System.Data.IDbCommand
        command = {MySql.Data.MySqlClient.MySqlCommand}, System.Data.CommandBehavior behavior) +
        0x83 bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.Fill(System.Data.DataSet dataSet, int
        startRecord, int maxRecords, string srcTable, System.Data.IDbCommand command,
        System.Data.CommandBehavior behavior) + 0x120 bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.Fill(System.Data.DataSet dataSet) +
        0x5f bytes
      </pre><p>(Bug #46213)</p></li><li><p>
        Conversion of MySQL <code class="literal">TINYINT(1)</code> to
        <code class="literal">boolean</code> failed.
       (Bug #46205, Bug #46359, Bug #41953)</p></li><li><p>
        When populating a MySQL database table in Visual Studio using
        the Table Editor, if a <code class="literal">VARCHAR(10)</code> column was
        changed to a <code class="literal">VARCHAR(20)</code> column an exception
        was generated:
      </p><pre class="programlisting">        SystemArgumentException: DataGridViewComboBoxCell value is not valid.
      To replace this default dialog please handle the DataError Event.</pre><p>(Bug #46100)</p></li><li><p>
        In MySQL Connector/Net 6.0.4 using <code class="literal">GetProcData</code> generated
        an error because the <code class="literal">parameters</code> data table
        was only created if MySQL Server was at least version 6.0.6, or
        if the <code class="literal">UseProcedureBodies</code> connection string
        option was set to true.
      </p><p>
        Also the <code class="literal">DeriveParameters</code> command generated a
        null reference exception. This was because the
        <code class="literal">parameters</code> data table, which was null, was
        used in a <code class="literal">for each</code> loop.
       (Bug #45952)</p></li><li><p>
        The Entity Framework provider was not calling
        <code class="literal">DBSortExpression</code> correctly when the
        <code class="literal">Skip</code> and <code class="literal">Take</code> methods were
        used, such as in the following statement:
      </p><pre class="programlisting">        TestModel.tblquarantine.OrderByDescending(q =&gt; q.MsgDate).Skip(100).Take(100).ToList();
      </pre><p>
        This resulted in the data being unsorted.
       (Bug #45723)</p></li><li><p>
        The <code class="literal">EscapeString</code> code carried out escaping by
        calling <code class="literal">string.Replace</code> multiple times. This
        resulted in a performance bottleneck, as for every line a new
        string was allocated and another was disposed of by the garbage
        collector.
       (Bug #45699)</p></li><li><p>
        Adding the <code class="literal">Allow Batch=False</code> option to the
        connection string caused MySQL Connector/Net to generate the error:
      </p><pre class="programlisting">You have an error in your SQL syntax; check the manual that corresponds to your MySQL
      server version for the right syntax to use near 'SET character_set_results=NULL' at line 1</pre><p>(Bug #45502)</p></li><li><p>
        The MySQL Connector/Net 6.0.4 installer failed with an error. The error
        message generated was:
      </p><pre class="programlisting">        There is a problem with this Windows Installer package. A DLL required for this
        install to complete could not be run. Contact your support personnel or package vendor.
      </pre><p>
        When <span class="guibutton">OK</span> was clicked to acknowledge the
        error the installer exited.
       (Bug #45474)</p></li><li><p>
        A MySQL Connector/Net test program that connected to MySQL Server using the
        connection string option <code class="literal">compress=true</code>
        crashed, but only when running on Mono. The program worked as
        expected when running on Microsoft Windows.
      </p><p>
        This was due to a bug in Mono. MySQL Connector/Net was modified to avoid
        using <code class="literal">WeakReferences</code> in the
        <code class="literal">Compressed</code> stream class, which was causing
        the crash.
       (Bug #45463)</p></li><li><p>
        Calling the Entity Framework <code class="literal">SaveChanges()</code>
        method of any MySQL ORM Entity with a column type
        <code class="literal">TIME</code>, generated an error message:
      </p><pre class="programlisting">Unknown PrimitiveKind Time</pre><p>(Bug #45457)</p></li><li><p>
        Insert into two tables failed when using the Entity Framework.
        The exception generated was:
      </p><pre class="programlisting">        The value given is not an instance of type 'Edm.Int32'
      </pre><p>(Bug #45077)</p></li><li><p>
        Input parameters were missing from Stored Procedures when using
        them with ADO.NET Data Entities.
       (Bug #44985)</p></li><li><p>
        Errors occurred when using the Entity Framework with cultures
        that used a comma as the decimal separator. This was because the
        formatting for <code class="literal">SINGLE</code>,
        <code class="literal">DOUBLE</code> and <code class="literal">DECIMAL</code> values
        was not handled correctly.
       (Bug #44455)</p></li><li><p>
        When attempting to connect to MySQL using the Compact Framework
        version of MySQL Connector/Net, an
        <code class="literal">IndexOutOfRangeException</code> exception was
        generated on trying to open the connection.
       (Bug #43736)</p></li><li><p>
        When reading data, such as with a
        <code class="literal">MySqlDataAdapter</code> on a
        <code class="literal">MySqlConnection</code>, MySQL Connector/Net could potentially
        enter an infinite loop in
        <code class="literal">CompressedStream.ReadNextpacket()</code> if
        compression was enabled.
       (Bug #43678)</p></li><li><p>
        An error occurred when building MySQL Connector/Net from source code checked
        out from the public SVN repository. This happened on Linux using
        Mono and Nant. The Mono JIT compiler version was 1.2.6.0. The
        Nant version was 0.85.
      </p><p>
        When an attempt was made to build (for example) the MySQL Connector/Net 5.2
        branch using the command:
      </p><pre class="programlisting">        $ nant -buildfile:Client.build
      </pre><p>
        The following error occurred:
      </p><pre class="programlisting">        BUILD FAILED

        Error loading buildfile.
        Encoding name 'Windows-1252' not supported.
        Parameter name: name
      </pre><p>(Bug #42411)</p></li><li><p>
        After a Reference to "C:\Program Files\MySQL\MySQL Connector Net
        5.2.4\Compact Framework\MySql.Data.CF.dll" was added to a
        Windows Mobile 5.0 project, the project then failed to build,
        generating a Microsoft Visual C# compiler error.
      </p><p>
        The error generated was:
      </p><pre class="programlisting">Error 2 The type 'System.Runtime.CompilerServices.CompilerGeneratedAttribute' 
      has no constructors defined MysqlTest
      Error 3 Internal Compiler Error (0xc0000005 at address 5A7E3714): 
      likely culprit is 'COMPILE'.</pre><p>(Bug #42261)</p></li><li><p>
        MySQL Connector/Net CHM documentation stated that MySQL Server 3.23 was
        supported.
       (Bug #42110)</p></li><li><p>
        In the case of long network inactivity, especially when
        connection pooling was used, connections were sometimes dropped,
        for example, by firewalls.
      </p><p>
        Note: The bugfix introduced a new <code class="literal">keepalive</code>
        parameter, which prevents disconnects by sending an empty TCP
        packet after a specified timeout.
       (Bug #40684)</p></li><li><p>
        MySQL Connector/Net generated the following exception:
      </p><pre class="programlisting">System.NullReferenceException: Object reference not set to an instance of an object.
      bei MySql.Data.MySqlClient.MySqlCommand.TimeoutExpired(Object commandObject)
      bei System.Threading._TimerCallback.TimerCallback_Context(Object state)
      bei System.Threading.ExecutionContext.runTryCode(Object userData)
      bei
      System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode
      code, CleanupCode backoutCode, Object userData)
      bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext,
      ContextCallback callback, Object state)
      bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
      ContextCallback callback, Object state)
      bei System.Threading._TimerCallback.PerformTimerCallback(Object state)</pre><p>(Bug #40005)</p></li><li><p>
        Calling a Stored Procedure with an output parameter through
        MySQL Connector/Net resulted in a memory leak. Calling the same Stored
        Procedure without an output parameter did not result in a memory
        leak.
       (Bug #36027)</p></li><li><p>
        Using a <code class="literal">DataAdapter</code> with a linked
        <code class="literal">MySqlCommandBuilder</code> the following exception
        was thrown when trying to call <code class="literal">da.Update(DataRow[]
        rows)</code>:
      </p><pre class="programlisting">Connection must be valid and open</pre><p>(Bug #34657)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-4"></a>D.3.6.5. Changes in MySQL Connector/Net 6.0.4 (16 June 2009)</h4></div></div></div><p class="release-level">
        This is the first post-GA release, fixing recently discovered
        bugs.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        If a certain socket exception occurred when trying to establish
        a MySQL database connection, MySQL Connector/Net displayed an exception
        message that appeared to be unrelated to the underlying problem.
        This masked the problem and made diagnosing problems more
        difficult.
      </p><p>
        For example, if, when establishing a database connection using
        TCP/IP, Windows on the local machine allocated an ephemeral port
        that conflicted with a socket address still in use, then
        Windows/.NET would throw a socket exception with the following
        error text:
      </p><pre class="programlisting">Only one usage of each socket address (protocol/network address/port) is normally
      permitted <em class="replaceable"><code>IP ADDRESS/PORT</code></em>.</pre><p>
        However, MySQL Connector/Net masked this socket exception and displayed an
        exception with the following text:
      </p><pre class="programlisting">Unable to connect to any of the specified MySQL hosts.</pre><p>(Bug #45021)</p></li><li><p>
        A SQL query string containing an escaped backslash caused an
        exception to be generated:
      </p><pre class="programlisting">Index and length must refer to a location within the string.
      Parameter name: length
      at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean
      fAlwaysCopy)
      at MySql.Data.MySqlClient.MySqlTokenizer.NextParameter()
      at MySql.Data.MySqlClient.Statement.InternalBindParameters(String sql,
      MySqlParameterCollection parameters, MySqlPacket packet)
      at MySql.Data.MySqlClient.Statement.BindParameters()
      at MySql.Data.MySqlClient.PreparableStatement.Execute()
      at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior be‎havior)
      at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()</pre><p>(Bug #44960)</p></li><li><p>
        The Microsoft Visual Studio solution file
        <code class="filename">MySQL-VS2005.sln</code> was invalid. Several
        projects could not be loaded and thus it was not possible to
        build MySQL Connector/Net from source.
       (Bug #44822)</p></li><li><p>
        The Data Set editor generated an error when attempts were made
        to modify insert, update or delete commands:
      </p><pre class="programlisting">Error in WHERE clause near '@'.
      Unable to parse query text.</pre><p>(Bug #44512)</p></li><li><p>
        The DataReader in MySQL Connector/Net 6.0.3 considered a BINARY(16) field as
        a GUID with a length of 16.
       (Bug #44507)</p></li><li><p>
        When creating a new DataSet the following error was generated:
      </p><pre class="programlisting">Failed to open a connection to database.
      Cannot load type with name 'MySQL.Data.VisualStudio.StoredProcedureColumnEnumerator'</pre><p>(Bug #44460)</p></li><li><p>
        The MySQL Connector/Net MySQLRoleProvider reported that there were no roles,
        even when roles existed.
       (Bug #44414)</p></li><li><p>
        MySQL Connector/Net was missing the capability to validate the server's
        certificate when using encryption. This made it possible to
        conduct a man-in-the-middle attack against the connection, which
        defeated the security provided by SSL.
       (Bug #38700)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-3"></a>D.3.6.6. Changes in MySQL Connector/Net 6.0.3 (28 April 2009)</h4></div></div></div><p class="release-level">
        First GA release.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">MySqlTokenizer</code> failed to split fieldnames
        from values if they were not separated by a space. This also
        happened if the string contained certain characters. As a result
        <code class="literal">MySqlCommand.ExecuteNonQuery</code> raised an index
        out of range exception.
      </p><p>
        The resulting errors are illustrated by the following examples.
        Note, the example statements do not have delimiting spaces
        around the <code class="literal">=</code> operator.
      </p><pre class="programlisting">INSERT INTO anytable SET Text='test--test';</pre><p>
        The tokenizer incorrectly interpreted the value as containing a
        comment.
      </p><pre class="programlisting">UPDATE anytable SET Project='123-456',Text='Can you explain this ?',Duration=15 WHERE
      ID=4711;'</pre><p>
        A <code class="literal">MySqlException</code> was generated, as the
        <code class="literal">?</code> in the value was interpreted by the
        tokenizer as a parameter sign. The error message generated was:
      </p><pre class="programlisting">Fatal error encountered during command execution.
      EXCEPTION: MySqlException - Parameter '?'' must be defined.</pre><p>(Bug #44318)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySQL.Data</code> was not displayed as a Reference
        inside Microsoft Visual Studio 2008 Professional.
      </p><p>
        When a new C# project was created in Microsoft Visual Studio
        2008 Professional, <code class="literal">MySQL.Data</code> was not
        displayed when <span class="guimenu">References</span>, <span class="guimenu">Add
        Reference</span> was selected.
       (Bug #44141)</p></li><li><p>
        Column types for <code class="literal">SchemaProvider</code> and
        <code class="literal">ISSchemaProvider</code> did not match.
      </p><p>
        When the source code in <code class="filename">SchemaProvider.cs</code>
        and <code class="filename">ISSchemaProvider.cs</code> were compared it
        was apparent that they were not using the same column types. The
        base provider used SQL such as <code class="literal">SHOW CREATE
        TABLE</code>, while <code class="literal">ISSchemaProvider</code> used
        the schema information tables. Column types used by the base
        class were <code class="literal">INT64</code> and the column types used by
        <code class="literal">ISSchemaProvider</code> were
        <code class="literal">UNSIGNED</code>.
       (Bug #44123)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-2"></a>D.3.6.7. Changes in MySQL Connector/Net 6.0.2 (07 April 2009, beta)</h4></div></div></div><p class="release-level">
        This is a new development release, fixing recently discovered
        bugs.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net 6.0.1 did not load in Microsoft Visual Studio 2008 and
        Visual Studio 2005 Pro.
      </p><p>
        The following error message was generated:
      </p><pre class="programlisting">.NET Framework Data Provider for MySQL: The data provider object factory service was not
      found.</pre><p>(Bug #44064)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-1"></a>D.3.6.8. Changes in MySQL Connector/Net 6.0.1 (02 April 2009, beta)</h4></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        An insert and update error was generated by the decimal data
        type in the Entity Framework, when a German collation was used.
       (Bug #43574)</p></li><li><p>
        Generating an Entity Data Model (EDM) schema with a table
        containing columns with data types <code class="literal">MEDIUMTEXT</code>
        and <code class="literal">LONGTEXT</code> generated a runtime error
        message “<span class="quote">Max value too long or too short for
        Int32</span>”.
       (Bug #43480)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-6-0-0"></a>D.3.6.9. Changes in MySQL Connector/Net 6.0.0 (02 March 2009, alpha)</h4></div></div></div><p class="release-level">
        This is a new Alpha development release.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A null reference exception was generated when
        <code class="literal">MySqlConnection.ClearPool(connection)</code> was
        called.
       (Bug #42801)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-3-x"></a>D.3.7. Changes in MySQL Connector/Net Version 5.3.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-5-3-0">D.3.7.1. Changes in MySQL Connector/Net 5.3.0 (Not released)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-3-0"></a>D.3.7.1. Changes in MySQL Connector/Net 5.3.0 (Not released)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The Web Provider did not work at all on a remote host, and did
        not create a database when using
        <code class="literal">autogenerateschema="true"</code>.
       (Bug #39072)</p></li><li><p>
        The MySQL Connector/Net installer program ended prematurely without reporting
        the specific error.
       (Bug #39019)</p></li><li><p>
        When called with an incorrect password the
        <code class="methodname">MembershipProvider.GetPassword()</code> method
        threw a
        <code class="exceptionname">MySQLException</code>
        instead of a
        <code class="exceptionname">MembershipPasswordException</code>
        .
       (Bug #38939)</p></li><li><p>
        Possible overflow in
        <code class="methodname">MySqlPacket.ReadLong()</code>.
       (Bug #36997)</p></li><li><p>
        The <code class="methodname">TokenizeSql</code> method was adding query
        overhead and causing high CPU utilization for larger queries.
       (Bug #36836)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-2-x"></a>D.3.8. Changes in MySQL Connector/Net Version 5.2.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-5-2-8">D.3.8.1. Changes in MySQL Connector/Net 5.2.8 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-7">D.3.8.2. Changes in MySQL Connector/Net 5.2.7 (15 July 2009)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-6">D.3.8.3. Changes in MySQL Connector/Net 5.2.6 (28 April 2009)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-5">D.3.8.4. Changes in MySQL Connector/Net 5.2.5 (19 November 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-4">D.3.8.5. Changes in MySQL Connector/Net 5.2.4 (13 November 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-3">D.3.8.6. Changes in MySQL Connector/Net 5.2.3 (19 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-2">D.3.8.7. Changes in MySQL Connector/Net 5.2.2 (12 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-1">D.3.8.8. Changes in MySQL Connector/Net 5.2.1 (27 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-0">D.3.8.9. Changes in MySQL Connector/Net 5.2.0 (11 February 2008)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-8"></a>D.3.8.1. Changes in MySQL Connector/Net 5.2.8 (Not released)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        If <code class="literal">MySqlConnection.GetSchema</code> was called for
        "Indexes" on a table named “<span class="quote">b`a`d</span>” as follows:
      </p><pre class="programlisting">DataTable schemaPrimaryKeys = connection.GetSchema(
  "Indexes",
  new string[] { null, schemaName, "b`a`d"});</pre><p>
        Then the following exception was generated:
      </p><pre class="programlisting">You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near 'a`d`' at line 1</pre><p>(Bug #48101)</p></li><li><p>
        When the connection string option “<span class="quote">Connection Reset =
        True</span>” was used, a connection reset used the previously
        used encoding for the subsequent authentication operation. This
        failed, for example, if UCS2 was used to read the last column
        before the reset.
       (Bug #47153)</p></li><li><p>
        In the <code class="literal">MySqlDataReader</code> class the
        <code class="literal">GetSByte</code> function returned a
        <code class="literal">byte</code> value instead of an
        <code class="literal">sbyte</code> value.
       (Bug #46620)</p></li><li><p>
        When trying to create stored procedures from an SQL script, a
        <code class="literal">MySqlException</code> was thrown when attempting to
        redefine the <code class="literal">DELIMITER</code>:
      </p><pre class="programlisting">        MySql.Data.MySqlClient.MySqlException was unhandled
        Message="You have an error in your SQL syntax; check the manual that corresponds to your
        MySQL server version for the right syntax to use near 'DELIMITER' at line 1"
        Source="MySql.Data"
        ErrorCode=-2147467259
        Number=1064
        StackTrace:
        à MySql.Data.MySqlClient.MySqlStream.ReadPacket()
        à MySql.Data.MySqlClient.NativeDriver.ReadResult(UInt64&amp; affectedRows, Int64&amp;
        lastInsertId)
        à MySql.Data.MySqlClient.MySqlDataReader.GetResultSet()
        à MySql.Data.MySqlClient.MySqlDataReader.NextResult()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
        à MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
      à MySql.Data.MySqlClient.MySqlScript.Execute()</pre><p>
        Note: The <code class="literal">MySqlScript</code> class has been fixed to
        support the delimiter statement as it is found in SQL scripts.
       (Bug #46429)</p></li><li><p>
        The MySQL Connector/Net Profile Provider,
        <code class="literal">MySql.Web.Profile.MySQLProfileProvider</code>,
        generated an error when running on Mono. When an attempt was
        made to save a string in <code class="literal">Profile.Name</code> the
        string was not saved to the
        <code class="literal">my_aspnet_Profiles</code> table. If an attempt was
        made to force the save with <code class="literal">Profile.Save()</code>
        the following error was generated:
      </p><pre class="programlisting">        Server Error in '/mono' Application

        --------------------------------------------------------------------------------

        The requested feature is not implemented.
        Description: HTTP 500. Error processing request.

        Stack Trace: 

        System.NotImplementedException: The requested feature is not implemented.
        at MySql.Data.MySqlClient.MySqlConnection.EnlistTransaction
        (System.Transactions.Transaction transaction) [0x00000] 
        at MySql.Data.MySqlClient.MySqlConnection.Open () [0x00000] 
        at MySql.Web.Profile.MySQLProfileProvider.SetPropertyValues
        (System.Configuration.SettingsContext context,
        System.Configuration.SettingsPropertyValueCollection collection) [0x00000] 
        

        --------------------------------------------------------------------------------
        Version information: Mono Version: 2.0.50727.1433; ASP.NET Version: 2.0.50727.1433
      </pre><p>(Bug #46375)</p></li><li><p>
        When using MySQL Connector/Net 6.0.4 and a MySQL Server 4.1 an exception was
        generated when trying to execute:
      </p><pre class="programlisting">        connection.GetSchema("Columns", ...);
      </pre><p>
        The exception generated was:
      </p><pre class="programlisting">        'connection.GetSchema("Columns")' threw an exception of type
        'System.ArgumentException'System.Data.DataTable {System.ArgumentException}
        base{"Input string was not in a correct format.Couldn't store &lt;'Select'&gt; in
        NUMERIC_PRECISION Column.  Expected type is UInt64."}System.Exception
        {System.ArgumentException}
      </pre><p>(Bug #46270)</p></li><li><p>
        The MySQL Connector/Net method
        <code class="literal">StoredProcedure.GetParameters(string)</code> ignored
        the programmer's setting of the
        <code class="literal">UseProcedureBodies</code> option. This broke any
        application for which the application's parameter names did not
        match the parameter names in the Stored Procedure, resulting in
        an <code class="literal">ArgumentException</code> with the message
        “<span class="quote">Parameter 'foo' not found in the collection.</span>” and
        the following stack trace:
      </p><pre class="programlisting">        MySql.Data.dll!MySql.Data.MySqlClient.MySqlParameterCollection.GetParameterFlexible(stri
        ng parameterName = "pStart", bool throwOnNotFound = true) Line 459C#
        MySql.Data.dll!MySql.Data.MySqlClient.StoredProcedure.Resolve() Line 157 + 0x25
        bytesC#
        MySql.Data.dll!MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(System.Data.CommandBeha
        vior behavior = SequentialAccess) Line 405 + 0xb bytesC#
        MySql.Data.dll!MySql.Data.MySqlClient.MySqlCommand.ExecuteDbDataReader(System.Data.Comma
        ndBehavior behavior = SequentialAccess) Line 884 + 0xb bytesC#
        System.Data.dll!System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(System
        .Data.CommandBehavior behavior) + 0xb bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.FillInternal(System.Data.DataSet
        dataset = {System.Data.DataSet}, System.Data.DataTable[] datatables = null, int
        startRecord = 0, int maxRecords = 0, string srcTable = "Table", System.Data.IDbCommand
        command = {MySql.Data.MySqlClient.MySqlCommand}, System.Data.CommandBehavior behavior) +
        0x83 bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.Fill(System.Data.DataSet dataSet, int
        startRecord, int maxRecords, string srcTable, System.Data.IDbCommand command,
        System.Data.CommandBehavior behavior) + 0x120 bytes
        System.Data.dll!System.Data.Common.DbDataAdapter.Fill(System.Data.DataSet dataSet) +
        0x5f bytes
      </pre><p>(Bug #46213)</p></li><li><p>
        Conversion of MySQL <code class="literal">TINYINT(1)</code> to
        <code class="literal">boolean</code> failed.
       (Bug #46205, Bug #46359, Bug #41953)</p></li><li><p>
        If the application slept for longer than the specified
        <code class="literal">net_write_timeout</code>, and then resumed
        <code class="literal">Read</code> operations on a connection, then the
        application failed silently.
       (Bug #45978)</p></li><li><p>
        When reading data, such as with a
        <code class="literal">MySqlDataAdapter</code> on a
        <code class="literal">MySqlConnection</code>, MySQL Connector/Net could potentially
        enter an infinite loop in
        <code class="literal">CompressedStream.ReadNextpacket()</code> if
        compression was enabled.
       (Bug #43678)</p></li><li><p>
        An error occurred when building MySQL Connector/Net from source code checked
        out from the public SVN repository. This happened on Linux using
        Mono and Nant. The Mono JIT compiler version was 1.2.6.0. The
        Nant version was 0.85.
      </p><p>
        When an attempt was made to build (for example) the MySQL Connector/Net 5.2
        branch using the command:
      </p><pre class="programlisting">        $ nant -buildfile:Client.build
      </pre><p>
        The following error occurred:
      </p><pre class="programlisting">        BUILD FAILED

        Error loading buildfile.
        Encoding name 'Windows-1252' not supported.
        Parameter name: name
      </pre><p>(Bug #42411)</p></li><li><p>
        MySQL Connector/Net CHM documentation stated that MySQL Server 3.23 was
        supported.
       (Bug #42110)</p></li><li><p>
        Using a <code class="literal">DataAdapter</code> with a linked
        <code class="literal">MySqlCommandBuilder</code> the following exception
        was thrown when trying to call <code class="literal">da.Update(DataRow[]
        rows)</code>:
      </p><pre class="programlisting">Connection must be valid and open</pre><p>(Bug #34657)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-7"></a>D.3.8.2. Changes in MySQL Connector/Net 5.2.7 (15 July 2009)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">EscapeString</code> code carried out escaping by
        calling <code class="literal">string.Replace</code> multiple times. This
        resulted in a performance bottleneck, as for every line a new
        string was allocated and another was disposed of by the garbage
        collector.
       (Bug #45699)</p></li><li><p>
        A MySQL Connector/Net test program that connected to MySQL Server using the
        connection string option <code class="literal">compress=true</code>
        crashed, but only when running on Mono. The program worked as
        expected when running on Microsoft Windows.
      </p><p>
        This was due to a bug in Mono. MySQL Connector/Net was modified to avoid
        using <code class="literal">WeakReferences</code> in the
        <code class="literal">Compressed</code> stream class, which was causing
        the crash.
       (Bug #45463)</p></li><li><p>
        If a certain socket exception occurred when trying to establish
        a MySQL database connection, MySQL Connector/Net displayed an exception
        message that appeared to be unrelated to the underlying problem.
        This masked the problem and made diagnosing problems more
        difficult.
      </p><p>
        For example, if, when establishing a database connection using
        TCP/IP, Windows on the local machine allocated an ephemeral port
        that conflicted with a socket address still in use, then
        Windows/.NET would throw a socket exception with the following
        error text:
      </p><pre class="programlisting">Only one usage of each socket address (protocol/network address/port) is normally
      permitted <em class="replaceable"><code>IP ADDRESS/PORT</code></em>.</pre><p>
        However, MySQL Connector/Net masked this socket exception and displayed an
        exception with the following text:
      </p><pre class="programlisting">Unable to connect to any of the specified MySQL hosts.</pre><p>(Bug #45021)</p></li><li><p>
        The Microsoft Visual Studio solution file
        <code class="filename">MySQL-VS2005.sln</code> was invalid. Several
        projects could not be loaded and thus it was not possible to
        build MySQL Connector/Net from source.
       (Bug #44822)</p></li><li><p>
        The MySQL Connector/Net MySQLRoleProvider reported that there were no roles,
        even when roles existed.
       (Bug #44414)</p></li><li><p>
        After a Reference to "C:\Program Files\MySQL\MySQL Connector Net
        5.2.4\Compact Framework\MySql.Data.CF.dll" was added to a
        Windows Mobile 5.0 project, the project then failed to build,
        generating a Microsoft Visual C# compiler error.
      </p><p>
        The error generated was:
      </p><pre class="programlisting">Error 2 The type 'System.Runtime.CompilerServices.CompilerGeneratedAttribute' 
      has no constructors defined MysqlTest
      Error 3 Internal Compiler Error (0xc0000005 at address 5A7E3714): 
      likely culprit is 'COMPILE'.</pre><p>(Bug #42261)</p></li><li><p>
        MySQL Connector/Net generated the following exception:
      </p><pre class="programlisting">System.NullReferenceException: Object reference not set to an instance of an object.
      bei MySql.Data.MySqlClient.MySqlCommand.TimeoutExpired(Object commandObject)
      bei System.Threading._TimerCallback.TimerCallback_Context(Object state)
      bei System.Threading.ExecutionContext.runTryCode(Object userData)
      bei
      System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode
      code, CleanupCode backoutCode, Object userData)
      bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext,
      ContextCallback callback, Object state)
      bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
      ContextCallback callback, Object state)
      bei System.Threading._TimerCallback.PerformTimerCallback(Object state)</pre><p>(Bug #40005)</p></li><li><p>
        When a TableAdapter was created on a DataSet, it was not
        possible to use a stored procedure with variables. The following
        error was generated:
      </p><pre class="programlisting">The method or operation is not implemented</pre><p>(Bug #39409)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-6"></a>D.3.8.3. Changes in MySQL Connector/Net 5.2.6 (28 April 2009)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A new connection string option has been added: <code class="literal">use
        affected rows</code>. When <code class="literal">true</code> the
        connection will report changed rows instead of found rows.
       (Bug #44194)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Calling <code class="literal">GetSchema()</code> on
        <code class="literal">Indexes</code> or <code class="literal">IndexColumns</code>
        failed where index or column names were restricted.
      </p><p>
        In <code class="filename">SchemaProvider.cs</code>, methods
        <code class="literal">GetIndexes()</code> and
        <code class="literal">GetIndexColumns()</code> passed their restrictions
        directly to <code class="literal">GetTables()</code>. This only worked if
        the restrictions were no more specific than
        <code class="literal">schemaName</code> and <code class="literal">tableName</code>.
        If <code class="literal">IndexName</code> was given, this was passed to
        <code class="literal">GetTables()</code> where it was treated as
        <code class="literal">TableType</code>. As a result no tables were
        returned, unless the index name happened to be <code class="literal">BASE
        TABLE</code> or <code class="literal">VIEW</code>. This meant that both
        methods failed to return any rows.
       (Bug #43991)</p></li><li><p>
        <code class="literal">GetSchema("MetaDataCollections")</code> should have
        returned a table with a column named
        “<span class="quote">NumberOfRestrictions</span>” not
        “<span class="quote">NumberOfRestriction</span>”.
      </p><p>
        This can be confirmed by referencing the
        <a href="http://msdn.microsoft.com/en-us/library/system.data.common.dbmetadatacolumnnames.numberofrestrictions.aspx" target="_top">Microsoft
        Documentation</a>.
       (Bug #43990)</p></li><li><p>
        Requests sent to the MySQL Connector/Net role provider to remove a user from
        a role failed. The query log showed the query was correctly
        executed within a transaction which was immediately rolled back.
        The rollback was caused by a missing call to the
        <code class="literal">Complete</code> method of the transaction.
       (Bug #43553)</p></li><li><p>
        When using <code class="literal">MySqlBulkLoader.Load()</code>, the text
        file is opened by
        <code class="literal">NativeDriver.SendFileToServer</code>. If it
        encountered a problem opening the file as a stream, an exception
        was generated and caught. An attempt to clean up resources was
        then made in the <code class="literal">finally{}</code> clause by calling
        <code class="literal">fs.Close()</code>, but since the stream was never
        successfully opened, this was an attempt to execute a method of
        a null reference.
       (Bug #43332)</p></li><li><p>
        A null reference exception was generated when
        <code class="literal">MySqlConnection.ClearPool(connection)</code> was
        called.
       (Bug #42801)</p></li><li><p>
        <code class="literal">MySQLMembershipProvider.ValidateUser</code> only
        used the <code class="literal">userId</code> to validate. However, it
        should also use the <code class="literal">applicationId</code> to perform
        the validation correctly.
      </p><p>
        The generated query was, for example:
      </p><pre class="programlisting">SELECT Password, PasswordKey, PasswordFormat, IsApproved, Islockedout
      FROM my_aspnet_Membership WHERE userId=13</pre><p>
        Note that <code class="literal">applicationId</code> is not used.
       (Bug #42574)</p></li><li><p>
        There was an error in the <code class="literal">ProfileProvider</code>
        class in the <code class="literal">private ProfileInfoCollection
        GetProfiles()</code> function. The column of the final table
        was named “<span class="quote">lastUpdatdDate</span>” ('e' is
        missing) instead of the correct “<span class="quote">lastUpdatedDate</span>”.
       (Bug #41654)</p></li><li><p>
        The <code class="methodname">GetGuid()</code> method of
        <code class="classname">MySqlDataReader</code> did not treat
        <code class="literal">BINARY(16)</code> column data as a GUID. When
        operating on such a column a <code class="literal">FormatException</code>
        exception was generated.
       (Bug #41452)</p></li><li><p>
        When ASP.NET membership was configured to not require password
        question and answer using
        <code class="literal">requiresQuestionAndAnswer="false"</code>, a
        <code class="literal">SqlNullValueException</code> was generated when
        using <code class="literal">MembershipUser.ResetPassword()</code> to reset
        the user password.
       (Bug #41408)</p></li><li><p>
        If a <code class="literal">Stored Procedure</code> contained spaces in its
        parameter list, and was then called from MySQL Connector/Net, an exception
        was generated. However, the same <code class="literal">Stored
        Procedure</code> called from the MySQL Query Analyzer or the
        MySQL Client worked correctly.
      </p><p>
        The exception generated was:
      </p><pre class="programlisting">        Parameter '0' not found in the collection.
      </pre><p>(Bug #41034)</p></li><li><p>
        The <code class="literal">DATETIME</code> format contained an erroneous
        space.
       (Bug #41021)</p></li><li><p>
        When <code class="literal">MySql.Web.Profile.MySQLProfileProvider</code>
        was configured, it was not possible to assign a name other than
        the default name <code class="literal">MySQLProfileProvider</code>.
      </p><p>
        If the name <code class="literal">SCC_MySQLProfileProvider</code> was
        assigned, an exception was generated when attempting to use
        <code class="literal">Page.Context.Profile['custom prop']</code>.
      </p><p>
        The exception generated was:
      </p><pre class="programlisting">The profile default provider was not found.</pre><p>
        Note that the exception stated: 'the profile
        <span class="bold"><strong>default provider</strong></span>...', even
        though a different name was explicitly requested.
       (Bug #40871)</p></li><li><p>
        When <code class="literal">ExecuteNonQuery</code> was called with a
        command type of <code class="literal">Stored Procedure</code> it worked
        for one user but resulted in a hang for another user with the
        same database permissions.
      </p><p>
        However, if <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> was used in the
        command text and <code class="literal">ExecuteNonQuery</code> was used
        with a command type of <code class="literal">Text</code>, the call worked
        for both users.
       (Bug #40139)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-5"></a>D.3.8.4. Changes in MySQL Connector/Net 5.2.5 (19 November 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Visual Studio 2008 displayed the following error three times on
        start-up:
      </p><pre class="programlisting">        "Package Load Failure

        Package 'MySql.Data.VisualStudio.MySqlDataProviderPackage, MySql.VisualStudio,
        Version=5.2.4, Culture=neutral, PublicKeyToken=null' has failed to load properly (GUID =
        {79A115C9-B133-4891-9E7B-242509DAD272}).  Please contact the package vendor for
        assistance.  Application restart is recommended, due to possible environment corruption.
        Would you like to disable loading the package in the future?  You may use
        'devenve/resetskippkgs' to re-enable package loading."
      </pre><p>(Bug #40726)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-4"></a>D.3.8.5. Changes in MySQL Connector/Net 5.2.4 (13 November 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlDataReader</code> did not feature a
        <code class="literal">GetSByte</code> method.
       (Bug #40571)</p></li><li><p>
        When working with stored procedures MySQL Connector/Net generated an
        exception <code class="literal">Unknown "table parameters" in
        information_schema</code>.
       (Bug #40382)</p></li><li><p>
        <code class="literal">GetDefaultCollation</code> and
        <code class="literal">GetMaxLength</code> were not thread safe. These
        functions called the database to get a set of parameters and
        cached them in two static dictionaries in the function
        <code class="literal">InitCollections</code>. However, if many threads
        called them they would try to insert the same keys in the
        collections resulting in duplicate key exceptions.
       (Bug #40231)</p></li><li><p>
        If connection pooling was not set explicitly in the connection
        string, MySQL Connector/Net added “<span class="quote">;Pooling=False</span>” to the end of
        the connection string when
        <code class="literal">MySqlCommand.ExecuteReader()</code> was called.
      </p><p>
        If connection pooling was explicitly set in the connection
        string, when <code class="literal">MySqlConnection.Open()</code> was
        called it converted “<span class="quote">Pooling=True</span>” to
        “<span class="quote">pooling=True</span>”.
      </p><p>
        If <code class="literal">MySqlCommand.ExecuteReader()</code> was
        subsequently called, it concatenated
        “<span class="quote">;Pooling=False</span>” to the end of the connection
        string. The resulting connection string was thus terminated with
        “<span class="quote">pooling=True;Pooling=False</span>”. This disabled
        connection pooling completely.
       (Bug #40091)</p></li><li><p>
        The connection string option <code class="literal">Functions Return
        String</code> did not set the correct encoding for the result
        string. Even though the connection string option
        <code class="literal">Functions Return String=true;</code> is set, the
        result of <code class="literal">SELECT DES_DECRYPT()</code> contained
        “<span class="quote">??</span>” instead of the correct national character
        symbols.
       (Bug #40076)</p></li><li><p>
        If, when using the <code class="classname">MySqlTransaction</code>
        transaction object, an exception was thrown, the transaction
        object was not disposed of and the transaction was not rolled
        back.
       (Bug #39817)</p></li><li><p>
        After the <code class="literal">ConnectionString</code> property was
        initialized using the public setter of
        <code class="classname">DbConnectionStringBuilder</code>, the
        <code class="methodname">GetConnectionString</code> method of
        <code class="classname">MySqlConnectionStringBuilder</code> incorrectly
        returned <code class="literal">null</code> when <code class="literal">true</code>
        was assigned to the <code class="literal">includePass</code> parameter.
       (Bug #39728)</p></li><li><p>
        When using <code class="classname">ProfileProvider</code>, attempting to
        update a previously saved property failed.
       (Bug #39330)</p></li><li><p>
        Reading a negative time value greater than -01:00:00 returned
        the absolute value of the original time value.
       (Bug #39294)</p></li><li><p>
        Inserting a negative time value (negative
        <code class="literal">TimeSpan</code>) into a <code class="literal">Time</code>
        column through the use of <code class="classname">MySqlParameter</code>
        caused
        <code class="exceptionname">MySqlException</code>
        to be thrown.
       (Bug #39275)</p></li><li><p>
        When a data connection was created in the server explorer of
        Visual Studio 2008 Team, an error was generated when trying to
        expand stored procedures that had parameters.
      </p><p>
        Also, if <span class="guilabel">TableAdapter</span> was right-clicked and
        then <span class="guimenu">Add</span>, <span class="guimenu">Query</span>,
        <span class="guimenu">Use Existing Stored Procedures</span> selected, if
        you then attempted to select a stored procedure, the window
        would close and no error message would be displayed.
       (Bug #39252)</p></li><li><p>
        The Web Provider did not work at all on a remote host, and did
        not create a database when using
        <code class="literal">autogenerateschema="true"</code>.
       (Bug #39072)</p></li><li><p>
        MySQL Connector/Net called hashed password methods not supported in Mono 2.0
        Preview 2.
       (Bug #38895)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-3"></a>D.3.8.6. Changes in MySQL Connector/Net 5.2.3 (19 August 2008)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Error string was returned after a 28000 second
        <a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a>. This has been
        changed to generate a <code class="literal">ConnectionState.Closed</code>
        event.
       (Bug #38119)</p></li><li><p>
        Changed how the procedure schema collection is retrieved. If
        <code class="literal">use procedure bodies=true</code> then the
        <code class="literal">mysql.proc</code> table is selected directly as this
        is up to 50 times faster than the current
        <code class="literal">information_schema</code> implementation. If
        <code class="literal">use procedure bodies=false</code>, then the
        <code class="literal">information_schema</code> collection is queried.
       (Bug #36694)</p></li><li><p>
        String escaping functionality has been moved from the
        <code class="classname">MySqlString</code> class to the
        <code class="classname">MySqlHelper</code> class, where it can be
        accessed by the <code class="methodname">EscapeString</code> method.
       (Bug #36205)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="methodname">GetOrdinal()</code> method failed to
        return the ordinal if the column name string contained an
        accent.
       (Bug #38721)</p></li><li><p>
        MySQL Connector/Net uninstaller did not clean up all installed files.
       (Bug #38534)</p></li><li><p>
        There was a short circuit evaluation error in the
        <code class="methodname">MySqlCommand.CheckState()</code> method. When
        the statement <code class="literal">connection == null</code> was true a
        <code class="classname">NullReferenceException</code> was thrown and not
        the expected <code class="classname">InvalidOperationException</code>.
       (Bug #38276)</p></li><li><p>
        The provider did not silently create the user if the user did
        not exist.
       (Bug #38243)</p></li><li><p>
        Executing a command that resulted in a fatal exception did not
        close the connection.
       (Bug #37991)</p></li><li><p>
        When a prepared insert query is run that contains an
        <code class="literal">UNSIGNED TINYINT</code> in the parameter list, the
        complete query and data that should be inserted is corrupted and
        no error is thrown.
       (Bug #37968)</p></li><li><p>
        In a .NET application MySQL Connector/Net modifies the connection string so
        that it contains several occurrences of the same option with
        different values. This is illustrated by the example that
        follows.
      </p><p>
        The original connection string:
      </p><pre class="programlisting">        host=localhost;database=test;uid=*****;pwd=*****;
      connect timeout=25; auto enlist=false;pooling=false;</pre><p>
        The connection string after closing
        <code class="classname">MySqlDataReader</code>:
      </p><pre class="programlisting">        host=localhost;database=test;uid=*****;pwd=*****;
        connect timeout=25;auto enlist=false;pooling=false;
        Allow User Variables=True;Allow User Variables=False;
      Allow User Variables=True;Allow User Variables=False;</pre><p>(Bug #37955)</p></li><li><p>
        Unnecessary network traffic was generated for the normal case
        where the web provider schema was up to date.
       (Bug #37469)</p></li><li><p>
        <code class="methodname">MySqlReader.GetOrdinal()</code> performance
        enhancements break existing functionality.
       (Bug #37239)</p></li><li><p>
        The <code class="literal">autogenerateschema</code> option produced tables
        with incorrect collations.
       (Bug #36444)</p></li><li><p>
        <code class="methodname">GetSchema</code> did not work correctly when
        querying for a collection, if using a non-English locale.
       (Bug #35459)</p></li><li><p>
        When reading back a stored double or single value using the .NET
        provider, the value had less precision than the one stored.
       (Bug #33322)</p></li><li><p>
        Using the MySQL Visual Studio plugin and a MySQL 4.1 server,
        certain field types (<a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a>) would
        not be identified correctly. Also, when looking for tables, the
        plugin would list all tables matching a wildcard pattern of the
        database name supplied in the connection string, instead of only
        tables within the specified database.
       (Bug #30603)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-2"></a>D.3.8.7. Changes in MySQL Connector/Net 5.2.2 (12 May 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Product documentation incorrectly stated '?' is the preferred
        parameter marker.
       (Bug #37349)</p></li><li><p>
        An incorrect value for a bit field would returned in a multi-row
        query if a preceding value for the field returned
        <code class="literal">NULL</code>.
       (Bug #36313)</p></li><li><p>
        Tables with <code class="literal">GEOMETRY</code> field types would return
        an unknown data type exception.
       (Bug #36081)</p></li><li><p>
        When using the <code class="literal">MySQLProfileProvider</code>, setting
        profile details and then reading back saved data would result in
        the default values being returned instead of the updated values.
       (Bug #36000)</p></li><li><p>
        When creating a connection, setting the
        <code class="literal">ConnectionString</code> property of
        <code class="literal">MySqlConnection</code> to <code class="literal">NULL</code>
        would throw an exception.
       (Bug #35619)</p></li><li><p>
        The <code class="methodname">DbCommandBuilder.QuoteIdentifer</code>
        method was not implemented.
       (Bug #35492)</p></li><li><p>
        When using encrypted passwords, the
        <code class="literal">GetPassword()</code> function would return the wrong
        string.
       (Bug #35336)</p></li><li><p>
        An error would be raised when calling
        <code class="literal">GetPassword()</code> with a <code class="literal">NULL</code>
        value.
       (Bug #35332)</p></li><li><p>
        When retrieving data where a field has been identified as
        containing a GUID value, the incorrect value would be returned
        when a previous row contained a <code class="literal">NULL</code> value
        for that field.
       (Bug #35041)</p></li><li><p>
        Using the <code class="literal">TableAdapter Wizard</code> would fail when
        generating commands that used stored procedures due to the
        change in supported parameter characters.
       (Bug #34941)</p></li><li><p>
        When creating a new stored procedures, the new parameter code
        which permits the use of the <code class="literal">@</code> symbol would
        interfere with the specification of a
        <code class="literal">DEFINER</code>.
       (Bug #34940)</p></li><li><p>
        When using <code class="literal">SqlDataSource</code> to open a
        connection, the connection would not automatically be closed
        when access had completed.
       (Bug #34460)</p></li><li><p>
        There was a high level of contention in the connection pooling
        code that could lead to delays when opening connections and
        submitting queries. The connection pooling code has been
        modified to try and limit the effects of the contention issue.
       (Bug #34001)</p></li><li><p>
        Using the <code class="literal">TableAdaptor</code> wizard in combination
        with a suitable <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement,
        only the associated <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
        statement would also be created, rather than the required
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> and
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
       (Bug #31338)</p></li><li><p>
        Fixed problem in datagrid code related to creating a new table.
        This problem may have been introduced with .NET 2.0 SP1.
      </p></li><li><p>
        Fixed profile provider that would throw an exception if you were
        updating a profile that already existed.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-1"></a>D.3.8.8. Changes in MySQL Connector/Net 5.2.1 (27 February 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When using the provider to generate or update users and
        passwords, the password checking algorithm would not validate
        the password strength or requirements correctly.
       (Bug #34792)</p></li><li><p>
        When executing statements that used stored procedures and
        functions, the new parameter code could fail to identify the
        correct parameter format.
       (Bug #34699)</p></li><li><p>
        The installer would fail to the DDEX provider binary if the
        Visual Studio 2005 component was not selected. The result would
        lead to MySQL Connector/Net not loading properly when using the interface to
        a MySQL server within Visual Studio.
       (Bug #34674)</p></li><li><p>
        A number of issues were identified in the case, connection and
        schema areas of the code for
        <code class="literal">MembershipProvider</code>,
        <code class="literal">RoleProvider</code>,
        <code class="literal">ProfileProvider</code>.
       (Bug #34495)</p></li><li><p>
        When using web providers, the MySQL Connector/Net would check the schema and
        cache the application id, even when the connection string had
        been set. The effect would be to break the membership provider
        list.
       (Bug #34451)</p></li><li><p>
        Attempting to use an isolation level other than the default with
        a transaction scope would use the default isolation level.
       (Bug #34448)</p></li><li><p>
        When altering a stored procedure within Visual Studio, the
        parameters to the procedure could be lost.
       (Bug #34359)</p></li><li><p>
        A race condition could occur within the procedure cache
        resulting the cache contents overflowing beyond the configured
        cache size.
       (Bug #34338)</p></li><li><p>
        Fixed problem with Visual Studio 2008 integration that caused
        pop-up menus on server explorer nodes to not function
      </p></li><li><p>
        The provider code has been updated to fix a number of
        outstanding issues.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-2-0"></a>D.3.8.9. Changes in MySQL Connector/Net 5.2.0 (11 February 2008)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Performing <code class="function">GetValue()</code> on a field
        <code class="literal">TINYINT(1)</code> returned a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BOOLEAN</code></a>. While not a bug, this
        caused problems in software that expected an
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a> to be returned. A new
        connection string option <code class="literal">Treat Tiny As
        Boolean</code> has been added with a default value of
        <code class="literal">true</code>. If set to <code class="literal">false</code> the
        provider will treat <code class="literal">TINYINT(1)</code> as
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a>.
       (Bug #34052)</p></li><li><p>
        Added support for <code class="literal">DbDataAdapter</code>
        <code class="literal">UpdateBatchSize</code>. Batching is fully supported
        including collapsing inserts down into the multi-value form if
        possible.
      </p></li><li><p>
        DDEX provider now works under Visual Studio 2008 beta 2.
      </p></li><li><p>
        Added ClearPool and ClearAllPools features.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Some speed improvements have been implemented in the
        <code class="literal">TokenizeSql</code> process used to identify elements
        of SQL statements.
       (Bug #34220)</p></li><li><p>
        When accessing tables from different databases within the same
        <code class="literal">TransactionScope</code>, the same user/password
        combination would be used for each database connection. MySQL Connector/Net
        does not handle multiple connections within the same transaction
        scope. An error is now returned if you attempt this process,
        instead of using the incorrect authorization information.
       (Bug #34204)</p></li><li><p>
        The status of connections reported through the state change
        handler was not being updated correctly.
       (Bug #34082)</p></li><li><p>
        Incorporated some connection string cache optimizations sent to
        us by Maxim Mass.
       (Bug #34000)</p></li><li><p>
        In an open connection where the server had disconnected
        unexpectedly, the status information of the connection would not
        be updated properly.
       (Bug #33909)</p></li><li><p>
        Data cached from the connection string could return invalid
        information because the internal routines were not using
        case-sensitive semantics. This lead to updated connection string
        options not being recognized if they were of a different case
        than the existing cached values.
       (Bug #31433)</p></li><li><p>
        Column name metadata was not using the character set as defined
        within the connection string being used.
       (Bug #31185)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (Bug #31090)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (Bug #30964)</p></li><li><p>
        When running a stored procedure multiple times on the same
        connection, the memory usage could increase indefinitely.
       (Bug #30116)</p></li><li><p>
        Using compression in the MySQL connection with MySQL Connector/Net would be
        slower than using native (uncompressed) communication.
       (Bug #27865)</p></li><li><p>
        The <code class="literal">MySqlDbType.Datetime</code> has been replaced
        with <code class="literal">MySqlDbType.DateTime</code>. The old format has
        been obsoleted.
       (Bug #26344)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-x"></a>D.3.9. Changes in MySQL Connector/Net Version 5.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-5-1-8">D.3.9.1. Changes in MySQL Connector/Net 5.1.8 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-7">D.3.9.2. Changes in MySQL Connector/Net 5.1.7 (21 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-6">D.3.9.3. Changes in MySQL Connector/Net 5.1.6 (12 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-5">D.3.9.4. Changes in MySQL Connector/Net 5.1.5 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-4">D.3.9.5. Changes in MySQL Connector/Net 5.1.4 (20 November 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-3">D.3.9.6. Changes in MySQL Connector/Net 5.1.3 (21 September 2007, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-2">D.3.9.7. Changes in MySQL Connector/Net 5.1.2 (18 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-1">D.3.9.8. Changes in MySQL Connector/Net 5.1.1 (23 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-0">D.3.9.9. Changes in MySQL Connector/Net 5.1.0 (01 May 2007)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-8"></a>D.3.9.1. Changes in MySQL Connector/Net 5.1.8 (Not released)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Calling <code class="literal">GetSchema()</code> on
        <code class="literal">Indexes</code> or <code class="literal">IndexColumns</code>
        failed where index or column names were restricted.
      </p><p>
        In <code class="filename">SchemaProvider.cs</code>, methods
        <code class="literal">GetIndexes()</code> and
        <code class="literal">GetIndexColumns()</code> passed their restrictions
        directly to <code class="literal">GetTables()</code>. This only worked if
        the restrictions were no more specific than
        <code class="literal">schemaName</code> and <code class="literal">tableName</code>.
        If <code class="literal">IndexName</code> was given, this was passed to
        <code class="literal">GetTables()</code> where it was treated as
        <code class="literal">TableType</code>. As a result no tables were
        returned, unless the index name happened to be <code class="literal">BASE
        TABLE</code> or <code class="literal">VIEW</code>. This meant that both
        methods failed to return any rows.
       (Bug #43991)</p></li><li><p>
        The <code class="literal">DATETIME</code> format contained an erroneous
        space.
       (Bug #41021)</p></li><li><p>
        If connection pooling was not set explicitly in the connection
        string, MySQL Connector/Net added “<span class="quote">;Pooling=False</span>” to the end of
        the connection string when
        <code class="literal">MySqlCommand.ExecuteReader()</code> was called.
      </p><p>
        If connection pooling was explicitly set in the connection
        string, when <code class="literal">MySqlConnection.Open()</code> was
        called it converted “<span class="quote">Pooling=True</span>” to
        “<span class="quote">pooling=True</span>”.
      </p><p>
        If <code class="literal">MySqlCommand.ExecuteReader()</code> was
        subsequently called, it concatenated
        “<span class="quote">;Pooling=False</span>” to the end of the connection
        string. The resulting connection string was thus terminated with
        “<span class="quote">pooling=True;Pooling=False</span>”. This disabled
        connection pooling completely.
       (Bug #40091)</p></li><li><p>
        MySQL Connector/Net generated the following exception:
      </p><pre class="programlisting">System.NullReferenceException: Object reference not set to an instance of an object.
      bei MySql.Data.MySqlClient.MySqlCommand.TimeoutExpired(Object commandObject)
      bei System.Threading._TimerCallback.TimerCallback_Context(Object state)
      bei System.Threading.ExecutionContext.runTryCode(Object userData)
      bei
      System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode
      code, CleanupCode backoutCode, Object userData)
      bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext,
      ContextCallback callback, Object state)
      bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
      ContextCallback callback, Object state)
      bei System.Threading._TimerCallback.PerformTimerCallback(Object state)</pre><p>(Bug #40005)</p></li><li><p>
        If, when using the <code class="classname">MySqlTransaction</code>
        transaction object, an exception was thrown, the transaction
        object was not disposed of and the transaction was not rolled
        back.
       (Bug #39817)</p></li><li><p>
        When a prepared insert query is run that contains an
        <code class="literal">UNSIGNED TINYINT</code> in the parameter list, the
        complete query and data that should be inserted is corrupted and
        no error is thrown.
       (Bug #37968)</p></li><li><p>
        Calling <code class="literal">MySqlDataAdapter.FillSchema</code> on a
        <code class="literal">SELECT</code> statement that referred to a table
        that did not exist left the connection in a bad state. After
        this call, all <code class="literal">SELECT</code> statements returned an
        empty result set. If the <code class="literal">SELECT</code> statement
        referred to a table that did exist then everything worked as
        expected.
       (Bug #30518)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-7"></a>D.3.9.2. Changes in MySQL Connector/Net 5.1.7 (21 August 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        There was a short circuit evaluation error in the
        <code class="methodname">MySqlCommand.CheckState()</code> method. When
        the statement <code class="literal">connection == null</code> was true a
        <code class="classname">NullReferenceException</code> was thrown and not
        the expected <code class="classname">InvalidOperationException</code>.
       (Bug #38276)</p></li><li><p>
        Executing a command that resulted in a fatal exception did not
        close the connection.
       (Bug #37991)</p></li><li><p>
        In a .NET application MySQL Connector/Net modifies the connection string so
        that it contains several occurrences of the same option with
        different values. This is illustrated by the example that
        follows.
      </p><p>
        The original connection string:
      </p><pre class="programlisting">        host=localhost;database=test;uid=*****;pwd=*****;
      connect timeout=25; auto enlist=false;pooling=false;</pre><p>
        The connection string after closing
        <code class="classname">MySqlDataReader</code>:
      </p><pre class="programlisting">        host=localhost;database=test;uid=*****;pwd=*****;
        connect timeout=25;auto enlist=false;pooling=false;
        Allow User Variables=True;Allow User Variables=False;
      Allow User Variables=True;Allow User Variables=False;</pre><p>(Bug #37955)</p></li><li><p>
        As <code class="classname">MySqlDbType.DateTime</code> is not available
        in <code class="literal">VB.Net</code> the warning <span class="errortext">The datetime
        enum value is obsolete</span> was always shown during
        compilation.
       (Bug #37406)</p></li><li><p>
        An unknown <code class="literal">MySqlErrorCode</code> was encountered
        when opening a connection with an incorrect password.
       (Bug #37398)</p></li><li><p>
        Documentation incorrectly stated that “<span class="quote">the DataColumn
        class in .NET 1.0 and 1.1 does not permit columns with type of
        UInt16, UInt32, or UInt64 to be autoincrement columns</span>”.
       (Bug #37350)</p></li><li><p>
        <code class="classname">SemaphoreFullException</code> is generated when
        application is closed.
       (Bug #36688)</p></li><li><p>
        <code class="methodname">GetSchema</code> did not work correctly when
        querying for a collection, if using a non-English locale.
       (Bug #35459)</p></li><li><p>
        When reading back a stored double or single value using the .NET
        provider, the value had less precision than the one stored.
       (Bug #33322)</p></li><li><p>
        Using the MySQL Visual Studio plugin and a MySQL 4.1 server,
        certain field types (<a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a>) would
        not be identified correctly. Also, when looking for tables, the
        plugin would list all tables matching a wildcard pattern of the
        database name supplied in the connection string, instead of only
        tables within the specified database.
       (Bug #30603)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-6"></a>D.3.9.3. Changes in MySQL Connector/Net 5.1.6 (12 May 2008)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When creating a connection pool, specifying an invalid IP
        address will cause the entire application to crash, instead of
        providing an exception.
       (Bug #36432)</p></li><li><p>
        An incorrect value for a bit field would returned in a multi-row
        query if a preceding value for the field returned
        <code class="literal">NULL</code>.
       (Bug #36313)</p></li><li><p>
        The <code class="literal">MembershipProvider</code> will raise an
        exception when the connection string is configured with
        <code class="literal">enablePasswordRetrival = true</code> and
        <code class="literal">RequireQuestionAndAnswer = false</code>.
       (Bug #36159)</p></li><li><p>
        When calling <code class="literal">GetNumberOfUsersOnline</code> an
        exception is raised on the submitted query due to a missing
        parameter.
       (Bug #36157)</p></li><li><p>
        Tables with <code class="literal">GEOMETRY</code> field types would return
        an unknown data type exception.
       (Bug #36081)</p></li><li><p>
        When creating a connection, setting the
        <code class="literal">ConnectionString</code> property of
        <code class="literal">MySqlConnection</code> to <code class="literal">NULL</code>
        would throw an exception.
       (Bug #35619)</p></li><li><p>
        The <code class="methodname">DbCommandBuilder.QuoteIdentifer</code>
        method was not implemented.
       (Bug #35492)</p></li><li><p>
        When using <code class="literal">SqlDataSource</code> to open a
        connection, the connection would not automatically be closed
        when access had completed.
       (Bug #34460)</p></li><li><p>
        Attempting to use an isolation level other than the default with
        a transaction scope would use the default isolation level.
       (Bug #34448)</p></li><li><p>
        When altering a stored procedure within Visual Studio, the
        parameters to the procedure could be lost.
       (Bug #34359)</p></li><li><p>
        A race condition could occur within the procedure cache
        resulting the cache contents overflowing beyond the configured
        cache size.
       (Bug #34338)</p></li><li><p>
        Using the <code class="literal">TableAdaptor</code> wizard in combination
        with a suitable <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement,
        only the associated <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
        statement would also be created, rather than the required
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> and
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
       (Bug #31338)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-5"></a>D.3.9.4. Changes in MySQL Connector/Net 5.1.5 (Not released)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Performing <code class="function">GetValue()</code> on a field
        <code class="literal">TINYINT(1)</code> returned a
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BOOLEAN</code></a>. While not a bug, this
        caused problems in software that expected an
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a> to be returned. A new
        connection string option <code class="literal">Treat Tiny As
        Boolean</code> has been added with a default value of
        <code class="literal">true</code>. If set to <code class="literal">false</code> the
        provider will treat <code class="literal">TINYINT(1)</code> as
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a>.
       (Bug #34052)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Some speed improvements have been implemented in the
        <code class="literal">TokenizeSql</code> process used to identify elements
        of SQL statements.
       (Bug #34220)</p></li><li><p>
        When accessing tables from different databases within the same
        <code class="literal">TransactionScope</code>, the same user/password
        combination would be used for each database connection. MySQL Connector/Net
        does not handle multiple connections within the same transaction
        scope. An error is now returned if you attempt this process,
        instead of using the incorrect authorization information.
       (Bug #34204)</p></li><li><p>
        The status of connections reported through the state change
        handler was not being updated correctly.
       (Bug #34082)</p></li><li><p>
        Incorporated some connection string cache optimizations sent to
        us by Maxim Mass.
       (Bug #34000)</p></li><li><p>
        In an open connection where the server had disconnected
        unexpectedly, the status information of the connection would not
        be updated properly.
       (Bug #33909)</p></li><li><p>
        MySQL Connector/Net would fail to compile properly with
        <span><strong class="command">nant</strong></span>.
       (Bug #33508)</p></li><li><p>
        Problem with membership provider would mean that
        <code class="literal">FindUserByEmail</code> would fail with a
        <code class="literal">MySqlException</code> because it was trying to add a
        second parameter with the same name as the first.
       (Bug #33347)</p></li><li><p>
        Using compression in the MySQL connection with MySQL Connector/Net would be
        slower than using native (uncompressed) communication.
       (Bug #27865)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-4"></a>D.3.9.5. Changes in MySQL Connector/Net 5.1.4 (20 November 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Setting the size of a string parameter after the value could
        cause an exception.
       (Bug #32094)</p></li><li><p>
        Creation of parameter objects with noninput direction using a
        constructor would fail. This was cause by some old legacy code
        preventing their use.
       (Bug #32093)</p></li><li><p>
        A date string could be returned incorrectly by
        <code class="literal">MySqlDateTime.ToString()</code> when the date
        returned by MySQL was <code class="literal">0000-00-00 00:00:00</code>.
       (Bug #32010)</p></li><li><p>
        A syntax error in a set of batch statements could leave the data
        adapter in a state that appears hung.
       (Bug #31930)</p></li><li><p>
        Installing over a failed uninstall of a previous version could
        result in multiple clients being registered in the
        <code class="literal">machine.config</code>. This would prevent certain
        aspects of the MySQL connection within Visual Studio to work
        properly.
       (Bug #31731)</p></li><li><p>
        MySQL Connector/Net would incorrectly report success when enlisting in a
        distributed transaction, although distributed transactions are
        not supported.
       (Bug #31703)</p></li><li><p>
        Data cached from the connection string could return invalid
        information because the internal routines were not using
        case-sensitive semantics. This lead to updated connection string
        options not being recognized if they were of a different case
        than the existing cached values.
       (Bug #31433)</p></li><li><p>
        Trying to use a connection that was not open could return an
        ambiguous and misleading error message.
       (Bug #31262)</p></li><li><p>
        Column name metadata was not using the character set as defined
        within the connection string being used.
       (Bug #31185)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (Bug #31090)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (Bug #30964)</p></li><li><p>
        Extracting data through XML functions within a query returns the
        data as <code class="literal">System.Byte[]</code>. This was due to MySQL Connector/Net
        incorrectly identifying <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
        fields as binary, rather than text.
       (Bug #30233)</p></li><li><p>
        When running a stored procedure multiple times on the same
        connection, the memory usage could increase indefinitely.
       (Bug #30116)</p></li><li><p>
        Column types with only 1-bit (such as
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BOOLEAN</code></a> and
        <code class="literal">TINYINT(1)</code> were not returned as boolean
        fields.
       (Bug #27959)</p></li><li><p>
        When accessing certain statements, the command would timeout
        before the command completed. Because this cannot always be
        controlled through the individual command timeout options, a
        <code class="literal">default command timeout</code> has been added to the
        connection string options.
       (Bug #27958)</p></li><li><p>
        The server error code was not updated in the
        <code class="literal">Data[]</code> hash, which prevented
        <code class="literal">DbProviderFactory</code> users from accessing the
        server error code.
       (Bug #27436)</p></li><li><p>
        The <code class="literal">MySqlDbType.Datetime</code> has been replaced
        with <code class="literal">MySqlDbType.DateTime</code>. The old format has
        been obsoleted.
       (Bug #26344)</p></li><li><p>
        Changing the connection string of a connection to one that
        changes the parameter marker after the connection had been
        assigned to a command but before the connection is opened could
        cause parameters to not be found.
       (Bug #13991)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-3"></a>D.3.9.6. Changes in MySQL Connector/Net 5.1.3 (21 September 2007, beta)</h4></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        An incorrect <code class="literal">ConstraintException</code> could be
        raised on an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> when adding
        rows to a table with a multiple-column unique key index.
       (Bug #30204)</p></li><li><p>
        A <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> field would be updated
        with a date/time value, causing a
        <code class="literal">MySqlDataAdapter.Update()</code> exception.
       (Bug #30077)</p></li><li><p>
        The Saudi Hijri calendar was not supported.
       (Bug #29931)</p></li><li><p>
        Calling <a href="sql-syntax.html#show-create-procedure" title="12.7.5.11. SHOW CREATE PROCEDURE Syntax"><code class="literal">SHOW CREATE PROCEDURE</code></a> for
        routines with a hyphen in the catalog name produced a syntax
        error.
       (Bug #29526)</p></li><li><p>
        Connecting to a MySQL server earlier than version 4.1 would
        raise a <code class="literal">NullException</code>.
       (Bug #29476)</p></li><li><p>
        The availability of a MySQL server would not be reset when using
        pooled connections (<code class="literal">pooling=true</code>). This would
        lead to the server being reported as unavailable, even if the
        server become available while the application was still running.
       (Bug #29409)</p></li><li><p>
        A <code class="literal">FormatException</code> error would be raised if a
        parameter had not been found, instead of
        <code class="literal">Resources.ParameterMustBeDefined</code>.
       (Bug #29312)</p></li><li><p>
        An exception would be thrown when using the Manage Role
        functionality within the web administrator to assign a role to a
        user.
       (Bug #29236)</p></li><li><p>
        Using the membership/role providers when
        <code class="literal">validationKey</code> or
        <code class="literal">decryptionKey</code> parameters are set to
        <code class="literal">AutoGenerate</code>, an exception would be raised
        when accessing the corresponding values.
       (Bug #29235)</p></li><li><p>
        Certain operations would not check the
        <code class="literal">UsageAdvisor</code> setting, causing log messages
        from the Usage Advisor even when it was disabled.
       (Bug #29124)</p></li><li><p>
        Using the same connection string multiple times would result in
        <code class="literal">Database=<em class="replaceable"><code>dbname</code></em></code>
        appearing multiple times in the resulting string.
       (Bug #29123)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Adding a new query
        based on a stored procedure that uses the
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement would terminate
        the query/TableAdapter wizard.
       (Bug #29098)</p></li><li><p>
        Using <code class="literal">TransactionScope</code> would cause an
        <code class="literal">InvalidOperationException</code>.
       (Bug #28709)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-2"></a>D.3.9.7. Changes in MySQL Connector/Net 5.1.2 (18 June 2007)</h4></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Log messages would be truncated to 300 bytes.
       (Bug #28706)</p></li><li><p>
        Creating a user would fail due to the application name being set
        incorrectly.
       (Bug #28648)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Adding a new query
        based on a stored procedure that used a
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement would terminate
        the query/TableAdapter wizard.
       (Bug #28536)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Query Builder would
        fail to show <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TINYTEXT</code></a> columns,
        and any columns listed after a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TINYTEXT</code></a> column correctly.
       (Bug #28437)</p></li><li><p>
        Accessing the results from a large query when using data
        compression in the connection would fail to return all the data.
       (Bug #28204)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Update commands would
        not be generated correctly when using the TableAdapter wizard.
       (Bug #26347)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-1"></a>D.3.9.8. Changes in MySQL Connector/Net 5.1.1 (23 May 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Running the statement <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
        PROCESSLIST</code></a> would return columns as byte arrays
        instead of native columns.
       (Bug #28448)</p></li><li><p>
        Installation of the MySQL Connector/Net on Windows would fail if VisualStudio
        had not already been installed.
       (Bug #28260)</p></li><li><p>
        MySQL Connector/Net would look for the wrong table when executing
        <code class="literal">User.IsRole().</code>
       (Bug #28251)</p></li><li><p>
        Building a connection string within a tight loop would show slow
        performance.
       (Bug #28167)</p></li><li><p>
        The <code class="literal">UNSIGNED</code> flag for parameters in a stored
        procedure would be ignored when using
        <code class="literal">MySqlCommandBuilder</code> to obtain the parameter
        information.
       (Bug #27679)</p></li><li><p>
        Using <code class="literal">MySQLDataAdapter.FillSchema()</code> on a
        stored procedure would raise an exception: <code class="literal">Invalid
        attempt to access a field before calling Read()</code>.
       (Bug #27668)</p></li><li><p>
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> fields from versions of
        MySQL bgefore 4.1 would be incorrectly parsed, resulting in a
        exception.
       (Bug #23342)</p></li><li><p>
        Fixed password property on
        <code class="literal">MySqlConnectionStringBuilder</code> to use
        <code class="literal">PasswordPropertyText</code> attribute. This causes
        dots to show instead of actual password text.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-1-0"></a>D.3.9.9. Changes in MySQL Connector/Net 5.1.0 (01 May 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Now compiles for .NET CF 2.0.
      </p></li><li><p>
        Rewrote stored procedure parsing code using a new SQL tokenizer.
        Really nasty procedures including nested comments are now
        supported.
      </p></li><li><p>
        GetSchema will now report objects relative to the currently
        selected database. What this means is that passing in null as a
        database restriction will report objects on the currently
        selected database only.
      </p></li><li><p>
        Added Membership and Role provider contributed by Sean Wright
        (thanks!).
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-x"></a>D.3.10. Changes in MySQL Connector/Net Version 5.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-5-0-10">D.3.10.1. Changes in MySQL Connector/Net 5.0.10 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-9">D.3.10.2. Changes in MySQL Connector/Net 5.0.9 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-8">D.3.10.3. Changes in MySQL Connector/Net 5.0.8 (21 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-7">D.3.10.4. Changes in MySQL Connector/Net 5.0.7 (18 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-6">D.3.10.5. Changes in MySQL Connector/Net 5.0.6 (22 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-5">D.3.10.6. Changes in MySQL Connector/Net 5.0.5 (07 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-4">D.3.10.7. Changes in MySQL Connector/Net 5.0.4 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-3">D.3.10.8. Changes in MySQL Connector/Net 5.0.3 (05 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-2">D.3.10.9. Changes in MySQL Connector/Net 5.0.2 (06 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-1">D.3.10.10. Changes in MySQL Connector/Net 5.0.1 (01 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-0">D.3.10.11. Changes in MySQL Connector/Net 5.0.0 (08 August 2006)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-10"></a>D.3.10.1. Changes in MySQL Connector/Net 5.0.10 (Not released)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        If, when using the <code class="classname">MySqlTransaction</code>
        transaction object, an exception was thrown, the transaction
        object was not disposed of and the transaction was not rolled
        back.
       (Bug #39817)</p></li><li><p>
        Executing a command that resulted in a fatal exception did not
        close the connection.
       (Bug #37991)</p></li><li><p>
        When a prepared insert query is run that contains an
        <code class="literal">UNSIGNED TINYINT</code> in the parameter list, the
        complete query and data that should be inserted is corrupted and
        no error is thrown.
       (Bug #37968)</p></li><li><p>
        In a .NET application MySQL Connector/Net modifies the connection string so
        that it contains several occurrences of the same option with
        different values. This is illustrated by the example that
        follows.
      </p><p>
        The original connection string:
      </p><pre class="programlisting">        host=localhost;database=test;uid=*****;pwd=*****;
      connect timeout=25; auto enlist=false;pooling=false;</pre><p>
        The connection string after closing
        <code class="classname">MySqlDataReader</code>:
      </p><pre class="programlisting">        host=localhost;database=test;uid=*****;pwd=*****;
        connect timeout=25;auto enlist=false;pooling=false;
        Allow User Variables=True;Allow User Variables=False;
      Allow User Variables=True;Allow User Variables=False;</pre><p>(Bug #37955)</p></li><li><p>
        When creating a connection pool, specifying an invalid IP
        address will cause the entire application to crash, instead of
        providing an exception.
       (Bug #36432)</p></li><li><p>
        <code class="methodname">GetSchema</code> did not work correctly when
        querying for a collection, if using a non-English locale.
       (Bug #35459)</p></li><li><p>
        When reading back a stored double or single value using the .NET
        provider, the value had less precision than the one stored.
       (Bug #33322)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-9"></a>D.3.10.2. Changes in MySQL Connector/Net 5.0.9 (Not released)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="methodname">DbCommandBuilder.QuoteIdentifer</code>
        method was not implemented.
       (Bug #35492)</p></li><li><p>
        Setting the size of a string parameter after the value could
        cause an exception.
       (Bug #32094)</p></li><li><p>
        Creation of parameter objects with noninput direction using a
        constructor would fail. This was cause by some old legacy code
        preventing their use.
       (Bug #32093)</p></li><li><p>
        A date string could be returned incorrectly by
        <code class="literal">MySqlDateTime.ToString()</code> when the date
        returned by MySQL was <code class="literal">0000-00-00 00:00:00</code>.
       (Bug #32010)</p></li><li><p>
        A syntax error in a set of batch statements could leave the data
        adapter in a state that appears hung.
       (Bug #31930)</p></li><li><p>
        Installing over a failed uninstall of a previous version could
        result in multiple clients being registered in the
        <code class="literal">machine.config</code>. This would prevent certain
        aspects of the MySQL connection within Visual Studio to work
        properly.
       (Bug #31731)</p></li><li><p>
        Data cached from the connection string could return invalid
        information because the internal routines were not using
        case-sensitive semantics. This lead to updated connection string
        options not being recognized if they were of a different case
        than the existing cached values.
       (Bug #31433)</p></li><li><p>
        Column name metadata was not using the character set as defined
        within the connection string being used.
       (Bug #31185)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (Bug #31090)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (Bug #30964)</p></li><li><p>
        When running a stored procedure multiple times on the same
        connection, the memory usage could increase indefinitely.
       (Bug #30116)</p></li><li><p>
        The server error code was not updated in the
        <code class="literal">Data[]</code> hash, which prevented
        <code class="literal">DbProviderFactory</code> users from accessing the
        server error code.
       (Bug #27436)</p></li><li><p>
        Changing the connection string of a connection to one that
        changes the parameter marker after the connection had been
        assigned to a command but before the connection is opened could
        cause parameters to not be found.
       (Bug #13991)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-8"></a>D.3.10.3. Changes in MySQL Connector/Net 5.0.8 (21 August 2007)</h4></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          This version introduces a new installer technology.
        </p></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Extracting data through XML functions within a query returns the
        data as <code class="literal">System.Byte[]</code>. This was due to MySQL Connector/Net
        incorrectly identifying <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
        fields as binary, rather than text.
       (Bug #30233)</p></li><li><p>
        An incorrect <code class="literal">ConstraintException</code> could be
        raised on an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> when adding
        rows to a table with a multiple-column unique key index.
       (Bug #30204)</p></li><li><p>
        A <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> field would be updated
        with a date/time value, causing a
        <code class="literal">MySqlDataAdapter.Update()</code> exception.
       (Bug #30077)</p></li><li><p>
        Fixed bug where MySQL Connector/Net was hand building some date time patterns
        rather than using the patterns provided under CultureInfo. This
        caused problems with some calendars that do not support the same
        ranges as Gregorian..
       (Bug #29931)</p></li><li><p>
        Calling <a href="sql-syntax.html#show-create-procedure" title="12.7.5.11. SHOW CREATE PROCEDURE Syntax"><code class="literal">SHOW CREATE PROCEDURE</code></a> for
        routines with a hyphen in the catalog name produced a syntax
        error.
       (Bug #29526)</p></li><li><p>
        The availability of a MySQL server would not be reset when using
        pooled connections (<code class="literal">pooling=true</code>). This would
        lead to the server being reported as unavailable, even if the
        server become available while the application was still running.
       (Bug #29409)</p></li><li><p>
        A <code class="literal">FormatException</code> error would be raised if a
        parameter had not been found, instead of
        <code class="literal">Resources.ParameterMustBeDefined</code>.
       (Bug #29312)</p></li><li><p>
        Certain operations would not check the
        <code class="literal">UsageAdvisor</code> setting, causing log messages
        from the Usage Advisor even when it was disabled.
       (Bug #29124)</p></li><li><p>
        Using the same connection string multiple times would result in
        <code class="literal">Database=<em class="replaceable"><code>dbname</code></em></code>
        appearing multiple times in the resulting string.
       (Bug #29123)</p></li><li><p>
        Log messages would be truncated to 300 bytes.
       (Bug #28706)</p></li><li><p>
        Accessing the results from a large query when using data
        compression in the connection will fail to return all the data.
       (Bug #28204)</p></li><li><p>
        Fixed problem where
        <code class="literal">MySqlConnection.BeginTransaction</code> checked the
        drivers status var before checking if the connection was open.
        The result was that the driver could report an invalid condition
        on a previously opened connection.
      </p></li><li><p>
        Fixed problem where we were not closing prepared statement
        handles when commands are disposed. This could lead to using up
        all prepared statement handles on the server.
      </p></li><li><p>
        Fixed the database schema collection so that it works on servers
        that are not properly respecting the
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> setting.
      </p></li><li><p>
        Fixed problem where any attempt to not read all the records
        returned from a select where each row of the select is greater
        than 1024 bytes would hang the driver.
      </p></li><li><p>
        Fixed problem where a command timing out just after it actually
        finished would cause an exception to be thrown on the command
        timeout thread which would then be seen as an unhandled
        exception.
      </p></li><li><p>
        Fixed some serious issues with command timeout and cancel that
        could present as exceptions about thread ownership. The issue
        was that not all queries cancel the same. Some produce
        resultsets while others don't. ExecuteReader had to be changed
        to check for this.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-7"></a>D.3.10.4. Changes in MySQL Connector/Net 5.0.7 (18 May 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Running the statement <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
        PROCESSLIST</code></a> would return columns as byte arrays
        instead of native columns.
       (Bug #28448)</p></li><li><p>
        Building a connection string within a tight loop would show slow
        performance.
       (Bug #28167)</p></li><li><p>
        Using logging (with the <code class="literal">logging=true</code>
        parameter to the connection string) would not generate a log
        file.
       (Bug #27765)</p></li><li><p>
        The <code class="literal">UNSIGNED</code> flag for parameters in a stored
        procedure would be ignored when using
        <code class="literal">MySqlCommandBuilder</code> to obtain the parameter
        information.
       (Bug #27679)</p></li><li><p>
        Using <code class="literal">MySQLDataAdapter.FillSchema()</code> on a
        stored procedure would raise an exception: <code class="literal">Invalid
        attempt to access a field before calling Read()</code>.
       (Bug #27668)</p></li><li><p>
        If you close an open connection with an active transaction, the
        transaction is not automatically rolled back.
       (Bug #27289)</p></li><li><p>
        When cloning an open
        <code class="literal">MySqlClient.MySqlConnection</code> with the
        <code class="option">Persist Security Info=False</code> option set, the
        cloned connection is not usable because the security information
        has not been cloned.
       (Bug #27269)</p></li><li><p>
        Enlisting a null transaction would affect the current connection
        object, such that further enlistment operations to the
        transaction are not possible.
       (Bug #26754)</p></li><li><p>
        Attempting to change the <code class="literal">Connection Protocol</code>
        property within a <code class="literal">PropertyGrid</code> control would
        raise an exception.
       (Bug #26472)</p></li><li><p>
        The <code class="literal">characterset</code> property would not be
        identified during a connection (also affected Visual Studion
        Plugin).
       (Bug #26147, Bug #27240)</p></li><li><p>
        The <code class="literal">CreateFormat</code> column of the
        <code class="literal">DataTypes</code> collection did not contain a format
        specification for creating a new column type.
       (Bug #25947)</p></li><li><p>
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> fields from versions of
        MySQL bgefore 4.1 would be incorrectly parsed, resulting in a
        exception.
       (Bug #23342)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-6"></a>D.3.10.5. Changes in MySQL Connector/Net 5.0.6 (22 March 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Publisher listed in "Add/Remove Programs" is not consistent with
        other MySQL products.
       (Bug #27253)</p></li><li><p>
        <code class="literal">DESCRIBE ....</code> SQL statement returns byte
        arrays rather than data on MySQL versions older than 4.1.15.
       (Bug #27221)</p></li><li><p>
        <code class="literal">cmd.Parameters.RemoveAt("Id")</code> will cause an
        error if the last item is requested.
       (Bug #27187)</p></li><li><p>
        <code class="literal">MySqlParameterCollection</code> and parameters added
        with <code class="literal">Insert</code> method can not be retrieved later
        using <code class="literal">ParameterName</code>.
       (Bug #27135)</p></li><li><p>
        Exception thrown when using large values in
        <code class="literal">UInt64</code> parameters.
       (Bug #27093)</p></li><li><p>
        MySQL Visual Studio Plugin 1.1.2 does not work with MySQL Connector/Net
        5.0.5.
       (Bug #26960)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-5"></a>D.3.10.6. Changes in MySQL Connector/Net 5.0.5 (07 March 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Reverted behavior that required parameter names to start with
        the parameter marker. We apologize for this back and forth but
        we mistakenly changed the behavior to not match what
        <code class="literal">SqlClient</code> supports. We now support using
        either syntax for adding parameters however we also respond
        exactly like <code class="literal">SqlClient</code> in that if you ask for
        the index of a parameter using a syntax different from when you
        added the parameter, the result will be -1.
      </p></li><li><p>
        Assembly now properly appears in the Visual Studio 2005
        Add/Remove Reference dialog.
      </p></li><li><p>
        Fixed problem that prevented use of
        <code class="literal">SchemaOnly</code> or <code class="literal">SingleRow</code>
        command behaviors with stored procedures or prepared statements.
      </p></li><li><p>
        Added <code class="literal">MySqlParameterCollection.AddWithValue</code>
        and marked the <code class="literal">Add(name, value)</code> method as
        obsolete.
      </p></li><li><p>
        Return parameters created with DeriveParameters now have the
        name <code class="literal">RETURN_VALUE</code>.
      </p></li><li><p>
        Fixed problem with parameter name hashing where the hashes were
        not getting updated when parameters were removed from the
        collection.
      </p></li><li><p>
        Fixed problem with calling stored functions when a return
        parameter was not given.
      </p></li><li><p>
        Added <code class="literal">Use Procedure Bodies</code> connection string
        option to enable calling procedures without using procedure
        metadata.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlConnection.GetSchema</code> fails with
        <code class="literal">NullReferenceException</code> for Foreign Keys.
       (Bug #26660)</p></li><li><p>
        MySQL Connector/Net would fail to install under Windows Vista.
       (Bug #26430)</p></li><li><p>
        Opening a connection would be slow due to host name lookup.
       (Bug #26152)</p></li><li><p>
        Incorrect values/formats would be applied when the
        <code class="literal">OldSyntax</code> connection string option was used.
       (Bug #25950)</p></li><li><p>
        Registry would be incorrectly populated with installation
        locations.
       (Bug #25928)</p></li><li><p>
        Times with negative values would be returned incorrectly.
       (Bug #25912)</p></li><li><p>
        Returned data types of a <code class="literal">DataTypes</code> collection
        do not contain the right correct CLR data type.
       (Bug #25907)</p></li><li><p>
        <code class="literal">GetSchema</code> and <code class="literal">DataTypes</code>
        would throw an exception due to an incorrect table name.
       (Bug #25906)</p></li><li><p>
        <code class="literal">MySqlConnection</code> throws an exception when
        connecting to MySQL v4.1.7.
       (Bug #25726)</p></li><li><p>
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> did not work correctly
        when using a <code class="literal">WHERE</code> clause containing a UTF-8
        string.
       (Bug #25651)</p></li><li><p>
        When closing and then re-opening a connection to a database, the
        character set specification is lost.
       (Bug #25614)</p></li><li><p>
        Filling a table schema through a stored procedure triggers a
        runtime error.
       (Bug #25609)</p></li><li><p>
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> and
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns would be
        returned as a string, not binary, data type.
       (Bug #25605)</p></li><li><p>
        A critical <code class="literal">ConnectionPool</code> error would result
        in repeated <code class="literal">System.NullReferenceException</code>.
       (Bug #25603)</p></li><li><p>
        The <code class="literal">UpdateRowSource.FirstReturnedRecord</code>
        method does not work.
       (Bug #25569)</p></li><li><p>
        When connecting to a MySQL Server earlier than version 4.1, the
        connection would hang when reading data.
       (Bug #25458)</p></li><li><p>
        Using <code class="literal">ExecuteScalar()</code> with more than one
        query, where one query fails, will hang the connection.
       (Bug #25443)</p></li><li><p>
        When a <code class="literal">MySqlConversionException</code> is raised on
        a remote object, the client application would receive a
        <code class="literal">SerializationException</code> instead.
       (Bug #24957)</p></li><li><p>
        When connecting to a server, the return code from the connection
        could be zero, even though the host name was incorrect.
       (Bug #24802)</p></li><li><p>
        High CPU utilization would be experienced when there is no idle
        connection waiting when using pooled connections through
        <code class="literal">MySqlPool.GetConnection</code>.
       (Bug #24373)</p></li><li><p>
        MySQL Connector/Net would not compile properly when used with Mono 1.2.
       (Bug #24263)</p></li><li><p>
        Applications would crash when calling with
        <code class="literal">CommandType</code> set to
        <code class="literal">StoredProcedure</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-4"></a>D.3.10.7. Changes in MySQL Connector/Net 5.0.4 (Not released)</h4></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p>This section has no changelog entries.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-3"></a>D.3.10.8. Changes in MySQL Connector/Net 5.0.3 (05 January 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Usage Advisor has been implemented. The Usage Advisor checks
        your queries and will report if you are using the connection
        inefficiently.
      </p></li><li><p>
        PerfMon hooks have been added to monitor the stored procedure
        cache hits and misses.
      </p></li><li><p>
        The <code class="literal">MySqlCommand</code> object now supports
        asynchronous query methods. This is implemented useg the
        <code class="literal">BeginExecuteNonQuery</code> and
        <code class="literal">EndExecuteNonQuery</code> methods.
      </p></li><li><p>
        Metadata from storaed procedures and stored function execution
        are cached.
      </p></li><li><p>
        The <code class="literal">CommandBuilder.DeriveParameters</code> function
        has been updated to the procedure cache.
      </p></li><li><p>
        The <code class="literal">ViewColumns</code> <code class="literal">GetSchema</code>
        collection has been updated.
      </p></li><li><p>
        Improved speed and performance by re-architecting certain
        sections of the code.
      </p></li><li><p>
        Support for the embedded server and client library have been
        removed from this release. Support will be added back to a later
        release.
      </p></li><li><p>
        The ShapZipLib library has been replaced with the deflate
        support provided within .NET 2.0.
      </p></li><li><p>
        SSL support has been updated.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Additional text added to error message
       (Bug #25178)</p></li><li><p>
        An exception would be raised, or the process would hang, if
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privileges on a database
        were not granted and a stored procedure was used.
       (Bug #25033)</p></li><li><p>
        When adding parameter objects to a command object, if the
        parameter direction is set to <code class="literal">ReturnValue</code>
        before the parameter is added to the command object then when
        the command is executed it throws an error.
       (Bug #25013)</p></li><li><p>
        Using <code class="literal">Driver.IsTooOld()</code> would return the
        wrong value.
       (Bug #24661)</p></li><li><p>
        When using a <code class="literal">DbNull.Value</code> as the value for a
        parameter value, and then later setting a specific value type,
        the command would fail with an exception because the wrong type
        was implied from the <code class="literal">DbNull.Value</code>.
       (Bug #24565)</p></li><li><p>
        Stored procedure executions are not thread safe.
       (Bug #23905)</p></li><li><p>
        Deleting a connection to a disconnected server when using the
        Visual Studio Plugin would cause an assertion failure.
       (Bug #23687)</p></li><li><p>
        Nested transactions (which are unsupported)do not raise an error
        or warning.
       (Bug #22400)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-2"></a>D.3.10.9. Changes in MySQL Connector/Net 5.0.2 (06 November 2006)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        An <code class="literal">Ignore Prepare</code> option has been added to
        the connection string options. If enabled, prepared statements
        will be disabled application-wide. The default for this option
        is true.
      </p></li><li><p>
        Implemented a stored procedure cache. By default, the connector
        caches the metadata for the last 25 procedures that are seen.
        You can change the numbver of procedures that are cacheds by
        using the <code class="literal">procedure cache</code> connection string.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, MySQL Connector/Net 5.0.2 has disabled their use by default. The
        disabling of server-side prepared statements does not affect the
        operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string
        properties:
      </p><pre class="programlisting">ignore prepare=false</pre><p>
        The default value of this property is true.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        One system where IPv6 was enabled, MySQL Connector/Net would incorrectly
        resolve host names.
       (Bug #23758)</p></li><li><p>
        Column names with accented characters were not parsed properly
        causing malformed column names in result sets.
       (Bug #23657)</p></li><li><p>
        An exception would be thrown when calling
        <code class="literal">GetSchemaTable</code> and <code class="literal">fields</code>
        was null.
       (Bug #23538)</p></li><li><p>
        A <code class="literal">System.FormatException</code> exception would be
        raised when invoking a stored procedure with an
        <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> input parameter.
       (Bug #23268)</p></li><li><p>
        During installation, an antivirus error message would be raised
        (indicating a malicious script problem).
       (Bug #23245)</p></li><li><p>
        Creating a connection through the Server Explorer when using the
        Visual Studio Plugin would fail. The installer for the Visual
        Studio Plugin has been updated to ensure that MySQL Connector/Net 5.0.2 must
        be installed.
       (Bug #23071)</p></li><li><p>
        Using Windows Vista (RC2) as a nonprivileged user would raise a
        <code class="literal">Registry key 'Global' access denied</code>.
       (Bug #22882)</p></li><li><p>
        Within Mono, using the <code class="literal">PreparedStatement</code>
        interface could result in an error due to a
        <code class="literal">BitArray</code> copying error.
       (Bug #18186)</p></li><li><p>
        MySQL Connector/Net did not work as a data source for the
        <code class="literal">SqlDataSource</code> object used by ASP.NET 2.0.
       (Bug #16126)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-1"></a>D.3.10.10. Changes in MySQL Connector/Net 5.0.1 (01 October 2006)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net on a Turkish operating system, may fail to execute
        certain SQL statements correctly.
       (Bug #22452)</p></li><li><p>
        Starting a transaction on a connection created by
        <code class="literal">MySql.Data.MySqlClient.MySqlClientFactory</code>,
        using <code class="literal">BeginTransaction</code> without specifying an
        isolation level, causes the SQL statement to fail with a syntax
        error.
       (Bug #22042)</p></li><li><p>
        The <code class="literal">MySqlexception</code> class is now derived from
        the <code class="literal">DbException</code> class.
       (Bug #21874)</p></li><li><p>
        The <code class="literal">#</code> would not be accepted within
        column/table names, even though it was valid.
       (Bug #21521)</p></li><li><p>
        You can now install the MySQL Connector/Net MSI package from the command line
        using the <code class="literal">/passive</code>,
        <code class="literal">/quiet</code>, <code class="literal">/q</code> options.
       (Bug #19994)</p></li><li><p>
        Submitting an empty string to a command object through
        <code class="literal">prepare</code> raises an
        <code class="literal">System.IndexOutOfRangeException</code>, rather than
        a MySQL Connector/Net exception.
       (Bug #18391)</p></li><li><p>
        Incorrect field/data lengths could be returned for
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> UTF8 columns.
       (Bug #14592)</p></li><li><p>
        Using <code class="literal">ExecuteScalar</code> with a datetime field,
        where the value of the field is "0000-00-00 00:00:00", a
        <code class="literal">MySqlConversionException</code> exception would be
        raised.
       (Bug #11991)</p></li><li><p>
        An <code class="literal">MySql.Data.Types.MySqlConversionException</code>
        would be raised when trying to update a row that contained a
        date field, where the date field contained a zero value
        (0000-00-00 00:00:00).
       (Bug #9619)</p></li><li><p>
        Executing multiple queries as part of a transaction returns
        <code class="literal">There is already an openDataReader associated with this
        Connection which must be closed first</code>.
       (Bug #7248)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-5-0-0"></a>D.3.10.11. Changes in MySQL Connector/Net 5.0.0 (08 August 2006)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Replaced use of ICSharpCode with .NET 2.0 internal deflate
        support.
      </p></li><li><p>
        Refactored test suite to test all protocols in a single pass.
      </p></li><li><p>
        Added usage advisor warnings for requesting column values by the
        wrong type.
      </p></li><li><p>
        Reimplemented PacketReader/PacketWriter support into
        <code class="classname">MySqlStream</code> class.
      </p></li><li><p>
        Reworked connection string classes to be simpler and faster.
      </p></li><li><p>
        Added procedure metadata caching.
      </p></li><li><p>
        Added internal implemention of SHA1 so we don't have to
        distribute the OpenNetCF on mobile devices.
      </p></li><li><p>
        Implemented <code class="classname">MySqlClientFactory</code> class.
      </p></li><li><p>
        Added perfmon hooks for stored procedure cache hits and misses.
      </p></li><li><p>
        Implemented classes and interfaces for ADO.Net 2.0 support.
      </p></li><li><p>
        Added Async query methods.
      </p></li><li><p>
        Implemented Usage Advisor.
      </p></li><li><p>
        Completely refactored how column values are handled to avoid
        boxing in some cases.
      </p></li><li><p>
        Implemented <code class="classname">MySqlConnectionBuilder</code> class.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        CommandText: Question mark in comment line is being parsed as a
        parameter.
       (Bug #6214)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-x"></a>D.3.11. Changes in MySQL Connector/Net Version 1.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-1-0-11">D.3.11.1. Changes in MySQL Connector/Net 1.0.11 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-10">D.3.11.2. Changes in MySQL Connector/Net 1.0.10 (24 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-9">D.3.11.3. Changes in MySQL Connector/Net 1.0.9 (02 February 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-8">D.3.11.4. Changes in MySQL Connector/Net 1.0.8 (20 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-7">D.3.11.5. Changes in MySQL Connector/Net 1.0.7 (21 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-6">D.3.11.6. Changes in MySQL Connector/Net 1.0.6 (03 October 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-5">D.3.11.7. Changes in MySQL Connector/Net 1.0.5 (29 August 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-4">D.3.11.8. Changes in MySQL Connector/Net 1.0.4 (20 January 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-3">D.3.11.9. Changes in MySQL Connector/Net 1.0.3 (12 October 2004, gamma)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-2">D.3.11.10. Changes in MySQL Connector/Net 1.0.2 (15 November 2004, gamma)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-1">D.3.11.11. Changes in MySQL Connector/Net 1.0.1 (27 October 2004, beta)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-0">D.3.11.12. Changes in MySQL Connector/Net 1.0.0 (01 September 2004)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-11"></a>D.3.11.1. Changes in MySQL Connector/Net 1.0.11 (Not released)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Attempting to utilize MySQL Connector .Net version 1.0.10 throws
        a fatal exception under Mono when pooling is enabled.
       (Bug #33682)</p></li><li><p>
        Setting the size of a string parameter after the value could
        cause an exception.
       (Bug #32094)</p></li><li><p>
        Creation of parameter objects with noninput direction using a
        constructor would fail. This was cause by some old legacy code
        preventing their use.
       (Bug #32093)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (Bug #31090)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (Bug #30964)</p></li><li><p>
        Extracting data through XML functions within a query returns the
        data as <code class="literal">System.Byte[]</code>. This was due to MySQL Connector/Net
        incorrectly identifying <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
        fields as binary, rather than text.
       (Bug #30233)</p></li><li><p>
        Using compression in the MySQL connection with MySQL Connector/Net would be
        slower than using native (uncompressed) communication.
       (Bug #27865)</p></li><li><p>
        Changing the connection string of a connection to one that
        changes the parameter marker after the connection had been
        assigned to a command but before the connection is opened could
        cause parameters to not be found.
       (Bug #13991)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-10"></a>D.3.11.2. Changes in MySQL Connector/Net 1.0.10 (24 August 2007)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        An incorrect <code class="literal">ConstraintException</code> could be
        raised on an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> when adding
        rows to a table with a multiple-column unique key index.
       (Bug #30204)</p></li><li><p>
        The availability of a MySQL server would not be reset when using
        pooled connections (<code class="literal">pooling=true</code>). This would
        lead to the server being reported as unavailable, even if the
        server become available while the application was still running.
       (Bug #29409)</p></li><li><p>
        Publisher listed in "Add/Remove Programs" is not consistent with
        other MySQL products.
       (Bug #27253)</p></li><li><p>
        <code class="literal">MySqlParameterCollection</code> and parameters added
        with <code class="literal">Insert</code> method can not be retrieved later
        using <code class="literal">ParameterName</code>.
       (Bug #27135)</p></li><li><p>
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> and
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns would be
        returned as a string, not binary, data type.
       (Bug #25605)</p></li><li><p>
        A critical <code class="literal">ConnectionPool</code> error would result
        in repeated <code class="literal">System.NullReferenceException</code>.
       (Bug #25603)</p></li><li><p>
        When a <code class="literal">MySqlConversionException</code> is raised on
        a remote object, the client application would receive a
        <code class="literal">SerializationException</code> instead.
       (Bug #24957)</p></li><li><p>
        High CPU utilization would be experienced when there is no idle
        connection waiting when using pooled connections through
        <code class="literal">MySqlPool.GetConnection</code>.
       (Bug #24373)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-9"></a>D.3.11.3. Changes in MySQL Connector/Net 1.0.9 (02 February 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The ICSharpCode ZipLib is no longer used by the Connector, and
        is no longer distributed with it.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Binaries for
        .NET 1.0 are no longer supplied with this release. If you need
        support for .NET 1.0, you must build from source.
      </p></li><li><p>
        Improved <code class="literal">CommandBuilder.DeriveParameters</code> to
        first try and use the procedure cache before querying for the
        stored procedure metadata. Return parameters created with
        <code class="literal">DeriveParameters</code> now have the name
        <code class="literal">RETURN_VALUE</code>.
      </p></li><li><p>
        An <code class="literal">Ignore Prepare</code> option has been added to
        the connection string options. If enabled, prepared statements
        will be disabled application-wide. The default for this option
        is true.
      </p></li><li><p>
        Implemented a stored procedure cache. By default, the connector
        caches the metadata for the last 25 procedures that are seen.
        You can change the numbver of procedures that are cacheds by
        using the <code class="literal">procedure cache</code> connection string.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, MySQL Connector/Net 5.0.2 has disabled their use by default. The
        disabling of server-side prepared statements does not affect the
        operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string
        properties:
      </p><pre class="programlisting">ignore prepare=false</pre><p>
        The default value of this property is true.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Times with negative values would be returned incorrectly.
       (Bug #25912)</p></li><li><p>
        <code class="literal">MySqlConnection</code> throws a
        <code class="literal">NullReferenceException</code> and
        <code class="literal">ArgumentNullException</code> when connecting to
        MySQL v4.1.7.
       (Bug #25726)</p></li><li><p>
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> did not work correctly
        when using a <code class="literal">WHERE</code> clause containing a UTF-8
        string.
       (Bug #25651)</p></li><li><p>
        When closing and then re-opening a connection to a database, the
        character set specification is lost.
       (Bug #25614)</p></li><li><p>
        Trying to fill a table schema through a stored procedure
        triggers a runtime error.
       (Bug #25609)</p></li><li><p>
        Using <code class="literal">ExecuteScalar()</code> with more than one
        query, where one query fails, will hang the connection.
       (Bug #25443)</p></li><li><p>
        Additional text added to error message.
       (Bug #25178)</p></li><li><p>
        When adding parameter objects to a command object, if the
        parameter direction is set to <code class="literal">ReturnValue</code>
        before the parameter is added to the command object then when
        the command is executed it throws an error.
       (Bug #25013)</p></li><li><p>
        When connecting to a server, the return code from the connection
        could be zero, even though the host name was incorrect.
       (Bug #24802)</p></li><li><p>
        Using <code class="literal">Driver.IsTooOld()</code> would return the
        wrong value.
       (Bug #24661)</p></li><li><p>
        When using a <code class="literal">DbNull.Value</code> as the value for a
        parameter value, and then later setting a specific value type,
        the command would fail with an exception because the wrong type
        was implied from the <code class="literal">DbNull.Value</code>.
       (Bug #24565)</p></li><li><p>
        Stored procedure executions are not thread safe.
       (Bug #23905)</p></li><li><p>
        The <code class="literal">CommandBuilder</code> would mistakenly add
        insert parameters for a table column with auto incrementation
        enabled.
       (Bug #23862)</p></li><li><p>
        One system where IPv6 was enabled, MySQL Connector/Net would incorrectly
        resolve host names.
       (Bug #23758)</p></li><li><p>
        An <code class="literal">System.OverflowException</code> would be raised
        when accessing a varchar field over 255 bytes.
       (Bug #23749)</p></li><li><p>
        Nested transactions do not raise an error or warning.
       (Bug #22400)</p></li><li><p>
        Within Mono, using the <code class="literal">PreparedStatement</code>
        interface could result in an error due to a
        <code class="literal">BitArray</code> copying error.
       (Bug #18186)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-8"></a>D.3.11.4. Changes in MySQL Connector/Net 1.0.8 (20 October 2006)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Stored procedures are now cached.
      </p></li><li><p>
        The method for retrieving stored procedure metadata has been
        changed so that users without
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privileges on the
        <code class="literal">mysql.proc</code> table can use a stored procedure.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net on a Turkish operating system, may fail to execute
        certain SQL statements correctly.
       (Bug #22452)</p></li><li><p>
        The <code class="literal">#</code> would not be accepted within
        column/table names, even though it was valid.
       (Bug #21521)</p></li><li><p>
        Calling <code class="methodname">Close</code> on a connection after
        calling a stored procedure would trigger a
        <code class="literal">NullReferenceException</code>.
       (Bug #20581)</p></li><li><p>
        You can now install the MySQL Connector/Net MSI package from the command line
        using the <code class="literal">/passive</code>,
        <code class="literal">/quiet</code>, <code class="literal">/q</code> options.
       (Bug #19994)</p></li><li><p>
        The DiscoverParameters function would fail when a stored
        procedure used a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a>
        parameter type.
       (Bug #19515)</p></li><li><p>
        When running a query that included a date comparison, a
        DateReader error would be raised.
       (Bug #19481)</p></li><li><p>
        <code class="literal">IDataRecord.GetString</code> would raise
        <code class="literal">NullPointerException</code> for null values in
        returned rows. Method now throws
        <code class="literal">SqlNullValueException</code>.
       (Bug #19294)</p></li><li><p>
        Parameter substitution in queries where the order of parameters
        and table fields did not match would substitute incorrect
        values.
       (Bug #19261)</p></li><li><p>
        Submitting an empty string to a command object through
        <code class="literal">prepare</code> raises an
        <code class="literal">System.IndexOutOfRangeException</code>, rather than
        a MySQL Connector/Net exception.
       (Bug #18391)</p></li><li><p>
        An exception would be raised when using an output parameter to a
        <code class="literal">System.String</code> value.
       (Bug #17814)</p></li><li><p>
        CHAR type added to MySqlDbType.
       (Bug #17749)</p></li><li><p>
        A <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query on a table with a
        date with a value of <code class="literal">'0000-00-00'</code> would hang
        the application.
       (Bug #17736)</p></li><li><p>
        The CommandBuilder ignored Unsigned flag at Parameter creation.
       (Bug #17375)</p></li><li><p>
        When working with multiple threads, character set initialization
        would generate errors.
       (Bug #17106)</p></li><li><p>
        When using an unsigned 64-bit integer in a stored procedure, the
        unsigned bit would be lost stored.
       (Bug #16934)</p></li><li><p>
        <code class="literal">DataReader</code> would show the value of the
        previous row (or last row with nonnull data) if the current row
        contained a <code class="literal">datetime</code> field with a null value.
       (Bug #16884)</p></li><li><p>
        Unsigned data types were not properly supported.
       (Bug #16788)</p></li><li><p>
        The connection string parser did not permit single or double
        quotation marks in the password.
       (Bug #16659)</p></li><li><p>
        The <code class="literal">MySqlDateTime</code> class did not contain
        constructors.
       (Bug #15112)</p></li><li><p>
        Called <code class="literal">MySqlCommandBuilder.DeriveParameters</code>
        for a stored procedure that has no paramers would cause an
        application crash.
       (Bug #15077)</p></li><li><p>
        Incorrect field/data lengths could be returned for
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> UTF8 columns.
       (Bug #14592)</p></li><li><p>
        Using <code class="literal">ExecuteScalar</code> with a datetime field,
        where the value of the field is "0000-00-00 00:00:00", a
        <code class="literal">MySqlConversionException</code> exception would be
        raised.
       (Bug #11991)</p></li><li><p>
        An <code class="literal">MySql.Data.Types.MySqlConversionException</code>
        would be raised when trying to update a row that contained a
        date field, where the date field contained a zero value
        (0000-00-00 00:00:00).
       (Bug #9619)</p></li><li><p>
        When using <code class="literal">MySqlDataAdapter</code>, connections to a
        MySQL server may remain open and active, even though the use of
        the connection has been completed and the data received.
       (Bug #8131)</p></li><li><p>
        Executing multiple queries as part of a transaction returns
        <code class="literal">There is already an openDataReader associated with this
        Connection which must be closed first</code>.
       (Bug #7248)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-7"></a>D.3.11.5. Changes in MySQL Connector/Net 1.0.7 (21 November 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Unsigned <code class="literal">tinyint</code> (NET byte) would lead to and
        incorrectly determined parameter type from the parameter value.
       (Bug #18570)</p></li><li><p>
        A <code class="literal">#42000Query was empty</code> exception occurred
        when executing a query built with
        <code class="literal">MySqlCommandBuilder</code>, if the query string
        ended with a semicolon.
       (Bug #14631)</p></li><li><p>
        The parameter collection object's <code class="literal">Add()</code>
        method added parameters to the list without first checking to
        see whether they already existed. Now it updates the value of
        the existing parameter object if it exists.
       (Bug #13927)</p></li><li><p>
        Added support for the <code class="literal">cp932</code> character set.
       (Bug #13806)</p></li><li><p>
        Calling a stored procedure where a parameter contained special
        characters (such as <code class="literal">'@'</code>) would produce an
        exception. Note that
        <a href="server-administration.html#sqlmode_ansi_quotes"><code class="literal">ANSI_QUOTES</code></a> had to be enabled
        to make this possible.
       (Bug #13753)</p></li><li><p>
        The <code class="literal">Ping()</code> method did not update the
        <code class="literal">State</code> property of the
        <code class="literal">Connection</code> object.
       (Bug #13658)</p></li><li><p>
        Implemented the
        <code class="literal">MySqlCommandBuilder.DeriveParameters</code> method
        that is used to discover the parameters for a stored procedure.
       (Bug #13632)</p></li><li><p>
        A statement that contained multiple references to the same
        parameter could not be prepared.
       (Bug #13541)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-6"></a>D.3.11.6. Changes in MySQL Connector/Net 1.0.6 (03 October 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net 1.0.5 could not connect on Mono.
       (Bug #13345)</p></li><li><p>
        Serializing a parameter failed if the first value passed in was
        <code class="literal">NULL</code>.
       (Bug #13276)</p></li><li><p>
        Field names that contained the following characters caused
        errors: <code class="literal">()%&lt;&gt;/</code>
       (Bug #13036)</p></li><li><p>
        The <code class="literal">nant</code> build sequence had problems.
       (Bug #12978)</p></li><li><p>
        The MySQL Connector/Net 1.0.5 installer would not install alongside MySQL Connector/Net
        1.0.4.
       (Bug #12835)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-5"></a>D.3.11.7. Changes in MySQL Connector/Net 1.0.5 (29 August 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL Connector/Net could not connect to MySQL 4.1.14.
       (Bug #12771)</p></li><li><p>
        With multiple hosts in the connection string, MySQL Connector/Net would not
        connect to the last host in the list.
       (Bug #12628)</p></li><li><p>
        The <code class="literal">ConnectionString</code> property could not be
        set when a <code class="literal">MySqlConnection</code> object was added
        with the designer.
       (Bug #12551, Bug #8724)</p></li><li><p>
        The <code class="literal">cp1250</code> character set was not supported.
       (Bug #11621)</p></li><li><p>
        A call to a stored procedure caused an exception if the stored
        procedure had no parameters.
       (Bug #11542)</p></li><li><p>
        Certain malformed queries would trigger a <code class="literal">Connection
        must be valid and open</code> error message.
       (Bug #11490)</p></li><li><p>
        Trying to use a stored procedure when
        <code class="literal">Connection.Database</code> was not populated
        generated an exception.
       (Bug #11450)</p></li><li><p>
        MySQL Connector/Net interpreted the new decimal data type as a byte array.
       (Bug #11294)</p></li><li><p>
        Added support to call a stored function from MySQL Connector/Net.
       (Bug #10644)</p></li><li><p>
        Connection could fail when .NET thread pool had no available
        worker threads.
       (Bug #10637)</p></li><li><p>
        Calling <code class="literal">MySqlConnection.clone</code> when a
        connection string had not yet been set on the original
        connection would generate an error.
       (Bug #10281)</p></li><li><p>
        Decimal parameters caused syntax errors.
       (Bug #10152, Bug #11550, Bug #10486)</p></li><li><p>
        Parameters were not recognized when they were separated by
        linefeeds.
       (Bug #9722)</p></li><li><p>
        The <code class="literal">MySqlCommandBuilder</code> class could not
        handle queries that referenced tables in a database other than
        the default database.
       (Bug #8382)</p></li><li><p>
        Trying to read a <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column
        generated an exception.
       (Bug #7951)</p></li><li><p>
        MySQL Connector/Net could not work properly with certain regional settings.
        (WL#8228)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-4"></a>D.3.11.8. Changes in MySQL Connector/Net 1.0.4 (20 January 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlReader.GetInt32</code> throws exception if
        column is unsigned.
       (Bug #7755)</p></li><li><p>
        Quote character \222 not quoted in
        <code class="literal">EscapeString</code>.
       (Bug #7724)</p></li><li><p>
        GetBytes is working no more.
       (Bug #7704)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetString(index)</code> returns
        non-Null value when field is <code class="literal">Null</code>.
       (Bug #7612)</p></li><li><p>
        Clone method bug in <code class="literal">MySqlCommand</code>.
       (Bug #7478)</p></li><li><p>
        Problem with Multiple resultsets.
       (Bug #7436)</p></li><li><p>
        <code class="literal">MySqlAdapter.Fill</code> method throws error message
        <code class="literal">Non-negative number required</code>.
       (Bug #7345)</p></li><li><p>
        <code class="literal">MySqlCommand.Connection</code> returns an
        IDbConnection.
       (Bug #7258)</p></li><li><p>
        Calling prepare causing exception.
       (Bug #7243)</p></li><li><p>
        Fixed problem with shared memory connections.
      </p></li><li><p>
        Added or filled out several more topics in the API reference
        documentation.
      </p></li><li><p>
        Fixed another small problem with prepared statements.
      </p></li><li><p>
        Fixed problem that causes named pipes to not work with some blob
        functionality.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-3"></a>D.3.11.9. Changes in MySQL Connector/Net 1.0.3 (12 October 2004, gamma)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Invalid query string when using inout parameters
       (Bug #7133)</p></li><li><p>
        Inserting <code class="literal">DateTime</code> causes
        <code class="literal">System.InvalidCastException</code> to be thrown.
       (Bug #7132)</p></li><li><p>
        <code class="literal">MySqlDateTime</code> in Datatables sorting by Text,
        not Date.
       (Bug #7032)</p></li><li><p>
        Exception stack trace lost when re-throwing exceptions.
       (Bug #6983)</p></li><li><p>
        Errors in parsing stored procedure parameters.
       (Bug #6902)</p></li><li><p>
        InvalidCast when using <code class="literal">DATE_ADD</code>-function.
       (Bug #6879)</p></li><li><p>
        Int64 Support in <code class="literal">MySqlCommand</code> Parameters.
       (Bug #6863)</p></li><li><p>
        Test suite fails with MySQL 4.0 because of case sensitivity of
        table names.
       (Bug #6831)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetChar(int i)</code> throws
        <code class="literal">IndexOutOfRange</code> exception.
       (Bug #6770)</p></li><li><p>
        Integer "out" parameter from stored procedure returned as
        string.
       (Bug #6668)</p></li><li><p>
        An Open Connection has been Closed by the Host System.
       (Bug #6634)</p></li><li><p>
        Fixed Invalid character set index: 200.
       (Bug #6547)</p></li><li><p>
        Connections now do not have to give a database on the connection
        string.
      </p></li><li><p>
        Installer now includes options to install into GAC and create
        <span class="guimenu">Start Menu</span> items.
      </p></li><li><p>
        Fixed major problem with detecting null values when using
        prepared statements.
      </p></li><li><p>
        Fixed problem where multiple resultsets having different numbers
        of columns would cause a problem.
      </p></li><li><p>
        Added <code class="literal">ServerThread</code> property to
        <code class="literal">MySqlConnection</code> to expose server thread id.
      </p></li><li><p>
        Added Ping method to <code class="literal">MySqlConnection</code>.
      </p></li><li><p>
        Changed the name of the test suite to
        <code class="filename">MySql.Data.Tests.dll</code>.
      </p></li><li><p>
        Now <a href="sql-syntax.html#show-collation" title="12.7.5.5. SHOW COLLATION Syntax"><code class="literal">SHOW COLLATION</code></a> is used upon
        connection to retrieve the full list of charset ids.
      </p></li><li><p>
        Made MySQL the default named pipe name.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-2"></a>D.3.11.10. Changes in MySQL Connector/Net 1.0.2 (15 November 2004, gamma)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed Objects not being disposed
       (Bug #6649)</p></li><li><p>
        Fixed Charset-map for UCS-2
       (Bug #6541)</p></li><li><p>
        Fixed Zero date "0000-00-00" is returned wrong when filling
        Dataset
       (Bug #6429)</p></li><li><p>
        Fixed double type handling in MySqlParameter(string
        parameterName, object value).
       (Bug #6428)</p></li><li><p>
        Fixed Installation directory ignored using custom installation
       (Bug #6329)</p></li><li><p>
        Fixed #HY000 Illegal mix of collations
        (latin1_swedish_ci,IMPLICIT) and (utf8_general_
       (Bug #6322)</p></li><li><p>
        Added the TableEditor CS and VB sample
      </p></li><li><p>
        Added charset connection string option
      </p></li><li><p>
        Fixed problem with MySqlBinary where string values could not be
        used to update extended text columns
      </p></li><li><p>
        Provider is now using character set specified by server as
        default
      </p></li><li><p>
        Updated the installer to include the new samples
      </p></li><li><p>
        Fixed problem where setting command text leaves the command in a
        prepared state
      </p></li><li><p>
        Fixed Long inserts take very long time (Bu #5453)
      </p></li><li><p>
        Fixed problem where calling stored procedures might cause an
        "Illegal mix of collations" problem.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-1"></a>D.3.11.11. Changes in MySQL Connector/Net 1.0.1 (27 October 2004, beta)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed IndexOutOfBounds when reading <code class="literal">BLOB</code> with
        <code class="literal">DataReader</code> with
        <code class="literal">GetString(index)</code>.
       (Bug #6230)</p></li><li><p>
        Fixed GetBoolean returns wrong values
       (Bug #6227)</p></li><li><p>
        Fixed Method TokenizeSql() uses only a limited set of valid
        characters for parameters
       (Bug #6217)</p></li><li><p>
        Fixed NET Connector source missing resx files
       (Bug #6216)</p></li><li><p>
        Fixed System.OverflowException when using
        <code class="literal">YEAR</code> data type.
       (Bug #6036)</p></li><li><p>
        Fixed MySqlDateTime sets IsZero property on all subseq.records
        after first zero found
       (Bug #6006)</p></li><li><p>
        Fixed serializing of floating point parameters (double, numeric,
        single, decimal)
       (Bug #5900)</p></li><li><p>
        Fixed missing Reference in DbType setter
       (Bug #5897)</p></li><li><p>
        Fixed Parsing the ';' char
       (Bug #5876)</p></li><li><p>
        Fixed DBNull Values causing problems with retrieving/updating
        queries.
       (Bug #5798)</p></li><li><p>
        IsNullable error
       (Bug #5796)</p></li><li><p>
        Fixed problem where MySqlParameterCollection.Add() would throw
        unclear exception when given a null value
       (Bug #5621)</p></li><li><p>
        Fixed constructor initialize problems in MySqlCommand()
       (Bug #5613)</p></li><li><p>
        Possible bug in MySqlParameter(string, object) constructor
       (Bug #5602)</p></li><li><p>
        Fixed Yet Another "object reference not set to an instance of an
        object"
       (Bug #5496)</p></li><li><p>
        Cannot run a stored procedure populating mysqlcommand.parameters
       (Bug #5474)</p></li><li><p>
        Setting <code class="literal">DbType</code> threw a
        <code class="literal">NullReferenceException</code>.
       (Bug #5469)</p></li><li><p>
        Calling <code class="literal">GetChars</code> on a
        <code class="literal">LONGTEXT</code> column threw an exception.
       (Bug #5458)</p></li><li><p>
        <code class="literal">MySqlCommand</code> saw instances of
        <code class="literal">"?"</code> as parameters in string literals.
       (Bug #5392)</p></li><li><p>
        <code class="literal">DataReader</code> reported all rows as
        <code class="literal">NULL</code> if one row was <code class="literal">NULL</code>.
       (Bug #5388)</p></li><li><p>
        Fixed Can't display Chinese correctly
       (Bug #5288)</p></li><li><p>
        Fixed MySqlDataReader and 'show tables from ...' behavior
       (Bug #5256)</p></li><li><p>
        Fixed problem in PacketReader where it could try to allocate the
        wrong buffer size in EnsureCapacity
      </p></li><li><p>
        Fixed problem where using old syntax while using the interfaces
        caused problems
      </p></li><li><p>
        Added test case for resetting the command text on a prepared
        command
      </p></li><li><p>
        Fixed problem where connection lifetime on the connect string
        was not being respected
      </p></li><li><p>
        Field buffers being reused to decrease memory allocations and
        increase speed
      </p></li><li><p>
        Added Aggregate function test (wasn't really a bug)
      </p></li><li><p>
        Using PacketWriter instead of Packet for writing to streams
      </p></li><li><p>
        Implemented SequentialAccess
      </p></li><li><p>
        Fixed problem with ConnectionInternal where a key might be added
        more than once
      </p></li><li><p>
        Fixed Russian character support as well
      </p></li><li><p>
        Fixed problem where connector was not issuing a CMD_QUIT before
        closing the socket
      </p></li><li><p>
        Fixed problem where Min Pool Size was not being respected
      </p></li><li><p>
        Refactored compression code into CompressedStream to clean up
        NativeDriver
      </p></li><li><p>
        CP1252 is now used for Latin1 only when the server is 4.1.2 and
        later
      </p></li><li><p>
        Virtualized driver subsystem so future releases could easily
        support client or embedded server support
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-news-1-0-0"></a>D.3.11.12. Changes in MySQL Connector/Net 1.0.0 (01 September 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Thai encoding not correctly supported.
       (Bug #3889)</p></li><li><p>
        Bumped version number to 1.0.0 for beta 1 release.
      </p></li><li><p>
        Removed all of the XML comment warnings.
      </p></li><li><p>
        Added <code class="filename">COPYING.rtf</code> file for use in
        installer.
      </p></li><li><p>
        Updated many of the test cases.
      </p></li><li><p>
        Fixed problem with using compression.
      </p></li><li><p>
        Removed some last references to ByteFX.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-9-0"></a>D.3.12. Changes in MySQL Connector/Net Version 0.9.0 (30 August 2004)</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Added test fixture for prepared statements.
        </p></li><li><p>
          All type classes now implement a
          <code class="literal">SerializeBinary</code> method for sending their
          data to a <code class="literal">PacketWriter</code>.
        </p></li><li><p>
          Added <code class="literal">PacketWriter</code> class that will enable
          future low-memory large object handling.
        </p></li><li><p>
          Fixed many small bugs in running prepared statements and
          stored procedures.
        </p></li><li><p>
          Changed command so that an exception will not be thrown in
          executing a stored procedure with parameters in old syntax
          mode.
        </p></li><li><p>
          <code class="literal">SingleRow</code> behavior now working right even
          with limit.
        </p></li><li><p>
          <code class="literal">GetBytes</code> now only works on binary columns.
        </p></li><li><p>
          Logger now truncates long SQL commands so blob columns do not
          blow out our log.
        </p></li><li><p>
          Host and database now have a default value of "" unless
          otherwise set.
        </p></li><li><p>
          Connection Timeout seems to be ignored. (Bug #5214)
        </p></li><li><p>
          Added test case for bug# 5051: GetSchema not working
          correctly.
        </p></li><li><p>
          Fixed problem where <code class="literal">GetSchema</code> would return
          false for <code class="literal">IsUnique</code> when the column is key.
        </p></li><li><p>
          <code class="literal">MySqlDataReader GetXXX</code> methods now using
          the field level <code class="literal">MySqlValue</code> object and not
          performing conversions.
        </p></li><li><p>
          <code class="literal">DataReader</code> returning
          <code class="literal">NULL</code> for time column. (Bug #5097)
        </p></li><li><p>
          Added test case for
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
          INFILE</code></a>.
        </p></li><li><p>
          Added replacetext custom nant task.
        </p></li><li><p>
          Added <code class="literal">CommandBuilderTest</code> fixture.
        </p></li><li><p>
          Added Last One Wins feature to
          <code class="literal">CommandBuilder</code>.
        </p></li><li><p>
          Fixed persist security info case problem.
        </p></li><li><p>
          Fixed <code class="literal">GetBool</code> so that 1, true, "true", and
          "yes" all count as true.
        </p></li><li><p>
          Make parameter mark configurable.
        </p></li><li><p>
          Added the "old syntax" connection string parameter to enable
          use of @ parameter marker.
        </p></li><li><p>
          <code class="literal">MySqlCommandBuilder</code>. (Bug #4658)
        </p></li><li><p>
          <code class="literal">ByteFX.MySqlClient</code> caches passwords if
          <code class="literal">Persist Security Info</code> is false. (Bug #4864)
        </p></li><li><p>
          Updated license banner in all source files to include FLOSS
          exception.
        </p></li><li><p>
          Added new .Types namespace and implementations for most
          current MySql types.
        </p></li><li><p>
          Added <code class="literal">MySqlField41</code> as a subclass of
          <code class="literal">MySqlField</code>.
        </p></li><li><p>
          Changed many classes to now use the new .Types types.
        </p></li><li><p>
          Changed type <code class="literal">enum int</code> to
          <code class="literal">Int32</code>, <code class="literal">short</code> to
          <code class="literal">Int16</code>, and <code class="literal">bigint</code> to
          <code class="literal">Int64</code>.
        </p></li><li><p>
          Added dummy types <code class="literal">UInt16</code>,
          <code class="literal">UInt32</code>, and <code class="literal">UInt64</code> to
          allow an unsigned parameter to be made.
        </p></li><li><p>
          Connections are now reset when they are pulled from the
          connection pool.
        </p></li><li><p>
          Refactored auth code in driver so it can be used for both auth
          and reset.
        </p></li><li><p>
          Added <code class="literal">UserReset</code> test in
          <code class="filename">PoolingTests.cs</code>.
        </p></li><li><p>
          Connections are now reset using
          <code class="literal">COM_CHANGE_USER</code> when pulled from the pool.
        </p></li><li><p>
          Implemented <code class="literal">SingleResultSet</code> behavior.
        </p></li><li><p>
          Implemented support of unicode.
        </p></li><li><p>
          Added char set mappings for utf-8 and ucs-2.
        </p></li><li><p>
          Time fields overflow using bytefx .net mysql driver (Bug
          #4520)
        </p></li><li><p>
          Modified time test in data type test fixture to check for time
          spans where hours &gt; 24.
        </p></li><li><p>
          Wrong string with backslash escaping in
          <code class="literal">ByteFx.Data.MySqlClient.MySqlParameter</code>.
          (Bug #4505)
        </p></li><li><p>
          Added code to Parameter test case TestQuoting to test for
          backslashes.
        </p></li><li><p>
          <code class="literal">MySqlCommandBuilder</code> fails with multi-word
          column names. (Bug #4486)
        </p></li><li><p>
          Fixed bug in <code class="literal">TokenizeSql</code> where underscore
          would terminate character capture in parameter name.
        </p></li><li><p>
          Added test case for spaces in column names.
        </p></li><li><p>
          <code class="literal">MySqlDataReader.GetBytes</code> do not work
          correctly. (Bug #4324)
        </p></li><li><p>
          Added <code class="function">GetBytes()</code> test case to
          <code class="literal">DataReader</code> test fixture.
        </p></li><li><p>
          Now reading all server variables in
          <code class="literal">InternalConnection.Configure</code> into
          <code class="literal">Hashtable</code>.
        </p></li><li><p>
          Now using <code class="literal">string[]</code> for index map in
          <code class="literal">CharSetMap</code>.
        </p></li><li><p>
          Added CRInSQL test case for carriage returns in SQL.
        </p></li><li><p>
          Setting maxPacketSize to default value in
          <code class="literal">Driver.ctor</code>.
        </p></li><li><p>
          Setting <code class="literal">MySqlDbType</code> on a parameter doesn't
          set generic type. (Bug #4442)
        </p></li><li><p>
          Removed obsolete data types <code class="literal">Long</code> and
          <code class="literal">LongLong</code>.
        </p></li><li><p>
          Overflow exception thrown when using "use pipe" on connection
          string. (Bug #4071)
        </p></li><li><p>
          Changed "use pipe" keyword to "pipe name" or just "pipe".
        </p></li><li><p>
          Enable reading multiple resultsets from a single query.
        </p></li><li><p>
          Added flags attribute to <code class="literal">ServerStatusFlags</code>
          enum.
        </p></li><li><p>
          Changed name of <code class="literal">ServerStatus</code> enum to
          <code class="literal">ServerStatusFlags</code>.
        </p></li><li><p>
          Inserted data row doesn't update properly.
        </p></li><li><p>
          Error processing show create table. (Bug #4074)
        </p></li><li><p>
          Change <code class="literal">Packet.ReadLenInteger</code> to
          <code class="literal">ReadPackedLong</code> and added
          <code class="literal">packet.ReadPackedInteger</code> that always reads
          integers packed with 2,3,4.
        </p></li><li><p>
          Added <code class="literal">syntax.cs</code> test fixture to test
          various SQL syntax bugs.
        </p></li><li><p>
          Improper handling of time values. Now time value of 00:00:00
          is not treated as null. (Bug #4149)
        </p></li><li><p>
          Moved all test suite files into <code class="literal">TestSuite</code>
          folder.
        </p></li><li><p>
          Fixed bug where null column would move the result packet
          pointer backward.
        </p></li><li><p>
          Added new nant build script.
        </p></li><li><p>
          Clear tablename so it will be regen'ed properly during the
          next <code class="literal">GenerateSchema</code>. (Bug #3917)
        </p></li><li><p>
          <code class="literal">GetValues</code> was always returning zero and was
          also always trying to copy all fields rather than respecting
          the size of the array passed in. (Bug #3915)
        </p></li><li><p>
          Implemented shared memory access protocol.
        </p></li><li><p>
          Implemented prepared statements for MySQL 4.1.
        </p></li><li><p>
          Implemented stored procedures for MySQL 5.0.
        </p></li><li><p>
          Renamed <code class="literal">MySqlInternalConnection</code> to
          <code class="literal">InternalConnection</code>.
        </p></li><li><p>
          SQL is now parsed as chars, fixes problems with other
          languages.
        </p></li><li><p>
          Added logging and allow batch connection string options.
        </p></li><li><p>
          <code class="literal">RowUpdating</code> event not set when setting the
          <code class="literal">DataAdapter</code> property. (Bug #3888)
        </p></li><li><p>
          Fixed bug in char set mapping.
        </p></li><li><p>
          Implemented 4.1 authentication.
        </p></li><li><p>
          Improved open/auth code in driver.
        </p></li><li><p>
          Improved how connection bits are set during connection.
        </p></li><li><p>
          Database name is now passed to server during initial
          handshake.
        </p></li><li><p>
          Changed namespace for client to
          <code class="literal">MySql.Data.MySqlClient</code>.
        </p></li><li><p>
          Changed assembly name of client to
          <code class="filename">MySql.Data.dll</code>.
        </p></li><li><p>
          Changed license text in all source files to GPL.
        </p></li><li><p>
          Added the <code class="filename">MySqlClient.build</code> Nant file.
        </p></li><li><p>
          Removed the mono batch files.
        </p></li><li><p>
          Moved some of the unused files into notused folder so nant
          build file can use wildcards.
        </p></li><li><p>
          Implemented shared memory access.
        </p></li><li><p>
          Major revamp in code structure.
        </p></li><li><p>
          Prepared statements now working for MySql 4.1.1 and later.
        </p></li><li><p>
          Finished implementing auth for 4.0, 4.1.0, and 4.1.1.
        </p></li><li><p>
          Changed namespace from
          <code class="literal">MySQL.Data.MySQLClient</code> back to
          <code class="literal">MySql.Data.MySqlClient</code>.
        </p></li><li><p>
          Fixed bug in <code class="literal">CharSetMapping</code> where it was
          trying to use text names as ints.
        </p></li><li><p>
          Changed namespace to
          <code class="literal">MySQL.Data.MySQLClient</code>.
        </p></li><li><p>
          Integrated auth changes from UC2004.
        </p></li><li><p>
          Fixed bug where calling any of the GetXXX methods on a
          datareader before or after reading data would not throw the
          appropriate exception (thanks Luca Morelli).
        </p></li><li><p>
          Added <code class="literal">TimeSpan</code> code in parameter.cs to
          properly serialize a timespan object to mysql time format
          (thanks Gianluca Colombo).
        </p></li><li><p>
          Added <code class="literal">TimeStamp</code> to parameter serialization
          code. Prevented <code class="literal">DataAdapter</code> updates from
          working right (thanks Michael King).
        </p></li><li><p>
          Fixed a misspelling in <code class="filename">MySqlHelper.cs</code>
          (thanks Patrick Kristiansen).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-76"></a>D.3.13. Changes in MySQL Connector/Net Version 0.76</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Driver now using charset number given in handshake to create
          encoding.
        </p></li><li><p>
          Changed command editor to point to
          <code class="literal">MySqlClient.Design</code>.
        </p></li><li><p>
          Fixed bug in <code class="literal">Version.isAtLeast</code>.
        </p></li><li><p>
          Changed <code class="literal">DBConnectionString</code> to support
          changes done to <code class="literal">MySqlConnectionString</code>.
        </p></li><li><p>
          Removed <code class="literal">SqlCommandEditor</code> and
          <code class="literal">DataAdapterPreviewDialog</code>.
        </p></li><li><p>
          Using new long return values in many places.
        </p></li><li><p>
          Integrated new <code class="literal">CompressedStream</code> class.
        </p></li><li><p>
          Changed <code class="literal">ConnectionString</code> and added
          attributes to permit it to be used in
          <code class="literal">MySqlClient.Design</code>.
        </p></li><li><p>
          Changed <code class="filename">packet.cs</code> to support newer
          lengths in <code class="literal">ReadLenInteger</code>.
        </p></li><li><p>
          Changed other classes to use new properties and fields of
          <code class="literal">MySqlConnectionString</code>.
        </p></li><li><p>
          <code class="literal">ConnectionInternal</code> is now using PING to see
          whether the server is available.
        </p></li><li><p>
          Moved toolbox bitmaps into resource folder.
        </p></li><li><p>
          Changed <code class="filename">field.cs</code> to permit values to come
          directly from row buffer.
        </p></li><li><p>
          Changed to use the new driver.Send syntax.
        </p></li><li><p>
          Using a new packet queueing system.
        </p></li><li><p>
          Started work handling the "broken" compression packet
          handling.
        </p></li><li><p>
          Fixed bug in <code class="literal">StreamCreator</code> where failure to
          connect to a host would continue to loop infinitely (thanks
          Kevin Casella).
        </p></li><li><p>
          Improved connectstring handling.
        </p></li><li><p>
          Moved designers into Pro product.
        </p></li><li><p>
          Removed some old commented out code from
          <code class="filename">command.cs</code>.
        </p></li><li><p>
          Fixed a problem with compression.
        </p></li><li><p>
          Fixed connection object where an exception throw prior to the
          connection opening would not leave the connection in the
          connecting state (thanks Chris Cline).
        </p></li><li><p>
          Added GUID support.
        </p></li><li><p>
          Fixed sequence out of order bug (thanks Mark Reay).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-75"></a>D.3.14. Changes in MySQL Connector/Net Version 0.75</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Enum values now supported as parameter values (thanks Philipp
          Sumi).
        </p></li><li><p>
          Year data type now supported.
        </p></li><li><p>
          Fixed compression.
        </p></li><li><p>
          Fixed bug where a parameter with a <code class="literal">TimeSpan</code>
          as the value would not serialize properly.
        </p></li><li><p>
          Fixed bug where default constructor would not set default
          connection string values.
        </p></li><li><p>
          Added some XML comments to some members.
        </p></li><li><p>
          Work to fix/improve compression handling.
        </p></li><li><p>
          Improved <code class="literal">ConnectionString</code> handling so that
          it better matches the standard set by
          <code class="literal">SqlClient</code>.
        </p></li><li><p>
          A <code class="literal">MySqlException</code> is now thrown if a user
          name is not included in the connection string.
        </p></li><li><p>
          Localhost is now used as the default if not specified on the
          connection string.
        </p></li><li><p>
          An exception is now thrown if an attempt is made to set the
          connection string while the connection is open.
        </p></li><li><p>
          Small changes to <code class="literal">ConnectionString</code> docs.
        </p></li><li><p>
          Removed <code class="literal">MultiHostStream</code> and
          <code class="literal">MySqlStream</code>. Replaced it with
          <code class="filename">Common/StreamCreator</code>.
        </p></li><li><p>
          Added support for Use Pipe connection string value.
        </p></li><li><p>
          Added Platform class for easier access to platform utility
          functions.
        </p></li><li><p>
          Fixed small pooling bug where new connection was not getting
          created after <code class="literal">IsAlive</code> fails.
        </p></li><li><p>
          Added <code class="filename">Platform.cs</code> and
          <code class="filename">StreamCreator.cs</code>.
        </p></li><li><p>
          Fixed <code class="filename">Field.cs</code> to properly handle 4.1
          style timestamps.
        </p></li><li><p>
          Changed <code class="literal">Common.Version</code> to
          <code class="literal">Common.DBVersion</code> to avoid name conflict.
        </p></li><li><p>
          Fixed <code class="filename">field.cs</code> so that text columns
          return the right field type.
        </p></li><li><p>
          Added <code class="literal">MySqlError</code> class to provide some
          reference for error codes (thanks Geert Veenstra).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-74"></a>D.3.15. Changes in MySQL Connector/Net Version 0.74</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Added Unix socket support (thanks Mohammad DAMT).
        </p></li><li><p>
          Only calling <code class="literal">Thread.Sleep</code> when no data is
          available.
        </p></li><li><p>
          Improved escaping of quote characters in parameter data.
        </p></li><li><p>
          Removed misleading comments from
          <code class="filename">parameter.cs</code>.
        </p></li><li><p>
          Fixed pooling bug.
        </p></li><li><p>
          Fixed <code class="literal">ConnectionString</code> editor dialog
          (thanks marco p (pomarc)).
        </p></li><li><p>
          <code class="literal">UserId</code> now supported in connection strings
          (thanks Jeff Neeley).
        </p></li><li><p>
          Attempting to create a parameter that is not input throws an
          exception (thanks Ryan Gregg).
        </p></li><li><p>
          Added much documentation.
        </p></li><li><p>
          Checked in new <code class="literal">MultiHostStream</code> capability.
          Big thanks to Dan Guisinger for this. he originally submitted
          the code and idea of supporting multiple machines on the
          connect string.
        </p></li><li><p>
          Added a lot of documentation.
        </p></li><li><p>
          Fixed speed issue with 0.73.
        </p></li><li><p>
          Changed to Thread.Sleep(0) in MySqlDataStream to help optimize
          the case where it doesn't need to wait (thanks Todd German).
        </p></li><li><p>
          Prepopulating the idlepools to <code class="literal">MinPoolSize</code>.
        </p></li><li><p>
          Fixed <code class="literal">MySqlPool</code> deadlock condition as well
          as stupid bug where CreateNewPooledConnection was not ever
          adding new connections to the pool. Also fixed
          <code class="literal">MySqlStream.ReadBytes</code> and
          <code class="literal">ReadByte</code> to not use
          <code class="literal">TicksPerSecond</code> which does not appear to
          always be right. (thanks Matthew J. Peddlesden)
        </p></li><li><p>
          Fix for precision and scale (thanks Matthew J. Peddlesden).
        </p></li><li><p>
          Added <code class="literal">Thread.Sleep(1)</code> to stream reading
          methods to be more cpu friendly (thanks Sean McGinnis).
        </p></li><li><p>
          Fixed problem where <code class="literal">ExecuteReader</code> would
          sometime return null (thanks Lloyd Dupont).
        </p></li><li><p>
          Fixed major bug with null field handling (thanks Naucki).
        </p></li><li><p>
          Enclosed queries for
          <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> and
          <code class="literal">characterset</code> inside try catch (and set
          defaults).
        </p></li><li><p>
          Fixed problem where socket was not getting closed properly
          (thanks Steve!).
        </p></li><li><p>
          Fixed problem where <code class="literal">ExecuteNonQuery</code> was not
          always returning the right value.
        </p></li><li><p>
          Fixed <code class="literal">InternalConnection</code> to not use
          <code class="literal">@@session.max_allowed_packet</code> but use
          <code class="literal">@@max_allowed_packet</code>. (Thanks Miguel)
        </p></li><li><p>
          Added many new XML doc lines.
        </p></li><li><p>
          Fixed SQL parsing to not send empty queries (thanks Rory).
        </p></li><li><p>
          Fixed problem where the reader was not unpeeking the packet on
          close.
        </p></li><li><p>
          Fixed problem where user variables were not being handled
          (thanks Sami Vaaraniemi).
        </p></li><li><p>
          Fixed loop checking in the MySqlPool (thanks Steve M. Brown)
        </p></li><li><p>
          Fixed <code class="literal">ParameterCollection.Add</code> method to
          match <code class="literal">SqlClient</code> (thanks Joshua Mouch).
        </p></li><li><p>
          Fixed <code class="literal">ConnectionString</code> parsing to handle no
          and yes for boolean and not lowercase values (thanks Naucki).
        </p></li><li><p>
          Added <code class="literal">InternalConnection</code> class, changes to
          pooling.
        </p></li><li><p>
          Implemented Persist Security Info.
        </p></li><li><p>
          Added <code class="filename">security.cs</code> and
          <code class="filename">version.cs</code> to project
        </p></li><li><p>
          Fixed <code class="literal">DateTime</code> handling in
          <code class="filename">Parameter.cs</code> (thanks Burkhard
          Perkens-Golomb).
        </p></li><li><p>
          Fixed parameter serialization where some types would throw a
          cast exception.
        </p></li><li><p>
          Fixed <code class="literal">DataReader</code> to convert all returned
          values to prevent casting errors (thanks Keith Murray).
        </p></li><li><p>
          Added code to <code class="literal">Command.ExecuteReader</code> to
          return null if the initial SQL statement throws an exception
          (thanks Burkhard Perkens-Golomb).
        </p></li><li><p>
          Fixed <code class="literal">ExecuteScalar</code> bug introduced with
          restructure.
        </p></li><li><p>
          Restructure to permit <code class="literal">LOCAL DATA INFILE</code> and
          better sequencing of packets.
        </p></li><li><p>
          Fixed several bugs related to restructure.
        </p></li><li><p>
          Early work done to support more secure passwords in MySQL 4.1.
          Old passwords in 4.1 not supported yet.
        </p></li><li><p>
          Parameters appearing after system parameters are now handled
          correctly (Adam M. (adammil)).
        </p></li><li><p>
          Strings can now be assigned directly to blob fields (Adam M.).
        </p></li><li><p>
          Fixed float parameters (thanks Pent).
        </p></li><li><p>
          Improved Parameter constructor and
          <code class="literal">ParameterCollection.Add</code> methods to better
          match SqlClient (thanks Joshua Mouch).
        </p></li><li><p>
          Corrected <code class="literal">Connection.CreateCommand</code> to
          return a <code class="literal">MySqlCommand</code> type.
        </p></li><li><p>
          Fixed connection string designer dialog box problem (thanks
          Abraham Guyt).
        </p></li><li><p>
          Fixed problem with sending commands not always reading the
          response packet (thanks Joshua Mouch).
        </p></li><li><p>
          Fixed parameter serialization where some blobs types were not
          being handled (thanks Sean McGinnis).
        </p></li><li><p>
          Removed spurious <code class="literal">MessageBox.show</code> from
          <code class="literal">DataReader</code> code (thanks Joshua Mouch).
        </p></li><li><p>
          Fixed a nasty bug in the split SQL code (thanks everyone!).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-71"></a>D.3.16. Changes in MySQL Connector/Net Version 0.71</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed bug in <code class="literal">MySqlStream</code> where too much
          data could attempt to be read (thanks Peter Belbin)
        </p></li><li><p>
          Implemented <code class="literal">HasRows</code> (thanks Nash Pherson).
        </p></li><li><p>
          Fixed bug where tables with more than 252 columns cause an
          exception (thanks Joshua Kessler).
        </p></li><li><p>
          Fixed bug where SQL statements ending in ; would cause a
          problem (thanks Shane Krueger).
        </p></li><li><p>
          Fixed bug in driver where error messages were getting
          truncated by 1 character (thanks Shane Krueger).
        </p></li><li><p>
          Made <code class="literal">MySqlException</code> serializable (thanks
          Mathias Hasselmann).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-70"></a>D.3.17. Changes in MySQL Connector/Net Version 0.70</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Updated some of the character code pages to be more accurate.
        </p></li><li><p>
          Fixed problem where readers could be opened on connections
          that had readers open.
        </p></li><li><p>
          Moved test to separate assembly
          <code class="literal">MySqlClientTests</code>.
        </p></li><li><p>
          Fixed stupid problem in driver with sequence out of order
          (Thanks Peter Belbin).
        </p></li><li><p>
          Added some pipe tests.
        </p></li><li><p>
          Increased default max pool size to 50.
        </p></li><li><p>
          Compiles with Mono 0-24.
        </p></li><li><p>
          Fixed connection and data reader dispose problems.
        </p></li><li><p>
          Added <code class="literal">String</code> data type handling to
          parameter serialization.
        </p></li><li><p>
          Fixed sequence problem in driver that occurred after thrown
          exception (thanks Burkhard Perkens-Golomb).
        </p></li><li><p>
          Added support for <code class="literal">CommandBehavior.SingleRow</code>
          to <code class="literal">DataReader</code>.
        </p></li><li><p>
          Fixed command SQL processing so quotation marks are better
          handled (thanks Theo Spears).
        </p></li><li><p>
          Fixed parsing of double, single, and decimal values to account
          for non-English separators. You still have to use the right
          syntax if you using hard coded SQL, but if you use parameters
          the code will convert floating point types to use '.'
          appropriately internal both into the server and out.
        </p></li><li><p>
          Added <code class="literal">MySqlStream</code> class to simplify
          timeouts and driver coding.
        </p></li><li><p>
          Fixed <code class="literal">DataReader</code> so that it is closed
          properly when the associated connection is closed. [thanks
          smishra]
        </p></li><li><p>
          Made client more SqlClient compliant so that DataReaders have
          to be closed before the connection can be used to run another
          command.
        </p></li><li><p>
          Improved <code class="literal">DBNull.Value</code> handling in the
          fields.
        </p></li><li><p>
          Added several unit tests.
        </p></li><li><p>
          Fixed <code class="literal">MySqlException</code> base class.
        </p></li><li><p>
          Improved driver coding
        </p></li><li><p>
          Fixed bug where NextResult was returning false on the last
          resultset.
        </p></li><li><p>
          Added more tests for MySQL.
        </p></li><li><p>
          Improved casting problems by equating unsigned 32bit values to
          Int64 and unsigned 16bit values to Int32, and so forth.
        </p></li><li><p>
          Added new constructor for <code class="literal">MySqlParameter</code>
          for (name, type, size, srccol)
        </p></li><li><p>
          Fixed bug in <code class="literal">MySqlDataReader</code> where it
          didn't check for null fieldlist before returning field count.
        </p></li><li><p>
          Started adding <code class="literal">MySqlClient</code> unit tests
          (added <code class="filename">MySqlClient/Tests</code> folder and some
          test cases).
        </p></li><li><p>
          Fixed some things in Connection String handling.
        </p></li><li><p>
          Moved <code class="literal">INIT_DB</code> to
          <code class="literal">MySqlPool</code>. I may move it again, this is in
          preparation of the conference.
        </p></li><li><p>
          Fixed bug inside <code class="literal">CommandBuilder</code> that
          prevented inserts from happening properly.
        </p></li><li><p>
          Reworked some of the internals so that all three execute
          methods of Command worked properly.
        </p></li><li><p>
          Fixed many small bugs found during benchmarking.
        </p></li><li><p>
          The first cut of <code class="literal">CoonectionPooling</code> is
          working. "min pool size" and "max pool size" are respected.
        </p></li><li><p>
          Work to enable multiple resultsets to be returned.
        </p></li><li><p>
          Character sets are handled much more intelligently now. The
          driver queries MySQL at startup for the default character set.
          That character set is then used for conversions if that code
          page can be loaded. If not, then the default code page for the
          current OS is used.
        </p></li><li><p>
          Added code to save the inferred type in the name,value
          constructor of <code class="literal">Parameter</code>.
        </p></li><li><p>
          Also, inferred type if value of null parameter is changed
          using <code class="literal">Value</code> property.
        </p></li><li><p>
          Converted all files to use proper Camel case. MySQL is now
          MySql in all files. PgSQL is now PgSql.
        </p></li><li><p>
          Added attribute to PgSql code to prevent designer from trying
          to show.
        </p></li><li><p>
          Added <code class="literal">MySQLDbType</code> property to Parameter
          object and added proper conversion code to convert from
          <code class="literal">DbType</code> to <code class="literal">MySQLDbType</code>).
        </p></li><li><p>
          Removed unused <code class="literal">ObjectToString</code> method from
          <code class="filename">MySQLParameter.cs</code>.
        </p></li><li><p>
          Fixed <code class="function">Add(..)</code> method in
          <code class="literal">ParameterCollection</code> so that it doesn't use
          <code class="function">Add(name, value)</code> instead.
        </p></li><li><p>
          Fixed <code class="literal">IndexOf</code> and
          <code class="literal">Contains</code> in
          <code class="literal">ParameterCollection</code> to be aware that
          parameter names are now stored without @.
        </p></li><li><p>
          Fixed <code class="literal">Command.ConvertSQLToBytes</code> so it only
          permits characters that can be in MySQL variable names.
        </p></li><li><p>
          Fixed <code class="literal">DataReader</code> and
          <code class="literal">Field</code> so that blob fields read their data
          from <code class="filename">Field.cs</code> and
          <code class="literal">GetBytes</code> works right.
        </p></li><li><p>
          Added simple query builder editor to
          <code class="literal">CommandText</code> property of
          <code class="literal">MySQLCommand</code>.
        </p></li><li><p>
          Fixed <code class="literal">CommandBuilder</code> and
          <code class="literal">Parameter</code> serialization to account for
          Parameters not storing @ in their names.
        </p></li><li><p>
          Removed <code class="literal">MySQLFieldType</code> enum from Field.cs.
          Now using <code class="literal">MySQLDbType</code> enum.
        </p></li><li><p>
          Added <code class="literal">Designer</code> attribute to several classes
          to prevent designer view when using VS.Net.
        </p></li><li><p>
          Fixed Initial catalog typo in
          <code class="literal">ConnectionString</code> designer.
        </p></li><li><p>
          Removed 3 parameter constructor for
          <code class="literal">MySQLParameter</code> that conflicted with (name,
          type, value).
        </p></li><li><p>
          Changed <code class="literal">MySQLParameter</code> so
          <code class="literal">paramName</code> is now stored without leading @
          (this fixed null inserts when using designer).
        </p></li><li><p>
          Changed <code class="literal">TypeConverter</code> for
          <code class="literal">MySQLParameter</code> to use the constructor with
          all properties.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-68"></a>D.3.18. Changes in MySQL Connector/Net Version 0.68</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed sequence issue in driver.
        </p></li><li><p>
          Added <code class="literal">DbParametersEditor</code> to make parameter
          editing more like <code class="literal">SqlClient</code>.
        </p></li><li><p>
          Fixed <code class="literal">Command</code> class so that parameters can
          be edited using the designer
        </p></li><li><p>
          Update connection string designer to support <code class="literal">Use
          Compression</code> flag.
        </p></li><li><p>
          Fixed string encoding so that European characters will work
          correctly.
        </p></li><li><p>
          Creating base classes to aid in building new data providers.
        </p></li><li><p>
          Added support for UID key in connection string.
        </p></li><li><p>
          Field, parameter, command now using DBNull.Value instead of
          null.
        </p></li><li><p>
          <code class="literal">CommandBuilder</code> using
          <code class="literal">DBNull.Value</code>.
        </p></li><li><p>
          <code class="literal">CommandBuilder</code> now builds insert command
          correctly when an auto_insert field is not present.
        </p></li><li><p>
          Field now uses typeof keyword to return
          <code class="literal">System.Types</code> (performance).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-65"></a>D.3.19. Changes in MySQL Connector/Net Version 0.65</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">MySQLCommandBuilder</code> now implemented.
        </p></li><li><p>
          Transaction support now implemented (not all table types
          support this).
        </p></li><li><p>
          <code class="literal">GetSchemaTable</code> fixed to not use xsd (for
          Mono).
        </p></li><li><p>
          Driver is now Mono-compatible.
        </p></li><li><p>
          TIME data type now supported.
        </p></li><li><p>
          More work to improve Timestamp data type handling.
        </p></li><li><p>
          Changed signatures of all classes to match corresponding
          <code class="literal">SqlClient</code> classes.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-60"></a>D.3.20. Changes in MySQL Connector/Net Version 0.60</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Protocol compression using SharpZipLib (www.icsharpcode.net).
        </p></li><li><p>
          Named pipes on Windows now working properly.
        </p></li><li><p>
          Work done to improve <code class="literal">Timestamp</code> data type
          handling.
        </p></li><li><p>
          Implemented <code class="literal">IEnumerable</code> on
          <code class="literal">DataReader</code> so <code class="literal">DataGrid</code>
          would work.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-50"></a>D.3.21. Changes in MySQL Connector/Net Version 0.50</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Speed increased dramatically by removing bugging network sync
          code.
        </p></li><li><p>
          Driver no longer buffers rows of data (more ADO.Net
          compliant).
        </p></li><li><p>
          Conversion bugs related to
          <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> and
          <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> fields fixed.
        </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vstudio-plugin-news"></a>D.4. MySQL Visual Studio Plugin Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-3">D.4.1. Changes in MySQL Visual Studio Plugin 1.0.3 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-2">D.4.2. Changes in MySQL Visual Studio Plugin 1.0.2 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-1">D.4.3. Changes in MySQL Visual Studio Plugin 1.0.1 (04 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-0">D.4.4. Changes in MySQL Visual Studio Plugin 1.0.0 (04 October 2006)</a></span></dt></dl></div><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
      As of Connector/Net 5.1.2 (14 June 2007), the Visual Studion
      Plugin is part of the main Connector/Net package. For the change
      history for the Visual Studio Plugin, see
      <a href="news.html#connector-net-news" title="D.3. MySQL Connector/Net Change History">Section D.3, “MySQL Connector/Net Change History”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-3"></a>D.4.1. Changes in MySQL Visual Studio Plugin 1.0.3 (Not yet released)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Running queries based on a stored procedure would cause the data
        set designer to terminate. (Bugs #26364)
      </p></li><li><p>
        DataSet wizard would show all tables instead of only the tables
        available within the selected database. (Bugs #26348)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-2"></a>D.4.2. Changes in MySQL Visual Studio Plugin 1.0.2 (Not yet released)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The Add Connection dialog of the Server Explorer would freeze
        when accessing databases with capitalized characters in their
        name.
       (Bug #24875)</p></li><li><p>
        Creating a connection through the Server Explorer when using the
        Visual Studio Plugin would fail. The installer for the Visual
        Studio Plugin has been updated to ensure that Connector/Net
        5.0.2 must be installed.
       (Bug #23071)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-1"></a>D.4.3. Changes in MySQL Visual Studio Plugin 1.0.1 (04 October 2006)</h3></div></div></div><p>
        This is a bug fix release to resolve an incompatibility issue
        with Connector/Net 5.0.1.
      </p><p>
        It is critical that this release only be used with Connector/Net
        5.0.1. After installing Connector/Net 5.0.1, you will need to
        make a small change in your machine.config file. This file
        should be located at
        <code class="filename">%win%\Microsoft.Net\Framework\v2.0.50727\CONFIG\machine.config</code>
        (<code class="literal">%win%</code> should be the location of your Windows
        folder). Near the bottom of the file you will see a line like
        this:
      </p><pre class="programlisting">&lt;add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
description=".Net Framework Data Provider for MySQL"
type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data"/&gt;</pre><p>
        It needs to be changed to be like this:
      </p><pre class="programlisting">&lt;add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
description=".Net Framework Data Provider for MySQL"
type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data,
Version=5.0.1.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/&gt;</pre><p>This section has no changelog entries.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-0"></a>D.4.4. Changes in MySQL Visual Studio Plugin 1.0.0 (04 October 2006)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Ability to work with MySQL objects (tables, views, stored
        procedures, etc) from within Server Explorer.
      </p></li><li><p>
        DDEX (Data Designer Extensibility) compatibility.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cj-news"></a>D.5. MySQL Connector/J Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-5-1-x">D.5.1. Changes in MySQL Connector/J 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-x">D.5.2. Changes in MySQL Connector/J 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-x">D.5.3. Changes in MySQL Connector/J 3.1.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-x">D.5.4. Changes in MySQL Connector/J 3.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-x">D.5.5. Changes in MySQL Connector/J 2.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-2-x">D.5.6. Changes in MySQL Connector/J 1.2.x and lower</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-5-1-x"></a>D.5.1. Changes in MySQL Connector/J 5.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-5-1-18">D.5.1.1. Changes in MySQL Connector/J 5.1.18 (04 October 2011)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-17">D.5.1.2. Changes in MySQL Connector/J 5.1.17 (07 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-16">D.5.1.3. Changes in MySQL Connector/J 5.1.16 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-15">D.5.1.4. Changes in MySQL Connector/J 5.1.15 (09 February 2011)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-14">D.5.1.5. Changes in MySQL Connector/J 5.1.14 (6th December 2010)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-13">D.5.1.6. Changes in MySQL Connector/J 5.1.13 (24 June 2010)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-12">D.5.1.7. Changes in MySQL Connector/J 5.1.12 (18 February 2010)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-11">D.5.1.8. Changes in MySQL Connector/J 5.1.11 (21 January 2010)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-10">D.5.1.9. Changes in MySQL Connector/J 5.1.10 (23 September 2009)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-9">D.5.1.10. Changes in MySQL Connector/J 5.1.9 (21 September 2009)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-8">D.5.1.11. Changes in MySQL Connector/J 5.1.8 (16 July 2009)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-7">D.5.1.12. Changes in MySQL Connector/J 5.1.7 (21 October 2008)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-6">D.5.1.13. Changes in MySQL Connector/J 5.1.6 (07 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-5">D.5.1.14. Changes in MySQL Connector/J 5.1.5 (09 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-4">D.5.1.15. Changes in MySQL Connector/J 5.1.4 (Not Released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-3">D.5.1.16. Changes in MySQL Connector/J 5.1.3 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-2">D.5.1.17. Changes in MySQL Connector/J 5.1.2 (29 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-1">D.5.1.18. Changes in MySQL Connector/J 5.1.1 (22 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-0">D.5.1.19. Changes in MySQL Connector/J 5.1.0 (11 April 2007)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-18"></a>D.5.1.1. Changes in MySQL Connector/J 5.1.18 (04 October 2011)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.17.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added the function
        <code class="literal">MYSQL_INDEX_TO_MYSQL_CHARSET</code> to retrieve the
        server charset name, using an index instead of parsing variables
        to <code class="literal">CharsetMapping.java</code>
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">LRUCache</code> implementation removed the
        eldest entry, rather than the least-recently accessed.
       (Bug #13036537)</p></li><li><p>
        Changed <code class="literal">cacheCallableStatements</code> to
        <code class="literal">cacheCallableStmts</code> in
        <code class="literal">maxPerformance.properties</code>, to allow proper
        caching.
       (Bug #13036309)</p></li><li><p>
        Added a new <code class="literal">ant</code> flag,
        <code class="literal">com.mysql.jdbc.junit.fork</code>, which controls
        whether <code class="literal">JUnit</code> will fork new processes.
      </p><p>
        The value <code class="literal">on</code>: The default, and legacy
        behavior. Or <code class="literal">off</code>): Required for Windows, as
        otherwise <code class="literal">process fork failure</code> errors will
        result while running the test suite via <code class="literal">ant</code>
        on Windows.
       (Bug #12784170)</p></li><li><p>
        Not putting a space between
        <a href="functions.html#function_values"><code class="literal">VALUES()</code></a> and
        <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">ON
        DUPLICATE KEY UPDATE</code></a> causes connector/J to both (A)
        Rewrite the query, although it includes an <code class="literal">ON
        UPDATE</code> statment and (B) To generate the wrong query
        with multiple
        <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">ON
        DUPLICATE KEY</code></a> statements.
       (Bug #12565726)</p></li><li><p>
        The <code class="literal">loadBalanceBlacklistTimeout</code> option was
        not functioning properly. Working connections were not being
        removed from the blacklist.
       (Bug #63135)</p></li><li><p>
        The "old" warnings were returned when
        <code class="literal">Statement.getWarnings()</code> was called after
        <code class="literal">Statement.clearWarnings()</code>.
       (Bug #61866, Bug #12791594)</p></li><li><p>
        Connector/J now guards against the condition where a call to
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL QUERY</code></a> will
        kill the next query issued by the server, if no query is in
        process.
       (Bug #61501)</p></li><li><p>
        Calling <code class="literal">Statement.cancel()</code> on a statement
        that isn't currently executing, will cause a later-executed
        query on the same connection to be unexpectedly canceled. The
        driver now guards against this condition, but it is an
        underlying server issue. The MySQL statement
        <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL QUERY</code></a>
        (which is what the driver uses to implement
        <code class="literal">Statement.cancel()</code>) is rather
        non-deterministic, and thus the use of
        <code class="literal">Statement.cancel()</code> should be avoided if
        possible.
       (Bug #61501)</p></li><li><p>
        A connection could not be established when the
        <span class="acronym">URL</span>
        contained both <code class="literal">sessionVariables</code> and
        <code class="literal">characterEncoding</code>.
       (Bug #61201, Bug #12649557)</p></li><li><p>
        Reverting changes made to
        <code class="literal">ConnectionImpl.java</code>, the <code class="literal">private
        boolean characterSetNamesMatches</code> function.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-17"></a>D.5.1.2. Changes in MySQL Connector/J 5.1.17 (07 July 2011)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.16.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> was not optimized in then
        server when run against <code class="literal">INFORMATION_SCHEMA</code>
        tables and no wildcards were used. Databases/tables with
        <code class="literal">'_'</code> or <code class="literal">'%'</code> in their names
        (escaped or not) are handled by this code path, although slower,
        since it is rare to find these characters in table names in SQL.
        If there is a <code class="literal">'_'</code> or <code class="literal">'%'</code>
        in the string, <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> takes care of
        that; otherwise, <code class="literal">'='</code> is now used instead. The
        only exception is the <code class="literal">information_schema</code>
        database, which is handled separately. The patch covers both
        <code class="literal">getTables()</code> and
        <code class="literal">getColumns()</code>.
       (Bug #61332)</p></li><li><p>
        The first call to a stored procedure failed with “<span class="quote">No
        Database Selected</span>”. The workaround introduced in
        <code class="literal">DatabaseMetaData.getCallStmtParameterTypes</code> to
        fix the server bug where <a href="sql-syntax.html#show-create-procedure" title="12.7.5.11. SHOW CREATE PROCEDURE Syntax"><code class="literal">SHOW CREATE
        PROCEDURE</code></a> was not respecting lowercase table names was
        misbehaving when the connection was not attached to a database
        and on case-insensitive operating systems.
       (Bug #61150)</p></li><li><p>
        There was a concurrency bottleneck in Java's character set
        encoding/decoding when converting bytes to/from
        <code class="literal">String</code> values.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p xmlns="">
          No longer use <code class="literal">String.getBytes(...)</code>, or
          <code class="literal">new String(byte[]...)</code>. Use the
          <code class="literal">StringUtils</code> method instead.
        </p></div><p>(Bug #61105)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-16"></a>D.5.1.3. Changes in MySQL Connector/J 5.1.16 (Not released)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.15.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">Connection.isServerLocal()</code> method can now
        determine if a connection is against a server on the same host.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When auto-reconnect was used with
        <code class="literal">cacheServerConfiguration</code>, errors could occur
        when the host changed (in an HA setup, for example).
       (Bug #12325877)</p></li><li><p>
        <code class="literal">DBMD.getTables</code> and
        <code class="literal">getColumns</code> fail with table names that contain
        a dot (like "<code class="literal">junk_[Sp:e,c/ C-h+a=.r]</code>"). The
        workaround is to use
        <code class="literal">useInformationSchema=True</code>.
       (Bug #11782297)</p></li><li><p>
        <code class="literal">ResultSetRow.getTimestampFast</code> and
        <code class="literal">getTime</code> had invalid offsets.
       (Bug #60313)</p></li><li><p>
        Fixed a timestamp offset bug in
        <code class="literal">com.mysql.jdbc.ResultSetRow.getTimestampFast()</code>.
       (Bug #60313, Bug #11890729)</p></li><li><p>
        <code class="literal">wasNull</code> was not set for a
        <code class="literal">DATE</code> field with the value of
        <code class="literal">0000-00-00</code> in <code class="literal">getDate()</code>,
        although <code class="literal">zeroDateTimeBehavior</code> is defined as
        <code class="literal">convertToNull</code>.
       (Bug #57808)</p></li><li><p>
        A bypassing of the server protocol bug, where the DB should be
        null-terminated whether it exists or not. This affects
        <code class="literal">COM_CHANGE_USER</code>.
       (Bug #54425)</p></li><li><p>
        Fixed a bug where Connector/J would kill the matching
        <code class="literal">ConnectionID</code>, but on the wrong server.
       (Bug #54135)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-15"></a>D.5.1.4. Changes in MySQL Connector/J 5.1.15 (09 February 2011)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.14.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Optional logging class
        <code class="literal">com.mysql.jdbc.log.Log4JLogger</code> was not
        included in the source/binary package for 5.1.14.
      </p><p>
        5.1.15 will ship with an SLF4J logger (which can then be plugged
        into Log4J). Unfortunately, it is not possible to ship a direct
        Log4J integration because the GPL is not compatible with Log4J's
        license.
       (Bug #59511, Bug #11766408)</p></li><li><p>
        The hard-coded list of reserved words in Connector/J was not
        updated to reflect the list of reserved words in MySQL Server
        5.5.
       (Bug #59224)</p></li><li><p>
        MySqlProcedure accepted null arguments as parameters, however
        the JDBC meta data did not indicate that.
       (Bug #38367, Bug #11749186)</p></li><li><p>
        Using Connector/J to connect from a z/OS machine to a MySQL
        Server failed when the database name to connect to was included
        in the connection URL. This was because the name was sent in
        z/OS default platform encoding, but the MySQL Server expected
        Latin1.
      </p><p>
        It should be noted that when connecting from systems that do not
        use Latin1 as the default platform encoding, the following
        connection string options can be useful:
        <code class="literal">passwordCharacterEncoding=ASCII</code> and
        <code class="literal">characterEncoding=ASCII</code>.
       (Bug #18086, Bug #11745647)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-14"></a>D.5.1.5. Changes in MySQL Connector/J 5.1.14 (6th December 2010)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.13.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/J's load-balancing functionality only allowed the
        following events to trigger failover:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Transaction commit/rollback
          </p></li><li><p>
            CommunicationExceptions
          </p></li><li><p>
            Matches to user-defined Exceptions using the
            loadBalanceSQLStateFailover,
            loadBalanceSQLExceptionSubclassFailover or
            loadBalanceExceptionChecker property.
          </p></li></ul></div><p>
        This meant that connections where auto-commit was enabled were
        not balanced, except for Exceptions, and this was problematic in
        the case of distribution of read-only work across slaves in a
        replication deployment.
      </p><p>
        The ability to load-balance while auto-commit is enabled has now
        been added to Connector/J. This introduces two new properties:
      </p><div class="orderedlist"><ol type="1"><li><p>
            loadBalanceAutoCommitStatementThreshold - defines the number
            of matching statements which will trigger the driver to
            (potentially) swap physical server connections. The default
            value (0) retains the previously-established behavior that
            connections with auto-commit enabled are never balanced.
          </p></li><li><p>
            loadBalanceAutoCommitStatementRegex - the regular expression
            against which statements must match. The default value
            (blank) matches all statements.
          </p></li></ol></div><p>
        Load-balancing will be done after the statement is executed,
        before control is returned to the application. If rebalancing
        fails, the driver will silently swallow the resulting Exception
        (as the statement itself completed successfully).
       (Bug #55723)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connection failover left slave/secondary in read-only mode.
        Failover attempts between two read-write masters did not
        properly set
        <code class="literal">this.currentConn.setReadOnly(false)</code>.
       (Bug #58706)</p></li><li><p>
        Connector/J mapped both 3-byte and 4-byte UTF8 encodings to the
        same Java UTF8 encoding.
      </p><p>
        To use 3-byte UTF8 with Connector/J set
        <code class="literal">characterEncoding=utf8</code> and set
        <code class="literal">useUnicode=true</code> in the connection string.
      </p><p>
        To use 4-byte UTF8 with Connector/J configure the MySQL server
        with <code class="literal">character_set_server=utf8mb4</code>.
        Connector/J will then use that setting as long as
        <code class="literal">characterEncoding</code> has not been set in the
        connection string. This is equivalent to autodetection of the
        character set.
       (Bug #58232)</p></li><li><p>
        The <code class="literal">CallableStatementRegression</code> test suite
        failed with a Null Pointer Exception because the
        <code class="literal">OUT</code> parameter in the
        <code class="literal">I__S.PARAMETERS</code> table had no name, that is
        <code class="literal">COLUMN_NAME</code> had the value
        <code class="literal">NULL</code>.
       (Bug #58232)</p></li><li><p>
        <code class="literal">DatabaseMetaData.supportsMultipleResultSets()</code>
        was hard-coded to return <code class="literal">false</code>, even though
        Connector/J supports multiple result sets.
       (Bug #57380)</p></li><li><p>
        Using the <code class="literal">useOldUTF8Behavior</code> parameter failed
        to set the connection character set to <code class="literal">latin1</code>
        as required.
      </p><p>
        In versions prior to 5.1.3, the handshake was done using
        <code class="literal">latin1</code>, and while there was logic in place to
        explicitly set the character set after the handshake was
        complete, this was bypassed when
        <code class="literal">useOldUTF8Behavior</code> was true. This was not a
        problem until 5.1.3, when the handshake was modified to use
        <code class="literal">utf8</code>, but the logic continued to allow the
        character set configured during that handshake process to be
        retained for later use. As a result,
        <code class="literal">useOldUTF8Behavior</code> effectively failed.
       (Bug #57262)</p></li><li><p>
        Invoking a stored procedure containing output parameters by its
        full name, where the procedure was located in another database,
        generated the following exception:
      </p><pre class="programlisting">Parameter index of 1 is out of range (1, 0)</pre><p>(Bug #57022)</p></li><li><p>
        When a JDBC client disconnected from a remote server using
        <code class="literal">Connection.close()</code>, the TCP connection
        remained in the <code class="literal">TIME_WAIT</code> state on the server
        side, rather than on the client side.
       (Bug #56979)</p></li><li><p>
        Leaving Trust/ClientCertStoreType properties unset caused an
        exception to be thrown when connecting with
        <code class="literal">useSSL=true</code>, as no default was used.
       (Bug #56955)</p></li><li><p>
        When load-balanced connections swap servers, certain session
        state was copied from the previously active connection to the
        newly-selected connection. State synchronized included:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Auto-commit state
          </p></li><li><p>
            Transaction isolation state
          </p></li><li><p>
            Current schema/catalog
          </p></li></ul></div><p>
        However, the read-only state was not synchronized, which caused
        problems if a write was attempted on a read-only connection.
       (Bug #56706)</p></li><li><p>
        When using Connector/J configured for failover
        (jdbc:mysql://host1,host2,... URLs), the non-primary servers
        re-balanced when the transactions on the master were committed
        or rolled-back.
       (Bug #56429)</p></li><li><p>
        An unhandled Null Pointer Exception (NPE) was generated in
        <code class="literal">DatabaseMetaData.java</code> when calling an
        incorrectly cased function name where no permission to access
        <code class="literal">mysql.proc</code> was available.
      </p><p>
        In addition to catching potential NPEs, a guard against calling
        JDBC functions with <code class="literal">db_name.proc_name</code>
        notation was also added.
       (Bug #56305)</p></li><li><p>
        Added diagnostic information to <code class="literal">SQLException</code>
        messages that are caused by usage of a closed load-balanced
        connection, to help clarify the root cause of a connection
        closure.
       (Bug #56200)</p></li><li><p>
        Attempting to use JDBC4 functions on
        <code class="literal">Connection</code> objects resulted in errors being
        generated:
      </p><pre class="programlisting">Exception in thread "main" java.lang.AbstractMethodError:
com.mysql.jdbc.LoadBalancedMySQLConnection.createBlob()Ljava/sql/Blob;
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
   at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:597)
   at
com.mysql.jdbc.LoadBalancingConnectionProxy.invoke(LoadBalancingConnectionProxy.java:476)
   at $Proxy0.createBlob(Unknown Source)</pre><p>(Bug #56099)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-13"></a>D.5.1.6. Changes in MySQL Connector/J 5.1.13 (24 June 2010)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.12.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/J did not support <code class="literal">utf8mb4</code> for
        servers 5.5.2 and newer.
      </p><p>
        Connector/J now auto-detects servers configured with
        <code class="literal">character_set_server=utf8mb4</code> or treats the
        Java encoding <code class="literal">utf-8</code> passed using
        <code class="literal">characterEncoding=...</code> as
        <code class="literal">utf8mb4</code> in the <code class="literal">SET NAMES=</code>
        calls it makes when establishing the connection.
       (Bug #54175)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The method <code class="literal">unSafeStatementInterceptors()</code>
        contained an erroneous line of code, which resulted in the
        interceptor being called, but the result being thrown away.
       (Bug #53041)</p></li><li><p>
        There was a performance regression of roughly 25% between r906
        and r907, which appeared to be caused by pushing the Proxy down
        to the I/O layer.
       (Bug #52534)</p></li><li><p>
        Logic in implementations of
        <code class="literal">LoadBalancingConnectionProxy</code> and
        <code class="literal">LoadBalanceStrategy</code> behaved differently as to
        which <code class="literal">SQLException</code>s trigger failover to a new
        host. The former looked at the first two characters of the
        SQLState:
      </p><pre class="programlisting">if (sqlState.startsWith("08"))
...</pre><p>
        The latter used a different test:
      </p><pre class="programlisting">if (sqlEx instanceof CommunicationsException
  || "08S01".equals(sqlEx.getSQLState())) {
...</pre><p>
        This meant it was possible for a new
        <code class="literal">Connection</code> object to throw an
        <code class="literal">Exception</code> when the first selected host was
        unavailable. This happened because
        <code class="literal">MySqlIO.createNewIO()</code> could throw an
        <code class="literal">SQLException</code> with a
        <code class="literal">SQLState</code> of “<span class="quote">08001</span>”, which did
        not trigger the “<span class="quote">try another host</span>” logic in the
        <code class="literal">LoadBalanceStrategy</code> implementations, so an
        <code class="literal">Exception</code> was thrown after having only
        attempted connecting to a single host.
       (Bug #52231)</p></li><li><p>
        In the file <code class="filename">DatabaseMetadata.java</code>, the
        function <code class="literal">private void
        getCallStmtParameterTypes</code> failed if the parameter was
        defined over more than one line by using the '\n' character.
       (Bug #52167)</p></li><li><p>
        The catalog parameter, <code class="literal">PARAM_CAT</code>, was not
        correctly processed when calling for metadata with
        <code class="literal">getMetaData()</code> on stored procedures. This was
        because <code class="literal">PARAM_CAT</code> was hardcoded in the code
        to <code class="literal">NULL</code>. In the case where
        <code class="literal">nullcatalogmeanscurrent</code> was
        <code class="literal">true</code>, which is its default value, a crash did
        not occur, but the metadata returned was for the stored
        procedures from the catalog currently attached to. If, however,
        <code class="literal">nullcatalogmeanscurrent</code> was set to
        <code class="literal">false</code> then a crash resulted.
      </p><p>
        Connector/J has been changed so that when
        <code class="literal">NULL</code> is passed as
        <code class="literal">PARAM_CAT</code> it will not crash when
        <code class="literal">nullcatalogmeanscurrent</code> is
        <code class="literal">false</code>, but rather iterate all catalogs in
        search of stored procedures. This means that
        <code class="literal">PARAM_CAT</code> is no longer hardcoded to
        <code class="literal">NULL</code> (see Bug #51904).
       (Bug #51912)</p></li><li><p>
        A load balanced <code class="literal">Connection</code> object with
        multiple open underlying physical connections rebalanced on
        <code class="literal">commit()</code>, <code class="literal">rollback()</code>, or
        on a communication exception, without validating the existing
        connection. This caused a problem when there was no pinging of
        the physical connections, using queries starting with “<span class="quote">/*
        ping */</span>”, to ensure they remained active. This meant that
        calls to <code class="literal">Connection.commit()</code> could throw a
        <code class="literal">SQLException</code>. This did not occur when the
        transaction was actually committed; it occurred when the new
        connection was chosen and the driver attempted to set the
        auto-commit or transaction isolation state on the newly chosen
        physical connection.
       (Bug #51783)</p></li><li><p>
        The <code class="literal">rollback()</code> method could fail to rethrow a
        <code class="literal">SQLException</code> if the server became unavailable
        during a rollback. The errant code only rethrew when
        <code class="literal">ignoreNonTxTables</code> was true and the exception
        did not have the error code 1196,
        <code class="literal">SQLError.ER_WARNING_NOT_COMPLETE_ROLLBACK</code>.
       (Bug #51776)</p></li><li><p>
        When the <code class="literal">allowMultiQueries</code> connection string
        option was set to <code class="literal">true</code>, a call to
        <code class="literal">Statement.executeBatch()</code> scanned the query
        for escape codes, even though
        <code class="literal">setEscapeProcessing(false)</code> had been called
        previously.
       (Bug #51704)</p></li><li><p>
        When a <code class="literal">StatementInterceptor</code> was used and an
        alternate <code class="literal">ResultSet</code> was returned from
        <code class="literal">preProcess()</code>, the original statement was
        still executed.
       (Bug #51666)</p></li><li><p>
        Objects created by <code class="literal">ConnectionImpl</code>, such as
        prepared statements, hold a reference to the
        <code class="literal">ConnectionImpl</code> that created them. However,
        when the load balancer picked a new connection, it did not
        update the reference contained in, for example, the
        <code class="literal">PreparedStatement</code>. This resulted in inserts
        and updates being directed to invalid connections, while commits
        were directed to the new connection. This resulted in silent
        data loss.
       (Bug #51643)</p></li><li><p>
        <code class="literal">jdbc:mysql:loadbalance://</code> would connect to
        the same host, even though
        <code class="literal">loadBalanceStrategy</code> was set to a value of
        <code class="literal">random</code>, and multiple hosts were specified.
       (Bug #51266)</p></li><li><p>
        An unexpected exception when trying to register
        <code class="literal">OUT</code> parameters in
        <code class="literal">CallableStatement</code>.
      </p><p>
        Sometimes Connector/J was not able to register
        <code class="literal">OUT</code> parameters for
        <code class="literal">CallableStatements</code>.
       (Bug #43576)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-12"></a>D.5.1.7. Changes in MySQL Connector/J 5.1.12 (18 February 2010)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.11.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The catalog parameter was ignored in the
        <code class="literal">DatabaseMetaData.getProcedure()</code> method. It
        returned all procedures in all databases.
       (Bug #51022)</p></li><li><p>
        A call to <code class="literal">DatabaseMetaData.getDriverVersion()</code>
        returned the revision as <code class="literal">mysql-connector-java-5.1.11 (
        Revision: ${svn.Revision} )</code>. The variable
        <code class="literal">${svn.Revision}</code> was not replaced by the SVN
        revision number.
       (Bug #50288)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-11"></a>D.5.1.8. Changes in MySQL Connector/J 5.1.11 (21 January 2010)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.10.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Replication connections, those with URLs that start with
        jdbc:mysql:replication, now use a jdbc:mysql:loadbalance
        connection for the slave pool. This means that it is possible to
        set load balancing properties such as
        <code class="literal">loadBalanceBlacklistTimeout</code> and
        <code class="literal">loadBalanceStrategy</code> to choose a mechanism for
        balancing the load, and failover or fault tolerance strategy for
        the slave pool.
       (Bug #49537)</p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">NullPointerException</code> sometimes occurred in
        <code class="literal">invalidateCurrentConnection()</code> for
        load-balanced connections.
       (Bug #50288)</p></li><li><p>
        The <code class="literal">deleteRow</code> method caused a full table
        scan, when using an updatable cursor and a multibyte character
        set.
       (Bug #49745)</p></li><li><p>
        For pooled connections, Connector/J did not process the session
        variable <code class="literal">time_zone</code> when set using the URL,
        resulting in incorrect timestamp values being stored.
       (Bug #49700)</p></li><li><p>
        The <code class="literal">ExceptionInterceptor</code> class did not
        provide a <code class="literal">Connection</code> context.
       (Bug #49607)</p></li><li><p>
        Ping left closed connections in the liveConnections map, causing
        subsequent Exceptions when that connection was used.
       (Bug #48605)</p></li><li><p>
        Using <code class="literal">MysqlConnectionPoolDataSource</code> with a
        load-balanced URL generated exceptions of type
        <code class="literal">ClassCastException</code>:
      </p><pre class="programlisting">ClassCastException in MysqlConnectionPoolDataSource
Caused by: java.lang.ClassCastException: $Proxy0
   at
com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource.getPooledConnection(MysqlConne
ctionPoolDataSource.java:80)</pre><pre class="programlisting">java.lang.ClassCastException: $Proxy2
 at com.mysql.jdbc.jdbc2.optional.StatementWrapper.executeQuery(StatementWrapper.java:744)</pre><p>(Bug #48486)</p></li><li><p>
        The implementation for load-balanced
        <code class="literal">Connection</code> used a proxy, which delegated
        method calls, including <code class="literal">equals()</code> and
        <code class="literal">hashCode()</code>, to underlying
        <code class="literal">Connection</code> objects. This meant that
        successive calls to <code class="literal">hashCode()</code> on the same
        object potentially returned different values, if the proxy state
        had changed such that it was utilizing a different underlying
        connection.
       (Bug #48442)</p></li><li><p>
        The batch rewrite functionality attempted to identify the start
        of the <code class="literal">VALUES</code> list by looking for
        “<span class="quote">VALUES </span>” (with trailing space). However, valid
        MySQL syntax permits <code class="literal">VALUES</code> to be followed by
        whitespace or an opening parenthesis:
      </p><pre class="programlisting">INSERT INTO tbl VALUES
(1);

INSERT INTO tbl VALUES(1);</pre><p>
        Queries written with the above formats did not therefore gain
        the performance benefits of the batch rewrite.
       (Bug #48172)</p></li><li><p>
        A PermGen memory leaked was caused by the Connector/J statement
        cancellation timer (<code class="literal">java.util.Timer</code>). When
        the application was unloaded the cancellation timer did not
        terminate, preventing the ClassLoader from being garbage
        collected.
       (Bug #36565)</p></li><li><p>
        With the connection string option
        <code class="literal">noDatetimeStringSync</code> set to
        <code class="literal">true</code>, and server-side prepared statements
        enabled, the following exception was generated if an attempt was
        made to obtain, using <code class="literal">ResultSet.getString()</code>,
        a datetime value containing all zero components:
      </p><pre class="programlisting">java.sql.SQLException: Value '0000-00-00' can not be represented as java.sql.Date</pre><p>(Bug #32525)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-10"></a>D.5.1.9. Changes in MySQL Connector/J 5.1.10 (23 September 2009)</h4></div></div></div><p>
        Fixes bugs found since release 5.1.9.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">DriverManager.getConnection()</code> method
        ignored a non-standard port if it was specified in the JDBC
        connection string. Connector/J always used the standard port
        3306 for connection creation. For example, if the string was
        <code class="literal">jdbc:mysql://localhost:6777</code>, Connector/J
        would attempt to connect to port 3306, rather than 6777.
       (Bug #47494)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-9"></a>D.5.1.10. Changes in MySQL Connector/J 5.1.9 (21 September 2009)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        In the class
        <code class="literal">com.mysql.jdbc.jdbc2.optional.SuspendableXAConnection</code>,
        which is used when
        <code class="literal">pinGlobalTxToPhysicalConnection=true</code>, there
        is a static map (XIDS_TO_PHYSICAL_CONNECTIONS) that tracks the
        Xid with the XAConnection, however this map was not populated.
        The effect was that the
        <code class="literal">SuspendableXAConnection</code> was never pinned to
        the real XA connection. Instead it created new connections on
        calls to <code class="literal">start</code>, <code class="literal">end</code>,
        <code class="literal">resume</code>, and <code class="literal">prepare</code>.
       (Bug #46925)</p></li><li><p>
        When using the ON DUPLICATE KEY UPDATE functionality together
        with the rewriteBatchedStatements option set to true, an
        exception was generated when trying to execute the prepared
        statement:
      </p><pre class="programlisting">INSERT INTO config_table (modified,id_) VALUES (?,?) ON DUPLICATE KEY UPDATE modified=?</pre><p>
        The exception generated was:
      </p><pre class="programlisting">java.sql.SQLException: Parameter index out of range (3 &gt; number of parameters, which is
2).
  at com.sag.etl.job.processors.JdbcInsertProcessor.flush(JdbcInsertProcessor.java:135)
......
Caused by: java.sql.SQLException: Parameter index out of range (3 &gt; number of parameters,
which is 2).
  at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
  at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
  at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)
  at com.mysql.jdbc.PreparedStatement.checkBounds(PreparedStatement.java:3657)
  at com.mysql.jdbc.PreparedStatement.setInternal(PreparedStatement.java:3641)
  at
com.mysql.jdbc.PreparedStatement.setBytesNoEscapeNoQuotes(PreparedStatement.java:3391)
  at
com.mysql.jdbc.PreparedStatement.setOneBatchedParameterSet(PreparedStatement.java:4203)
  at com.mysql.jdbc.PreparedStatement.executeBatchedInserts(PreparedStatement.java:1759)
  at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1441)
  at com.sag.etl.job.processors.JdbcInsertProcessor.flush(JdbcInsertProcessor.java:131)
  ... 16 more</pre><p>(Bug #46788)</p></li><li><p>
        When Connector/J encountered an error condition that caused it
        to create a <code class="literal">CommunicationsException</code>, it tried
        to build a friendly error message that helped diagnose what was
        wrong. However, if there had been no network packets received
        from the server, the error message contained the following
        incorrect text:
      </p><pre class="programlisting">The last packet successfully received from the server was 1,249,932,468,916 milliseconds
ago.  The last packet sent successfully to the server was 0 milliseconds ago.</pre><p>(Bug #46637)</p></li><li><p>
        The <code class="literal">getSuperTypes</code> method returned a result
        set with incorrect names for the first two columns. The name of
        the first column in the result set was expected to be
        <code class="literal">TYPE_CAT</code> and that of the second column
        <code class="literal">TYPE_SCHEM</code>. The method however returned the
        names as <code class="literal">TABLE_CAT</code> and
        <code class="literal">TABLE_SCHEM</code> for first and second column
        respectively.
       (Bug #44508)</p></li><li><p>
        SQLException for data truncation error gave the error code as 0
        instead of 1265.
       (Bug #44324)</p></li><li><p>
        Calling <code class="literal">ResultSet.deleteRow()</code> on a table with
        a primary key of type <code class="literal">BINARY(8)</code> silently
        failed to delete the row, but only in some repeatable cases. The
        generated <code class="literal">DELETE</code> statement generated
        corrupted part of the primary key data. Specifically, one of the
        bytes was changed from 0x90 to 0x9D, although the corruption
        appeared to be different depending on whether the application
        was run on Windows or Linux.
       (Bug #43759)</p></li><li><p>
        Accessing result set columns by name after the result set had
        been closed resulted in a NullPointerException instead of a
        SQLException.
       (Bug #41484)</p></li><li><p>
        <code class="literal">QueryTimeout</code> did not work for batch
        statements waiting on a locked table.
      </p><p>
        When a batch statement was issued to the server and was forced
        to wait because of a locked table, Connector/J only terminated
        the first statement in the batch when the timeout was exceeded,
        leaving the rest hanging.
       (Bug #34555)</p></li><li><p>
        The <code class="literal">parseURL</code> method in class
        <code class="literal">com.mysql.jdbc.Driver</code> did not work as
        expected. When given a URL such as
        “<span class="quote">jdbc:mysql://www.mysql.com:12345/my_database</span>” to
        parse, the property <code class="literal">PORT_PROPERTY_KEY</code> was
        found to be <code class="literal">null</code> and the
        <code class="literal">HOST_PROPERTY_KEY</code> property was found to be
        “<span class="quote">www.mysql.com:12345</span>”.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          Connector/J has been fixed so that it will now always fill in
          the <code class="literal">PORT</code> property (using 3306 if not
          specified), and the <code class="literal">HOST</code> property (using
          <code class="literal">localhost</code> if not specified) when
          <code class="literal">parseURL()</code> is called. The driver also
          parses a list of hosts into <code class="literal">HOST.n</code> and
          <code class="literal">PORT.n</code> properties as well as adding a
          property <code class="literal">NUM_HOSTS</code> for the number of hosts
          it has found. If a list of hosts is passed to the driver,
          <code class="literal">HOST</code> and <code class="literal">PORT</code> will be
          set to the values given by <code class="literal">HOST.1</code> and
          <code class="literal">PORT.1</code> respectively. This change has
          centralized and cleaned up a large section of code used to
          generate lists of hosts, both for load-balanced and fault
          tolerant connections and their tests.
        </p></div><p>(Bug #32216)</p></li><li><p>
        Attempting to delete rows using
        <code class="literal">ResultSet.deleteRow()</code> did not delete rows
        correctly.
       (Bug #27431)</p></li><li><p>
        The <code class="literal">setDate</code> method silently ignored the
        Calendar parameter. The code was implemented as follows:
      </p><pre class="programlisting">public void setDate(int parameterIndex, java.sql.Date x, Calendar cal) throws SQLException {
   setDate(parameterIndex, x);
}        
      </pre><p>
        From reviewing the code it was apparent that the Calendar
        parameter <code class="literal">cal</code> was ignored.
       (Bug #23584)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-8"></a>D.5.1.11. Changes in MySQL Connector/J 5.1.8 (16 July 2009)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The reported milliseconds since the last server packets were
        received/sent was incorrect by a factor of 1000. For example,
        the following method call:
      </p><pre class="programlisting">SQLError.createLinkFailureMessageBasedOnHeuristics(
(ConnectionImpl) this.conn, 
System.currentTimeMillis() - 1000,
System.currentTimeMillis() - 2000,
e, 
false);</pre><p>
        returned the following string:
      </p><pre class="programlisting">The last packet successfully received from the server 
was 2 milliseconds ago. The last packet sent successfully to the 
server was 1 milliseconds ago.</pre><p>(Bug #45419)</p></li><li><p>
        Calling <code class="literal">Connection.serverPrepareStatement()</code>
        variants that do not take result set type or concurrency
        arguments returned statements that produced result sets with
        incorrect defaults, namely
        <code class="literal">TYPE_SCROLL_SENSITIVE</code>.
       (Bug #45171)</p></li><li><p>
        The result set returned by <code class="literal">getIndexInfo()</code> did
        not have the format defined in the JDBC API specifications. The
        fourth column, <code class="literal">DATA_TYPE</code>, of the result set
        should be of type <code class="literal">BOOLEAN</code>. Connector/J
        however returns <code class="literal">CHAR</code>.
       (Bug #44869)</p></li><li><p>
        The result set returned by <code class="literal">getTypeInfo()</code> did
        not have the format defined in the JDBC API specifications. The
        second column, <code class="literal">DATA_TYPE</code>, of the result set
        should be of type <code class="literal">INTEGER</code>. Connector/J
        however returns <code class="literal">SMALLINT</code>.
       (Bug #44868)</p></li><li><p>
        The <code class="literal">DEFERRABILITY</code> column in database metadata
        result sets was expected to be of type <code class="literal">SHORT</code>.
        However, Connector/J returned it as <code class="literal">INTEGER</code>.
      </p><p>
        This affected the following methods:
        <code class="literal">getImportedKeys()</code>,
        <code class="literal">getExportedKeys()</code>,
        <code class="literal">getCrossReference()</code>.
       (Bug #44867)</p></li><li><p>
        The result set returned by <code class="literal">getColumns()</code> did
        not have the format defined in the JDBC API specifications. The
        fifth column, <code class="literal">DATA_TYPE</code>, of the result set
        should be of type <code class="literal">INTEGER</code>. Connector/J
        however returns <code class="literal">SMALLINT</code>.
       (Bug #44865)</p></li><li><p>
        The result set returned by
        <code class="literal">getVersionColumns()</code> did not have the format
        defined in the JDBC API specifications. The third column,
        <code class="literal">DATA_TYPE</code>, of the result set should be of
        type <code class="literal">INTEGER</code>. Connector/J however returns
        <code class="literal">SMALLINT</code>.
       (Bug #44863)</p></li><li><p>
        The result set returned by
        <code class="literal">getBestRowIdentifier()</code> did not have the
        format defined in the JDBC API specifications. The third column,
        <code class="literal">DATA_TYPE</code>, of the result set should be of
        type <code class="literal">INTEGER</code>. Connector/J however returns
        <code class="literal">SMALLINT</code>.
       (Bug #44862)</p></li><li><p>
        Connector/J contains logic to generate a message text
        specifically for streaming result sets when there are
        <code class="literal">CommunicationsException</code> exceptions generated.
        However, this code was never reached.
      </p><p>
        In the <code class="literal">CommunicationsException</code> code:
      </p><pre class="programlisting">private boolean streamingResultSetInPlay = false;

public CommunicationsException(ConnectionImpl conn, long lastPacketSentTimeMs,
long lastPacketReceivedTimeMs, Exception underlyingException) {

this.exceptionMessage = SQLError.createLinkFailureMessageBasedOnHeuristics(conn,
      lastPacketSentTimeMs, lastPacketReceivedTimeMs, underlyingException,
      this.streamingResultSetInPlay);</pre><p>
        <code class="literal">streamingResultSetInPlay</code> was always false,
        which in the following code in
        <code class="literal">SQLError.createLinkFailureMessageBasedOnHeuristics()</code>
        never being executed:
      </p><pre class="programlisting">if (streamingResultSetInPlay) {
    exceptionMessageBuf.append(
    Messages.getString("CommunicationsException.ClientWasStreaming")); //$NON-NLS-1$
} else {
...</pre><p>(Bug #44588)</p></li><li><p>
        The
        <code class="literal">SQLError.createLinkFailureMessageBasedOnHeuristics()</code>
        method created a message text for communication link failures.
        When certain conditions were met, this message included both
        “<span class="quote">last packet sent</span>” and “<span class="quote">last packet
        received</span>” information, but when those conditions were not
        met, only “<span class="quote">last packet sent</span>” information was
        provided.
      </p><p>
        Information about when the last packet was successfully received
        should be provided in all cases.
       (Bug #44587)</p></li><li><p>
        <code class="literal">Statement.getGeneratedKeys()</code> retained result
        set instances until the statement was closed. This caused memory
        leaks for long-lived statements, or statements used in tight
        loops.
       (Bug #44056)</p></li><li><p>
        Using <code class="literal">useInformationSchema</code> with
        <code class="literal">DatabaseMetaData.getExportedKeys()</code> generated
        the following exception:
      </p><pre class="programlisting">com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException: Column
'REFERENCED_TABLE_NAME' in where clause is ambiguous
...
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1772)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1923)
at
com.mysql.jdbc.DatabaseMetaDataUsingInfoSchema.executeMetadataQuery(
DatabaseMetaDataUsingInfoSchema.java:50)
at
com.mysql.jdbc.DatabaseMetaDataUsingInfoSchema.getExportedKeys(
DatabaseMetaDataUsingInfoSchema.java:603)</pre><p>(Bug #43714)</p></li><li><p>
        <code class="literal">LoadBalancingConnectionProxy.doPing()</code> did not
        have blacklist awareness.
      </p><p>
        <code class="literal">LoadBalancingConnectionProxy</code> implemented
        <code class="literal">doPing()</code> to ping all underlying connections,
        but it threw any exceptions it encountered during this process.
      </p><p>
        With the global blacklist enabled, it catches these exceptions,
        adds the host to the global blacklist, and only throws an
        exception if all hosts are down.
       (Bug #43421)</p></li><li><p>
        The method <code class="literal">Statement.getGeneratedKeys()</code> did
        not return values for <code class="literal">UNSIGNED BIGINTS</code> with
        values greater than <code class="literal">Long.MAX_VALUE</code>.
      </p><p>
        Unfortunately, because the server does not tell clients what
        TYPE the auto increment value is, the driver cannot consistently
        return BigIntegers for the result set returned from
        <code class="literal">getGeneratedKeys()</code>, it will only return them
        if the value is greater than <code class="literal">Long.MAX_VALUE</code>.
        If your application needs this consistency, it will need to
        check the class of the return value from
        <code class="literal">.getObject()</code> on the ResultSet returned by
        <code class="literal">Statement.getGeneratedKeys()</code> and if it is not
        a BigInteger, create one based on the
        <code class="literal">java.lang.Long</code> that is returned.
       (Bug #43196)</p></li><li><p>
        When the MySQL Server was upgraded from 4.0 to 5.0, the
        Connector/J application then failed to connect to the server.
        This was because authentication failed when the application ran
        from EBCDIC platforms such as z/OS.
       (Bug #43071)</p></li><li><p>
        When connecting with <code class="literal">traceProtocol=true</code>, no
        trace data was generated for the server greeting or login
        request.
       (Bug #43070)</p></li><li><p>
        Connector/J generated an unhandled
        <code class="literal">StringIndexOutOfBoundsException</code>:
      </p><pre class="programlisting">java.lang.StringIndexOutOfBoundsException: String index out of range: -1
at java.lang.String.substring(String.java:1938)
at com.mysql.jdbc.EscapeProcessor.processTimeToken(EscapeProcessor.java:353)
at com.mysql.jdbc.EscapeProcessor.escapeSQL(EscapeProcessor.java:257)
at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1546)
at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1524)</pre><p>(Bug #42253)</p></li><li><p>
        A <code class="literal">ConcurrentModificationException</code> was
        generated in <code class="literal">LoadBalancingConnectionProxy</code>:
      </p><pre class="programlisting">java.util.ConcurrentModificationException
 at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
 at java.util.HashMap$KeyIterator.next(Unknown Source)
 at
com.mysql.jdbc.LoadBalancingConnectionProxy.getGlobalBlacklist(LoadBalancingConnectionProxy.java:520)
 at com.mysql.jdbc.RandomBalanceStrategy.pickConnection(RandomBalanceStrategy.java:55)
 at
com.mysql.jdbc.LoadBalancingConnectionProxy.pickNewConnection(LoadBalancingConnectionProxy.java:414)
 at
com.mysql.jdbc.LoadBalancingConnectionProxy.invoke(LoadBalancingConnectionProxy.java:390)</pre><p>(Bug #42055)</p></li><li><p>
        SQL injection was possible when using a string containing U+00A5
        in a client-side prepared statement, and the character set being
        used was SJIS/Windows-31J.
       (Bug #41730)</p></li><li><p>
        If there was an apostrophe in a comment in a statement that was
        being sent through Connector/J, the apostrophe was still
        recognized as a quote and put the state machine in
        <code class="literal">EscapeTokenizer</code> into the
        <code class="literal">inQuotes</code> state. This led to further parse
        errors.
      </p><p>
        For example, consider the following statement:
      </p><pre class="programlisting">String sql = "-- Customer's zip code will be fixed\n" +
  "update address set zip_code = 99999\n" +
  "where not regexp '^[0-9]{5}([[.-.]])?([0-9]{4})?$'";</pre><p>
        When passed through Connector/J, the
        <code class="literal">EscapeTokenizer</code> did not recognize that the
        first apostrophe was in a comment and thus set
        <code class="literal">inQuotes</code> to true. When that happened, the
        quote count was incorrect and thus the regular expression did
        not appear to be in quotation marks. With the parser not
        detecting that the regular expression was in quotation marks,
        the curly braces were recognized as escape sequences and were
        removed from the regular expression, breaking it. The server
        thus received SQL such as:
      </p><pre class="programlisting">-- Customer's zip code will be fixed
update address set zip_code = '99999'
where not regexp '^[0-9]([[.-.]])?([0-9])?$'</pre><p>(Bug #41566)</p></li><li><p>
        MySQL Connector/J 5.1.7 was slower than previous versions when
        the <code class="literal">rewriteBatchedStatements</code> option was set
        to <code class="literal">true</code>.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          The performance regression in
          <code class="literal">indexOfIgnoreCaseRespectMarker()</code>has been
          fixed. It has also been made possible for the driver to
          rewrite <code class="literal">INSERT</code> statements with <code class="literal">ON
          DUPLICATE KEY UPDATE</code> clauses in them, as long as the
          <code class="literal">UPDATE</code> clause contains no reference to
          <code class="literal">LAST_INSERT_ID()</code>, as that would cause the
          driver to return bogus values for
          <code class="literal">getGeneratedKeys()</code> invocations. This has
          resulted in improved performance over version 5.1.7.
        </p></div><p>(Bug #41532)</p></li><li><p>
        When accessing a result set column by name using
        <code class="literal">ResultSetImpl.findColumn()</code> an exception was
        generated:
      </p><pre class="programlisting">java.lang.NullPointerException
at com.mysql.jdbc.ResultSetImpl.findColumn(ResultSetImpl.java:1103)
at com.mysql.jdbc.ResultSetImpl.getShort(ResultSetImpl.java:5415)
at org.apache.commons.dbcp.DelegatingResultSet.getShort(DelegatingResultSet.java:219)
at com.zimbra.cs.db.DbVolume.constructVolume(DbVolume.java:297)
at com.zimbra.cs.db.DbVolume.get(DbVolume.java:197)
at com.zimbra.cs.db.DbVolume.create(DbVolume.java:95)
at com.zimbra.cs.store.Volume.create(Volume.java:227)
at com.zimbra.cs.store.Volume.create(Volume.java:189)
at com.zimbra.cs.service.admin.CreateVolume.handle(CreateVolume.java:48)
at com.zimbra.soap.SoapEngine.dispatchRequest(SoapEngine.java:428)
at com.zimbra.soap.SoapEngine.dispatch(SoapEngine.java:285)</pre><p>(Bug #41484)</p></li><li><p>
        The <code class="literal">RETURN_GENERATED_KEYS</code> flag was being
        ignored. For example, in the following code the
        <code class="literal">RETURN_GENERATED_KEYS</code> flag was ignored:
      </p><pre class="programlisting">PreparedStatement ps = connection.prepareStatement("INSERT INTO table
  values(?,?)",PreparedStatement.RETURN_GENERATED_KEYS);</pre><p>(Bug #41448)</p></li><li><p>
        When using Connector/J 5.1.7 to connect to MySQL Server 4.1.18
        the following error message was generated:
      </p><pre class="programlisting">Thu Dec 11 17:38:21 PST 2008 WARN: Invalid value {1} for server variable named {0},
falling back to sane default of {2}</pre><p>
        This occurred with MySQL Server version that did not support
        <code class="literal">auto_increment_increment</code>. The error message
        should not have been generated.
       (Bug #41416)</p></li><li><p>
        When <code class="literal">DatabaseMetaData.getProcedureColumns()</code>
        was called, the value for <code class="literal">LENGTH</code> was always
        returned as 65535, regardless of the column type (fixed or
        variable) or the actual length of the column.
      </p><p>
        However, if you obtained the <code class="literal">PRECISION</code> value,
        this was correct for both fixed and variable length columns.
       (Bug #41269)</p></li><li><p>
        <code class="literal">PreparedStatement.addBatch()</code> did not check
        for all parameters being set, which led to inconsistent behavior
        in <code class="literal">executeBatch()</code>, especially when rewriting
        batched statements into multi-value <code class="literal">INSERT</code>s.
       (Bug #41161)</p></li><li><p>
        Error message strings contained variable values that were not
        expanded. For example:
      </p><pre class="programlisting">Mon Nov 17 11:43:18 JST 2008 WARN: Invalid value {1} for server variable named {0},
falling back to sane default of {2}</pre><p>(Bug #40772)</p></li><li><p>
        When using <code class="literal">rewriteBatchedStatements=true</code>
        with:
      </p><pre class="programlisting">INSERT INTO table_name_values (...) VALUES (...)</pre><p>
        Query rewriting failed because “<span class="quote">values</span>” at the end
        of the table name was mistaken for the reserved keyword. The
        error generated was as follows:
      </p><pre class="programlisting">testBug40439(testsuite.simple.TestBug40439)java.sql.BatchUpdateException: You have an
error in your SQL syntax; check the manual that corresponds to your MySQL server version
for the right syntax to use near 'values (2,'toto',2),(id,data, ordr) values
(3,'toto',3),(id,data, ordr) values (' at line 1
at com.mysql.jdbc.PreparedStatement.executeBatchedInserts(PreparedStatement.java:1495)
at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1097)
at testsuite.simple.TestBug40439.testBug40439(TestBug40439.java:42)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at testsuite.simple.TestBug40439.main(TestBug40439.java:57)</pre><p>(Bug #40439)</p></li><li><p>
        A statement interceptor received the incorrect parameters when
        used with a batched statement.
       (Bug #39426)</p></li><li><p>
        Using Connector/J 5.1.6 the method
        <code class="literal">ResultSet.getObject</code> returned a
        <code class="literal">BYTE[]</code> for following:
      </p><pre class="programlisting">SELECT TRIM(rowid) FROM tbl</pre><p>
        Where <code class="literal">rowid</code> had a type of <code class="literal">INT(11)
        PRIMARY KEY AUTO_INCREMENT</code>.
      </p><p>
        The expected return type was one of <code class="literal">CHAR</code>,
        <code class="literal">VARCHAR</code>, <code class="literal">CLOB</code>, however, a
        <code class="literal">BYTE[]</code> was returned.
      </p><p>
        Further, adding
        <code class="literal">functionsNeverReturnBlobs=true</code> to the
        connection string did not have any effect on the return type.
       (Bug #38387)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-7"></a>D.5.1.12. Changes in MySQL Connector/J 5.1.7 (21 October 2008)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When statements include <code class="literal">ON DUPLICATE UPDATE</code>,
        and <code class="literal">rewriteBatchedStatements</code> is set to true,
        batched statements are not rewritten into the form
        <code class="literal">INSERT INTO table VALUES (), (), ()</code>, instead
        the statements are executed sequentially.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">Statement.getGeneratedKeys()</code> returned two
        keys when using <code class="literal">ON DUPLICATE KEY UPDATE</code> and
        the row was updated, not inserted.
       (Bug #42309)</p></li><li><p>
        When using the replication driver with
        <code class="literal">autoReconnect=true</code>, Connector/J checks in
        <code class="literal">PreparedStatement.execute</code> (also called by
        <code class="literal">CallableStatement.execute</code>) to determine if
        the first character of the statement is an “<span class="quote">S</span>”, in
        an attempt to block all statements that are not read-only-safe,
        for example non-<a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
        statements. However, this also blocked
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>s to stored procedures, even
        if the stored procedures were defined as <code class="literal">SQL READ
        DATA</code> or <code class="literal">NO SQL</code>.
       (Bug #40031)</p></li><li><p>
        With large result sets <code class="literal">ResultSet.findColumn</code>
        became a performance bottleneck.
       (Bug #39962)</p></li><li><p>
        Connector/J ignored the value of the MySQL Server variable
        <a href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>.
       (Bug #39956)</p></li><li><p>
        Connector/J failed to parse
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> strings for nanos
        correctly.
       (Bug #39911)</p></li><li><p>
        When the <code class="literal">LoadBalancingConnectionProxy</code> handles
        a <code class="literal">SQLException</code> with SQL state starting with
        “<span class="quote">08</span>”, it calls
        <code class="literal">invalidateCurrentConnection</code>, which in turn
        removes that <code class="literal">Connection</code> from
        <code class="literal">liveConnections</code> and the
        <code class="literal">connectionsToHostsMap</code>, but it did not add the
        host to the new global blacklist, if the global blacklist was
        enabled.
      </p><p>
        There was also the possibility of a
        <code class="literal">NullPointerException</code> when trying to update
        stats, where
        <code class="literal">connectionsToHostsMap.get(this.currentConn)</code>
        was called:
      </p><pre class="programlisting">int hostIndex = ((Integer) this.hostsToListIndexMap.get(this.connectionsToHostsMap.get(this.currentConn))).intValue();</pre><p>
        This could happen if a client tried to issue a rollback after
        catching a <code class="literal">SQLException</code> caused by a
        connection failure.
       (Bug #39784)</p></li><li><p>
        When configuring the Java Replication Driver the last slave
        specified was never used.
       (Bug #39611)</p></li><li><p>
        When an <code class="literal">INSERT ON DUPLICATE KEY UPDATE</code> was
        performed, and the key already existed, the
        <code class="literal">affected-rows</code> value was returned as 1 instead
        of 0.
       (Bug #39352)</p></li><li><p>
        When using the random load balancing strategy and starting with
        two servers that were both unavailable, an
        <code class="literal">IndexOutOfBoundsException</code> was generated when
        removing a server from the <code class="literal">whiteList</code>.
       (Bug #38782)</p></li><li><p>
        Connector/J threw the following exception when using a read-only
        connection:
      </p><pre class="programlisting">java.sql.SQLException: Connection is read-only. Queries leading to data
modification are not allowed.</pre><p>(Bug #38747)</p></li><li><p>
        Connector/J was unable to connect when using a
        non-<code class="literal">latin1</code> password.
       (Bug #37570)</p></li><li><p>
        The <code class="literal">useOldAliasMetadataBehavior</code> connection
        property was ignored.
       (Bug #35753)</p></li><li><p>
        Incorrect result is returned from
        <code class="literal">isAfterLast()</code> in streaming
        <code class="literal">ResultSet</code> when using
        <code class="literal">setFetchSize(Integer.MIN_VALUE)</code>.
       (Bug #35170)</p></li><li><p>
        When <code class="literal">getGeneratedKeys()</code> was called on a
        statement that had not been created with
        <code class="literal">RETURN_GENERATED_KEYS</code>, no exception was
        thrown, and batched executions then returned erroneous values.
       (Bug #34185)</p></li><li><p>
        The <code class="literal">loadBalance</code>
        <code class="literal">bestResponseTime</code> blacklists did not have a
        global state.
       (Bug #33861)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-6"></a>D.5.1.13. Changes in MySQL Connector/J 5.1.6 (07 March 2008)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Multiple result sets were not supported when using streaming
        mode to return data. Both normal statements and the resul sets
        from stored procedures now return multiple results sets, with
        the exception of result sets using registered
        <code class="literal">OUTPUT</code> parameters.
       (Bug #33678)</p></li><li><p>
        XAConnections and datasources have been updated to the JDBC-4.0
        standard.
      </p></li><li><p>
        The profiler event handling has been made extensible using the
        <code class="option">profilerEventHandler</code> connection property.
      </p></li><li><p>
        Add the <code class="literal">verifyServerCertificate</code> property. If
        set to "false" the driver will not verify the server's
        certificate when <code class="literal">useSSL</code> is set to "true"
      </p><p>
        When using this feature, the keystore parameters should be
        specified by the <code class="literal">clientCertificateKeyStore*</code>
        properties, rather than system properties, as the JSSE doesn't
        it straightforward to have a nonverifying trust store and the
        "default" key store.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="methodname">DatabaseMetaData.getColumns()</code> returns
        incorrect <code class="literal">COLUMN_SIZE</code> value for
        <code class="literal">SET</code> column.
       (Bug #36830)</p></li><li><p>
        When trying to read <code class="classname">Time</code> values like
        “<span class="quote">00:00:00</span>” with
        <code class="methodname">ResultSet.getTime(int)</code> an exception is
        thrown.
       (Bug #36051)</p></li><li><p>
        JDBC connection URL parameters is ignored when using
        <code class="literal">MysqlConnectionPoolDataSource</code>.
       (Bug #35810)</p></li><li><p>
        When <code class="literal">useServerPrepStmts=true</code> and slow query
        logging is enabled, the connector throws a
        <code class="classname">NullPointerException</code> when it encounters a
        slow query.
       (Bug #35666)</p></li><li><p>
        When using the keyword “<span class="quote">loadbalance</span>” in the
        connection string and trying to perform load balancing between
        two databases, the driver appears to hang.
       (Bug #35660)</p></li><li><p>
        JDBC data type getter method was changed to accept only column
        name, whereas previously it accepted column label.
       (Bug #35610)</p></li><li><p>
        Prepared statements from pooled connections caused a
        <code class="classname">NullPointerException</code> when
        <code class="methodname">closed()</code> under JDBC-4.0.
       (Bug #35489)</p></li><li><p>
        In calling a stored function returning a
        <code class="literal">bigint</code>, an exception is encountered
        beginning:
</p><pre class="programlisting">java.sql.SQLException: java.lang.NumberFormatException: For input string:</pre><p>
        followed by the text of the stored function starting after the
        argument list.
       (Bug #35199)</p></li><li><p>
        The JDBC driver uses a different method for evaluating column
        names in
        <code class="methodname">resultsetmetadata.getColumnName()</code> and
        when looking for a column in
        <code class="methodname">resultset.getObject(columnName)</code>. This
        causes Hibernate to fail in queries where the two methods yield
        different results, for example in queries that use alias names:
      </p><pre class="programlisting">SELECT column AS aliasName from table</pre><p>(Bug #35150)</p></li><li><p>
        <code class="literal">MysqlConnectionPoolDataSource</code> does not
        support <code class="literal">ReplicationConnection</code>. Notice that we
        implemented <code class="literal">com.mysql.jdbc.Connection</code> for
        <code class="literal">ReplicationConnection</code>, however, only
        accessors from ConnectionProperties are implemented (not the
        mutators), and they return values from the currently active
        connection. All other methods from
        <code class="literal">com.mysql.jdbc.Connection</code> are implemented,
        and operate on the currently active connection, with the
        exception of <code class="literal">resetServerState()</code> and
        <code class="literal">changeUser()</code>.
       (Bug #34937)</p></li><li><p>
        <code class="literal">ResultSet.getTimestamp()</code> returns incorrect
        values for month/day of
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>s when using server-side
        prepared statements (not enabled by default).
       (Bug #34913)</p></li><li><p>
        <code class="classname">RowDataStatic</code> doesn't always set the
        metadata in <code class="classname">ResultSetRow</code>, which can lead
        to failures when unpacking <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
        <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> and
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> types when using
        absolute, relative, and previous result set navigation methods.
       (Bug #34762)</p></li><li><p>
        When calling <code class="literal">isValid()</code> on an active
        connection, if the timeout is nonzero then the
        <code class="literal">Connection</code> is invalidated even if the
        <code class="literal">Connection</code> is valid.
       (Bug #34703)</p></li><li><p>
        It was not possible to truncate a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> using
        <code class="literal">Blog.truncate()</code> when using 0 as an argument.
       (Bug #34677)</p></li><li><p>
        When using a cursor fetch for a statement, the internal prepared
        statement could cause a memory leak until the connection was
        closed. The internal prepared statement is now deleted when the
        corresponding result set is closed.
       (Bug #34518)</p></li><li><p>
        When retrieving the column type name of a geometry field, the
        driver would return <code class="literal">UNKNOWN</code> instead of
        <code class="literal">GEOMETRY</code>.
       (Bug #34194)</p></li><li><p>
        Statements with batched values do not return correct values for
        <code class="literal">getGeneratedKeys()</code> when
        <code class="option">rewriteBatchedStatements</code> is set to
        <code class="literal">true</code>, and the statement has an <code class="literal">ON
        DUPLICATE KEY UPDATE</code> clause.
       (Bug #34093)</p></li><li><p>
        The internal class
        <code class="classname">ResultSetInternalMethods</code> referenced the
        nonpublic class
        <code class="classname">com.mysql.jdbc.CachedResultSetMetaData</code>.
       (Bug #33823)</p></li><li><p>
        A <code class="literal">NullPointerException</code> could be raised when
        using client-side prepared statements and enabled the prepared
        statement cache using the <code class="option">cachePrepStmts</code>.
       (Bug #33734)</p></li><li><p>
        Using server side cursors and cursor fetch, the table metadata
        information would return the data type name instead of the
        column name.
       (Bug #33594)</p></li><li><p>
        <code class="methodname">ResultSet.getTimestamp()</code> would throw a
        <code class="literal">NullPointerException</code> instead of a
        <code class="literal">SQLException</code> when called on an empty
        <code class="literal">ResultSet</code>.
       (Bug #33162)</p></li><li><p>
        Load balancing connection using best response time would
        incorrectly "stick" to hosts that were down when the connection
        was first created.
      </p><p>
        We solve this problem with a black list that is used during the
        picking of new hosts. If the black list ends up including all
        configured hosts, the driver will retry for a configurable
        number of times (the <code class="option">retriesAllDown</code>
        configuration property, with a default of 120 times), sleeping
        250ms between attempts to pick a new connection.
      </p><p>
        We've also went ahead and made the balancing strategy
        extensible. To create a new strategy, implement the interface
        <code class="classname">com.mysql.jdbc.BalanceStrategy</code> (which
        also includes our standard "extension" interface), and tell the
        driver to use it by passing in the class name using the
        <code class="option">loadBalanceStrategy</code> configuration property.
       (Bug #32877)</p></li><li><p>
        During a Daylight Savings Time (DST) switchover, there was no
        way to store two timestamp/datetime values , as the hours end up
        being the same when sent as the literal that MySQL requires.
      </p><p>
        Note that to get this scenario to work with MySQL (since it
        doesn't support per-value timezones), you need to configure your
        server (or session) to be in UTC, and tell the driver not to use
        the legacy date/time code by setting
        <code class="literal">useLegacyDatetimeCode</code> to "false". This will
        cause the driver to always convert to/from the server and client
        timezone consistently.
      </p><p>
        This bug fix also fixes Bug #15604, by adding entirely new
        date/time handling code that can be switched on by
        <code class="option">useLegacyDatetimeCode</code> being set to "false" as a
        JDBC configuration property. For Connector/J 5.1.x, the default
        is "true", in trunk and beyond it will be "false" (that is, the
        old date/time handling code will be deprecated)
       (Bug #32577, Bug #15604)</p></li><li><p>
        When unpacking rows directly, we don't hand off error message
        packets to the internal method which decodes them correctly, so
        no exception is raised, and the driver than hangs trying to read
        rows that aren't there. This tends to happen when calling stored
        procedures, as normal SELECTs won't have an error in this spot
        in the protocol unless an I/O error occurs.
       (Bug #32246)</p></li><li><p>
        When using a connection from
        <code class="classname">ConnectionPoolDataSource</code>, some
        <code class="function">Connection.prepareStatement()</code> methods would
        return null instead of the prepared statement.
       (Bug #32101)</p></li><li><p>
        Using <code class="function">CallableStatement.setNull()</code> on a
        stored function would throw an
        <code class="literal">ArrayIndexOutOfBounds</code> exception when setting
        the last parameter to null.
       (Bug #31823)</p></li><li><p>
        <code class="classname">MysqlValidConnectionChecker</code> doesn't
        properly handle connections created using
        <code class="classname">ReplicationConnection</code>.
       (Bug #31790)</p></li><li><p>
        Retrieving the server version information for an active
        connection could return invalid information if the default
        character encoding on the host was not ASCII compatible.
       (Bug #31192)</p></li><li><p>
        Further fixes have been made to this bug in the event that a
        node is nonresponsive. Connector/J will now try a different
        random node instead of waiting for the node to recover before
        continuing.
       (Bug #31053)</p></li><li><p>
        <code class="literal">ResultSet</code> returned by
        <code class="literal">Statement.getGeneratedKeys()</code> is not closed
        automatically when statement that created it is closed.
       (Bug #30508)</p></li><li><p>
        <code class="function">DatabaseMetadata.getColumns()</code> doesn't
        return the correct column names if the connection character
        isn't UTF-8. A bug in MySQL server compounded the issue, but was
        fixed within the MySQL 5.0 release cycle. The fix includes
        changes to all the sections of the code that access the server
        metadata.
       (Bug #20491)</p></li><li><p>
        Fixed <code class="methodname">ResultSetMetadata.getColumnName()</code>
        for result sets returned from
        <code class="methodname">Statement.getGeneratedKeys()</code> - it was
        returning null instead of "GENERATED_KEY" as in 5.0.x.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-5"></a>D.5.1.14. Changes in MySQL Connector/J 5.1.5 (09 October 2007)</h4></div></div></div><p><span class="bold"><strong>New Features, Compared to the 5.0 Series of Connector/J</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Support for JDBC-4.0 <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NCHAR</code></a>,
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NVARCHAR</code></a> and
        <code class="literal">NCLOB</code> types.
      </p></li><li><p>
        JDBC-4.0 support for setting per-connection client information
        (which can be viewed in the comments section of a query using
        <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> on a MySQL
        server, or can be extended to support custom persistence of the
        information using a public interface).
      </p></li><li><p>
        Support for JDBC-4.0 XML processing using JAXP interfaces to
        DOM, SAX and StAX.
      </p></li><li><p>
        JDBC-4.0 standardized unwrapping to interfaces that include
        vendor extensions.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">autoSlowLog</code> configuration property,
        overrides <code class="literal">slowQueryThreshold*</code> properties,
        driver determines slow queries by those that are slower than 5 *
        stddev of the mean query time (outside the 96% percentile).
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When a connection is in read-only mode, queries that are wrapped
        in parentheses were incorrectly identified DML statements.
       (Bug #28256)</p></li><li><p>
        When calling <code class="literal">setTimestamp</code> on a prepared
        statement, the timezone information stored in the calendar
        object was ignored. This resulted in the incorrect
        <code class="literal">DATETIME</code> information being stored. The
        following example illustrates this:
      </p><pre class="programlisting">Timestamp t = new Timestamp( cal.getTimeInMillis() );
ps.setTimestamp( N, t, cal );</pre><p>(Bug #15604)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-4"></a>D.5.1.15. Changes in MySQL Connector/J 5.1.4 (Not Released)</h4></div></div></div><p>
        Only released internally.
      </p><p>This section has no changelog entries.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-3"></a>D.5.1.16. Changes in MySQL Connector/J 5.1.3 (10 September 2007)</h4></div></div></div><p><span class="bold"><strong>New Features, Compared to the 5.0 Series of Connector/J</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Support for JDBC-4.0 <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NCHAR</code></a>,
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NVARCHAR</code></a> and
        <code class="literal">NCLOB</code> types.
      </p></li><li><p>
        JDBC-4.0 support for setting per-connection client information
        (which can be viewed in the comments section of a query using
        <a href="sql-syntax.html#show-processlist" title="12.7.5.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> on a MySQL
        server, or can be extended to support custom persistence of the
        information using a public interface).
      </p></li><li><p>
        Support for JDBC-4.0 XML processing using JAXP interfaces to
        DOM, SAX and StAX.
      </p></li><li><p>
        JDBC-4.0 standardized unwrapping to interfaces that include
        vendor extensions.
      </p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/J now connects using an initial character set of
        <code class="literal">utf-8</code> solely for the purpose of
        authentication to permit user names or database names in any
        character set to be used in the JDBC connection URL.
       (Bug #29853)</p></li><li><p>
        Added two configuration parameters:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">blobsAreStrings</code>: Should the driver always
            treat BLOBs as Strings. Added specifically to work around
            dubious metadata returned by the server for <code class="literal">GROUP
            BY</code> clauses. Defaults to false.
          </p></li><li><p>
            <code class="literal">functionsNeverReturnBlobs</code>: Should the
            driver always treat data from functions returning
            <code class="literal">BLOBs</code> as Strings. Added specifically to
            work around dubious metadata returned by the server for
            <code class="literal">GROUP BY</code> clauses. Defaults to false.
          </p></li></ul></div></li><li><p>
        Setting <code class="option">rewriteBatchedStatements</code> to
        <code class="literal">true</code> now causes CallableStatements with
        batched arguments to be re-written in the form "CALL (...); CALL
        (...); ..." to send the batch in as few client/server round
        trips as possible.
      </p></li><li><p>
        The driver now picks appropriate internal row representation
        (whole row in one buffer, or individual byte[]s for each column
        value) depending on heuristics, including whether or not the row
        has <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types and the overall
        row-size. The threshold for row size that will cause the driver
        to use a buffer rather than individual byte[]s is configured by
        the configuration property
        <code class="option">largeRowSizeThreshold</code>, which has a default
        value of 2KB.
      </p></li><li><p>
        The data (and how it is stored) for <code class="literal">ResultSet</code>
        rows are now behind an interface which enables us (in some
        cases) to allocate less memory per row, in that for "streaming"
        result sets, we re-use the packet used to read rows, since only
        one row at a time is ever active.
      </p></li><li><p>
        Added experimental support for statement "interceptors" through
        the <code class="literal">com.mysql.jdbc.StatementInterceptor</code>
        interface, examples are in
        <code class="filename">com/mysql/jdbc/interceptors</code>. Implement this
        interface to be placed "in between" query execution, so that it
        can be influenced (currently experimental).
      </p></li><li><p>
        The driver will automatically adjust the server session variable
        <a href="server-administration.html#sysvar_net_write_timeout"><code class="literal">net_write_timeout</code></a> when it
        determines its been asked for a "streaming" result, and resets
        it to the previous value when the result set has been consumed.
        (The configuration property is named
        <code class="option">netTimeoutForStreamingResults</code>, with a unit of
        seconds, the value '0' means the driver will not try and adjust
        this value).
      </p></li><li><p>
        JDBC-4.0 ease-of-development features including
        auto-registration with the <code class="literal">DriverManager</code>
        through the service provider mechanism, standardized Connection
        validity checks and categorized <code class="literal">SQLExceptions</code>
        based on recoverability/retry-ability and class of the
        underlying error.
      </p></li><li><p>
        <code class="literal">Statement.setQueryTimeout()</code>s now affect the
        entire batch for batched statements, rather than the individual
        statements that make up the batch.
      </p></li><li><p>
        Errors encountered during
        <code class="literal">Statement</code>/<code class="literal">PreparedStatement</code>/<code class="literal">CallableStatement.executeBatch()</code>
        when <code class="literal">rewriteBatchStatements</code> has been set to
        <code class="literal">true</code> now return
        <code class="literal">BatchUpdateExceptions</code> according to the
        setting of <code class="literal">continueBatchOnError</code>.
      </p><p>
        If <code class="literal">continueBatchOnError</code> is set to
        <code class="literal">true</code>, the update counts for the "chunk" that
        were sent as one unit will all be set to
        <code class="literal">EXECUTE_FAILED</code>, but the driver will attempt
        to process the remainder of the batch. You can determine which
        "chunk" failed by looking at the update counts returned in the
        <code class="literal">BatchUpdateException</code>.
      </p><p>
        If <code class="literal">continueBatchOnError</code> is set to "false",
        the update counts returned will contain all updates up-to and
        including the failed "chunk", with all counts for the failed
        "chunk" set to <code class="literal">EXECUTE_FAILED</code>.
      </p><p>
        Since MySQL doesn't return multiple error codes for
        multiple-statements, or for multi-value
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>/<a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a>,
        it is the application's responsibility to handle determining
        which item(s) in the "chunk" actually failed.
      </p></li><li><p>
        New methods on com.mysql.jdbc.Statement:
        <code class="literal">setLocalInfileInputStream()</code> and
        <code class="literal">getLocalInfileInputStream()</code>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">setLocalInfileInputStream()</code> sets an
            <code class="literal">InputStream</code> instance that will be used to
            send data to the MySQL server for a
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
            INFILE</code></a> statement rather than a
            <code class="literal">FileInputStream</code> or
            <code class="literal">URLInputStream</code> that represents the path
            given as an argument to the statement.
          </p><p>
            This stream will be read to completion upon execution of a
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
            INFILE</code></a> statement, and will automatically be closed
            by the driver, so it needs to be reset before each call to
            <code class="literal">execute*()</code> that would cause the MySQL
            server to request data to fulfill the request for
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
            INFILE</code></a>.
          </p><p>
            If this value is set to <code class="literal">NULL</code>, the driver
            will revert to using a <code class="literal">FileInputStream</code> or
            <code class="literal">URLInputStream</code> as required.
          </p></li><li><p>
            <code class="literal">getLocalInfileInputStream()</code> returns the
            <code class="literal">InputStream</code> instance that will be used to
            send data in response to a
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
            INFILE</code></a> statement.
          </p><p>
            This method returns <code class="literal">NULL</code> if no such
            stream has been set using
            <code class="literal">setLocalInfileInputStream()</code>.
          </p></li></ul></div></li><li><p>
        Setting <code class="option">useBlobToStoreUTF8OutsideBMP</code> to
        <code class="literal">true</code> tells the driver to treat
        <code class="literal">[MEDIUM/LONG]BLOB</code> columns as
        <code class="literal">[LONG]VARCHAR</code> columns holding text encoded in
        UTF-8 that has characters outside the BMP (4-byte encodings),
        which MySQL server can't handle natively.
      </p><p>
        Set <code class="option">utf8OutsideBmpExcludedColumnNamePattern</code> to
        a regex so that column names matching the given regex will still
        be treated as <code class="literal">BLOBs</code> The regex must follow the
        patterns used for the <code class="literal">java.util.regex</code>package.
        The default is to exclude no columns, and include all columns.
      </p><p>
        Set <code class="option">utf8OutsideBmpIncludedColumnNamePattern</code> to
        specify exclusion rules to
        utf8OutsideBmpExcludedColumnNamePattern". The regex must follow
        the patterns used for the <code class="literal">java.util.regex</code>
        package.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">setObject(int, Object, int, int)</code> delegate in
        PreparedStatementWrapper delegates to wrong method.
       (Bug #30892)</p></li><li><p>
        NPE with null column values when
        <code class="option">padCharsWithSpace</code> is set to true.
       (Bug #30851)</p></li><li><p>
        Collation on <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> column
        types would be misidentified. A fix has been added, but this fix
        only works for MySQL server versions 5.0.25 and newer, since
        earlier versions didn't consistently return correct metadata for
        functions, and thus results from subqueries and functions were
        indistinguishable from each other, leading to type-related bugs.
       (Bug #30664)</p></li><li><p>
        An <code class="literal">ArithmeticException</code> or
        <code class="literal">NullPointerException</code> would be raised when the
        batch had zero members and
        <code class="literal">rewriteBatchedStatements=true</code> when
        <code class="literal">addBatch()</code> was never called, or
        <code class="literal">executeBatch()</code> was called immediately after
        <code class="literal">clearBatch()</code>.
       (Bug #30550)</p></li><li><p>
        Closing a load-balanced connection would cause a
        <code class="literal">ClassCastException</code>.
       (Bug #29852)</p></li><li><p>
        Connection checker for JBoss didn't use same method parameters
        using reflection, causing connections to always seem "bad".
       (Bug #29106)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getTypeInfo()</code> for the types
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a> will return a precision
        of 254 for server versions older than 5.0.3, 64 for versions
        5.0.3 to 5.0.5 and 65 for versions newer than 5.0.5.
       (Bug #28972)</p></li><li><p>
        <code class="literal">CallableStatement.executeBatch()</code> doesn't work
        when connection property
        <code class="option">noAccessToProcedureBodies</code> has been set to
        <code class="literal">true</code>.
      </p><p>
        The fix involves changing the behavior of
        <code class="option">noAccessToProcedureBodies</code>,in that the driver
        will now report all paramters as <code class="literal">IN</code> paramters
        but permit callers to call registerOutParameter() on them
        without throwing an exception.
       (Bug #28689)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> doesn't contain
        <code class="literal">SCOPE_*</code> or
        <code class="literal">IS_AUTOINCREMENT</code> columns.
       (Bug #27915)</p></li><li><p>
        Schema objects with identifiers other than the connection
        character aren't retrieved correctly in
        <code class="literal">ResultSetMetadata</code>.
       (Bug #27867)</p></li><li><p>
        <code class="literal">Connection.getServerCharacterEncoding()</code>
        doesn't work for servers with version &gt;= 4.1.
       (Bug #27182)</p></li><li><p>
        The automated SVN revisions in
        <code class="literal">DBMD.getDriverVersion()</code>. The SVN revision of
        the directory is now inserted into the version information
        during the build.
       (Bug #21116)</p></li><li><p>
        Specifying a "validation query" in your connection pool that
        starts with "/* ping */" _exactly_ will cause the driver to
        instead send a ping to the server and return a fake result set
        (much lighter weight), and when using a ReplicationConnection or
        a LoadBalancedConnection, will send the ping across all active
        connections.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-2"></a>D.5.1.17. Changes in MySQL Connector/J 5.1.2 (29 June 2007)</h4></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Setting the configuration property
        <code class="literal">rewriteBatchedStatements</code> to
        <code class="literal">true</code> will now cause the driver to rewrite
        batched prepared statements with more than 3 parameter sets in a
        batch into multi-statements (separated by ";") if they are not
        plain (that is, without <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> or
        <code class="literal">ON DUPLICATE KEY UPDATE</code> clauses)
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a> statements.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-1"></a>D.5.1.18. Changes in MySQL Connector/J 5.1.1 (22 June 2007)</h4></div></div></div><p class="release-level">
        This is a new Alpha development release, adding new features and
        fixing recently discovered bugs.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Pulled vendor-extension methods of <code class="literal">Connection</code>
        implementation out into an interface to support
        <code class="literal">java.sql.Wrapper</code> functionality from
        <code class="literal">ConnectionPoolDataSource</code>. The vendor
        extensions are javadoc'd in the
        <code class="literal">com.mysql.jdbc.Connection</code> interface.
      </p><p>
        For those looking further into the driver implementation, it is
        not an API that is used for pluggability of implementations
        inside our driver (which is why there are still references to
        <code class="literal">ConnectionImpl</code> throughout the code).
      </p><p>
        We've also added server and client
        <code class="literal">prepareStatement()</code> methods that cover all of
        the variants in the JDBC API.
      </p><p>
        <code class="literal">Connection.serverPrepare(String)</code> has been
        re-named to
        <code class="literal">Connection.serverPrepareStatement()</code> for
        consistency with
        <code class="literal">Connection.clientPrepareStatement()</code>.
      </p></li><li><p>
        Row navigation now causes any streams/readers open on the result
        set to be closed, as in some cases we're reading directly from a
        shared network packet and it will be overwritten by the "next"
        row.
      </p></li><li><p>
        Made it possible to retrieve prepared statement parameter
        bindings (to be used in
        <code class="literal">StatementInterceptors</code>, primarily).
      </p></li><li><p>
        Externalized the descriptions of connection properties.
      </p></li><li><p>
        The data (and how it is stored) for <code class="literal">ResultSet</code>
        rows are now behind an interface which enables us (in some
        cases) to allocate less memory per row, in that for "streaming"
        result sets, we re-use the packet used to read rows, since only
        one row at a time is ever active.
      </p></li><li><p>
        Similar to <code class="literal">Connection</code>, we pulled out vendor
        extensions to <code class="literal">Statement</code> into an interface
        named <code class="literal">com.mysql.Statement</code>, and moved the
        <code class="literal">Statement</code> class into
        <code class="literal">com.mysql.StatementImpl</code>. The two methods
        (javadoc'd in <code class="literal">com.mysql.Statement</code> are
        <code class="literal">enableStreamingResults()</code>, which already
        existed, and <code class="literal">disableStreamingResults()</code> which
        sets the statement instance back to the fetch size and result
        set type it had before
        <code class="literal">enableStreamingResults()</code> was called.
      </p></li><li><p>
        Driver now picks appropriate internal row representation (whole
        row in one buffer, or individual byte[]s for each column value)
        depending on heuristics, including whether or not the row has
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types and the overall
        row-size. The threshold for row size that will cause the driver
        to use a buffer rather than individual byte[]s is configured by
        the configuration property
        <code class="literal">largeRowSizeThreshold</code>, which has a default
        value of 2KB.
      </p></li><li><p>
        Added experimental support for statement "interceptors" through
        the <code class="literal">com.mysql.jdbc.StatementInterceptor</code>
        interface, examples are in
        <code class="filename">com/mysql/jdbc/interceptors</code>.
      </p><p>
        Implement this interface to be placed "in between" query
        execution, so that you can influence it. (currently
        experimental).
      </p><p>
        <code class="literal">StatementInterceptors</code> are "chainable" when
        configured by the user, the results returned by the "current"
        interceptor will be passed on to the next on in the chain, from
        left-to-right order, as specified by the user in the JDBC
        configuration property <code class="literal">statementInterceptors</code>.
      </p></li><li><p>
        See the sources (fully javadoc'd) for
        <code class="literal">com.mysql.jdbc.StatementInterceptor</code> for more
        details until we iron out the API and get it documented in the
        manual.
      </p></li><li><p>
        Setting <code class="literal">rewriteBatchedStatements</code> to
        <code class="literal">true</code> now causes
        <code class="literal">CallableStatements</code> with batched arguments to
        be re-written in the form <code class="literal">CALL (...); CALL (...);
        ...</code> to send the batch in as few client/server round
        trips as possible.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-0"></a>D.5.1.19. Changes in MySQL Connector/J 5.1.0 (11 April 2007)</h4></div></div></div><p>
        This is the first public alpha release of the current
        Connector/J 5.1 development branch, providing an insight to
        upcoming features. Although some of these are still under
        development, this release includes the following new features
        and changes (in comparison to the current Connector/J 5.0
        production release):
      </p><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/J 5.0.5 has disabled their use by default.
        The disabling of server-side prepared statements does not affect
        the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string:
      </p><pre class="programlisting">useServerPrepStmts=true</pre><p>
        The default value of this property is <code class="literal">false</code>
        (that is, Connector/J does not use server-side prepared
        statements).
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          The disabling of server-side prepared statements does not
          affect the operation of the connector. However, if you use the
          <code class="literal">useTimezone=true</code> connection option and use
          client-side prepared statements (instead of server-side
          prepared statements) you should also set
          <code class="literal">useSSPSCompatibleTimezoneShift=true</code>.
        </p></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Refactored <code class="literal">CommunicationsException</code> into a
        JDBC-3.0 version, and a JDBC-4.0 version (which extends
        <code class="literal">SQLRecoverableException</code>, now that it exists).
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          This change means that if you were catching
          <code class="literal">com.mysql.jdbc.CommunicationsException</code> in
          your applications instead of looking at the SQLState class of
          <code class="literal">08</code>, and are moving to Java 6 (or newer),
          you need to change your imports to that exception to be
          <code class="literal">com.mysql.jdbc.exceptions.jdbc4.CommunicationsException</code>,
          as the old class will not be instantiated for communications
          link-related errors under Java 6.
        </p></div></li><li><p>
        Added support for JDBC-4.0 categorized
        <code class="literal">SQLExceptions</code>.
      </p></li><li><p>
        Added support for JDBC-4.0's <code class="literal">NCLOB</code>, and
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NCHAR</code></a>/<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NVARCHAR</code></a>
        types.
      </p></li><li><p>
        <code class="literal">com.mysql.jdbc.java6.javac</code>: Full path to your
        Java-6 <span><strong class="command">javac</strong></span> executable
      </p></li><li><p>
        Added support for JDBC-4.0's SQLXML interfaces.
      </p></li><li><p>
        Re-worked Ant buildfile to build JDBC-4.0 classes separately, as
        well as support building under Eclipse (since Eclipse can't
        mix/match JDKs).
      </p><p>
        To build, you must set <code class="literal">JAVA_HOME</code> to
        J2SDK-1.4.2 or Java-5, and set the following properties on your
        Ant command line:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">com.mysql.jdbc.java6.javac</code>: Full path to
            your Java-6 <span><strong class="command">javac</strong></span> executable
          </p></li><li><p>
            <code class="literal">com.mysql.jdbc.java6.rtjar</code>: Full path to
            your Java-6 <code class="filename">rt.jar</code> file
          </p></li></ul></div></li><li><p>
        New feature—driver will automatically adjust session
        variable <a href="server-administration.html#sysvar_net_write_timeout"><code class="literal">net_write_timeout</code></a> when
        it determines it has been asked for a "streaming" result, and
        resets it to the previous value when the result set has been
        consumed. (configuration property is named
        <code class="literal">netTimeoutForStreamingResults</code> value and has a
        unit of seconds, the value <code class="literal">0</code> means the driver
        will not try and adjust this value).
      </p></li><li><p>
        Added support for JDBC-4.0's client information. The backend
        storage of information provided using
        <code class="literal">Connection.setClientInfo()</code> and retrieved by
        <code class="literal">Connection.getClientInfo()</code> is pluggable by
        any class that implements the
        <code class="literal">com.mysql.jdbc.JDBC4ClientInfoProvider</code>
        interface and has a no-args constructor.
      </p><p>
        The implementation used by the driver is configured using the
        <code class="literal">clientInfoProvider</code> configuration property
        (with a default of value of
        <code class="literal">com.mysql.jdbc.JDBC4CommentClientInfoProvider</code>,
        an implementation which lists the client information as a
        comment prepended to every query sent to the server).
      </p><p>
        This functionality is only available when using Java-6 or newer.
      </p></li><li><p>
        <code class="literal">com.mysql.jdbc.java6.rtjar</code>: Full path to your
        Java-6 <code class="filename">rt.jar</code> file
      </p></li><li><p>
        Added support for JDBC-4.0's <code class="literal">Wrapper</code>
        interface.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-5-0-x"></a>D.5.2. Changes in MySQL Connector/J 5.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-5-0-8">D.5.2.1. Changes in MySQL Connector/J 5.0.8 (09 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-7">D.5.2.2. Changes in MySQL Connector/J 5.0.7 (20 July 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-6">D.5.2.3. Changes in MySQL Connector/J 5.0.6 (15 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-5">D.5.2.4. Changes in MySQL Connector/J 5.0.5 (02 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-4">D.5.2.5. Changes in MySQL Connector/J 5.0.4 (20 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-3">D.5.2.6. Changes in MySQL Connector/J 5.0.3 (26 July 2006, beta)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-2">D.5.2.7. Changes in MySQL Connector/J 5.0.2 (11 July 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-1">D.5.2.8. Changes in MySQL Connector/J 5.0.1 (Not Released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-0">D.5.2.9. Changes in MySQL Connector/J 5.0.0 (22 December 2005)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-8"></a>D.5.2.1. Changes in MySQL Connector/J 5.0.8 (09 October 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">blobsAreStrings</code>: Should the driver always
        treat BLOBs as Strings. Added specifically to work around
        dubious metadata returned by the server for <code class="literal">GROUP
        BY</code> clauses. Defaults to false.
      </p></li><li><p>
        Added two configuration parameters:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">blobsAreStrings</code>: Should the driver always
            treat BLOBs as Strings. Added specifically to work around
            dubious metadata returned by the server for <code class="literal">GROUP
            BY</code> clauses. Defaults to false.
          </p></li><li><p>
            <code class="literal">functionsNeverReturnBlobs</code>: Should the
            driver always treat data from functions returning
            <code class="literal">BLOBs</code> as Strings. Added specifically to
            work around dubious metadata returned by the server for
            <code class="literal">GROUP BY</code> clauses. Defaults to false.
          </p></li></ul></div></li><li><p>
        <code class="literal">functionsNeverReturnBlobs</code>: Should the driver
        always treat data from functions returning
        <code class="literal">BLOBs</code> as Strings. Added specifically to work
        around dubious metadata returned by the server for
        <code class="literal">GROUP BY</code> clauses. Defaults to false.
      </p></li><li><p>
        XAConnections now start in auto-commit mode (as per JDBC-4.0
        specification clarification).
      </p></li><li><p>
        Driver will now fall back to sane defaults for
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> and
        <a href="server-administration.html#sysvar_net_buffer_length"><code class="literal">net_buffer_length</code></a> if the server
        reports them incorrectly (and will log this situation at
        <code class="literal">WARN</code> level, since it is actually an error
        condition).
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connections established using URLs of the form
        <code class="literal">jdbc:mysql:loadbalance://</code> weren't doing
        failover if they tried to connect to a MySQL server that was
        down. The driver now attempts connections to the next "best"
        (depending on the load balance strategy in use) server, and
        continues to attempt connecting to the next "best" server every
        250 milliseconds until one is found that is up and running or 5
        minutes has passed.
      </p><p>
        If the driver gives up, it will throw the last-received
        <code class="literal">SQLException</code>.
       (Bug #31053)</p></li><li><p>
        <code class="literal">setObject(int, Object, int, int)</code> delegate in
        PreparedStatementWrapper delegates to wrong method.
       (Bug #30892)</p></li><li><p>
        NPE with null column values when
        <code class="option">padCharsWithSpace</code> is set to true.
       (Bug #30851)</p></li><li><p>
        Collation on <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> column
        types would be misidentified. A fix has been added, but this fix
        only works for MySQL server versions 5.0.25 and newer, since
        earlier versions didn't consistently return correct metadata for
        functions, and thus results from subqueries and functions were
        indistinguishable from each other, leading to type-related bugs.
       (Bug #30664)</p></li><li><p>
        An <code class="literal">ArithmeticException</code> or
        <code class="literal">NullPointerException</code> would be raised when the
        batch had zero members and
        <code class="literal">rewriteBatchedStatements=true</code> when
        <code class="literal">addBatch()</code> was never called, or
        <code class="literal">executeBatch()</code> was called immediately after
        <code class="literal">clearBatch()</code>.
       (Bug #30550)</p></li><li><p>
        Closing a load-balanced connection would cause a
        <code class="literal">ClassCastException</code>.
       (Bug #29852)</p></li><li><p>
        Connection checker for JBoss didn't use same method parameters
        using reflection, causing connections to always seem "bad".
       (Bug #29106)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getTypeInfo()</code> for the types
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a> will return a precision
        of 254 for server versions older than 5.0.3, 64 for versions
        5.0.3 to 5.0.5 and 65 for versions newer than 5.0.5.
       (Bug #28972)</p></li><li><p>
        <code class="literal">CallableStatement.executeBatch()</code> doesn't work
        when connection property
        <code class="option">noAccessToProcedureBodies</code> has been set to
        <code class="literal">true</code>.
      </p><p>
        The fix involves changing the behavior of
        <code class="option">noAccessToProcedureBodies</code>,in that the driver
        will now report all paramters as <code class="literal">IN</code> paramters
        but permit callers to call registerOutParameter() on them
        without throwing an exception.
       (Bug #28689)</p></li><li><p>
        When a connection is in read-only mode, queries that are wrapped
        in parentheses were incorrectly identified DML statements.
       (Bug #28256)</p></li><li><p>
        <code class="literal">UNSIGNED</code> types not reported using
        <code class="literal">DBMD.getTypeInfo()</code>, and capitalization of
        type names is not consistent between
        <code class="literal">DBMD.getColumns()</code>,
        <code class="literal">RSMD.getColumnTypeName()</code> and
        <code class="literal">DBMD.getTypeInfo()</code>.
      </p><p>
        This fix also ensures that the precision of <code class="literal">UNSIGNED
        MEDIUMINT</code> and <code class="literal">UNSIGNED BIGINT</code> is
        reported correctly using <code class="literal">DBMD.getColumns()</code>.
       (Bug #27916)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> doesn't contain
        <code class="literal">SCOPE_*</code> or
        <code class="literal">IS_AUTOINCREMENT</code> columns.
       (Bug #27915)</p></li><li><p>
        Schema objects with identifiers other than the connection
        character aren't retrieved correctly in
        <code class="literal">ResultSetMetadata</code>.
       (Bug #27867)</p></li><li><p>
        Cached metadata with
        <code class="literal">PreparedStatement.execute()</code> throws
        <code class="literal">NullPointerException</code>.
       (Bug #27412)</p></li><li><p>
        <code class="literal">Connection.getServerCharacterEncoding()</code>
        doesn't work for servers with version &gt;= 4.1.
       (Bug #27182)</p></li><li><p>
        The automated SVN revisions in
        <code class="literal">DBMD.getDriverVersion()</code>. The SVN revision of
        the directory is now inserted into the version information
        during the build.
       (Bug #21116)</p></li><li><p>
        Specifying a "validation query" in your connection pool that
        starts with "/* ping */" _exactly_ will cause the driver to
        instead send a ping to the server and return a fake result set
        (much lighter weight), and when using a ReplicationConnection or
        a LoadBalancedConnection, will send the ping across all active
        connections.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-7"></a>D.5.2.2. Changes in MySQL Connector/J 5.0.7 (20 July 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The driver will now automatically set
        <code class="literal">useServerPrepStmts</code> to <code class="literal">true</code>
        when <code class="literal">useCursorFetch</code> has been set to
        <code class="literal">true</code>, since the feature requires server-side
        prepared statements to function.
      </p></li><li><p>
        <code class="literal">tcpKeepAlive</code> - Should the driver set
        SO_KEEPALIVE (default <code class="literal">true</code>)?
      </p></li><li><p>
        Give more information in EOFExceptions thrown out of MysqlIO
        (how many bytes the driver expected to read, how many it
        actually read, say that communications with the server were
        unexpectedly lost).
      </p></li><li><p>
        Driver detects when it is running in a ColdFusion MX server
        (tested with version 7), and uses the configuration bundle
        <code class="literal">coldFusion</code>, which sets
        <code class="literal">useDynamicCharsetInfo</code> to
        <code class="literal">false</code> (see previous entry), and sets
        <code class="literal">useLocalSessionState</code> and autoReconnect to
        <code class="literal">true</code>.
      </p></li><li><p>
        <code class="literal">tcpNoDelay</code> - Should the driver set
        SO_TCP_NODELAY (disabling the Nagle Algorithm, default
        <code class="literal">true</code>)?
      </p></li><li><p>
        Added configuration property
        <code class="literal">slowQueryThresholdNanos</code> - if
        <code class="literal">useNanosForElapsedTime</code> is set to
        <code class="literal">true</code>, and this property is set to a nonzero
        value the driver will use this threshold (in nanosecond units)
        to determine if a query was slow, instead of using millisecond
        units.
      </p></li><li><p>
        <code class="literal">tcpRcvBuf</code> - Should the driver set SO_RCV_BUF
        to the given value? The default value of '0', means use the
        platform default value for this property.
      </p></li><li><p>
        Setting <code class="literal">useDynamicCharsetInfo</code> to
        <code class="literal">false</code> now causes driver to use static lookups
        for collations as well (makes
        ResultSetMetadata.isCaseSensitive() much more efficient, which
        leads to performance increase for ColdFusion, which calls this
        method for every column on every table it sees, it appears).
      </p></li><li><p>
        Added configuration properties to enable tuning of TCP/IP socket
        parameters:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">tcpNoDelay</code> - Should the driver set
            SO_TCP_NODELAY (disabling the Nagle Algorithm, default
            <code class="literal">true</code>)?
          </p></li><li><p>
            <code class="literal">tcpKeepAlive</code> - Should the driver set
            SO_KEEPALIVE (default <code class="literal">true</code>)?
          </p></li><li><p>
            <code class="literal">tcpRcvBuf</code> - Should the driver set
            SO_RCV_BUF to the given value? The default value of '0',
            means use the platform default value for this property.
          </p></li><li><p>
            <code class="literal">tcpSndBuf</code> - Should the driver set
            SO_SND_BUF to the given value? The default value of '0',
            means use the platform default value for this property.
          </p></li><li><p>
            <code class="literal">tcpTrafficClass</code> - Should the driver set
            traffic class or type-of-service fields? See the
            documentation for java.net.Socket.setTrafficClass() for more
            information.
          </p></li></ul></div></li><li><p>
        Setting the configuration parameter
        <code class="literal">useCursorFetch</code> to <code class="literal">true</code> for
        MySQL-5.0+ enables the use of cursors that enable Connector/J to
        save memory by fetching result set rows in chunks (where the
        chunk size is set by calling setFetchSize() on a Statement or
        ResultSet) by using fully-materialized cursors on the server.
      </p></li><li><p>
        <code class="literal">tcpSndBuf</code> - Should the driver set SO_SND_BUF
        to the given value? The default value of '0', means use the
        platform default value for this property.
      </p></li><li><p>
        <code class="literal">tcpTrafficClass</code> - Should the driver set
        traffic class or type-of-service fields? See the documentation
        for java.net.Socket.setTrafficClass() for more information.
      </p></li><li><p>
        Added new debugging functionality - Setting configuration
        property
        <code class="literal">includeInnodbStatusInDeadlockExceptions</code> to
        <code class="literal">true</code> will cause the driver to append the
        output of <a href="sql-syntax.html#show-engine" title="12.7.5.16. SHOW ENGINE Syntax"><code class="literal">SHOW
        ENGINE INNODB STATUS</code></a> to deadlock-related exceptions,
        which will enumerate the current locks held inside InnoDB.
      </p></li><li><p>
        Added configuration property
        <code class="literal">useNanosForElapsedTime</code> - for
        profiling/debugging functionality that measures elapsed time,
        should the driver try to use nanoseconds resolution if available
        (requires JDK &gt;= 1.5)?
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          If <code class="literal">useNanosForElapsedTime</code> is set to
          <code class="literal">true</code>, and this property is set to "0" (or
          left default), then elapsed times will still be measured in
          nanoseconds (if possible), but the slow query threshold will
          be converted from milliseconds to nanoseconds, and thus have
          an upper bound of approximately 2000 milliseconds (as that
          threshold is represented as an integer, not a long).
        </p></div></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Don't send any file data in response to LOAD DATA LOCAL INFILE
        if the feature is disabled at the client side. This is to
        prevent a malicious server or man-in-the-middle from asking the
        client for data that the client is not expecting. Thanks to Jan
        Kneschke for discovering the exploit and Andrey "Poohie"
        Hristov, Konstantin Osipov and Sergei Golubchik for discussions
        about implications and possible fixes.
       (Bug #29605)</p></li><li><p>
        Parser in client-side prepared statements runs to end of
        statement, rather than end-of-line for '#' comments. Also added
        support for '--' single-line comments.
       (Bug #28956)</p></li><li><p>
        Parser in client-side prepared statements eats character
        following '/' if it is not a multi-line comment.
       (Bug #28851)</p></li><li><p>
        PreparedStatement.getMetaData() for statements containing
        leading one-line comments is not returned correctly.
      </p><p>
        As part of this fix, we also overhauled detection of DML for
        <code class="literal">executeQuery()</code> and
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>s for
        <code class="literal">executeUpdate()</code> in plain and prepared
        statements to be aware of the same types of comments.
       (Bug #28469)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-6"></a>D.5.2.3. Changes in MySQL Connector/J 5.0.6 (15 May 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added an experimental load-balanced connection designed for use
        with SQL nodes in a MySQL Cluster/NDB environment (This is not
        for master-slave replication. For that, we suggest you look at
        <code class="literal">ReplicationConnection</code> or
        <code class="literal">lbpool</code>).
      </p><p>
        If the JDBC URL starts with
        <code class="literal">jdbc:mysql:loadbalance://host-1,host-2,...host-n</code>,
        the driver will create an implementation of
        <code class="literal">java.sql.Connection</code> that load balances
        requests across a series of MySQL JDBC connections to the given
        hosts, where the balancing takes place after transaction commit.
      </p><p>
        Therefore, for this to work (at all), you must use transactions,
        even if only reading data.
      </p><p>
        Physical connections to the given hosts will not be created
        until needed.
      </p><p>
        The driver will invalidate connections that it detects have had
        communication errors when processing a request. A new connection
        to the problematic host will be attempted the next time it is
        selected by the load balancing algorithm.
      </p><p>
        There are two choices for load balancing algorithms, which may
        be specified by the <code class="literal">loadBalanceStrategy</code> JDBC
        URL configuration property:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">random</code>: The driver will pick a random
            host for each request. This tends to work better than
            round-robin, as the randomness will somewhat account for
            spreading loads where requests vary in response time, while
            round-robin can sometimes lead to overloaded nodes if there
            are variations in response times across the workload.
          </p></li><li><p>
            <code class="literal">bestResponseTime</code>: The driver will route
            the request to the host that had the best response time for
            the previous transaction.
          </p></li></ul></div></li><li><p>
        <code class="literal">bestResponseTime</code>: The driver will route the
        request to the host that had the best response time for the
        previous transaction.
      </p></li><li><p>
        Added configuration property
        <code class="literal">padCharsWithSpace</code> (defaults to
        <code class="literal">false</code>). If set to <code class="literal">true</code>,
        and a result set column has the
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> type and the value does not
        fill the amount of characters specified in the DDL for the
        column, the driver will pad the remaining characters with space
        (for ANSI compliance).
      </p></li><li><p>
        When <code class="literal">useLocalSessionState</code> is set to
        <code class="literal">true</code> and connected to a MySQL-5.0 or later
        server, the JDBC driver will now determine whether an actual
        <code class="literal">commit</code> or <code class="literal">rollback</code>
        statement needs to be sent to the database when
        <code class="literal">Connection.commit()</code> or
        <code class="literal">Connection.rollback()</code> is called.
      </p><p>
        This is especially helpful for high-load situations with
        connection pools that always call
        <code class="literal">Connection.rollback()</code> on connection
        check-in/check-out because it avoids a round-trip to the server.
      </p></li><li><p>
        Added configuration property
        <code class="literal">useDynamicCharsetInfo</code>. If set to
        <code class="literal">false</code> (the default), the driver will use a
        per-connection cache of character set information queried from
        the server when necessary, or when set to
        <code class="literal">true</code>, use a built-in static mapping that is
        more efficient, but isn't aware of custom character sets or
        character sets implemented after the release of the JDBC driver.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          This only affects the <code class="literal">padCharsWithSpace</code>
          configuration property and the
          <code class="literal">ResultSetMetaData.getColumnDisplayWidth()</code>
          method.
        </p></div></li><li><p>
        New configuration property,
        <code class="literal">enableQueryTimeouts</code> (default
        <code class="literal">true</code>).
      </p><p>
        When enabled, query timeouts set with
        <code class="literal">Statement.setQueryTimeout()</code> use a shared
        <code class="literal">java.util.Timer</code> instance for scheduling. Even
        if the timeout doesn't expire before the query is processed,
        there will be memory used by the <code class="literal">TimerTask</code>
        for the given timeout which won't be reclaimed until the time
        the timeout would have expired if it hadn't been cancelled by
        the driver. High-load environments might want to consider
        disabling this functionality. (this configuration property is
        part of the <code class="literal">maxPerformance</code> configuration
        bundle).
      </p></li><li><p>
        Give better error message when "streaming" result sets, and the
        connection gets clobbered because of exceeding
        <a href="server-administration.html#sysvar_net_write_timeout"><code class="literal">net_write_timeout</code></a> on the
        server.
      </p></li><li><p>
        <code class="literal">random</code>: The driver will pick a random host
        for each request. This tends to work better than round-robin, as
        the randomness will somewhat account for spreading loads where
        requests vary in response time, while round-robin can sometimes
        lead to overloaded nodes if there are variations in response
        times across the workload.
      </p></li><li><p>
        <code class="literal">com.mysql.jdbc.[NonRegistering]Driver</code> now
        understands URLs of the format
        <code class="literal">jdbc:mysql:replication://</code> and
        <code class="literal">jdbc:mysql:loadbalance://</code> which will create a
        ReplicationConnection (exactly like when using
        <code class="literal">[NonRegistering]ReplicationDriver</code>) and an
        experimental load-balanced connection designed for use with SQL
        nodes in a MySQL Cluster/NDB environment, respectively.
      </p><p>
        In an effort to simplify things, we're working on deprecating
        multiple drivers, and instead specifying different core behavior
        based upon JDBC URL prefixes, so watch for
        <code class="literal">[NonRegistering]ReplicationDriver</code> to
        eventually disappear, to be replaced with
        <code class="literal">com.mysql.jdbc[NonRegistering]Driver</code> with the
        new URL prefix.
      </p></li><li><p>
        Fixed issue where a failed-over connection would let an
        application call <code class="literal">setReadOnly(false)</code>, when
        that call should be ignored until the connection is reconnected
        to a writable master unless <code class="literal">failoverReadOnly</code>
        had been set to <code class="literal">false</code>.
      </p></li><li><p>
        Driver will now use <code class="literal">INSERT INTO ... VALUES
        (DEFAULT)</code>form of statement for updatable result sets
        for <code class="literal">ResultSet.insertRow()</code>, rather than
        pre-populating the insert row with values from
        <code class="literal">DatabaseMetaData.getColumns()</code>(which results
        in a <a href="sql-syntax.html#show-columns" title="12.7.5.6. SHOW COLUMNS Syntax"><code class="literal">SHOW FULL
        COLUMNS</code></a> on the server for every result set). If an
        application requires access to the default values before
        <code class="literal">insertRow()</code> has been called, the JDBC URL
        should be configured with
        <code class="literal">populateInsertRowWithDefaultValues</code> set to
        <code class="literal">true</code>.
      </p><p>
        This fix specifically targets performance issues with ColdFusion
        and the fact that it seems to ask for updatable result sets no
        matter what the application does with them.
      </p></li><li><p>
        More intelligent initial packet sizes for the "shared" packets
        are used (512 bytes, rather than 16K), and initial packets used
        during handshake are now sized appropriately as to not require
        reallocation.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        More useful error messages are generated when the driver thinks
        a result set is not updatable. (Thanks to Ashley Martens for the
        patch).
       (Bug #28085)</p></li><li><p>
        <code class="literal">Connection.getTransactionIsolation()</code> uses
        "<code class="literal">SHOW VARIABLES LIKE</code>" which is very
        inefficient on MySQL-5.0+ servers.
       (Bug #27655)</p></li><li><p>
        Fixed issue where calling <code class="literal">getGeneratedKeys()</code>
        on a prepared statement after calling
        <code class="literal">execute()</code> didn't always return the generated
        keys (<code class="literal">executeUpdate()</code> worked fine however).
       (Bug #27655)</p></li><li><p>
        <code class="literal">CALL /* ... */
        <em class="replaceable"><code>some_proc</code></em>()</code> doesn't work.
        As a side effect of this fix, you can now use <code class="literal">/*
        */</code> and <code class="literal">#</code> comments when preparing
        statements using client-side prepared statement emulation.
      </p><p>
        If the comments happen to contain parameter markers
        (<code class="literal">?</code>), they will be treated as belonging to the
        comment (that is, not recognized) rather than being a parameter
        of the statement.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p xmlns="">
          The statement when sent to the server will contain the
          comments as-is, they're not stripped during the process of
          preparing the <code class="literal">PreparedStatement</code> or
          <code class="literal">CallableStatement</code>.
        </p></div><p>(Bug #27400)</p></li><li><p>
        <code class="literal">ResultSet.get*()</code> with a column index &lt; 1
        returns misleading error message.
       (Bug #27317)</p></li><li><p>
        Using <code class="literal">ResultSet.get*()</code> with a column index
        less than 1 returns a misleading error message.
       (Bug #27317)</p></li><li><p>
        Comments in DDL of stored procedures/functions confuse procedure
        parser, and thus metadata about them can not be created, leading
        to inability to retrieve said metadata, or execute procedures
        that have certain comments in them.
       (Bug #26959)</p></li><li><p>
        Fast date/time parsing doesn't take into account
        <code class="literal">00:00:00</code> as a legal value.
       (Bug #26789)</p></li><li><p>
        <code class="literal">PreparedStatement</code> is not closed in
        <code class="literal">BlobFromLocator.getBytes()</code>.
       (Bug #26592)</p></li><li><p>
        When the configuration property
        <code class="literal">useCursorFetch</code> was set to
        <code class="literal">true</code>, sometimes server would return new, more
        exact metadata during the execution of the server-side prepared
        statement that enables this functionality, which the driver
        ignored (using the original metadata returned during
        <code class="literal">prepare()</code>), causing corrupt reading of data
        due to type mismatch when the actual rows were returned.
       (Bug #26173)</p></li><li><p>
        <code class="literal">CallableStatements</code> with
        <code class="literal">OUT/INOUT</code> parameters that are "binary"
        (<a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>,
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a>,
        <code class="literal">(VAR)BINARY</code>, <code class="literal">JAVA_OBJECT</code>)
        have extra 7 bytes.
       (Bug #25715)</p></li><li><p>
        Whitespace surrounding storage/size specifiers in stored
        procedure parameters declaration causes
        <code class="literal">NumberFormatException</code> to be thrown when
        calling stored procedure on JDK-1.5 or newer, as the Number
        classes in JDK-1.5+ are whitespace intolerant.
       (Bug #25624)</p></li><li><p>
        Client options not sent correctly when using SSL, leading to
        stored procedures not being able to return results. Thanks to
        Don Cohen for the bug report, testcase and patch.
       (Bug #25545)</p></li><li><p>
        <code class="literal">Statement.setMaxRows()</code> is not effective on
        result sets materialized from cursors.
       (Bug #25517)</p></li><li><p>
        <code class="literal">BIT(&gt; 1)</code> is returned as
        <code class="literal">java.lang.String</code> from
        <code class="literal">ResultSet.getObject()</code> rather than
        <code class="literal">byte[]</code>.
       (Bug #25328)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-5"></a>D.5.2.4. Changes in MySQL Connector/J 5.0.5 (02 March 2007)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Usage Advisor will now issue warnings for result sets with large
        numbers of rows. You can configure the trigger value by using
        the <code class="literal">resultSetSizeThreshold</code> parameter, which
        has a default value of 100.
      </p></li><li><p>
        The <code class="literal">rewriteBatchedStatements</code> feature can now
        be used with server-side prepared statements.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/J 5.0.5 has disabled their use by default.
        The disabling of server-side prepared statements does not affect
        the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string:
      </p><pre class="programlisting">useServerPrepStmts=true</pre><p>
        The default value of this property is <code class="literal">false</code>
        (that is, Connector/J does not use server-side prepared
        statements).
      </p></li><li><p>
        Improved speed of <code class="literal">datetime</code> parsing for
        ResultSets that come from plain or nonserver-side prepared
        statements. You can enable old implementation with
        <code class="literal">useFastDateParsing=false</code> as a configuration
        parameter.
      </p></li><li><p>
        Usage Advisor now detects empty results sets and does not report
        on columns not referenced in those empty sets.
      </p></li><li><p>
        Fixed logging of XA commands sent to server, it is now
        configurable using <code class="literal">logXaCommands</code> property
        (defaults to <code class="literal">false</code>).
      </p></li><li><p>
        Added configuration property
        <code class="literal">localSocketAddress</code>, which is the host name or
        IP address given to explicitly configure the interface that the
        driver will bind the client side of the TCP/IP connection to
        when connecting.
      </p></li><li><p>
        We've added a new configuration option
        <code class="literal">treatUtilDateAsTimestamp</code>, which is
        <code class="literal">false</code> by default, as (1) We already had
        specific behavior to treat java.util.Date as a
        java.sql.Timestamp because it is useful to many folks, and (2)
        that behavior will very likely be required for drivers
        JDBC-post-4.0.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Connection property <code class="literal">socketFactory</code> wasn't
        exposed using correctly named mutator/accessor, causing data
        source implementations that use JavaBean naming conventions to
        set properties to fail to set the property (and in the case of
        SJAS, fail silently when trying to set this parameter).
       (Bug #26326)</p></li><li><p>
        A query execution which timed out did not always throw a
        <code class="literal">MySQLTimeoutException</code>.
       (Bug #25836)</p></li><li><p>
        Storing a <code class="literal">java.util.Date</code> object in a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> column would not be
        serialized correctly during <code class="literal">setObject</code>.
       (Bug #25787)</p></li><li><p>
        Timer instance used for
        <code class="literal">Statement.setQueryTimeout()</code> created
        per-connection, rather than per-VM, causing memory leak.
       (Bug #25514)</p></li><li><p>
        <code class="literal">EscapeProcessor</code> gets confused by multiple
        backslashes. We now push the responsibility of syntax errors
        back on to the server for most escape sequences.
       (Bug #25399)</p></li><li><p>
        <code class="literal">INOUT</code> parameters in
        <code class="literal">CallableStatements</code> get doubly-escaped.
       (Bug #25379)</p></li><li><p>
        When using the <code class="literal">rewriteBatchedStatements</code>
        connection option with
        <code class="literal">PreparedState.executeBatch()</code> an internal
        memory leak would occur.
       (Bug #25073)</p></li><li><p>
        Fixed issue where field-level for metadata from
        <code class="literal">DatabaseMetaData</code> when using
        <code class="literal">INFORMATION_SCHEMA</code> didn't have references to
        current connections, sometimes leading to Null Pointer
        Exceptions (NPEs) when introspecting them using
        <code class="literal">ResultSetMetaData</code>.
       (Bug #25073)</p></li><li><p>
        <code class="literal">StringUtils.indexOfIgnoreCaseRespectQuotes()</code>
        isn't case-insensitive on the first character of the target.
        This bug also affected
        <code class="literal">rewriteBatchedStatements</code> functionality when
        prepared statements did not use uppercase for the
        <code class="literal">VALUES</code> clause.
       (Bug #25047)</p></li><li><p>
        Client-side prepared statement parser gets confused by in-line
        comments <code class="literal">/*...*/</code> and therefore cannot rewrite
        batch statements or reliably detect the type of statements when
        they are used.
       (Bug #25025)</p></li><li><p>
        Results sets from <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
        statements that are part of multi-statement queries would cause
        an <code class="literal">SQLException</code> error, "Result is from
        UPDATE".
       (Bug #25009)</p></li><li><p>
        Specifying <code class="literal">US-ASCII</code> as the character set in a
        connection to a MySQL 4.1 or newer server does not map
        correctly.
       (Bug #24840)</p></li><li><p>
        Using <code class="literal">DatabaseMetaData.getSQLKeywords()</code> does
        not return a all of the of the reserved keywords for the current
        MySQL version. Current implementation returns the list of
        reserved words for MySQL 5.1, and does not distinguish between
        versions.
       (Bug #24794)</p></li><li><p>
        Calling <code class="literal">Statement.cancel()</code> could result in a
        Null Pointer Exception (NPE).
       (Bug #24721)</p></li><li><p>
        Using <code class="literal">setFetchSize()</code> breaks prepared
        <a href="sql-syntax.html#show" title="12.7.5. SHOW Syntax"><code class="literal">SHOW</code></a> and other commands.
       (Bug #24360)</p></li><li><p>
        Calendars and timezones are now lazily instantiated when
        required.
       (Bug #24351)</p></li><li><p>
        Using <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> columns would
        result in time shifts when <code class="literal">useServerPrepStmts</code>
        was true. This occurred due to different behavior when using
        client-side compared to server-side prepared statements and the
        <code class="literal">useJDBCCompliantTimezoneShift</code> option. This is
        now fixed if moving from server-side prepared statements to
        client-side prepared statements by setting
        <code class="literal">useSSPSCompatibleTimezoneShift</code> to
        <code class="literal">true</code>, as the driver can't tell if this is a
        new deployment that never used server-side prepared statements,
        or if it is an existing deployment that is switching to
        client-side prepared statements from server-side prepared
        statements.
       (Bug #24344)</p></li><li><p>
        Connector/J now returns a better error message when server
        doesn't return enough information to determine stored
        procedure/function parameter types.
       (Bug #24065)</p></li><li><p>
        A connection error would occur when connecting to a MySQL server
        with certain character sets. Some collations/character sets
        reported as "unknown" (specifically <code class="literal">cias</code>
        variants of existing character sets), and inability to override
        the detected server character set.
       (Bug #23645)</p></li><li><p>
        Inconsistency between <code class="literal">getSchemas</code> and
        <code class="literal">INFORMATION_SCHEMA</code>.
       (Bug #23304)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getSchemas()</code> doesn't return
        a <code class="literal">TABLE_CATALOG</code> column.
       (Bug #23303)</p></li><li><p>
        When using a JDBC connection URL that is malformed, the
        <code class="literal">NonRegisteringDriver.getPropertyInfo</code> method
        will throw a Null Pointer Exception (NPE).
       (Bug #22628)</p></li><li><p>
        Some exceptions thrown out of
        <code class="literal">StandardSocketFactory</code> were needlessly
        wrapped, obscuring their true cause, especially when using
        socket timeouts.
       (Bug #21480)</p></li><li><p>
        When using a server-side prepared statement the driver would
        send timestamps to the server using nanoseconds instead of
        milliseconds.
       (Bug #21438)</p></li><li><p>
        When using server-side prepared statements and timestamp
        columns, value would be incorrectly populated (with nanoseconds,
        not microseconds).
       (Bug #21438)</p></li><li><p>
        <code class="literal">ParameterMetaData</code> throws
        <code class="literal">NullPointerException</code> when prepared SQL has a
        syntax error. Added
        <code class="literal">generateSimpleParameterMetadata</code> configuration
        property, which when set to <code class="literal">true</code> will
        generate metadata reflecting
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> for every parameter (the
        default is <code class="literal">false</code>, which will cause an
        exception to be thrown if no parameter metadata for the
        statement is actually available).
       (Bug #21267)</p></li><li><p>
        Fixed an issue where <code class="literal">XADataSources</code> couldn't
        be bound into JNDI, as the <code class="literal">DataSourceFactory</code>
        didn't know how to create instances of them.
      </p></li></ul></div><p><span class="bold"><strong>Other Changes</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Avoid static synchronized code in JVM class libraries for
        dealing with default timezones.
      </p></li><li><p>
        Performance enhancement of initial character set configuration,
        driver will only send commands required to configure connection
        character set session variables if the current values on the
        server do not match what is required.
      </p></li><li><p>
        Re-worked stored procedure parameter parser to be more robust.
        Driver no longer requires <code class="literal">BEGIN</code> in stored
        procedure definition, but does have requirement that if a stored
        function begins with a label directly after the "returns"
        clause, that the label is not a quoted identifier.
      </p></li><li><p>
        Throw exceptions encountered during timeout to thread calling
        <code class="literal">Statement.execute*()</code>, rather than
        <code class="literal">RuntimeException</code>.
      </p></li><li><p>
        Changed cached result set metadata (when using
        <code class="literal">cacheResultSetMetadata=true</code>) to be cached
        per-connection rather than per-statement as previously
        implemented.
      </p></li><li><p>
        Reverted back to internal character conversion routines for
        single-byte character sets, as the ones internal to the JVM are
        using much more CPU time than our internal implementation.
      </p></li><li><p>
        When extracting foreign key information from
        <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> in
        <code class="literal">DatabaseMetaData</code>, ignore exceptions relating
        to tables being missing (which could happen for cross-reference
        or imported-key requests, as the list of tables is generated
        first, then iterated).
      </p></li><li><p>
        Fixed some Null Pointer Exceptions (NPEs) when cached metadata
        was used with <code class="literal">UpdatableResultSets</code>.
      </p></li><li><p>
        Take <code class="literal">localSocketAddress</code> property into account
        when creating instances of
        <code class="literal">CommunicationsException</code> when the underlying
        exception is a <code class="literal">java.net.BindException</code>, so
        that a friendlier error message is given with a little internal
        diagnostics.
      </p></li><li><p>
        Fixed cases where <code class="literal">ServerPreparedStatements</code>
        weren't using cached metadata when
        <code class="literal">cacheResultSetMetadata=true</code> was used.
      </p></li><li><p>
        Use a <code class="literal">java.util.TreeMap</code> to map column names
        to ordinal indexes for <code class="literal">ResultSet.findColumn()</code>
        instead of a HashMap. This enables us to have case-insensitive
        lookups (required by the JDBC specification) without resorting
        to the many transient object instances needed to support this
        requirement with a normal <code class="literal">HashMap</code> with either
        case-adjusted keys, or case-insensitive keys. (In the worst case
        scenario for lookups of a 1000 column result set, TreeMaps are
        about half as fast wall-clock time as a HashMap, however in
        normal applications their use gives many orders of magnitude
        reduction in transient object instance creation which pays off
        later for CPU usage in garbage collection).
      </p></li><li><p>
        When using cached metadata, skip field-level metadata packets
        coming from the server, rather than reading them and discarding
        them without creating <code class="literal">com.mysql.jdbc.Field</code>
        instances.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-4"></a>D.5.2.5. Changes in MySQL Connector/J 5.0.4 (20 October 2006)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        DBMD.getColumns() does not return expected COLUMN_SIZE for the
        SET type, now returns length of largest possible set
        disregarding whitespace or the "," delimitters to be consistent
        with the ODBC driver.
       (Bug #22613)</p></li><li><p>
        Added new _ci collations to CharsetMapping - utf8_unicode_ci not
        working.
       (Bug #22456)</p></li><li><p>
        Driver was using milliseconds for Statement.setQueryTimeout()
        when specification says argument is to be in seconds.
       (Bug #22359)</p></li><li><p>
        Workaround for server crash when calling stored procedures using
        a server-side prepared statement (driver now detects
        prepare(stored procedure) and substitutes client-side prepared
        statement).
       (Bug #22297)</p></li><li><p>
        Driver issues truncation on write exception when it shouldn't
        (due to sending big decimal incorrectly to server with
        server-side prepared statement).
       (Bug #22290)</p></li><li><p>
        Newlines causing whitespace to span confuse procedure parser
        when getting parameter metadata for stored procedures.
       (Bug #22024)</p></li><li><p>
        When using information_schema for metadata, COLUMN_SIZE for
        getColumns() is not clamped to range of java.lang.Integer as is
        the case when not using information_schema, thus leading to a
        truncation exception that isn't present when not using
        information_schema.
       (Bug #21544)</p></li><li><p>
        Column names don't match metadata in cases where server doesn't
        return original column names (column functions) thus breaking
        compatibility with applications that expect 1-to-1 mappings
        between <code class="literal">findColumn()</code> and
        <code class="literal">rsmd.getColumnName()</code>, usually manifests
        itself as "Can't find column ('')" exceptions.
       (Bug #21379)</p></li><li><p>
        Driver now sends numeric 1 or 0 for client-prepared statement
        <code class="literal">setBoolean()</code> calls instead of '1' or '0'.
      </p></li><li><p>
        Fixed configuration property
        <code class="literal">jdbcCompliantTruncation</code> was not being used
        for reads of result set values.
      </p></li><li><p>
        DatabaseMetaData correctly reports <code class="literal">true</code> for
        <code class="literal">supportsCatalog*()</code> methods.
      </p></li><li><p>
        Driver now supports <code class="literal">{call sp}</code> (without "()"
        if procedure has no arguments).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-3"></a>D.5.2.6. Changes in MySQL Connector/J 5.0.3 (26 July 2006, beta)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added configuration option
        <code class="literal">noAccessToProcedureBodies</code> which will cause
        the driver to create basic parameter metadata for
        <code class="literal">CallableStatements</code> when the user does not
        have access to procedure bodies using <a href="sql-syntax.html#show-create-procedure" title="12.7.5.11. SHOW CREATE PROCEDURE Syntax"><code class="literal">SHOW
        CREATE PROCEDURE</code></a> or selecting from
        <code class="literal">mysql.proc</code> instead of throwing an exception.
        The default value for this option is <code class="literal">false</code>
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">Statement.cancel()</code> causes
        <code class="literal">NullPointerException</code> if underlying connection
        has been closed due to server failure.
       (Bug #20650)</p></li><li><p>
        If the connection to the server has been closed due to a server
        failure, then the cleanup process will call <code class="literal">
        Statement.cancel()</code>, triggering a
        <code class="literal">NullPointerException</code>, even though there is no
        active connection.
       (Bug #20650)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-2"></a>D.5.2.7. Changes in MySQL Connector/J 5.0.2 (11 July 2006)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MysqlXaConnection.recover(int flags)</code> now
        permits combinations of
        <code class="literal">XAResource.TMSTARTRSCAN</code> and
        <code class="literal">TMENDRSCAN</code>. To simulate the
        “<span class="quote">scanning</span>” nature of the interface, we return all
        prepared XIDs for <code class="literal">TMSTARTRSCAN</code>, and no new
        XIDs for calls with <code class="literal">TMNOFLAGS</code>, or
        <code class="literal">TMENDRSCAN</code> when not in combination with
        <code class="literal">TMSTARTRSCAN</code>. This change was made for API
        compliance, as well as integration with IBM WebSphere's
        transaction manager.
       (Bug #20242)</p></li><li><p>
        Fixed <code class="literal">MysqlValidConnectionChecker</code> for JBoss
        doesn't work with <code class="literal">MySQLXADataSources</code>.
       (Bug #20242)</p></li><li><p>
        Added connection/datasource property
        <code class="literal">pinGlobalTxToPhysicalConnection</code> (defaults to
        <code class="literal">false</code>). When set to <code class="literal">true</code>,
        when using <code class="literal">XAConnections</code>, the driver ensures
        that operations on a given XID are always routed to the same
        physical connection. This enables the
        <code class="literal">XAConnection</code> to support <code class="literal">XA START ...
        JOIN</code> after
        <a href="sql-syntax.html#xa-statements" title="12.3.7.1. XA Transaction SQL Syntax"><code class="literal">XA END</code></a>
        has been called, and is also a workaround for transaction
        managers that don't maintain thread affinity for a global
        transaction (most either always maintain thread affinity, or
        have it as a configuration option).
       (Bug #20242)</p></li><li><p>
        Better caching of character set converters (per-connection) to
        remove a bottleneck for multibyte character sets.
       (Bug #20242)</p></li><li><p>
        Fixed <code class="literal">ConnectionProperties</code> (and thus some
        subclasses) are not serializable, even though some J2EE
        containers expect them to be.
       (Bug #19169)</p></li><li><p>
        Fixed driver fails on non-ASCII platforms. The driver was
        assuming that the platform character set would be a superset of
        MySQL's <code class="literal">latin1</code> when doing the handshake for
        authentication, and when reading error messages. We now use
        Cp1252 for all strings sent to the server during the handshake
        phase, and a hard-coded mapping of the
        <a href="server-administration.html#sysvar_language"><code class="literal">language</code></a> system variable to the
        character set that is used for error messages.
       (Bug #18086)</p></li><li><p>
        Fixed can't use <code class="literal">XAConnection</code> for local
        transactions when no global transaction is in progress.
       (Bug #17401)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-1"></a>D.5.2.8. Changes in MySQL Connector/J 5.0.1 (Not Released)</h4></div></div></div><p>
        Not released due to a packaging error
      </p><p>This section has no changelog entries.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-0"></a>D.5.2.9. Changes in MySQL Connector/J 5.0.0 (22 December 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for Connector/MXJ integration using url
        subprotocol <code class="literal">jdbc:mysql:mxj://...</code>.
       (Bug #14729)</p></li><li><p>
        Idle timeouts cause <code class="literal">XAConnections</code> to whine
        about rolling themselves back.
       (Bug #14729)</p></li><li><p>
        When fix for Bug #14562 was merged from 3.1.12, added
        functionality for <code class="literal">CallableStatement</code>'s
        parameter metadata to return correct information for
        <code class="literal">.getParameterClassName()</code>.
       (Bug #14729)</p></li><li><p>
        Added service-provider entry to
        <code class="filename">META-INF/services/java.sql.Driver</code> for
        JDBC-4.0 support.
       (Bug #14729)</p></li><li><p>
        Fuller synchronization of <code class="literal">Connection</code> to avoid
        deadlocks when using multithreaded frameworks that multithread a
        single connection (usually not recommended, but the JDBC spec
        permits it anyways), part of fix to Bug #14972).
       (Bug #14729)</p></li><li><p>
        Moved all <code class="literal">SQLException</code> constructor usage to a
        factory in <code class="literal">SQLError</code> (ground-work for JDBC-4.0
        <code class="literal">SQLState</code>-based exception classes).
       (Bug #14729)</p></li><li><p>
        Removed Java5-specific calls to <code class="literal">BigDecimal</code>
        constructor (when result set value is <code class="literal">''</code>,
        <code class="literal">(int)0</code> was being used as an argument
        indirectly using method return value. This signature doesn't
        exist prior to Java5.)
       (Bug #14729)</p></li><li><p>
        Implementation of <code class="literal">Statement.cancel()</code> and
        <code class="literal">Statement.setQueryTimeout()</code>. Both require
        MySQL-5.0.0 or newer server, require a separate connection to
        issue the <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><code class="literal">KILL
        QUERY</code></a> statement, and in the case of
        <code class="literal">setQueryTimeout()</code> creates an additional
        thread to handle the timeout functionality.
      </p><p>
        Note: Failures to cancel the statement for
        <code class="literal">setQueryTimeout()</code> may manifest themselves as
        <code class="literal">RuntimeExceptions</code> rather than failing
        silently, as there is currently no way to unblock the thread
        that is executing the query being cancelled due to timeout
        expiration and have it throw the exception instead.
       (Bug #14729)</p></li><li><p>
        Return "[VAR]BINARY" for
        <code class="literal">RSMD.getColumnTypeName()</code> when that is
        actually the type, and it can be distinguished (MySQL-4.1 and
        newer).
       (Bug #14729)</p></li><li><p>
        Attempt detection of the MySQL type
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> (it is an alias, so this
        isn't always reliable), and use the
        <code class="literal">java.sql.Types.BINARY</code> type mapping for it.
      </p></li><li><p>
        Added unit tests for <code class="literal">XADatasource</code>, as well as
        friendlier exceptions for XA failures compared to the "stock"
        <code class="literal">XAException</code> (which has no messages).
      </p></li><li><p>
        If the connection <code class="literal">useTimezone</code> is set to
        <code class="literal">true</code>, then also respect time zone conversions
        in escape-processed string literals (for example, <code class="literal">"{ts
        ...}"</code> and <code class="literal">"{t ...}"</code>).
      </p></li><li><p>
        Do not permit <code class="literal">.setAutoCommit(true)</code>, or
        <code class="literal">.commit()</code> or <code class="literal">.rollback()</code>
        on an XA-managed connection as per the JDBC specification.
      </p></li><li><p>
        <code class="literal">XADataSource</code> implemented (ported from 3.2
        branch which won't be released as a product). Use
        <code class="literal">com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</code>
        as your datasource class name in your application server to
        utilize XA transactions in MySQL-5.0.10 and newer.
      </p></li><li><p>
        Moved <code class="filename">-bin-g.jar</code> file into separate
        <code class="filename">debug</code> subdirectory to avoid confusion.
      </p></li><li><p>
        Return original column name for
        <code class="literal">RSMD.getColumnName()</code> if the column was
        aliased, alias name for <code class="literal">.getColumnLabel()</code> (if
        aliased), and original table name for
        <code class="literal">.getTableName()</code>. Note this only works for
        MySQL-4.1 and newer, as older servers don't make this
        information available to clients.
      </p></li><li><p>
        Setting <code class="literal">useJDBCCompliantTimezoneShift=true</code>
        (it is not the default) causes the driver to use GMT for
        <span class="emphasis"><em>all</em></span>
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>/<a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>
        time zones, and the current VM time zone for any other type that
        refers to time zones. This feature can not be used when
        <code class="literal">useTimezone=true</code> to convert between server
        and client time zones.
      </p></li><li><p>
        <code class="literal">PreparedStatement.setString()</code> didn't work
        correctly when <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> on
        server contained
        <a href="server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a> and no
        characters that needed escaping were present in the string.
      </p></li><li><p>
        Add one level of indirection of internal representation of
        <code class="literal">CallableStatement</code> parameter metadata to avoid
        class not found issues on JDK-1.3 for
        <code class="literal">ParameterMetadata</code> interface (which doesn't
        exist prior to JDBC-3.0).
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-3-1-x"></a>D.5.3. Changes in MySQL Connector/J 3.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-3-1-15">D.5.3.1. Changes in MySQL Connector/J 3.1.15 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-14">D.5.3.2. Changes in MySQL Connector/J 3.1.14 (19 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-13">D.5.3.3. Changes in MySQL Connector/J 3.1.13 (26 May 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-12">D.5.3.4. Changes in MySQL Connector/J 3.1.12 (30 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-11">D.5.3.5. Changes in MySQL Connector/J 3.1.11 (07 October 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-10">D.5.3.6. Changes in MySQL Connector/J 3.1.10 (23 June 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-9">D.5.3.7. Changes in MySQL Connector/J 3.1.9 (22 June 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-8">D.5.3.8. Changes in MySQL Connector/J 3.1.8 (14 April 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-7">D.5.3.9. Changes in MySQL Connector/J 3.1.7 (18 February 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-6">D.5.3.10. Changes in MySQL Connector/J 3.1.6 (23 December 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-5">D.5.3.11. Changes in MySQL Connector/J 3.1.5 (02 December 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-4">D.5.3.12. Changes in MySQL Connector/J 3.1.4 (04 September 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-3">D.5.3.13. Changes in MySQL Connector/J 3.1.3 (07 July 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-2">D.5.3.14. Changes in MySQL Connector/J 3.1.2 (09 June 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-1">D.5.3.15. Changes in MySQL Connector/J 3.1.1 (14 February 2004, alpha)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-0">D.5.3.16. Changes in MySQL Connector/J 3.1.0 (18 February 2003, alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-15"></a>D.5.3.1. Changes in MySQL Connector/J 3.1.15 (Not yet released)</h4></div></div></div><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/J 5.0.5 has disabled their use by default.
        The disabling of server-side prepared statements does not affect
        the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string:
      </p><pre class="programlisting">useServerPrepStmts=true</pre><p>
        The default value of this property is <code class="literal">false</code>
        (that is, Connector/J does not use server-side prepared
        statements).
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Specifying <code class="literal">US-ASCII</code> as the character set in a
        connection to a MySQL 4.1 or newer server does not map
        correctly.
       (Bug #24840)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-14"></a>D.5.3.2. Changes in MySQL Connector/J 3.1.14 (19 October 2006)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Check and store value for continueBatchOnError property in
        constructor of Statements, rather than when executing batches,
        so that Connections closed out from underneath statements don't
        cause NullPointerExceptions when it is required to check this
        property.
       (Bug #22290)</p></li><li><p>
        Driver now sends numeric 1 or 0 for client-prepared statement
        setBoolean() calls instead of '1' or '0'.
       (Bug #22290)</p></li><li><p>
        Fixed bug where driver would not advance to next host if
        roundRobinLoadBalance=true and the last host in the list is
        down.
       (Bug #22290)</p></li><li><p>
        Driver issues truncation on write exception when it shouldn't
        (due to sending big decimal incorrectly to server with
        server-side prepared statement).
       (Bug #22290)</p></li><li><p>
        Fixed bug when calling stored functions, where parameters
        weren't numbered correctly (first parameter is now the return
        value, subsequent parameters if specified start at index "2").
       (Bug #22290)</p></li><li><p>
        Removed logger autodetection altogether, must now specify logger
        explicitly if you want to use a logger other than one that logs
        to STDERR.
       (Bug #21207)</p></li><li><p>
        DDriver throws NPE when tracing prepared statements that have
        been closed (in asSQL()).
       (Bug #21207)</p></li><li><p>
        ResultSet.getSomeInteger() doesn't work for BIT(&gt;1).
       (Bug #21062)</p></li><li><p>
        Escape of quotation marks in client-side prepared statements
        parsing not respected. Patch covers more than bug report,
        including NO_BACKSLASH_ESCAPES being set, and stacked quote
        characters forms of escaping (that is, '' or "").
       (Bug #20888)</p></li><li><p>
        Fixed can't pool server-side prepared statements, exception
        raised when re-using them.
       (Bug #20687)</p></li><li><p>
        Fixed Updatable result set that contains a BIT column fails when
        server-side prepared statements are used.
       (Bug #20485)</p></li><li><p>
        Fixed updatable result set throws ClassCastException when there
        is row data and moveToInsertRow() is called.
       (Bug #20479)</p></li><li><p>
        Fixed ResultSet.getShort() for UNSIGNED TINYINT returns
        incorrect values when using server-side prepared statements.
       (Bug #20306)</p></li><li><p>
        ReplicationDriver does not always round-robin load balance
        depending on URL used for slaves list.
       (Bug #19993)</p></li><li><p>
        Fixed calling toString() on ResultSetMetaData for
        driver-generated (that is, from DatabaseMetaData method calls,
        or from getGeneratedKeys()) result sets would raise a
        NullPointerException.
       (Bug #19993)</p></li><li><p>
        Connection fails to localhost when using timeout and IPv6 is
        configured.
       (Bug #19726)</p></li><li><p>
        ResultSet.getFloatFromString() can't retrieve values near
        Float.MIN/MAX_VALUE.
       (Bug #18880)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getTables()</code> or
        <code class="literal">getColumns()</code> with a bad catalog parameter
        threw an exception rather than return an empty result set (as
        required by the specification).
       (Bug #18258)</p></li><li><p>
        Fixed memory leak with profileSQL=true.
       (Bug #16987)</p></li><li><p>
        Fixed NullPointerException in MysqlDataSourceFactory due to
        Reference containing RefAddrs with null content.
       (Bug #16791)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-13"></a>D.5.3.3. Changes in MySQL Connector/J 3.1.13 (26 May 2006)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">Fixed PreparedStatement.setObject(int, Object,
        int)</code> doesn't respect scale of BigDecimals.
       (Bug #19615)</p></li><li><p>
        Fixed <code class="literal">ResultSet.wasNull()</code> returns incorrect
        value when extracting native string from server-side prepared
        statement generated result set.
       (Bug #19282)</p></li><li><p>
        Fixed invalid classname returned for
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> for
        <code class="literal">BIGINT type</code>.
       (Bug #19282)</p></li><li><p>
        Fixed case where driver wasn't reading server status correctly
        when fetching server-side prepared statement rows, which in some
        cases could cause warning counts to be off, or multiple result
        sets to not be read off the wire.
       (Bug #19282)</p></li><li><p>
        Fixed data truncation and <code class="literal">getWarnings()</code> only
        returns last warning in set.
       (Bug #18740)</p></li><li><p>
        Fixed aliased column names where length of name &gt; 251 are
        corrupted.
       (Bug #18554)</p></li><li><p>
        Improved performance of retrieving
        <code class="literal">BigDecimal</code>, <code class="literal">Time</code>,
        <code class="literal">Timestamp</code> and <code class="literal">Date</code> values
        from server-side prepared statements by creating fewer
        short-lived instances of <code class="literal">Strings</code> when the
        native type is not an exact match for the requested type.
       (Bug #18496)</p></li><li><p>
        Added performance feature, re-writing of batched executes for
        <code class="literal">Statement.executeBatch()</code> (for all DML
        statements) and
        <code class="literal">PreparedStatement.executeBatch()</code> (for INSERTs
        with VALUE clauses only). Enable by using
        "rewriteBatchedStatements=true" in your JDBC URL.
       (Bug #18041)</p></li><li><p>
        Fixed issue where server-side prepared statements don't cause
        truncation exceptions to be thrown when truncation happens.
       (Bug #18041)</p></li><li><p>
        Fixed
        <code class="literal">CallableStatement.registerOutParameter()</code> not
        working when some parameters pre-populated. Still waiting for
        feedback from JDBC experts group to determine what correct
        parameter count from <code class="literal">getMetaData()</code> should be,
        however.
       (Bug #17898)</p></li><li><p>
        Fixed calling <code class="literal">clearParameters()</code> on a closed
        prepared statement causes NPE.
       (Bug #17587)</p></li><li><p>
        Map "latin1" on MySQL server to CP1252 for MySQL &gt; 4.1.0.
       (Bug #17587)</p></li><li><p>
        Added additional accessor and mutator methods on
        ConnectionProperties so that DataSource users can use same
        naming as regular URL properties.
       (Bug #17587)</p></li><li><p>
        Fixed <code class="literal">ResultSet.wasNull()</code> not always reset
        correctly for booleans when done using conversion for
        server-side prepared statements.
       (Bug #17450)</p></li><li><p>
        Fixed <code class="literal">Statement.getGeneratedKeys()</code> throws
        <code class="literal">NullPointerException</code> when no query has been
        processed.
       (Bug #17099)</p></li><li><p>
        Fixed updatable result set doesn't return
        <code class="literal">AUTO_INCREMENT</code> values for
        <code class="literal">insertRow()</code> when multiple column primary keys
        are used. (the driver was checking for the existence of
        single-column primary keys and an autoincrement value &gt; 0
        instead of a straightforward
        <code class="literal">isAutoIncrement()</code> check).
       (Bug #16841)</p></li><li><p>
        <code class="literal">DBMD.getColumns()</code> returns wrong type for
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a>.
       (Bug #15854)</p></li><li><p>
        <code class="filename">lib-nodist</code> directory missing from package
        breaks out-of-box build.
       (Bug #15676)</p></li><li><p>
        Fixed issue with <code class="literal">ReplicationConnection</code>
        incorrectly copying state, doesn't transfer connection context
        correctly when transitioning between the same read-only states.
       (Bug #15570)</p></li><li><p>
        No "dos" character set in MySQL &gt; 4.1.0.
       (Bug #15544)</p></li><li><p>
        <code class="literal">INOUT</code> parameter does not store
        <code class="literal">IN</code> value.
       (Bug #15464)</p></li><li><p>
        <code class="literal">PreparedStatement.setObject()</code> serializes
        <code class="literal">BigInteger</code> as object, rather than sending as
        numeric value (and is thus not complementary to
        <code class="literal">.getObject()</code> on an <code class="literal">UNSIGNED
        LONG</code> type).
       (Bug #15383)</p></li><li><p>
        Fixed issue where driver was unable to initialize character set
        mapping tables. Removed reliance on
        <code class="literal">.properties</code> files to hold this information,
        as it turns out to be too problematic to code around class
        loader hierarchies that change depending on how an application
        is deployed. Moved information back into the
        <code class="literal">CharsetMapping</code> class.
       (Bug #14938)</p></li><li><p>
        Exception thrown for new decimal type when using updatable
        result sets.
       (Bug #14609)</p></li><li><p>
        Driver now aware of fix for <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a>
        type metadata that went into MySQL-5.0.21 for server not
        reporting length consistently .
       (Bug #13601)</p></li><li><p>
        Added support for Apache Commons logging, use
        "com.mysql.jdbc.log.CommonsLogger" as the value for the "logger"
        configuration property.
       (Bug #13469)</p></li><li><p>
        Fixed driver trying to call methods that don't exist on older
        and newer versions of Log4j. The fix is not trying to
        auto-detect presence of log4j, too many different incompatible
        versions out there in the wild to do this reliably.
      </p><p>
        If you relied on autodetection before, you will need to add
        "logger=com.mysql.jdbc.log.Log4JLogger" to your JDBC URL to
        enable Log4J usage, or alternatively use the new "CommonsLogger"
        class to take care of this.
       (Bug #13469)</p></li><li><p>
        LogFactory now prepends <code class="literal">com.mysql.jdbc.log</code> to
        the log class name if it cannot be found as specified. This
        enables you to use “<span class="quote">short names</span>” for the built-in
        log factories, for example,
        <code class="literal">logger=CommonsLogger</code> instead of
        <code class="literal">logger=com.mysql.jdbc.log.CommonsLogger</code>.
       (Bug #13469)</p></li><li><p>
        <code class="literal">ResultSet.getShort()</code> for <code class="literal">UNSIGNED
        TINYINT</code> returned wrong values.
       (Bug #11874)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-12"></a>D.5.3.4. Changes in MySQL Connector/J 3.1.12 (30 November 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Process escape tokens in
        <code class="literal">Connection.prepareStatement(...)</code>. You can
        disable this behavior by setting the JDBC URL configuration
        property <code class="literal">processEscapeCodesForPrepStmts</code> to
        <code class="literal">false</code>.
       (Bug #15141)</p></li><li><p>
        Usage advisor complains about unreferenced columns, even though
        they've been referenced.
       (Bug #15065)</p></li><li><p>
        Driver incorrectly closes streams passed as arguments to
        <code class="literal">PreparedStatements</code>. Reverts to legacy
        behavior by setting the JDBC configuration property
        <code class="literal">autoClosePStmtStreams</code> to
        <code class="literal">true</code> (also included in the 3-0-Compat
        configuration “<span class="quote">bundle</span>”).
       (Bug #15024)</p></li><li><p>
        Deadlock while closing server-side prepared statements from
        multiple threads sharing one connection.
       (Bug #14972)</p></li><li><p>
        Unable to initialize character set mapping tables (due to J2EE
        classloader differences).
       (Bug #14938)</p></li><li><p>
        Escape processor replaces quote character in quoted string with
        string delimiter.
       (Bug #14909)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> doesn't return
        <code class="literal">TABLE_NAME</code> correctly.
       (Bug #14815)</p></li><li><p>
        <code class="literal">storesMixedCaseIdentifiers()</code> returns
        <code class="literal">false</code>
       (Bug #14562)</p></li><li><p>
        <code class="literal">storesLowerCaseIdentifiers()</code> returns
        <code class="literal">true</code>
       (Bug #14562)</p></li><li><p>
        <code class="literal">storesMixedCaseQuotedIdentifiers()</code> returns
        <code class="literal">false</code>
       (Bug #14562)</p></li><li><p>
        <code class="literal">storesMixedCaseQuotedIdentifiers()</code> returns
        <code class="literal">true</code>
       (Bug #14562)</p></li><li><p>
        If <code class="literal">lower_case_table_names=0</code> (on server):
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">storesLowerCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
            returns <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseIdentifiers()</code> returns
            <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li></ul></div><p>(Bug #14562)</p></li><li><p>
        <code class="literal">storesUpperCaseIdentifiers()</code> returns
        <code class="literal">false</code>
       (Bug #14562)</p></li><li><p>
        <code class="literal">storesUpperCaseQuotedIdentifiers()</code> returns
        <code class="literal">true</code>
       (Bug #14562)</p></li><li><p>
        If <code class="literal">lower_case_table_names=1</code> (on server):
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">storesLowerCaseIdentifiers()</code> returns
            <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
            returns <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li></ul></div><p>(Bug #14562)</p></li><li><p>
        <code class="literal">storesLowerCaseQuotedIdentifiers()</code> returns
        <code class="literal">true</code>
       (Bug #14562)</p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.stores*Identifiers()</code>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If <code class="literal">lower_case_table_names=0</code> (on server):
          </p><div class="itemizedlist"><ul type="square"><li><p>
                <code class="literal">storesLowerCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
                returns <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseIdentifiers()</code> returns
                <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li></ul></div></li><li><p>
            If <code class="literal">lower_case_table_names=1</code> (on server):
          </p><div class="itemizedlist"><ul type="square"><li><p>
                <code class="literal">storesLowerCaseIdentifiers()</code> returns
                <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
                returns <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li></ul></div></li></ul></div><p>(Bug #14562)</p></li><li><p>
        <code class="literal">storesMixedCaseIdentifiers()</code> returns
        <code class="literal">true</code>
       (Bug #14562)</p></li><li><p>
        <code class="literal">storesLowerCaseQuotedIdentifiers()</code> returns
        <code class="literal">false</code>
       (Bug #14562)</p></li><li><p>
        Java type conversion may be incorrect for
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">MEDIUMINT</code></a>.
       (Bug #14562)</p></li><li><p>
        <code class="literal">storesLowerCaseIdentifiers()</code> returns
        <code class="literal">false</code>
       (Bug #14562)</p></li><li><p>
        Added configuration property
        <code class="literal">useGmtMillisForDatetimes</code> which when set to
        <code class="literal">true</code> causes
        <code class="literal">ResultSet.getDate()</code>,
        <code class="literal">.getTimestamp()</code> to return correct
        millis-since GMT when <code class="literal">.getTime()</code> is called on
        the return value (currently default is <code class="literal">false</code>
        for legacy behavior).
       (Bug #14562)</p></li><li><p>
        Extraneous sleep on <code class="literal">autoReconnect</code>.
       (Bug #13775)</p></li><li><p>
        Reconnect during middle of <code class="literal">executeBatch()</code>
        should not occur if <code class="literal">autoReconnect</code> is enabled.
       (Bug #13255)</p></li><li><p>
        <code class="literal">maxQuerySizeToLog</code> is not respected. Added
        logging of bound values for <code class="literal">execute()</code> phase
        of server-side prepared statements when
        <code class="literal">profileSQL=true</code> as well.
       (Bug #13048)</p></li><li><p>
        OpenOffice expects
        <code class="literal">DBMD.supportsIntegrityEnhancementFacility()</code>
        to return <code class="literal">true</code> if foreign keys are supported
        by the datasource, even though this method also covers support
        for check constraints, which MySQL <span class="emphasis"><em>doesn't</em></span>
        have. Setting the configuration property
        <code class="literal">overrideSupportsIntegrityEnhancementFacility</code>
        to <code class="literal">true</code> causes the driver to return
        <code class="literal">true</code> for this method.
       (Bug #12975)</p></li><li><p>
        Added <code class="literal">com.mysql.jdbc.testsuite.url.default</code>
        system property to set default JDBC url for testsuite (to speed
        up bug resolution when I'm working in Eclipse).
       (Bug #12975)</p></li><li><p>
        <code class="literal">logSlowQueries</code> should give better info.
       (Bug #12230)</p></li><li><p>
        Don't increase timeout for failover/reconnect.
       (Bug #6577)</p></li><li><p>
        Fixed client-side prepared statement bug with embedded
        <code class="literal">?</code> characters inside quoted identifiers (it
        was recognized as a placeholder, when it was not).
      </p></li><li><p>
        Do not permit <code class="literal">executeBatch()</code> for
        <code class="literal">CallableStatements</code> with registered
        <code class="literal">OUT</code>/<code class="literal">INOUT</code> parameters (JDBC
        compliance).
      </p></li><li><p>
        Fall back to platform-encoding for
        <code class="literal">URLDecoder.decode()</code> when parsing driver URL
        properties if the platform doesn't have a two-argument version
        of this method.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-11"></a>D.5.3.5. Changes in MySQL Connector/J 3.1.11 (07 October 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The configuration property <code class="literal">sessionVariables</code>
        now permits you to specify variables that start with the
        “<span class="quote"><code class="literal">@</code></span>” sign.
       (Bug #13453)</p></li><li><p>
        URL configuration parameters do not permit
        “<span class="quote"><code class="literal">&amp;</code></span>” or
        “<span class="quote"><code class="literal">=</code></span>” in their values. The JDBC
        driver now parses configuration parameters as if they are
        encoded using the application/x-www-form-urlencoded format as
        specified by <code class="literal">java.net.URLDecoder</code>
        (<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html" target="_top">http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html</a>).
      </p><p>
        If the “<span class="quote"><code class="literal">%</code></span>” character is present
        in a configuration property, it must now be represented as
        <code class="literal">%25</code>, which is the encoded form of
        “<span class="quote"><code class="literal">%</code></span>” when using
        application/x-www-form-urlencoded encoding.
       (Bug #13453)</p></li><li><p>
        Workaround for Bug #13374:
        <code class="literal">ResultSet.getStatement()</code> on closed result set
        returns <code class="literal">NULL</code> (as per JDBC 4.0 spec, but not
        backward-compatible). Set the connection property
        <code class="literal">retainStatementAfterResultSetClose</code> to
        <code class="literal">true</code> to be able to retrieve a
        <code class="literal">ResultSet</code>'s statement after the
        <code class="literal">ResultSet</code> has been closed using
        <code class="literal">.getStatement()</code> (the default is
        <code class="literal">false</code>, to be JDBC-compliant and to reduce the
        chance that code using JDBC leaks <code class="literal">Statement</code>
        instances).
       (Bug #13277)</p></li><li><p>
        <code class="literal">ResultSetMetaData</code> from
        <code class="literal">Statement.getGeneratedKeys()</code> caused a
        <code class="literal">NullPointerException</code> to be thrown whenever a
        method that required a connection reference was called.
       (Bug #13277)</p></li><li><p>
        Backport of <code class="literal">VAR[BINARY|CHAR] [BINARY]</code> types
        detection from 5.0 branch.
       (Bug #13277)</p></li><li><p>
        Fixed <code class="literal">NullPointerException</code> when converting
        <code class="literal">catalog</code> parameter in many
        <code class="literal">DatabaseMetaDataMethods</code> to
        <code class="literal">byte[]</code>s (for the result set) when the
        parameter is <code class="literal">null</code>. (<code class="literal">null</code>
        is not technically permitted by the JDBC specification, but we
        have historically permitted it).
       (Bug #13277)</p></li><li><p>
        Backport of <code class="literal">Field</code> class,
        <code class="literal">ResultSetMetaData.getColumnClassName()</code>, and
        <code class="literal">ResultSet.getObject(int)</code> changes from 5.0
        branch to fix behavior surrounding <code class="literal">VARCHAR
        BINARY</code>/<a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> and
        related types.
       (Bug #13277)</p></li><li><p>
        Read response in <code class="literal">MysqlIO.sendFileToServer()</code>,
        even if the local file can't be opened, otherwise next query
        issued will fail, because it is reading the response to the
        empty <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> packet sent to the server.
       (Bug #13277)</p></li><li><p>
        When <code class="literal">gatherPerfMetrics</code> is enabled for servers
        older than 4.1.0, a <code class="literal">NullPointerException</code> is
        thrown from the constructor of <code class="literal">ResultSet</code> if
        the query doesn't use any tables.
       (Bug #13043)</p></li><li><p>
        <code class="literal">java.sql.Types.OTHER</code> returned for
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> and
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns when using
        <code class="literal">DatabaseMetaData.getColumns()</code>.
       (Bug #12970)</p></li><li><p>
        <code class="literal">ServerPreparedStatement.getBinding()</code> now
        checks if the statement is closed before attempting to reference
        the list of parameter bindings, to avoid throwing a
        <code class="literal">NullPointerException</code>.
       (Bug #12970)</p></li><li><p>
        Tokenizer for <code class="literal">=</code> in URL properties was causing
        <code class="literal">sessionVariables=....</code> to be parameterized
        incorrectly.
       (Bug #12753)</p></li><li><p>
        <code class="literal">cp1251</code> incorrectly mapped to
        <code class="literal">win1251</code> for servers newer than 4.0.x.
       (Bug #12752)</p></li><li><p>
        <code class="literal">getExportedKeys()</code>
       (Bug #12541)</p></li><li><p>
        Specifying a catalog works as stated in the API docs.
       (Bug #12541)</p></li><li><p>
        Specifying <code class="literal">NULL</code> means that catalog will not
        be used to filter the results (thus all databases will be
        searched), unless you've set
        <code class="literal">nullCatalogMeansCurrent=true</code> in your JDBC URL
        properties.
       (Bug #12541)</p></li><li><p>
        <code class="literal">getIndexInfo()</code>
       (Bug #12541)</p></li><li><p>
        <code class="literal">getProcedures()</code> (and thus indirectly
        <code class="literal">getProcedureColumns()</code>)
       (Bug #12541)</p></li><li><p>
        <code class="literal">getImportedKeys()</code>
       (Bug #12541)</p></li><li><p>
        Specifying <code class="literal">""</code> means “<span class="quote">current</span>”
        catalog, even though this isn't quite JDBC spec compliant, it is
        there for legacy users.
       (Bug #12541)</p></li><li><p>
        <code class="literal">getCrossReference()</code>
       (Bug #12541)</p></li><li><p>
        Added <code class="literal">Connection.isMasterConnection()</code> for
        clients to be able to determine if a multi-host master/slave
        connection is connected to the first host in the list.
       (Bug #12541)</p></li><li><p>
        <code class="literal">getColumns()</code>
       (Bug #12541)</p></li><li><p>
        Handling of catalog argument in
        <code class="literal">DatabaseMetaData.getIndexInfo()</code>, which also
        means changes to the following methods in
        <code class="literal">DatabaseMetaData</code>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">getBestRowIdentifier()</code>
          </p></li><li><p>
            <code class="literal">getColumns()</code>
          </p></li><li><p>
            <code class="literal">getCrossReference()</code>
          </p></li><li><p>
            <code class="literal">getExportedKeys()</code>
          </p></li><li><p>
            <code class="literal">getImportedKeys()</code>
          </p></li><li><p>
            <code class="literal">getIndexInfo()</code>
          </p></li><li><p>
            <code class="literal">getPrimaryKeys()</code>
          </p></li><li><p>
            <code class="literal">getProcedures()</code> (and thus indirectly
            <code class="literal">getProcedureColumns()</code>)
          </p></li><li><p>
            <code class="literal">getTables()</code>
          </p></li></ul></div><p>
        The <code class="literal">catalog</code> argument in all of these methods
        now behaves in the following way:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Specifying <code class="literal">NULL</code> means that catalog will
            not be used to filter the results (thus all databases will
            be searched), unless you've set
            <code class="literal">nullCatalogMeansCurrent=true</code> in your JDBC
            URL properties.
          </p></li><li><p>
            Specifying <code class="literal">""</code> means
            “<span class="quote">current</span>” catalog, even though this isn't quite
            JDBC spec compliant, it is there for legacy users.
          </p></li><li><p>
            Specifying a catalog works as stated in the API docs.
          </p></li><li><p>
            Made <code class="literal">Connection.clientPrepare()</code> available
            from “<span class="quote">wrapped</span>” connections in the
            <code class="literal">jdbc2.optional</code> package (connections built
            by <code class="literal">ConnectionPoolDataSource</code> instances).
          </p></li></ul></div><p>(Bug #12541)</p></li><li><p>
        <code class="literal">getBestRowIdentifier()</code>
       (Bug #12541)</p></li><li><p>
        Made <code class="literal">Connection.clientPrepare()</code> available
        from “<span class="quote">wrapped</span>” connections in the
        <code class="literal">jdbc2.optional</code> package (connections built by
        <code class="literal">ConnectionPoolDataSource</code> instances).
       (Bug #12541)</p></li><li><p>
        <code class="literal">getTables()</code>
       (Bug #12541)</p></li><li><p>
        <code class="literal">getPrimaryKeys()</code>
       (Bug #12541)</p></li><li><p>
        <code class="literal">Connection.prepareCall()</code> is database name
        case-sensitive (on Windows systems).
       (Bug #12417)</p></li><li><p>
        <code class="literal">explainSlowQueries</code> hangs with server-side
        prepared statements.
       (Bug #12229)</p></li><li><p>
        Properties shared between master and slave with replication
        connection.
       (Bug #12218)</p></li><li><p>
        Geometry types not handled with server-side prepared statements.
       (Bug #12104)</p></li><li><p>
        <code class="literal">maxPerformance.properties</code> mis-spells
        “<span class="quote">elideSetAutoCommits</span>”.
       (Bug #11976)</p></li><li><p>
        <code class="literal">ReplicationConnection</code> won't switch to slave,
        throws “<span class="quote">Catalog can't be null</span>” exception.
       (Bug #11879)</p></li><li><p>
        <code class="literal">Pstmt.setObject(...., Types.BOOLEAN)</code> throws
        exception.
       (Bug #11798)</p></li><li><p>
        Escape tokenizer doesn't respect stacked single quotation marks
        for escapes.
       (Bug #11797)</p></li><li><p>
        <code class="literal">GEOMETRY</code> type not recognized when using
        server-side prepared statements.
       (Bug #11797)</p></li><li><p>
        Foreign key information that is quoted is parsed incorrectly
        when <code class="literal">DatabaseMetaData</code> methods use that
        information.
       (Bug #11781)</p></li><li><p>
        The <code class="literal">sendBlobChunkSize</code> property is now clamped
        to <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> with
        consideration of stream buffer size and packet headers to avoid
        <code class="literal">PacketTooBigExceptions</code> when
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> is similar
        in size to the default <code class="literal">sendBlobChunkSize</code>
        which is 1M.
       (Bug #11781)</p></li><li><p>
        <code class="literal">CallableStatement.clearParameters()</code> now
        clears resources associated with
        <code class="literal">INOUT</code>/<code class="literal">OUTPUT</code> parameters as
        well as <code class="literal">INPUT</code> parameters.
       (Bug #11781)</p></li><li><p>
        Fixed regression caused by fix for Bug #11552 that caused driver
        to return incorrect values for unsigned integers when those
        integers where within the range of the positive signed type.
       (Bug #11663)</p></li><li><p>
        Moved source code to Subversion repository.
       (Bug #11663)</p></li><li><p>
        Incorrect generation of testcase scripts for server-side
        prepared statements.
       (Bug #11663)</p></li><li><p>
        Fixed statements generated for testcases missing
        <code class="literal">;</code> for “<span class="quote">plain</span>” statements.
       (Bug #11629)</p></li><li><p>
        Spurious <code class="literal">!</code> on console when character encoding
        is <code class="literal">utf8</code>.
       (Bug #11629)</p></li><li><p>
        <code class="literal">StringUtils.getBytes()</code> doesn't work when
        using multi-byte character encodings and a length in
        <span class="emphasis"><em>characters</em></span> is specified.
       (Bug #11614)</p></li><li><p>
        <code class="literal">DBMD.storesLower/Mixed/UpperIdentifiers()</code>
        reports incorrect values for servers deployed on Windows.
       (Bug #11575)</p></li><li><p>
        Reworked <code class="literal">Field</code> class,
        <code class="literal">*Buffer</code>, and <code class="literal">MysqlIO</code> to be
        aware of field lengths &gt;
        <code class="literal">Integer.MAX_VALUE</code>.
       (Bug #11498)</p></li><li><p>
        Escape processor didn't honor strings demarcated with double
        quotation marks.
       (Bug #11498)</p></li><li><p>
        Updated <code class="literal">DBMD.supportsCorrelatedQueries()</code> to
        return <code class="literal">true</code> for versions &gt; 4.1,
        <code class="literal">supportsGroupByUnrelated()</code> to return
        <code class="literal">true</code> and
        <code class="literal">getResultSetHoldability()</code> to return
        <code class="literal">HOLD_CURSORS_OVER_COMMIT</code>.
       (Bug #11498)</p></li><li><p>
        Lifted restriction of changing streaming parameters with
        server-side prepared statements. As long as
        <code class="literal">all</code> streaming parameters were set before
        execution, <code class="literal">.clearParameters()</code> does not have
        to be called. (due to limitation of client/server protocol,
        prepared statements can not reset
        <span class="emphasis"><em>individual</em></span> stream data on the server side).
       (Bug #11498)</p></li><li><p>
        <code class="literal">ResultSet.moveToCurrentRow()</code> fails to work
        when preceded by a call to
        <code class="literal">ResultSet.moveToInsertRow()</code>.
       (Bug #11190)</p></li><li><p>
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> data corrupted when
        using server-side prepared statements and
        <code class="literal">.setBytes()</code>.
       (Bug #11115)</p></li><li><p>
        <code class="literal">Statement.getWarnings()</code> fails with NPE if
        statement has been closed.
       (Bug #10630)</p></li><li><p>
        Only get <code class="literal">char[]</code> from SQL in
        <code class="literal">PreparedStatement.ParseInfo()</code> when needed.
       (Bug #10630)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-10"></a>D.5.3.6. Changes in MySQL Connector/J 3.1.10 (23 June 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Initial implemention of <code class="literal">ParameterMetadata</code> for
        <code class="literal">PreparedStatement.getParameterMetadata()</code>.
        Only works fully for <code class="literal">CallableStatements</code>, as
        current server-side prepared statements return every parameter
        as a <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> type.
      </p></li><li><p>
        Fixed connecting without a database specified raised an
        exception in <code class="literal">MysqlIO.changeDatabaseTo()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-9"></a>D.5.3.7. Changes in MySQL Connector/J 3.1.9 (22 June 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Production package doesn't include JBoss integration classes.
       (Bug #11411)</p></li><li><p>
        Removed nonsensical “<span class="quote">costly type conversion</span>”
        warnings when using usage advisor.
       (Bug #11411)</p></li><li><p>
        Fixed <code class="literal">PreparedStatement.setClob()</code> not
        accepting <code class="literal">null</code> as a parameter.
       (Bug #11360)</p></li><li><p>
        Connector/J dumping query into <code class="literal">SQLException</code>
        twice.
       (Bug #11360)</p></li><li><p>
        <code class="literal">autoReconnect</code> ping causes exception on
        connection startup.
       (Bug #11259)</p></li><li><p>
        <code class="literal">Connection.setCatalog()</code> is now aware of the
        <code class="literal">useLocalSessionState</code> configuration property,
        which when set to <code class="literal">true</code> will prevent the
        driver from sending <code class="literal">USE ...</code> to the server if
        the requested catalog is the same as the current catalog.
       (Bug #11115)</p></li><li><p>
        <code class="literal">3-0-Compat</code>: Compatibility with Connector/J
        3.0.x functionality
       (Bug #11115)</p></li><li><p>
        <code class="literal">maxPerformance</code>: Maximum performance without
        being reckless
       (Bug #11115)</p></li><li><p>
        <code class="literal">solarisMaxPerformance</code>: Maximum performance
        for Solaris, avoids syscalls where it can
       (Bug #11115)</p></li><li><p>
        Added <code class="literal">maintainTimeStats</code> configuration
        property (defaults to <code class="literal">true</code>), which tells the
        driver whether or not to keep track of the last query time and
        the last successful packet sent to the server's time. If set to
        <code class="literal">false</code>, removes two syscalls per query.
       (Bug #11115)</p></li><li><p>
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> data corrupted when
        using server-side prepared statements and
        <code class="literal">ResultSet.getBytes()</code>.
       (Bug #11115)</p></li><li><p>
        Added the following configuration bundles, use one or many using
        the <code class="literal">useConfigs</code> configuration property:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">maxPerformance</code>: Maximum performance
            without being reckless
          </p></li><li><p>
            <code class="literal">solarisMaxPerformance</code>: Maximum
            performance for Solaris, avoids syscalls where it can
          </p></li><li><p>
            <code class="literal">3-0-Compat</code>: Compatibility with
            Connector/J 3.0.x functionality
          </p></li></ul></div><p>(Bug #11115)</p></li><li><p>
        Try to handle <code class="literal">OutOfMemoryErrors</code> more
        gracefully. Although not much can be done, they will in most
        cases close the connection they happened on so that further
        operations don't run into a connection in some unknown state.
        When an OOM has happened, any further operations on the
        connection will fail with a “<span class="quote">Connection closed</span>”
        exception that will also list the OOM exception as the reason
        for the implicit connection close event.
       (Bug #10850)</p></li><li><p>
        Setting <code class="literal">cachePrepStmts=true</code> now causes the
        <code class="literal">Connection</code> to also cache the check the driver
        performs to determine if a prepared statement can be server-side
        or not, as well as caches server-side prepared statements for
        the lifetime of a connection. As before, the
        <code class="literal">prepStmtCacheSize</code> parameter controls the size
        of these caches.
       (Bug #10850)</p></li><li><p>
        Don't send <code class="literal">COM_RESET_STMT</code> for each execution
        of a server-side prepared statement if it isn't required.
       (Bug #10850)</p></li><li><p>
        0-length streams not sent to server when using server-side
        prepared statements.
       (Bug #10850)</p></li><li><p>
        Driver detects if you're running MySQL-5.0.7 or later, and does
        not scan for <code class="literal">LIMIT ?[,?]</code> in statements being
        prepared, as the server supports those types of queries now.
       (Bug #10850)</p></li><li><p>
        Reorganized directory layout. Sources now are in
        <code class="filename">src</code> folder. Don't pollute parent directory
        when building, now output goes to <code class="filename">./build</code>,
        distribution goes to <code class="filename">./dist</code>.
       (Bug #10496)</p></li><li><p>
        Added support/bug hunting feature that generates
        <code class="filename">.sql</code> test scripts to
        <code class="literal">STDERR</code> when
        <code class="literal">autoGenerateTestcaseScript</code> is set to
        <code class="literal">true</code>.
       (Bug #10496)</p></li><li><p>
        <code class="literal">SQLException</code> is thrown when using property
        <code class="literal">characterSetResults</code> with
        <code class="literal">cp932</code> or <code class="literal">eucjpms</code>.
       (Bug #10496)</p></li><li><p>
        The data type returned for <code class="literal">TINYINT(1)</code> columns
        when <code class="literal">tinyInt1isBit=true</code> (the default) can be
        switched between <code class="literal">Types.BOOLEAN</code> and
        <code class="literal">Types.BIT</code> using the new configuration
        property <code class="literal">transformedBitIsBoolean</code>, which
        defaults to <code class="literal">false</code>. If set to
        <code class="literal">false</code> (the default),
        <code class="literal">DatabaseMetaData.getColumns()</code> and
        <code class="literal">ResultSetMetaData.getColumnType()</code> will return
        <code class="literal">Types.BOOLEAN</code> for
        <code class="literal">TINYINT(1)</code> columns. If
        <code class="literal">true</code>, <code class="literal">Types.BOOLEAN</code> will
        be returned instead. Regardless of this configuration property,
        if <code class="literal">tinyInt1isBit</code> is enabled, columns with the
        type <code class="literal">TINYINT(1)</code> will be returned as
        <code class="literal">java.lang.Boolean</code> instances from
        <code class="literal">ResultSet.getObject(...)</code>, and
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> will
        return <code class="literal">java.lang.Boolean</code>.
       (Bug #10485)</p></li><li><p>
        <code class="literal">SQLException</code> thrown when retrieving
        <code class="literal">YEAR(2)</code> with
        <code class="literal">ResultSet.getString()</code>. The driver will now
        always treat <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> types as
        <code class="literal">java.sql.Dates</code> and return the correct values
        for <code class="literal">getString()</code>. Alternatively, the
        <code class="literal">yearIsDateType</code> connection property can be set
        to <code class="literal">false</code> and the values will be treated as
        <code class="literal">SHORT</code>s.
       (Bug #10485)</p></li><li><p>
        Driver doesn't support <code class="literal">{?=CALL(...)}</code> for
        calling stored functions. This involved adding support for
        function retrieval to
        <code class="literal">DatabaseMetaData.getProcedures()</code> and
        <code class="literal">getProcedureColumns()</code> as well.
       (Bug #10310)</p></li><li><p>
        Unsigned <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a> treated as
        signed for <code class="literal">ResultSet.getInt()</code>, fixed all
        cases for <code class="literal">UNSIGNED</code> integer values and
        server-side prepared statements, as well as
        <code class="literal">ResultSet.getObject()</code> for <code class="literal">UNSIGNED
        TINYINT</code>.
       (Bug #10156)</p></li><li><p>
        Made <code class="literal">ServerPreparedStatement.asSql()</code> work
        correctly so auto-explain functionality would work with
        server-side prepared statements.
       (Bug #10155)</p></li><li><p>
        Double quotation marks not recognized when parsing client-side
        prepared statements.
       (Bug #10155)</p></li><li><p>
        Made JDBC2-compliant wrappers public to enable access to vendor
        extensions.
       (Bug #10155)</p></li><li><p>
        <code class="literal">DatabaseMetaData.supportsMultipleOpenResults()</code>
        now returns <code class="literal">true</code>. The driver has supported
        this for some time, DBMD just missed that fact.
       (Bug #10155)</p></li><li><p>
        Cleaned up logging of profiler events, moved code to dump a
        profiler event as a string to
        <code class="literal">com.mysql.jdbc.log.LogUtils</code> so that third
        parties can use it.
       (Bug #10155)</p></li><li><p>
        Made <code class="literal">enableStreamingResults()</code> visible on
        <code class="literal">com.mysql.jdbc.jdbc2.optional.StatementWrapper</code>.
       (Bug #10155)</p></li><li><p>
        Actually write manifest file to correct place so it ends up in
        the binary jar file.
       (Bug #10144)</p></li><li><p>
        Added <code class="literal">createDatabaseIfNotExist</code> property
        (default is <code class="literal">false</code>), which will cause the
        driver to ask the server to create the database specified in the
        URL if it doesn't exist. You must have the appropriate
        privileges for database creation for this to work.
       (Bug #10144)</p></li><li><p>
        Memory leak in <code class="literal">ServerPreparedStatement</code> if
        <code class="literal">serverPrepare()</code> fails.
       (Bug #10144)</p></li><li><p>
        <code class="literal">com.mysql.jdbc.PreparedStatement.ParseInfo</code>
        does unnecessary call to <code class="literal">toCharArray()</code>.
       (Bug #9064)</p></li><li><p>
        Driver now correctly uses CP932 if available on the server for
        Windows-31J, CP932 and MS932 java encoding names, otherwise it
        resorts to SJIS, which is only a close approximation. Currently
        only MySQL-5.0.3 and newer (and MySQL-4.1.12 or .13, depending
        on when the character set gets backported) can reliably support
        any variant of CP932.
      </p></li><li><p>
        Overhaul of character set configuration, everything now lives in
        a properties file.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-8"></a>D.5.3.8. Changes in MySQL Connector/J 3.1.8 (14 April 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Should accept <code class="literal">null</code> for catalog (meaning use
        current) in DBMD methods, even though it is not JDBC-compliant
        for legacy's sake. Disable by setting connection property
        <code class="literal">nullCatalogMeansCurrent</code> to
        <code class="literal">false</code> (which will be the default value in C/J
        3.2.x).
       (Bug #9917)</p></li><li><p>
        Fixed driver not returning <code class="literal">true</code> for
        <code class="literal">-1</code> when
        <code class="literal">ResultSet.getBoolean()</code> was called on result
        sets returned from server-side prepared statements.
       (Bug #9778)</p></li><li><p>
        Added a <code class="filename">Manifest.MF</code> file with
        implementation information to the <code class="filename">.jar</code>
        file.
       (Bug #9778)</p></li><li><p>
        More tests in <code class="literal">Field.isOpaqueBinary()</code> to
        distinguish opaque binary (that is, fields with type
        <code class="literal">CHAR(n)</code> and <code class="literal">CHARACTER SET
        BINARY</code>) from output of various scalar and aggregate
        functions that return strings.
       (Bug #9778)</p></li><li><p>
        <code class="literal">DBMD.getTables()</code> shouldn't return tables if
        views are asked for, even if the database version doesn't
        support views.
       (Bug #9778)</p></li><li><p>
        Should accept <code class="literal">null</code> for name patterns in DBMD
        (meaning “<span class="quote"><code class="literal">%</code></span>”), even though it
        isn't JDBC compliant, for legacy's sake. Disable by setting
        connection property <code class="literal">nullNamePatternMatchesAll</code>
        to <code class="literal">false</code> (which will be the default value in
        C/J 3.2.x).
       (Bug #9769)</p></li><li><p>
        The performance metrics feature now gathers information about
        number of tables referenced in a SELECT.
       (Bug #9704)</p></li><li><p>
        The logging system is now automatically configured. If the value
        has been set by the user, using the URL property
        <code class="literal">logger</code> or the system property
        <code class="literal">com.mysql.jdbc.logger</code>, then use that,
        otherwise, autodetect it using the following steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Log4j, if it is available,
          </p></li><li><p>
            Then JDK1.4 logging,
          </p></li><li><p>
            Then fallback to our <code class="literal">STDERR</code> logging.
          </p></li></ol></div><p>(Bug #9704)</p></li><li><p>
        <code class="literal">Statement.getMoreResults()</code> could throw NPE
        when existing result set was <code class="literal">.close()</code>d.
       (Bug #9704)</p></li><li><p>
        Stored procedures with <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a>
        parameters with storage specifications that contained
        “<span class="quote"><code class="literal">,</code></span>” in them would fail.
       (Bug #9682)</p></li><li><p>
        <code class="literal">PreparedStatement.setObject(int, Object, int type, int
        scale)</code> now uses scale value for
        <code class="literal">BigDecimal</code> instances.
       (Bug #9682)</p></li><li><p>
        Added support for the c3p0 connection pool's
        (<a href="http://c3p0.sf.net/" target="_top">http://c3p0.sf.net/</a>) validation/connection
        checker interface which uses the lightweight
        <code class="literal">COM_PING</code> call to the server if available. To
        use it, configure your c3p0 connection pool's
        <code class="literal">connectionTesterClassName</code> property to use
        <code class="literal">com.mysql.jdbc.integration.c3p0.MysqlConnectionTester</code>.
       (Bug #9320)</p></li><li><p>
        <code class="literal">PreparedStatement.getMetaData()</code> inserts blank
        row in database under certain conditions when not using
        server-side prepared statements.
       (Bug #9320)</p></li><li><p>
        Better detection of <code class="literal">LIMIT</code> inside/outside of
        quoted strings so that the driver can more correctly determine
        whether a prepared statement can be prepared on the server or
        not.
       (Bug #9320)</p></li><li><p>
        <code class="literal">Connection.canHandleAsPreparedStatement()</code> now
        makes “<span class="quote">best effort</span>” to distinguish
        <code class="literal">LIMIT</code> clauses with placeholders in them from
        ones without to have fewer false positives when generating
        work-arounds for statements the server cannot currently handle
        as server-side prepared statements.
       (Bug #9320)</p></li><li><p>
        Fixed <code class="filename">build.xml</code> to not compile
        <code class="literal">log4j</code> logging if <code class="literal">log4j</code> not
        available.
       (Bug #9320)</p></li><li><p>
        Added finalizers to <code class="literal">ResultSet</code> and
        <code class="literal">Statement</code> implementations to be JDBC
        spec-compliant, which requires that if not explicitly closed,
        these resources should be closed upon garbage collection.
       (Bug #9319)</p></li><li><p>
        Stored procedures with same name in different databases confuse
        the driver when it tries to determine parameter counts/types.
       (Bug #9319)</p></li><li><p>
        A continuation of Bug #8868, where functions used in queries
        that should return nonstring types when resolved by temporary
        tables suddenly become opaque binary strings (work-around for
        server limitation). Also fixed fields with type of
        <code class="literal">CHAR(n) CHARACTER SET BINARY</code> to return
        correct/matching classes for
        <code class="literal">RSMD.getColumnClassName()</code> and
        <code class="literal">ResultSet.getObject()</code>.
       (Bug #9236)</p></li><li><p>
        Cannot use <code class="literal">UTF-8</code> for characterSetResults
        configuration property.
       (Bug #9206)</p></li><li><p>
        <code class="literal">PreparedStatement.addBatch()</code> doesn't work
        with server-side prepared statements and streaming
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> data.
       (Bug #9040)</p></li><li><p>
        <code class="literal">ServerPreparedStatements</code> now correctly
        “<span class="quote">stream</span>”
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>/<code class="literal">CLOB</code> data
        to the server. You can configure the threshold chunk size using
        the JDBC URL property <code class="literal">blobSendChunkSize</code> (the
        default is 1MB).
       (Bug #8868)</p></li><li><p>
        <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> queries returned as
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>s from
        <code class="literal">getObject()</code>.
       (Bug #8868)</p></li><li><p>
        Server-side session variables can be preset at connection time
        by passing them as a comma-delimited list for the connection
        property <code class="literal">sessionVariables</code>.
       (Bug #8868)</p></li><li><p>
        <code class="literal">BlobFromLocator</code> now uses correct identifier
        quoting when generating prepared statements.
       (Bug #8868)</p></li><li><p>
        Fixed regression in <code class="literal">ping()</code> for users using
        <code class="literal">autoReconnect=true</code>.
       (Bug #8868)</p></li><li><p>
        Check for empty strings (<code class="literal">''</code>) when converting
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>/<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
        column data to numbers, throw exception if
        <code class="literal">emptyStringsConvertToZero</code> configuration
        property is set to <code class="literal">false</code> (for
        backward-compatibility with 3.0, it is now set to
        <code class="literal">true</code> by default, but will most likely default
        to <code class="literal">false</code> in 3.2).
       (Bug #8803)</p></li><li><p>
        <code class="literal">DATA_TYPE</code> column from
        <code class="literal">DBMD.getBestRowIdentifier()</code> causes
        <code class="literal">ArrayIndexOutOfBoundsException</code> when accessed
        (and in fact, didn't return any value).
       (Bug #8803)</p></li><li><p>
        <code class="literal">DBMD.supportsMixedCase*Identifiers()</code> returns
        wrong value on servers running on case-sensitive file systems.
       (Bug #8800)</p></li><li><p>
        <code class="literal">DBMD.supportsResultSetConcurrency()</code> not
        returning <code class="literal">true</code> for forward-only/read-only
        result sets (we obviously support this).
       (Bug #8792)</p></li><li><p>
        Fixed <code class="literal">ResultSet.getTime()</code> on a
        <code class="literal">NULL</code> value for server-side prepared
        statements throws NPE.
      </p></li><li><p>
        Made <code class="literal">Connection.ping()</code> a public method.
      </p></li><li><p>
        Added support for new precision-math
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> type in MySQL 5.0.3 and
        up.
      </p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.getTables()</code> returning
        views when they were not asked for as one of the requested table
        types.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-7"></a>D.5.3.9. Changes in MySQL Connector/J 3.1.7 (18 February 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">PreparedStatements</code> not creating streaming
        result sets.
       (Bug #8487)</p></li><li><p>
        Don't pass <code class="literal">NULL</code> to
        <code class="literal">String.valueOf()</code> in
        <code class="literal">ResultSet.getNativeConvertToString()</code>, as it
        stringifies it (that is, returns <code class="literal">null</code>), which
        is not correct for the method in question.
       (Bug #8487)</p></li><li><p>
        Fixed NPE in <code class="literal">ResultSet.realClose()</code> when using
        usage advisor and result set was already closed.
       (Bug #8428)</p></li><li><p>
        <code class="literal">ResultSet.getString()</code> doesn't maintain format
        stored on server, bug fix only enabled when
        <code class="literal">noDatetimeStringSync</code> property is set to
        <code class="literal">true</code> (the default is
        <code class="literal">false</code>).
       (Bug #8428)</p></li><li><p>
        Added support for <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> type in
        MySQL-5.0.3. The driver will treat <code class="literal">BIT(1-8)</code>
        as the JDBC standard <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> type
        (which maps to <code class="literal">java.lang.Boolean</code>), as the
        server does not currently send enough information to determine
        the size of a bitfield when &lt; 9 bits are declared.
        <code class="literal">BIT(&gt;9)</code> will be treated as
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>, and will return
        <code class="literal">byte[]</code> when <code class="literal">getObject()</code> is
        called.
       (Bug #8424)</p></li><li><p>
        Added <code class="literal">useLocalSessionState</code> configuration
        property, when set to <code class="literal">true</code> the JDBC driver
        trusts that the application is well-behaved and only sets
        autocommit and transaction isolation levels using the methods
        provided on <code class="literal">java.sql.Connection</code>, and
        therefore can manipulate these values in many cases without
        incurring round-trips to the database server.
       (Bug #8424)</p></li><li><p>
        Added <code class="literal">enableStreamingResults()</code> to
        <code class="literal">Statement</code> for connection pool implementations
        that check <code class="literal">Statement.setFetchSize()</code> for
        specification-compliant values. Call
        <code class="literal">Statement.setFetchSize(&gt;=0)</code> to disable the
        streaming results for that statement.
       (Bug #8424)</p></li><li><p>
        <code class="literal">ResultSet.getBigDecimal()</code> throws exception
        when rounding would need to occur to set scale. The driver now
        chooses a rounding mode of “<span class="quote">half up</span>” if nonrounding
        <code class="literal">BigDecimal.setScale()</code> fails.
       (Bug #8424)</p></li><li><p>
        Fixed synchronization issue with
        <code class="literal">ServerPreparedStatement.serverPrepare()</code> that
        could cause deadlocks/crashes if connection was shared between
        threads.
       (Bug #8096)</p></li><li><p>
        Emulated locators corrupt binary data when using server-side
        prepared statements.
       (Bug #8096)</p></li><li><p>
        Infinite recursion when “<span class="quote">falling back</span>” to master in
        failover configuration.
       (Bug #7952)</p></li><li><p>
        Disable multi-statements (if enabled) for MySQL-4.1 versions
        prior to version 4.1.10 if the query cache is enabled, as the
        server returns wrong results in this configuration.
       (Bug #7952)</p></li><li><p>
        Removed <code class="literal">dontUnpackBinaryResults</code>
        functionality, the driver now always stores results from
        server-side prepared statements as is from the server and
        unpacks them on demand.
       (Bug #7952)</p></li><li><p>
        Fixed duplicated code in
        <code class="literal">configureClientCharset()</code> that prevented
        <code class="literal">useOldUTF8Behavior=true</code> from working
        properly.
       (Bug #7952)</p></li><li><p>
        Added <code class="literal">holdResultsOpenOverStatementClose</code>
        property (default is <code class="literal">false</code>), that keeps
        result sets open over statement.close() or new execution on same
        statement (suggested by Kevin Burton).
       (Bug #7715)</p></li><li><p>
        Detect new <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> variable in
        string form (it used to be integer) and adjust quoting method
        for strings appropriately.
       (Bug #7715)</p></li><li><p>
        Timestamps converted incorrectly to strings with server-side
        prepared statements and updatable result sets.
       (Bug #7715)</p></li><li><p>
        Timestamp key column data needed <code class="literal">_binary</code>
        stripped for <code class="literal">UpdatableResultSet.refreshRow()</code>.
       (Bug #7686)</p></li><li><p>
        Choose correct “<span class="quote">direction</span>” to apply time
        adjustments when both client and server are in GMT time zone
        when using <code class="literal">ResultSet.get(..., cal)</code> and
        <code class="literal">PreparedStatement.set(...., cal)</code>.
       (Bug #4718)</p></li><li><p>
        Remove <code class="literal">_binary</code> introducer from parameters
        used as in/out parameters in
        <code class="literal">CallableStatement</code>.
       (Bug #4718)</p></li><li><p>
        Always return <code class="literal">byte[]</code>s for output parameters
        registered as <code class="literal">*BINARY</code>.
       (Bug #4718)</p></li><li><p>
        By default, the driver now scans SQL you are preparing using all
        variants of <code class="literal">Connection.prepareStatement()</code> to
        determine if it is a supported type of statement to prepare on
        the server side, and if it is not supported by the server, it
        instead prepares it as a client-side emulated prepared
        statement. You can disable this by passing
        <code class="literal">emulateUnsupportedPstmts=false</code> in your JDBC
        URL.
       (Bug #4718)</p></li><li><p>
        Added <code class="literal">dontTrackOpenResources</code> option (default
        is <code class="literal">false</code>, to be JDBC compliant), which helps
        with memory use for nonwell-behaved apps (that is, applications
        that don't close <code class="literal">Statement</code> objects when they
        should).
       (Bug #4718)</p></li><li><p>
        Send correct value for “<span class="quote">boolean</span>”
        <code class="literal">true</code> to server for
        <code class="literal">PreparedStatement.setObject(n, "true",
        Types.BIT)</code>.
       (Bug #4718)</p></li><li><p>
        Fixed bug with Connection not caching statements from
        <code class="literal">prepareStatement()</code> when the statement wasn't
        a server-side prepared statement.
       (Bug #4718)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-6"></a>D.5.3.10. Changes in MySQL Connector/J 3.1.6 (23 December 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">DBMD.getProcedures()</code> doesn't respect catalog
        parameter.
       (Bug #7026)</p></li><li><p>
        Fixed hang on <code class="literal">SocketInputStream.read()</code> with
        <code class="literal">Statement.setMaxRows()</code> and multiple result
        sets when driver has to truncate result set directly, rather
        than tacking a <code class="literal">LIMIT
        <em class="replaceable"><code>n</code></em></code> on the end of it.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-5"></a>D.5.3.11. Changes in MySQL Connector/J 3.1.5 (02 December 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Use 1MB packet for sending file for
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a> if that is &lt;
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> on server.
       (Bug #6537)</p></li><li><p>
        <code class="literal">SUM()</code> on
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> with server-side prepared
        statement ignores scale if zero-padding is needed (this ends up
        being due to conversion to <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a>
        by server, which when converted to a string to parse into
        <code class="literal">BigDecimal</code>, loses all “<span class="quote">padding</span>”
        zeros).
       (Bug #6537)</p></li><li><p>
        Use
        <code class="literal">DatabaseMetaData.getIdentifierQuoteString()</code>
        when building DBMD queries.
       (Bug #6537)</p></li><li><p>
        Use our own implementation of buffered input streams to get
        around blocking behavior of
        <code class="literal">java.io.BufferedInputStream</code>. Disable this
        with <code class="literal">useReadAheadInput=false</code>.
       (Bug #6399)</p></li><li><p>
        Make auto-deserialization of
        <code class="literal">java.lang.Objects</code> stored in
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns configurable using
        <code class="literal">autoDeserialize</code> property (defaults to
        <code class="literal">false</code>).
       (Bug #6399)</p></li><li><p>
        <code class="literal">ResultSetMetaData.getColumnDisplaySize()</code>
        returns incorrect values for multi-byte charsets.
       (Bug #6399)</p></li><li><p>
        Re-work <code class="literal">Field.isOpaqueBinary()</code> to detect
        <code class="literal">CHAR(<em class="replaceable"><code>n</code></em>) CHARACTER SET
        BINARY</code> to support fixed-length binary fields for
        <code class="literal">ResultSet.getObject()</code>.
       (Bug #6399)</p></li><li><p>
        Failing to connect to the server when one of the addresses for
        the given host name is IPV6 (which the server does not yet bind
        on). The driver now loops through <span class="emphasis"><em>all</em></span> IP
        addresses for a given host, and stops on the first one that
        <code class="literal">accepts()</code> a
        <code class="literal">socket.connect()</code>.
       (Bug #6348)</p></li><li><p>
        Removed unwanted new <code class="literal">Throwable()</code> in
        <code class="literal">ResultSet</code> constructor due to bad merge
        (caused a new object instance that was never used for every
        result set created). Found while profiling for Bug #6359.
       (Bug #6225)</p></li><li><p>
        <code class="literal">ServerSidePreparedStatement</code> allocating
        short-lived objects unnecessarily.
       (Bug #6225)</p></li><li><p>
        Use null-safe-equals for key comparisons in updatable result
        sets.
       (Bug #6225)</p></li><li><p>
        Fixed too-early creation of <code class="literal">StringBuffer</code> in
        <code class="literal">EscapeProcessor.escapeSQL()</code>, also return
        <code class="literal">String</code> when escaping not needed (to avoid
        unnecessary object allocations). Found while profiling for Bug
        #6359.
       (Bug #6225)</p></li><li><p>
        <code class="literal">UNSIGNED BIGINT</code> unpacked incorrectly from
        server-side prepared statement result sets.
       (Bug #5729)</p></li><li><p>
        Added experimental configuration property
        <code class="literal">dontUnpackBinaryResults</code>, which delays
        unpacking binary result set values until they're asked for, and
        only creates object instances for nonnumeric values (it is set
        to <code class="literal">false</code> by default). For some usecase/jvm
        combinations, this is friendlier on the garbage collector.
       (Bug #5706)</p></li><li><p>
        Don't throw exceptions for
        <code class="literal">Connection.releaseSavepoint()</code>.
       (Bug #5706)</p></li><li><p>
        Inefficient detection of pre-existing string instances in
        <code class="literal">ResultSet.getNativeString()</code>.
       (Bug #5706)</p></li><li><p>
        Use a per-session <code class="literal">Calendar</code> instance by
        default when decoding dates from
        <code class="literal">ServerPreparedStatements</code> (set to old, less
        performant behavior by setting property
        <code class="literal">dynamicCalendars=true</code>).
       (Bug #5706)</p></li><li><p>
        Fixed batched updates with server prepared statements weren't
        looking if the types had changed for a given batched set of
        parameters compared to the previous set, causing the server to
        return the error “<span class="quote">Wrong arguments to
        mysql_stmt_execute()</span>”.
       (Bug #5235)</p></li><li><p>
        Handle case when string representation of timestamp contains
        trailing “<span class="quote"><code class="literal">.</code></span>” with no numbers
        following it.
       (Bug #5235)</p></li><li><p>
        Server-side prepared statements did not honor
        <code class="literal">zeroDateTimeBehavior</code> property, and would
        cause class-cast exceptions when using
        <code class="literal">ResultSet.getObject()</code>, as the all-zero string
        was always returned.
       (Bug #5235)</p></li><li><p>
        Fix comparisons made between string constants and dynamic
        strings that are converted with either
        <code class="literal">toUpperCase()</code> or
        <code class="literal">toLowerCase()</code> to use
        <code class="literal">Locale.ENGLISH</code>, as some locales
        “<span class="quote">override</span>” case rules for English. Also use
        <code class="literal">StringUtils.indexOfIgnoreCase()</code> instead of
        <code class="literal">.toUpperCase().indexOf()</code>, avoids creating a
        very short-lived transient <code class="literal">String</code> instance.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-4"></a>D.5.3.12. Changes in MySQL Connector/J 3.1.4 (04 September 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">ServerPreparedStatement</code> to read
        prepared statement metadata off the wire, even though it is
        currently a placeholder instead of using
        <code class="literal">MysqlIO.clearInputStream()</code> which didn't work
        at various times because data wasn't available to read from the
        server yet. This fixes sporadic errors users were having with
        <code class="literal">ServerPreparedStatements</code> throwing
        <code class="literal">ArrayIndexOutOfBoundExceptions</code>.
       (Bug #5032)</p></li><li><p>
        Added three ways to deal with all-zero datetimes when reading
        them from a <code class="literal">ResultSet</code>:
        <code class="literal">exception</code> (the default), which throws an
        <code class="literal">SQLException</code> with an SQLState of
        <code class="literal">S1009</code>; <code class="literal">convertToNull</code>,
        which returns <code class="literal">NULL</code> instead of the date; and
        <code class="literal">round</code>, which rounds the date to the nearest
        closest value which is <code class="literal">'0001-01-01'</code>.
       (Bug #5032)</p></li><li><p>
        The driver is more strict about truncation of numerics on
        <code class="literal">ResultSet.get*()</code>, and will throw an
        <code class="literal">SQLException</code> when truncation is detected. You
        can disable this by setting
        <code class="literal">jdbcCompliantTruncation</code> to
        <code class="literal">false</code> (it is enabled by default, as this
        functionality is required for JDBC compliance).
       (Bug #5032)</p></li><li><p>
        You can now use URLs in
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a> statements, and the driver will use Java's
        built-in handlers for retrieving the data and sending it to the
        server. This feature is not enabled by default, you must set the
        <code class="literal">allowUrlInLocalInfile</code> connection property to
        <code class="literal">true</code>.
       (Bug #5032)</p></li><li><p>
        <code class="literal">ResultSet.getObject()</code> doesn't return type
        <code class="literal">Boolean</code> for pseudo-bit types from prepared
        statements on 4.1.x (shortcut for avoiding extra type conversion
        when using binary-encoded result sets obscured test in
        <code class="literal">getObject()</code> for “<span class="quote">pseudo</span>” bit
        type).
       (Bug #5032)</p></li><li><p>
        Use <code class="literal">com.mysql.jdbc.Message</code>'s classloader when
        loading resource bundle, should fix sporadic issues when the
        caller's classloader can't locate the resource bundle.
       (Bug #5032)</p></li><li><p>
        <code class="literal">ServerPreparedStatements</code> dealing with return
        of <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> type don't work.
       (Bug #5012)</p></li><li><p>
        Track packet sequence numbers if
        <code class="literal">enablePacketDebug=true</code>, and throw an
        exception if packets received out-of-order.
       (Bug #4689)</p></li><li><p>
        <code class="literal">ResultSet.wasNull()</code> does not work for
        primitives if a previous <code class="literal">null</code> was returned.
       (Bug #4689)</p></li><li><p>
        Optimized integer number parsing, enable “<span class="quote">old</span>”
        slower integer parsing using JDK classes using
        <code class="literal">useFastIntParsing=false</code> property.
       (Bug #4642)</p></li><li><p>
        Added <code class="literal">useOnlyServerErrorMessages</code> property,
        which causes message text in exceptions generated by the server
        to only contain the text sent by the server (as opposed to the
        SQLState's “<span class="quote">standard</span>” description, followed by the
        server's error message). This property is set to
        <code class="literal">true</code> by default.
       (Bug #4642)</p></li><li><p>
        <code class="literal">ServerPreparedStatement.execute*()</code> sometimes
        threw <code class="literal">ArrayIndexOutOfBoundsException</code> when
        unpacking field metadata.
       (Bug #4642)</p></li><li><p>
        Connector/J 3.1.3 beta does not handle integers correctly
        (caused by changes to support unsigned reads in
        <code class="literal">Buffer.readInt()</code> -&gt;
        <code class="literal">Buffer.readShort()</code>).
       (Bug #4510)</p></li><li><p>
        Added support in <code class="literal">DatabaseMetaData.getTables()</code>
        and <code class="literal">getTableTypes()</code> for views, which are now
        available in MySQL server 5.0.x.
       (Bug #4510)</p></li><li><p>
        <code class="literal">ResultSet.getObject()</code> returns wrong type for
        strings when using prepared statements.
       (Bug #4482)</p></li><li><p>
        Calling <code class="literal">MysqlPooledConnection.close()</code> twice
        (even though an application error), caused NPE. Fixed.
       (Bug #4482)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-3"></a>D.5.3.13. Changes in MySQL Connector/J 3.1.3 (07 July 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Support new time zone variables in MySQL-4.1.3 when
        <code class="literal">useTimezone=true</code>.
       (Bug #4311)</p></li><li><p>
        Error in retrieval of <code class="literal">mediumint</code> column with
        prepared statements and binary protocol.
       (Bug #4311)</p></li><li><p>
        Support for unsigned numerics as return types from prepared
        statements. This also causes a change in
        <code class="literal">ResultSet.getObject()</code> for the <code class="literal">bigint
        unsigned</code> type, which used to return
        <code class="literal">BigDecimal</code> instances, it now returns
        instances of <code class="literal">java.lang.BigInteger</code>.
       (Bug #4311)</p></li><li><p>
        Externalized more messages (on-going effort).
       (Bug #4119)</p></li><li><p>
        Null bitmask sent for server-side prepared statements was
        incorrect.
       (Bug #4119)</p></li><li><p>
        Added constants for MySQL error numbers (publicly accessible,
        see <code class="literal">com.mysql.jdbc.MysqlErrorNumbers</code>), and
        the ability to generate the mappings of vendor error codes to
        SQLStates that the driver uses (for documentation purposes).
       (Bug #4119)</p></li><li><p>
        Added packet debugging code (see the
        <code class="literal">enablePacketDebug</code> property documentation).
       (Bug #4119)</p></li><li><p>
        Use SQL Standard SQL states by default, unless
        <code class="literal">useSqlStateCodes</code> property is set to
        <code class="literal">false</code>.
       (Bug #4119)</p></li><li><p>
        Mangle output parameter names for
        <code class="literal">CallableStatements</code> so they will not clash
        with user variable names.
      </p></li><li><p>
        Added support for <code class="literal">INOUT</code> parameters in
        <code class="literal">CallableStatements</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-2"></a>D.5.3.14. Changes in MySQL Connector/J 3.1.2 (09 June 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Don't enable server-side prepared statements for server version
        5.0.0 or 5.0.1, as they aren't compatible with the '4.1.2+'
        style that the driver uses (the driver expects information to
        come back that isn't there, so it hangs).
       (Bug #3804)</p></li><li><p>
        <code class="literal">getWarnings()</code> returns
        <code class="literal">SQLWarning</code> instead of
        <code class="literal">DataTruncation</code>.
       (Bug #3804)</p></li><li><p>
        <code class="literal">getProcedureColumns()</code> doesn't work with
        wildcards for procedure name.
       (Bug #3540)</p></li><li><p>
        <code class="literal">getProcedures()</code> does not return any
        procedures in result set.
       (Bug #3539)</p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.getProcedures()</code> when
        run on MySQL-5.0.0 (output of <a href="sql-syntax.html#show-procedure-status" title="12.7.5.29. SHOW PROCEDURE STATUS Syntax"><code class="literal">SHOW
        PROCEDURE STATUS</code></a> changed between 5.0.0 and 5.0.1.
       (Bug #3520)</p></li><li><p>
        Added <code class="literal">connectionCollation</code> property to cause
        driver to issue <code class="literal">set collation_connection=...</code>
        query on connection init if default collation for given charset
        is not appropriate.
       (Bug #3520)</p></li><li><p>
        <code class="literal">DBMD.getSQLStateType()</code> returns incorrect
        value.
       (Bug #3520)</p></li><li><p>
        Correctly map output parameters to position given in
        <code class="literal">prepareCall()</code> versus. order implied during
        <code class="literal">registerOutParameter()</code>.
       (Bug #3146)</p></li><li><p>
        Cleaned up detection of server properties.
       (Bug #3146)</p></li><li><p>
        Correctly detect initial character set for servers &gt;= 4.1.0.
       (Bug #3146)</p></li><li><p>
        Support placeholder for parameter metadata for server &gt;=
        4.1.2.
       (Bug #3146)</p></li><li><p>
        Added <code class="literal">gatherPerformanceMetrics</code> property,
        along with properties to control when/where this info gets
        logged (see docs for more info).
      </p></li><li><p>
        Fixed case when no parameters could cause a
        <code class="literal">NullPointerException</code> in
        <code class="literal">CallableStatement.setOutputParameters()</code>.
      </p></li><li><p>
        Enabled callable statement caching using
        <code class="literal">cacheCallableStmts</code> property.
      </p></li><li><p>
        Fixed sending of split packets for large queries, enabled nio
        ability to send large packets as well.
      </p></li><li><p>
        Added <code class="literal">.toString()</code> functionality to
        <code class="literal">ServerPreparedStatement</code>, which should help if
        you're trying to debug a query that is a prepared statement (it
        shows SQL as the server would process).
      </p></li><li><p>
        Added <code class="literal">logSlowQueries</code> property, along with
        <code class="literal">slowQueriesThresholdMillis</code> property to
        control when a query should be considered “<span class="quote">slow.</span>”
      </p></li><li><p>
        Removed wrapping of exceptions in
        <code class="literal">MysqlIO.changeUser()</code>.
      </p></li><li><p>
        Fixed stored procedure parameter parsing info when size was
        specified for a parameter (for example,
        <code class="literal">char()</code>, <code class="literal">varchar()</code>).
      </p></li><li><p>
        <code class="literal">ServerPreparedStatements</code> weren't actually
        de-allocating server-side resources when
        <code class="literal">.close()</code> was called.
      </p></li><li><p>
        Fixed case when no output parameters specified for a stored
        procedure caused a bogus query to be issued to retrieve out
        parameters, leading to a syntax error from the server.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-1"></a>D.5.3.15. Changes in MySQL Connector/J 3.1.1 (14 February 2004, alpha)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Use DocBook version of docs for shipped versions of drivers.
       (Bug #2671)</p></li><li><p>
        <code class="literal">NULL</code> fields were not being encoded correctly
        in all cases in server-side prepared statements.
       (Bug #2671)</p></li><li><p>
        Fixed rare buffer underflow when writing numbers into buffers
        for sending prepared statement execution requests.
       (Bug #2671)</p></li><li><p>
        Fixed <code class="literal">ConnectionProperties</code> that weren't
        properly exposed through accessors, cleaned up
        <code class="literal">ConnectionProperties</code> code.
       (Bug #2623)</p></li><li><p>
        Class-cast exception when using scrolling result sets and
        server-side prepared statements.
       (Bug #2623)</p></li><li><p>
        Merged unbuffered input code from 3.0.
       (Bug #2623)</p></li><li><p>
        Enabled streaming of result sets from server-side prepared
        statements.
       (Bug #2606)</p></li><li><p>
        Server-side prepared statements were not returning data type
        <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> correctly.
       (Bug #2606)</p></li><li><p>
        Fixed charset conversion issue in
        <code class="literal">getTables()</code>.
       (Bug #2502)</p></li><li><p>
        Implemented multiple result sets returned from a statement or
        stored procedure.
       (Bug #2502)</p></li><li><p>
        Implemented <code class="literal">Connection.prepareCall()</code>, and
        <code class="literal">DatabaseMetaData</code>.
        <code class="literal">getProcedures()</code> and
        <code class="literal">getProcedureColumns()</code>.
       (Bug #2359)</p></li><li><p>
        Merged prepared statement caching, and
        <code class="literal">.getMetaData()</code> support from 3.0 branch.
       (Bug #2359)</p></li><li><p>
        Fixed off-by-1900 error in some cases for years in
        <code class="literal">TimeUtil.fastDate</code>/<code class="literal">TimeCreate()</code>
        when unpacking results from server-side prepared statements.
       (Bug #2359)</p></li><li><p>
        Reset <code class="literal">long binary</code> parameters in
        <code class="literal">ServerPreparedStatement</code> when
        <code class="literal">clearParameters()</code> is called, by sending
        <code class="literal">COM_RESET_STMT</code> to the server.
       (Bug #2359)</p></li><li><p>
        <code class="literal">NULL</code> values for numeric types in binary
        encoded result sets causing
        <code class="literal">NullPointerExceptions</code>.
       (Bug #2359)</p></li><li><p>
        Display where/why a connection was implicitly closed (to aid
        debugging).
       (Bug #1673)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> is not
        returning correct column ordinal info for
        non-<code class="literal">'%'</code> column name patterns.
       (Bug #1673)</p></li><li><p>
        Fixed <code class="literal">NullPointerException</code> in
        <code class="literal">ServerPreparedStatement.setTimestamp()</code>, as
        well as year and month discrepencies in
        <code class="literal">ServerPreparedStatement.setTimestamp()</code>,
        <code class="literal">setDate()</code>.
       (Bug #1673)</p></li><li><p>
        Added ability to have multiple database/JVM targets for
        compliance and regression/unit tests in
        <code class="filename">build.xml</code>.
       (Bug #1673)</p></li><li><p>
        Fixed sending of queries larger than 16M.
       (Bug #1673)</p></li><li><p>
        Merged fix of data type mapping from MySQL type
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> to
        <code class="literal">java.sql.Types.REAL</code> from 3.0 branch.
       (Bug #1673)</p></li><li><p>
        Fixed NPE and year/month bad conversions when accessing some
        datetime functionality in
        <code class="literal">ServerPreparedStatements</code> and their resultant
        result sets.
       (Bug #1673)</p></li><li><p>
        Added named and indexed input/output parameter support to
        <code class="literal">CallableStatement</code>. MySQL-5.0.x or newer.
       (Bug #1673)</p></li><li><p>
        <code class="literal">CommunicationsException</code> implemented, that
        tries to determine why communications was lost with a server,
        and displays possible reasons when
        <code class="literal">.getMessage()</code> is called.
       (Bug #1673)</p></li><li><p>
        Detect collation of column for
        <code class="literal">RSMD.isCaseSensitive()</code>.
       (Bug #1673)</p></li><li><p>
        Optimized <code class="literal">Buffer.readLenByteArray()</code> to return
        shared empty byte array when length is 0.
      </p></li><li><p>
        Fix support for table aliases when checking for all primary keys
        in <code class="literal">UpdatableResultSet</code>.
      </p></li><li><p>
        Unpack “<span class="quote">unknown</span>” data types from server prepared
        statements as <code class="literal">Strings</code>.
      </p></li><li><p>
        Implemented <code class="literal">Statement.getWarnings()</code> for
        MySQL-4.1 and newer (using <a href="sql-syntax.html#show-warnings" title="12.7.5.41. SHOW WARNINGS Syntax"><code class="literal">SHOW
        WARNINGS</code></a>).
      </p></li><li><p>
        Ensure that warnings are cleared before executing queries on
        prepared statements, as-per JDBC spec (now that we support
        warnings).
      </p></li><li><p>
        Correctly initialize datasource properties from JNDI Refs,
        including explicitly specified URLs.
      </p></li><li><p>
        Implemented long data (Blobs, Clobs, InputStreams, Readers) for
        server prepared statements.
      </p></li><li><p>
        Deal with 0-length tokens in <code class="literal">EscapeProcessor</code>
        (caused by callable statement escape syntax).
      </p></li><li><p>
        <code class="literal">DatabaseMetaData</code> now reports
        <code class="literal">supportsStoredProcedures()</code> for MySQL versions
        &gt;= 5.0.0
      </p></li><li><p>
        Support for <a href="connectors-apis.html#mysql-change-user" title="21.9.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a>.
        See the <code class="literal">changeUser()</code> method in
        <code class="literal">com.mysql.jdbc.Connection</code>.
      </p></li><li><p>
        Removed <code class="literal">useFastDates</code> connection property.
      </p></li><li><p>
        Support for NIO. Use <code class="literal">useNIO=true</code> on platforms
        that support NIO.
      </p></li><li><p>
        Check for closed connection on delete/update/insert row
        operations in <code class="literal">UpdatableResultSet</code>.
      </p></li><li><p>
        Support for transaction savepoints (MySQL &gt;= 4.0.14 or
        4.1.1).
      </p></li><li><p>
        Support “<span class="quote">old</span>” <code class="literal">profileSql</code>
        capitalization in <code class="literal">ConnectionProperties</code>. This
        property is deprecated, you should use
        <code class="literal">profileSQL</code> if possible.
      </p></li><li><p>
        Fixed character encoding issues when converting bytes to ASCII
        when MySQL doesn't provide the character set, and the JVM is set
        to a multi-byte encoding (usually affecting retrieval of numeric
        values).
      </p></li><li><p>
        Centralized setting of result set type and concurrency.
      </p></li><li><p>
        Fixed bug with <code class="literal">UpdatableResultSets</code> not using
        client-side prepared statements.
      </p></li><li><p>
        Default result set type changed to
        <code class="literal">TYPE_FORWARD_ONLY</code> (JDBC compliance).
      </p></li><li><p>
        Fixed <code class="literal">IllegalAccessError</code> to
        <code class="literal">Calendar.getTimeInMillis()</code> in
        <code class="literal">DateTimeValue</code> (for JDK &lt; 1.4).
      </p></li><li><p>
        Allow contents of <code class="literal">PreparedStatement.setBlob()</code>
        to be retained between calls to <code class="literal">.execute*()</code>.
      </p></li><li><p>
        Fixed stack overflow in
        <code class="literal">Connection.prepareCall()</code> (bad merge).
      </p></li><li><p>
        Refactored how connection properties are set and exposed as
        <code class="literal">DriverPropertyInfo</code> as well as
        <code class="literal">Connection</code> and <code class="literal">DataSource</code>
        properties.
      </p></li><li><p>
        Reduced number of methods called in average query to be more
        efficient.
      </p></li><li><p>
        Prepared <code class="literal">Statements</code> will be re-prepared on
        auto-reconnect. Any errors encountered are postponed until first
        attempt to re-execute the re-prepared statement.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-0"></a>D.5.3.16. Changes in MySQL Connector/J 3.1.0 (18 February 2003, alpha)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">useServerPrepStmts</code> property (default
        <code class="literal">false</code>). The driver will use server-side
        prepared statements when the server version supports them (4.1
        and newer) when this property is set to <code class="literal">true</code>.
        It is currently set to <code class="literal">false</code> by default until
        all bind/fetch functionality has been implemented. Currently
        only DML prepared statements are implemented for 4.1 server-side
        prepared statements.
      </p></li><li><p>
        Added <code class="literal">requireSSL</code> property.
      </p></li><li><p>
        Track open <code class="literal">Statements</code>, close all when
        <code class="literal">Connection.close()</code> is called (JDBC
        compliance).
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-3-0-x"></a>D.5.4. Changes in MySQL Connector/J 3.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-3-0-17">D.5.4.1. Changes in MySQL Connector/J 3.0.17 (23 June 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-16">D.5.4.2. Changes in MySQL Connector/J 3.0.16 (15 November 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-15">D.5.4.3. Changes in MySQL Connector/J 3.0.15 (04 September 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-14">D.5.4.4. Changes in MySQL Connector/J 3.0.14 (28 May 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-13">D.5.4.5. Changes in MySQL Connector/J 3.0.13 (27 May 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-12">D.5.4.6. Changes in MySQL Connector/J 3.0.12 (18 May 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-11">D.5.4.7. Changes in MySQL Connector/J 3.0.11 (19 February 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-10">D.5.4.8. Changes in MySQL Connector/J 3.0.10 (13 January 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-9">D.5.4.9. Changes in MySQL Connector/J 3.0.9 (07 October 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-8">D.5.4.10. Changes in MySQL Connector/J 3.0.8 (23 May 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-7">D.5.4.11. Changes in MySQL Connector/J 3.0.7 (08 April 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-6">D.5.4.12. Changes in MySQL Connector/J 3.0.6 (18 February 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-5">D.5.4.13. Changes in MySQL Connector/J 3.0.5 (22 January 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-4">D.5.4.14. Changes in MySQL Connector/J 3.0.4 (06 January 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-3">D.5.4.15. Changes in MySQL Connector/J 3.0.3 (17 December 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-2">D.5.4.16. Changes in MySQL Connector/J 3.0.2 (08 November 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-1">D.5.4.17. Changes in MySQL Connector/J 3.0.1 (21 September 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-0">D.5.4.18. Changes in MySQL Connector/J 3.0.0 (31 July 2002)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-17"></a>D.5.4.1. Changes in MySQL Connector/J 3.0.17 (23 June 2005)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Workaround for server Bug #9098: Default values of
        <code class="literal">CURRENT_*</code> for
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
        <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, and
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns can't be
        distinguished from <code class="literal">string</code> values, so
        <code class="literal">UpdatableResultSet.moveToInsertRow()</code>
        generates bad SQL for inserting default values.
       (Bug #8812)</p></li><li><p>
        <code class="literal">NON_UNIQUE</code> column from
        <code class="literal">DBMD.getIndexInfo()</code> returned inverted value.
       (Bug #8812)</p></li><li><p>
        <code class="literal">EUCKR</code> charset is sent as <code class="literal">SET NAMES
        euc_kr</code> which MySQL-4.1 and newer doesn't understand.
       (Bug #8629)</p></li><li><p>
        Added support for the <code class="literal">EUC_JP_Solaris</code>
        character encoding, which maps to a MySQL encoding of
        <code class="literal">eucjpms</code> (backported from 3.1 branch). This
        only works on servers that support <code class="literal">eucjpms</code>,
        namely 5.0.3 or later.
       (Bug #8629)</p></li><li><p>
        Use hex escapes for
        <code class="literal">PreparedStatement.setBytes()</code> for double-byte
        charsets including “<span class="quote">aliases</span>”
        <code class="literal">Windows-31J</code>, <code class="literal">CP934</code>,
        <code class="literal">MS932</code>.
       (Bug #8629)</p></li><li><p>
        <code class="literal">DatabaseMetaData.supportsSelectForUpdate()</code>
        returns correct value based on server version.
       (Bug #8629)</p></li><li><p>
        Which requires hex escaping of binary data when using multi-byte
        charsets with prepared statements.
       (Bug #8064)</p></li><li><p>
        Fixed duplicated code in
        <code class="literal">configureClientCharset()</code> that prevented
        <code class="literal">useOldUTF8Behavior=true</code> from working
        properly.
       (Bug #7952)</p></li><li><p>
        Backported SQLState codes mapping from Connector/J 3.1, enable
        with <code class="literal">useSqlStateCodes=true</code> as a connection
        property, it defaults to <code class="literal">false</code> in this
        release, so that we don't break legacy applications (it defaults
        to <code class="literal">true</code> starting with Connector/J 3.1).
       (Bug #7686)</p></li><li><p>
        Timestamp key column data needed <code class="literal">_binary</code>
        stripped for <code class="literal">UpdatableResultSet.refreshRow()</code>.
       (Bug #7686)</p></li><li><p>
        <code class="literal">MS932</code>, <code class="literal">SHIFT_JIS</code>, and
        <code class="literal">Windows_31J</code> not recognized as aliases for
        <code class="literal">sjis</code>.
       (Bug #7607)</p></li><li><p>
        Handle streaming result sets with more than 2 billion rows
        properly by fixing wraparound of row number counter.
       (Bug #7601)</p></li><li><p>
        <code class="literal">PreparedStatement.fixDecimalExponent()</code> adding
        extra <code class="literal">+</code>, making number unparseable by MySQL
        server.
       (Bug #7601)</p></li><li><p>
        Escape sequence {fn convert(..., type)} now supports ODBC-style
        types that are prepended by <code class="literal">SQL_</code>.
       (Bug #7601)</p></li><li><p>
        Statements created from a pooled connection were returning
        physical connection instead of logical connection when
        <code class="literal">getConnection()</code> was called.
       (Bug #7316)</p></li><li><p>
        Support new protocol type <code class="literal">MYSQL_TYPE_VARCHAR</code>.
       (Bug #7081)</p></li><li><p>
        Added <code class="literal">useOldUTF8Behavior</code>' configuration
        property, which causes JDBC driver to act like it did with
        MySQL-4.0.x and earlier when the character encoding is
        <code class="literal">utf-8</code> when connected to MySQL-4.1 or newer.
       (Bug #7081)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getIndexInfo()</code> ignored
        <code class="literal">unique</code> parameter.
       (Bug #7081)</p></li><li><p>
        <code class="literal">PreparedStatement.fixDecimalExponent()</code> adding
        extra <code class="literal">+</code>, making number unparseable by MySQL
        server.
       (Bug #7061)</p></li><li><p>
        <code class="literal">PreparedStatements</code> don't encode Big5 (and
        other multi-byte) character sets correctly in static SQL
        strings.
       (Bug #7033)</p></li><li><p>
        Connections starting up failed-over (due to down master) never
        retry master.
       (Bug #6966)</p></li><li><p>
        Adding <code class="literal">CP943</code> to aliases for
        <code class="literal">sjis</code>.
       (Bug #6549, Bug #7607)</p></li><li><p>
        <code class="literal">Timestamp</code>/<code class="literal">Time</code> conversion
        goes in the wrong “<span class="quote">direction</span>” when
        <code class="literal">useTimeZone=true</code> and server time zone differs
        from client time zone.
       (Bug #5874)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-16"></a>D.5.4.2. Changes in MySQL Connector/J 3.0.16 (15 November 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Made <code class="literal">TINYINT(1)</code> -&gt;
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a>/<code class="literal">Boolean</code>
        conversion configurable using <code class="literal">tinyInt1isBit</code>
        property (default <code class="literal">true</code> to be JDBC compliant
        out of the box).
       (Bug #5664)</p></li><li><p>
        Off-by-one bug in
        <code class="literal">Buffer.readString(<em class="replaceable"><code>string</code></em>)</code>.
       (Bug #5664)</p></li><li><p>
        <code class="literal">ResultSet.updateByte()</code> when on insert row
        throws <code class="literal">ArrayOutOfBoundsException</code>.
       (Bug #5664)</p></li><li><p>
        Fixed regression where <code class="literal">useUnbufferedInput</code> was
        defaulting to <code class="literal">false</code>.
       (Bug #5664)</p></li><li><p>
        <code class="literal">ResultSet.getTimestamp()</code> on a column with
        <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> in it fails.
       (Bug #5664)</p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.getTypes()</code> returning
        incorrect (this is, nonnegative) scale for the
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a> type.
       (Bug #5664)</p></li><li><p>
        Only set <a href="server-administration.html#sysvar_character_set_results"><code class="literal">character_set_results</code></a>
        during connection establishment if server version &gt;= 4.1.1.
       (Bug #5664)</p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.isReadOnly()</code> to
        detect nonwritable columns when connected to MySQL-4.1 or newer,
        based on existence of “<span class="quote">original</span>” table and column
        names.
      </p></li><li><p>
        Re-issue character set configuration commands when re-using
        pooled connections or <code class="literal">Connection.changeUser()</code>
        when connected to MySQL-4.1 or newer.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-15"></a>D.5.4.3. Changes in MySQL Connector/J 3.0.15 (04 September 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.getMetaData()</code> should not return
        incorrectly initialized metadata if the result set has been
        closed, but should instead throw an
        <code class="literal">SQLException</code>. Also fixed for
        <code class="literal">getRow()</code> and <code class="literal">getWarnings()</code>
        and traversal methods by calling
        <code class="literal">checkClosed()</code> before operating on
        instance-level fields that are nullified during
        <code class="literal">.close()</code>.
       (Bug #5069)</p></li><li><p>
        Use <code class="literal">_binary</code> introducer for
        <code class="literal">PreparedStatement.setBytes()</code> and
        <code class="literal">set*Stream()</code> when connected to MySQL-4.1.x or
        newer to avoid misinterpretation during character conversion.
       (Bug #5069)</p></li><li><p>
        Parse new time zone variables from 4.1.x servers.
       (Bug #5069)</p></li><li><p>
        <code class="literal">ResultSet</code> should release
        <code class="literal">Field[]</code> instance in
        <code class="literal">.close()</code>.
       (Bug #5022)</p></li><li><p>
        <code class="literal">RSMD.getPrecision()</code> returning 0 for
        nonnumeric types (should return max length in chars for
        nonbinary types, max length in bytes for binary types). This fix
        also fixes mapping of <code class="literal">RSMD.getColumnType()</code>
        and <code class="literal">RSMD.getColumnTypeName()</code> for the
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> types based on the length
        sent from the server (the server doesn't distinguish between
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TINYBLOB</code></a>,
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>,
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">MEDIUMBLOB</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGBLOB</code></a> at the network protocol
        level).
       (Bug #4880)</p></li><li><p>
        “<span class="quote">Production</span>” is now “<span class="quote">GA</span>” (General
        Availability) in naming scheme of distributions.
       (Bug #4860, Bug #4138)</p></li><li><p>
        <code class="literal">DBMD.getColumns()</code> returns incorrect JDBC type
        for unsigned columns. This affects type mappings for all numeric
        types in the <code class="literal">RSMD.getColumnType()</code> and
        <code class="literal">RSMD.getColumnTypeNames()</code> methods as well, to
        ensure that “<span class="quote">like</span>” types from
        <code class="literal">DBMD.getColumns()</code> match up with what
        <code class="literal">RSMD.getColumnType()</code> and
        <code class="literal">getColumnTypeNames()</code> return.
       (Bug #4860, Bug #4138)</p></li><li><p>
        Calling <code class="literal">.close()</code> twice on a
        <code class="literal">PooledConnection</code> causes NPE.
       (Bug #4808)</p></li><li><p>
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> mapped twice in
        <code class="literal">DBMD.getTypeInfo()</code>.
       (Bug #4742)</p></li><li><p>
        Added FLOSS license exemption.
       (Bug #4742)</p></li><li><p>
        Removed redundant calls to <code class="literal">checkRowPos()</code> in
        <code class="literal">ResultSet</code>.
       (Bug #4334)</p></li><li><p>
        Failover for <code class="literal">autoReconnect</code> not using port
        numbers for any hosts, and not retrying all hosts.
      </p><div xmlns="http://www.w3.org/1999/xhtml" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Warning</div><p xmlns="">
          This required a change to the <code class="literal">SocketFactory</code>
          <code class="literal">connect()</code> method signature, which is now
          <code class="literal">public Socket connect(String host, int portNumber,
          Properties props)</code>; therefore, any third-party socket
          factories will have to be changed to support this signature.
        </p></div><p>(Bug #4334)</p></li><li><p>
        Logical connections created by
        <code class="literal">MysqlConnectionPoolDataSource</code> will now issue
        a <code class="literal">rollback()</code> when they are closed and sent
        back to the pool. If your application server/connection pool
        already does this for you, you can set the
        <code class="literal">rollbackOnPooledClose</code> property to
        <code class="literal">false</code> to avoid the overhead of an extra
        <code class="literal">rollback()</code>.
       (Bug #4334)</p></li><li><p>
        <code class="literal">StringUtils.escapeEasternUnicodeByteStream</code>
        was still broken for GBK.
       (Bug #4010)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-14"></a>D.5.4.4. Changes in MySQL Connector/J 3.0.14 (28 May 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed URL parsing error.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-13"></a>D.5.4.5. Changes in MySQL Connector/J 3.0.13 (27 May 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">No Database Selected</code> when using
        <code class="literal">MysqlConnectionPoolDataSource</code>.
       (Bug #3920)</p></li><li><p>
        <code class="literal">PreparedStatement.getGeneratedKeys()</code> method
        returns only 1 result for batched insertions.
       (Bug #3873)</p></li><li><p>
        Using a <code class="literal">MySQLDatasource</code> without server name
        fails.
       (Bug #3848)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-12"></a>D.5.4.6. Changes in MySQL Connector/J 3.0.12 (18 May 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Inconsistent reporting of data type. The server still doesn't
        return all types for *BLOBs *TEXT correctly, so the driver won't
        return those correctly.
       (Bug #3570)</p></li><li><p>
        <code class="literal">UpdatableResultSet</code> not picking up default
        values for <code class="literal">moveToInsertRow()</code>.
       (Bug #3557)</p></li><li><p>
        Not specifying database in URL caused
        <code class="literal">MalformedURL</code> exception.
       (Bug #3554)</p></li><li><p>
        Auto-convert MySQL encoding names to Java encoding names if used
        for <code class="literal">characterEncoding</code> property.
       (Bug #3554)</p></li><li><p>
        Use <code class="literal">junit.textui.TestRunner</code> for all unit
        tests (to enable them to be run from the command line outside of
        Ant or Eclipse).
       (Bug #3554)</p></li><li><p>
        Added encoding names that are recognized on some JVMs to fix
        case where they were reverse-mapped to MySQL encoding names
        incorrectly.
       (Bug #3554)</p></li><li><p>
        Made <code class="literal">StringRegressionTest</code> 4.1-unicode aware.
       (Bug #3520)</p></li><li><p>
        Fixed regression in
        <code class="literal">PreparedStatement.setString()</code> and eastern
        character encodings.
       (Bug #3520)</p></li><li><p>
        <code class="literal">DBMD.getSQLStateType()</code> returns incorrect
        value.
       (Bug #3520)</p></li><li><p>
        Renamed <code class="literal">StringUtils.escapeSJISByteStream()</code> to
        more appropriate
        <code class="literal">escapeEasternUnicodeByteStream()</code>.
       (Bug #3511)</p></li><li><p>
        <code class="literal">StringUtils.escapeSJISByteStream()</code> not
        covering all eastern double-byte charsets correctly.
       (Bug #3511)</p></li><li><p>
        Return creating statement for <code class="literal">ResultSets</code>
        created by <code class="literal">getGeneratedKeys()</code>.
       (Bug #2957)</p></li><li><p>
        Use <code class="literal">SET character_set_results</code> during
        initialization to enable any charset to be returned to the
        driver for result sets.
       (Bug #2670)</p></li><li><p>
        Don't truncate <code class="literal">BLOB</code> or
        <code class="literal">CLOB</code> values when using
        <code class="literal">setBytes()</code> and
        <code class="literal">setBinary/CharacterStream()</code>.
       (Bug #2670)</p></li><li><p>
        Dynamically configure character set mappings for field-level
        character sets on MySQL-4.1.0 and newer using
        <a href="sql-syntax.html#show-collation" title="12.7.5.5. SHOW COLLATION Syntax"><code class="literal">SHOW COLLATION</code></a> when connecting.
       (Bug #2670)</p></li><li><p>
        Map <code class="literal">binary</code> character set to
        <code class="literal">US-ASCII</code> to support
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> charset recognition for
        servers &gt;= 4.1.2.
       (Bug #2670)</p></li><li><p>
        Use <code class="literal">charsetnr</code> returned during connect to
        encode queries before issuing <code class="literal">SET NAMES</code> on
        MySQL &gt;= 4.1.0.
       (Bug #2670)</p></li><li><p>
        Add helper methods to <code class="literal">ResultSetMetaData</code>
        (<code class="literal">getColumnCharacterEncoding()</code> and
        <code class="literal">getColumnCharacterSet()</code>) to permit end users
        to see what charset the driver thinks it should be using for the
        column.
       (Bug #2670)</p></li><li><p>
        Only set <a href="server-administration.html#sysvar_character_set_results"><code class="literal">character_set_results</code></a>
        for MySQL &gt;= 4.1.0.
       (Bug #2670)</p></li><li><p>
        Allow <code class="literal">url</code> parameter for
        <code class="literal">MysqlDataSource</code> and
        <code class="literal">MysqlConnectionPool</code>
        <code class="literal">DataSource</code> so that passing of other
        properties is possible from inside appservers.
      </p></li><li><p>
        Don't escape SJIS/GBK/BIG5 when using MySQL-4.1 or newer.
      </p></li><li><p>
        Backport documentation tooling from 3.1 branch.
      </p></li><li><p>
        Added <code class="literal">failOverReadOnly</code> property, to enable
        the user to configure the state of the connection
        (read-only/writable) when failed over.
      </p></li><li><p>
        Add unsigned attribute to
        <code class="literal">DatabaseMetaData.getColumns()</code> output in the
        <code class="literal">TYPE_NAME</code> column.
      </p></li><li><p>
        Allow <code class="literal">java.util.Date</code> to be sent in as
        parameter to <code class="literal">PreparedStatement.setObject()</code>,
        converting it to a <code class="literal">Timestamp</code> to maintain full
        precision. .
       (Bug #103)</p></li><li><p>
        Map duplicate key and foreign key errors to SQLState of
        <code class="literal">23000</code>.
      </p></li><li><p>
        Backported “<span class="quote">change user</span>” and “<span class="quote">reset server
        state</span>” functionality from 3.1 branch, to enable clients
        of <code class="literal">MysqlConnectionPoolDataSource</code> to reset
        server state on <code class="literal">getConnection()</code> on a pooled
        connection.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-11"></a>D.5.4.7. Changes in MySQL Connector/J 3.0.11 (19 February 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Return <code class="literal">java.lang.Double</code> for
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> type from
        <code class="literal">ResultSetMetaData.getColumnClassName()</code>.
       (Bug #2855)</p></li><li><p>
        Return <code class="literal">[B</code> instead of
        <code class="literal">java.lang.Object</code> for
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> and
        <code class="literal">LONGVARBINARY</code> types from
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> (JDBC
        compliance).
       (Bug #2855)</p></li><li><p>
        Issue connection events on all instances created from a
        <code class="literal">ConnectionPoolDataSource</code>.
       (Bug #2855)</p></li><li><p>
        Return <code class="literal">java.lang.Integer</code> for
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a> types from
        <code class="literal">ResultSetMetaData.getColumnClassName()</code>.
       (Bug #2852)</p></li><li><p>
        Added <code class="literal">useUnbufferedInput</code> parameter, and now
        use it by default (due to JVM issue
        <a href="http://developer.java.sun.com/developer/bugParade/bugs/4401235.html" target="_top">http://developer.java.sun.com/developer/bugParade/bugs/4401235.html</a>)
       (Bug #2578)</p></li><li><p>
        Fixed failover always going to last host in list.
       (Bug #2578)</p></li><li><p>
        Detect <code class="literal">on</code>/<code class="literal">off</code> or
        <code class="literal">1</code>, <code class="literal">2</code>, <code class="literal">3</code>
        form of <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        value on server.
       (Bug #2578)</p></li><li><p>
        <code class="literal">AutoReconnect</code> time was growing faster than
        exponentially.
       (Bug #2447)</p></li><li><p>
        Trigger a <code class="literal">SET NAMES utf8</code> when encoding is
        forced to <code class="literal">utf8</code> <span class="emphasis"><em>or</em></span>
        <code class="literal">utf-8</code> using the
        <code class="literal">characterEncoding</code> property. Previously, only
        the Java-style encoding name of <code class="literal">utf-8</code> would
        trigger this.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-10"></a>D.5.4.8. Changes in MySQL Connector/J 3.0.10 (13 January 2004)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Enable caching of the parsing stage of prepared statements using
        the <code class="literal">cachePrepStmts</code>,
        <code class="literal">prepStmtCacheSize</code>, and
        <code class="literal">prepStmtCacheSqlLimit</code> properties (disabled by
        default).
       (Bug #2006)</p></li><li><p>
        Fixed security exception when used in Applets (applets can't
        read the system property <code class="literal">file.encoding</code> which
        is needed for <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD
        DATA LOCAL INFILE</code></a>).
       (Bug #2006)</p></li><li><p>
        Speed up parsing of <code class="literal">PreparedStatements</code>, try
        to use one-pass whenever possible.
       (Bug #2006)</p></li><li><p>
        Fixed exception <code class="literal">Unknown character set
        'danish'</code> on connect with JDK-1.4.0
       (Bug #2006)</p></li><li><p>
        Fixed mappings in SQLError to report deadlocks with SQLStates of
        <code class="literal">41000</code>.
       (Bug #2006)</p></li><li><p>
        Removed static synchronization bottleneck from instance factory
        method of <code class="literal">SingleByteCharsetConverter</code>.
       (Bug #2006)</p></li><li><p>
        Removed static synchronization bottleneck from
        <code class="literal">PreparedStatement.setTimestamp()</code>.
       (Bug #2006)</p></li><li><p>
        <code class="literal">ResultSet.findColumn()</code> should use first
        matching column name when there are duplicate column names in
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query (JDBC-compliance).
       (Bug #2006)</p></li><li><p>
        <code class="literal">maxRows</code> property would affect internal
        statements, so check it for all statement creation internal to
        the driver, and set to 0 when it is not.
       (Bug #2006)</p></li><li><p>
        Use constants for SQLStates.
       (Bug #2006)</p></li><li><p>
        Map charset <code class="literal">ko18_ru</code> to
        <code class="literal">ko18r</code> when connected to MySQL-4.1.0 or newer.
       (Bug #2006)</p></li><li><p>
        Ensure that <code class="literal">Buffer.writeString()</code> saves room
        for the <code class="literal">\0</code>.
       (Bug #2006)</p></li><li><p>
        <code class="literal">ArrayIndexOutOfBounds</code> when parameter number
        == number of parameters + 1.
       (Bug #1958)</p></li><li><p>
        Connection property <code class="literal">maxRows</code> not honored.
       (Bug #1933)</p></li><li><p>
        Statements being created too many times in
        <code class="literal">DBMD.extractForeignKeyFromCreateTable()</code>.
       (Bug #1925)</p></li><li><p>
        Support escape sequence {fn convert ... }.
       (Bug #1914)</p></li><li><p>
        Implement <code class="literal">ResultSet.updateClob()</code>.
       (Bug #1913)</p></li><li><p>
        Autoreconnect code didn't set catalog upon reconnect if it had
        been changed.
       (Bug #1913)</p></li><li><p>
        <code class="literal">ResultSet.getObject()</code> on
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a> columns should return
        Java type <code class="literal">Integer</code>.
       (Bug #1913)</p></li><li><p>
        Added more descriptive error message <code class="literal">Server
        Configuration Denies Access to DataSource</code>, as well as
        retrieval of message from server.
       (Bug #1913)</p></li><li><p>
        <code class="literal">ResultSetMetaData.isCaseSensitive()</code> returned
        wrong value for
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>/<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
        columns.
       (Bug #1913)</p></li><li><p>
        Added <code class="literal">alwaysClearStream</code> connection property,
        which causes the driver to always empty any remaining data on
        the input stream before each query.
       (Bug #1913)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getSystemFunction()</code>
        returning bad function <code class="literal">VResultsSion</code>.
       (Bug #1775)</p></li><li><p>
        Foreign Keys column sequence is not consistent in
        <code class="literal">DatabaseMetaData.getImported/Exported/CrossReference()</code>.
       (Bug #1731)</p></li><li><p>
        Fix for <code class="literal">ArrayIndexOutOfBounds</code> exception when
        using <code class="literal">Statement.setMaxRows()</code>.
       (Bug #1695)</p></li><li><p>
        Subsequent call to <code class="literal">ResultSet.updateFoo()</code>
        causes NPE if result set is not updatable.
       (Bug #1630)</p></li><li><p>
        Fix for 4.1.1-style authentication with no password.
       (Bug #1630)</p></li><li><p>
        Cross-database updatable result sets are not checked for
        updatability correctly.
       (Bug #1592)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> should return
        <code class="literal">Types.LONGVARCHAR</code> for MySQL
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGTEXT</code></a> type.
       (Bug #1592)</p></li><li><p>
        Fixed regression of
        <code class="literal">Statement.getGeneratedKeys()</code> and
        <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a> statements.
       (Bug #1576)</p></li><li><p>
        Barge blobs and split packets not being read correctly.
       (Bug #1576)</p></li><li><p>
        Backported fix for aliased tables and
        <code class="literal">UpdatableResultSets</code> in
        <code class="literal">checkUpdatability()</code> method from 3.1 branch.
       (Bug #1534)</p></li><li><p>
        “<span class="quote">Friendlier</span>” exception message for
        <code class="literal">PacketTooLargeException</code>.
       (Bug #1534)</p></li><li><p>
        Don't count quoted IDs when inside a 'string' in
        <code class="literal">PreparedStatement</code> parsing.
       (Bug #1511)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-9"></a>D.5.4.9. Changes in MySQL Connector/J 3.0.9 (07 October 2003)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.get/setString</code> mashing char 127.
       (Bug #1247)</p></li><li><p>
        Added property to “<span class="quote">clobber</span>” streaming results, by
        setting the <code class="literal">clobberStreamingResults</code> property
        to <code class="literal">true</code> (the default is
        <code class="literal">false</code>). This will cause a
        “<span class="quote">streaming</span>” <code class="literal">ResultSet</code> to be
        automatically closed, and any outstanding data still streaming
        from the server to be discarded if another query is executed
        before all the data has been read from the server.
       (Bug #1247)</p></li><li><p>
        Added <code class="literal">com.mysql.jdbc.util.BaseBugReport</code> to
        help creation of testcases for bug reports.
       (Bug #1247)</p></li><li><p>
        Backported authentication changes for 4.1.1 and newer from 3.1
        branch.
       (Bug #1247)</p></li><li><p>
        Made <code class="literal">databaseName</code>,
        <code class="literal">portNumber</code>, and <code class="literal">serverName</code>
        optional parameters for
        <code class="literal">MysqlDataSourceFactory</code>.
       (Bug #1246)</p></li><li><p>
        Optimized <code class="literal">CLOB.setChracterStream()</code>.
       (Bug #1131)</p></li><li><p>
        Fixed <code class="literal">CLOB.truncate()</code>.
       (Bug #1130)</p></li><li><p>
        Fixed deadlock issue with
        <code class="literal">Statement.setMaxRows()</code>.
       (Bug #1099)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> getting
        confused about the keyword “<span class="quote">set</span>” in character
        columns.
       (Bug #1099)</p></li><li><p>
        Clip +/- INF (to smallest and largest representative values for
        the type in MySQL) and NaN (to 0) for
        <code class="literal">setDouble</code>/<code class="literal">setFloat()</code>, and
        issue a warning on the statement when the server does not
        support +/- INF or NaN.
       (Bug #884)</p></li><li><p>
        Don't fire connection closed events when closing pooled
        connections, or on
        <code class="literal">PooledConnection.getConnection()</code> with already
        open connections.
       (Bug #884)</p></li><li><p>
        Double-escaping of <code class="literal">'\'</code> when charset is SJIS
        or GBK and <code class="literal">'\'</code> appears in nonescaped input.
       (Bug #879)</p></li><li><p>
        When emptying input stream of unused rows for
        “<span class="quote">streaming</span>” result sets, have the current thread
        <code class="literal">yield()</code> every 100 rows to not monopolize CPU
        time.
       (Bug #879)</p></li><li><p>
        Issue exception on
        <code class="literal">ResultSet.get<em class="replaceable"><code>XXX</code></em>()</code>
        on empty result set (wasn't caught in some cases).
       (Bug #848)</p></li><li><p>
        Don't hide messages from exceptions thrown in I/O layers.
       (Bug #848)</p></li><li><p>
        Fixed regression in large split-packet handling.
       (Bug #848)</p></li><li><p>
        Better diagnostic error messages in exceptions for
        “<span class="quote">streaming</span>” result sets.
       (Bug #848)</p></li><li><p>
        Don't change timestamp TZ twice if
        <code class="literal">useTimezone==true</code>.
       (Bug #774)</p></li><li><p>
        Don't wrap <code class="literal">SQLExceptions</code> in
        <code class="literal">RowDataDynamic</code>.
       (Bug #688)</p></li><li><p>
        Don't try and reset isolation level on reconnect if MySQL
        doesn't support them.
       (Bug #688)</p></li><li><p>
        The <code class="literal">insertRow</code> in an
        <code class="literal">UpdatableResultSet</code> is now loaded with the
        default column values when <code class="literal">moveToInsertRow()</code>
        is called.
       (Bug #688)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> wasn't
        returning <code class="literal">NULL</code> for default values that are
        specified as <code class="literal">NULL</code>.
       (Bug #688)</p></li><li><p>
        Change default statement type/concurrency to
        <code class="literal">TYPE_FORWARD_ONLY</code> and
        <code class="literal">CONCUR_READ_ONLY</code> (spec compliance).
       (Bug #688)</p></li><li><p>
        Fix <code class="literal">UpdatableResultSet</code> to return values for
        <code class="literal">get<em class="replaceable"><code>XXX</code></em>()</code> when on
        insert row.
       (Bug #675)</p></li><li><p>
        Support <code class="literal">InnoDB</code> constraint names when
        extracting foreign key information in
        <code class="literal">DatabaseMetaData</code> (implementing ideas from
        Parwinder Sekhon).
       (Bug #664, Bug #517)</p></li><li><p>
        Backported 4.1 protocol changes from 3.1 branch (server-side SQL
        states, new field information, larger client capability flags,
        connect-with-database, and so forth).
       (Bug #664, Bug #517)</p></li><li><p>
        <code class="literal">refreshRow</code> didn't work when primary key
        values contained values that needed to be escaped (they ended up
        being doubly escaped).
       (Bug #661)</p></li><li><p>
        Fixed <code class="literal">ResultSet.previous()</code> behavior to move
        current position to before result set when on first row of
        result set.
       (Bug #496)</p></li><li><p>
        Fixed <code class="literal">Statement</code> and
        <code class="literal">PreparedStatement</code> issuing bogus queries when
        <code class="literal">setMaxRows()</code> had been used and a
        <code class="literal">LIMIT</code> clause was present in the query.
       (Bug #496)</p></li><li><p>
        Faster date handling code in <code class="literal">ResultSet</code> and
        <code class="literal">PreparedStatement</code> (no longer uses
        <code class="literal">Date</code> methods that synchronize on static
        calendars).
      </p></li><li><p>
        Fixed test for end of buffer in
        <code class="literal">Buffer.readString()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-8"></a>D.5.4.10. Changes in MySQL Connector/J 3.0.8 (23 May 2003)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed SJIS encoding bug, thanks to Naoto Sato.
       (Bug #378)</p></li><li><p>
        Fix problem detecting server character set in some cases.
       (Bug #378)</p></li><li><p>
        Allow multiple calls to <code class="literal">Statement.close()</code>.
       (Bug #378)</p></li><li><p>
        Return correct number of generated keys when using
        <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a> statements.
       (Bug #378)</p></li><li><p>
        Unicode character 0xFFFF in a string would cause the driver to
        throw an <code class="literal">ArrayOutOfBoundsException</code>. .
       (Bug #378)</p></li><li><p>
        Fix row data decoding error when using <span class="emphasis"><em>very</em></span>
        large packets.
       (Bug #378)</p></li><li><p>
        Optimized row data decoding.
       (Bug #378)</p></li><li><p>
        Issue exception when operating on an already closed prepared
        statement.
       (Bug #378)</p></li><li><p>
        Optimized usage of <code class="literal">EscapeProcessor</code>.
       (Bug #378)</p></li><li><p>
        Use JVM charset with file names and <code class="literal">LOAD DATA [LOCAL]
        INFILE</code>.
      </p></li><li><p>
        Fix infinite loop with <code class="literal">Connection.cleanup()</code>.
      </p></li><li><p>
        Changed Ant target <code class="literal">compile-core</code> to
        <code class="literal">compile-driver</code>, and made testsuite
        compilation a separate target.
      </p></li><li><p>
        Fixed result set not getting set for
        <code class="literal">Statement.executeUpdate()</code>, which affected
        <code class="literal">getGeneratedKeys()</code> and
        <code class="literal">getUpdateCount()</code> in some cases.
      </p></li><li><p>
        Return list of generated keys when using multi-value
        <code class="literal">INSERTS</code> with
        <code class="literal">Statement.getGeneratedKeys()</code>.
      </p></li><li><p>
        Allow bogus URLs in <code class="literal">Driver.getPropertyInfo()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-7"></a>D.5.4.11. Changes in MySQL Connector/J 3.0.7 (08 April 2003)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed charset issues with database metadata (charset was not
        getting set correctly).
      </p></li><li><p>
        You can now toggle profiling on/off using
        <code class="literal">Connection.setProfileSql(boolean)</code>.
      </p></li><li><p>
        4.1 Column Metadata fixes.
      </p></li><li><p>
        Fixed <code class="literal">MysqlPooledConnection.close()</code> calling
        wrong event type.
      </p></li><li><p>
        Fixed <code class="literal">StringIndexOutOfBoundsException</code> in
        <code class="literal">PreparedStatement.setClob()</code>.
      </p></li><li><p>
        <code class="literal">IOExceptions</code> during a transaction now cause
        the <code class="literal">Connection</code> to be closed.
      </p></li><li><p>
        Remove synchronization from <code class="literal">Driver.connect()</code>
        and <code class="literal">Driver.acceptsUrl()</code>.
      </p></li><li><p>
        Fixed missing conversion for <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a>
        type in
        <code class="literal">ResultSetMetaData.getColumnTypeName()</code>.
      </p></li><li><p>
        Updatable <code class="literal">ResultSets</code> can now be created for
        aliased tables/columns when connected to MySQL-4.1 or newer.
      </p></li><li><p>
        Fixed <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a> bug when file &gt;
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>.
      </p></li><li><p>
        Don't pick up indexes that start with <code class="literal">pri</code> as
        primary keys for <code class="literal">DBMD.getPrimaryKeys()</code>.
      </p></li><li><p>
        Ensure that packet size from
        <code class="literal">alignPacketSize()</code> does not exceed
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> (JVM bug)
      </p></li><li><p>
        Don't reset <code class="literal">Connection.isReadOnly()</code> when
        autoReconnecting.
      </p></li><li><p>
        Fixed escaping of 0x5c (<code class="literal">'\'</code>) character for
        GBK and Big5 charsets.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.getTimestamp()</code> when
        underlying field is of type <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>.
      </p></li><li><p>
        Throw <code class="literal">SQLExceptions</code> when trying to do
        operations on a forcefully closed <code class="literal">Connection</code>
        (that is, when a communication link failure occurs).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-6"></a>D.5.4.12. Changes in MySQL Connector/J 3.0.6 (18 February 2003)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Backported 4.1 charset field info changes from Connector/J 3.1.
      </p></li><li><p>
        Fixed <code class="literal">Statement.setMaxRows()</code> to stop sending
        <code class="literal">LIMIT</code> type queries when not needed
        (performance).
      </p></li><li><p>
        Fixed <code class="literal">DBMD.getTypeInfo()</code> and
        <code class="literal">DBMD.getColumns()</code> returning different value
        for precision in <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> and
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> types.
      </p></li><li><p>
        Fixed <code class="literal">SQLExceptions</code> getting swallowed on
        initial connect.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData</code> to return
        <code class="literal">""</code> when catalog not known. Fixes
        <code class="literal">NullPointerExceptions</code> with Sun's
        <code class="literal">CachedRowSet</code>.
      </p></li><li><p>
        Allow ignoring of warning for “<span class="quote">non transactional
        tables</span>” during rollback (compliance/usability) by setting
        <code class="literal">ignoreNonTxTables</code> property to
        <code class="literal">true</code>.
      </p></li><li><p>
        Clean up <code class="literal">Statement</code> query/method mismatch
        tests (that is, <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> not
        permitted with <code class="literal">.executeQuery()</code>).
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.isWritable()</code> to
        return correct value.
      </p></li><li><p>
        More checks added in <code class="literal">ResultSet</code> traversal
        method to catch when in closed state.
      </p></li><li><p>
        Implemented <code class="literal">Blob.setBytes()</code>. You still need
        to pass the resultant <code class="literal">Blob</code> back into an
        updatable <code class="literal">ResultSet</code> or
        <code class="literal">PreparedStatement</code> to persist the changes,
        because MySQL does not support “<span class="quote">locators</span>”.
      </p></li><li><p>
        Add “<span class="quote">window</span>” of different <code class="literal">NULL</code>
        sorting behavior to
        <code class="literal">DBMD.nullsAreSortedAtStart</code> (4.0.2 to 4.0.10,
        true; otherwise, no).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-5"></a>D.5.4.13. Changes in MySQL Connector/J 3.0.5 (22 January 2003)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">ResultSet.isBeforeFirst()</code> for empty
        result sets.
      </p></li><li><p>
        Added missing
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGTEXT</code></a> type to
        <code class="literal">DBMD.getColumns()</code>.
      </p></li><li><p>
        Implemented an empty <code class="literal">TypeMap</code> for
        <code class="literal">Connection.getTypeMap()</code> so that some
        third-party apps work with MySQL (IBM WebSphere 5.0 Connection
        pool).
      </p></li><li><p>
        Added update options for foreign key metadata.
      </p></li><li><p>
        Fixed <code class="literal">Buffer.fastSkipLenString()</code> causing
        <code class="literal">ArrayIndexOutOfBounds</code> exceptions with some
        queries when unpacking fields.
      </p></li><li><p>
        Quote table names in
        <code class="literal">DatabaseMetaData.getColumns()</code>,
        <code class="literal">getPrimaryKeys()</code>,
        <code class="literal">getIndexInfo()</code>,
        <code class="literal">getBestRowIdentifier()</code>.
      </p></li><li><p>
        Retrieve <code class="literal">TX_ISOLATION</code> from database for
        <code class="literal">Connection.getTransactionIsolation()</code> when the
        MySQL version supports it, instead of an instance variable.
      </p></li><li><p>
        Greatly reduce memory required for
        <code class="literal">setBinaryStream()</code> in
        <code class="literal">PreparedStatements</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-4"></a>D.5.4.14. Changes in MySQL Connector/J 3.0.4 (06 January 2003)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Streamlined character conversion and <code class="literal">byte[]</code>
        handling in <code class="literal">PreparedStatements</code> for
        <code class="literal">setByte()</code>.
      </p></li><li><p>
        Fixed <code class="literal">PreparedStatement.executeBatch()</code>
        parameter overwriting.
      </p></li><li><p>
        Added quoted identifiers to database names for
        <code class="literal">Connection.setCatalog</code>.
      </p></li><li><p>
        Added support for 4.0.8-style large packets.
      </p></li><li><p>
        Reduce memory footprint of <code class="literal">PreparedStatements</code>
        by sharing outbound packet with <code class="literal">MysqlIO</code>.
      </p></li><li><p>
        Added <code class="literal">strictUpdates</code> property to enable
        control of amount of checking for “<span class="quote">correctness</span>” of
        updatable result sets. Set this to <code class="literal">false</code> if
        you want faster updatable result sets and you know that you
        create them from <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
        statements on tables with primary keys and that you have
        selected all primary keys in your query.
      </p></li><li><p>
        Added support for quoted identifiers in
        <code class="literal">PreparedStatement</code> parser.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-3"></a>D.5.4.15. Changes in MySQL Connector/J 3.0.3 (17 December 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Allow user to alter behavior of <code class="literal">Statement</code>/
        <code class="literal">PreparedStatement.executeBatch()</code> using
        <code class="literal">continueBatchOnError</code> property (defaults to
        <code class="literal">true</code>).
      </p></li><li><p>
        More robust escape tokenizer: Recognize <code class="literal">--</code>
        comments, and permit nested escape sequences (see
        <code class="literal">testsuite.EscapeProcessingTest</code>).
      </p></li><li><p>
        Fixed <code class="literal">Buffer.isLastDataPacket()</code> for 4.1 and
        newer servers.
      </p></li><li><p>
        <code class="literal">NamedPipeSocketFactory</code> now works (only
        intended for Windows), see <code class="filename">README</code> for
        instructions.
      </p></li><li><p>
        Changed <code class="literal">charsToByte</code> in
        <code class="literal">SingleByteCharConverter</code> to be nonstatic.
      </p></li><li><p>
        Use nonaliased table/column names and database names to fully
        qualify tables and columns in
        <code class="literal">UpdatableResultSet</code> (requires MySQL-4.1 or
        newer).
      </p></li><li><p>
        <code class="literal">LOAD DATA LOCAL INFILE ...</code> now works, if your
        server is configured to permit it. Can be turned off with the
        <code class="literal">allowLoadLocalInfile</code> property (see the
        <code class="filename">README</code>).
      </p></li><li><p>
        Implemented <code class="literal">Connection.nativeSQL()</code>.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getColumnTypeName()</code>
        returning <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> for
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> and
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> for
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> types.
      </p></li><li><p>
        Fixed charset handling in <code class="literal">Fields.java</code>.
      </p></li><li><p>
        Because of above, implemented
        <code class="literal">ResultSetMetaData.isAutoIncrement()</code> to use
        <code class="literal">Field.isAutoIncrement()</code>.
      </p></li><li><p>
        Substitute <code class="literal">'?'</code> for unknown character
        conversions in single-byte character sets instead of
        <code class="literal">'\0'</code>.
      </p></li><li><p>
        Added <code class="literal">CLIENT_LONG_FLAG</code> to be able to get more
        column flags (<code class="literal">isAutoIncrement()</code> being the
        most important).
      </p></li><li><p>
        Honor <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        when enabled in the server when doing table name comparisons in
        <code class="literal">DatabaseMetaData</code> methods.
      </p></li><li><p>
        <code class="literal">DBMD.getImported/ExportedKeys()</code> now handles
        multiple foreign keys per table.
      </p></li><li><p>
        More robust implementation of updatable result sets. Checks that
        <span class="emphasis"><em>all</em></span> primary keys of the table have been
        selected.
      </p></li><li><p>
        Some MySQL-4.1 protocol support (extended field info from
        selects).
      </p></li><li><p>
        Check for connection closed in more
        <code class="literal">Connection</code> methods
        (<code class="literal">createStatement</code>,
        <code class="literal">prepareStatement</code>,
        <code class="literal">setTransactionIsolation</code>,
        <code class="literal">setAutoCommit</code>).
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getPrecision()</code>
        returning incorrect values for some floating-point types.
      </p></li><li><p>
        Changed <code class="literal">SingleByteCharConverter</code> to use lazy
        initialization of each converter.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-2"></a>D.5.4.16. Changes in MySQL Connector/J 3.0.2 (08 November 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Implemented <code class="literal">Clob.setString()</code>.
      </p></li><li><p>
        Added <code class="literal">com.mysql.jdbc.MiniAdmin</code> class, which
        enables you to send <code class="literal">shutdown</code> command to MySQL
        server. This is intended to be used when
        “<span class="quote">embedding</span>” Java and MySQL server together in an
        end-user application.
      </p></li><li><p>
        Added SSL support. See <code class="filename">README</code> for
        information on how to use it.
      </p></li><li><p>
        All <code class="literal">DBMD</code> result set columns describing
        schemas now return <code class="literal">NULL</code> to be more compliant
        with the behavior of other JDBC drivers for other database
        systems (MySQL does not support schemas).
      </p></li><li><p>
        Use <a href="sql-syntax.html#show-create-table" title="12.7.5.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> when
        possible for determining foreign key information for
        <code class="literal">DatabaseMetaData</code>. Also enables cascade
        options for <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> information to
        be returned.
      </p></li><li><p>
        Implemented <code class="literal">Clob.setCharacterStream()</code>.
      </p></li><li><p>
        Failover and <code class="literal">autoReconnect</code> work only when the
        connection is in an <code class="literal">autoCommit(false)</code> state,
        to stay transaction-safe.
      </p></li><li><p>
        Fixed <code class="literal">DBMD.supportsResultSetConcurrency()</code> so
        that it returns <code class="literal">true</code> for
        <code class="literal">ResultSet.TYPE_SCROLL_INSENSITIVE</code> and
        <code class="literal">ResultSet.CONCUR_READ_ONLY</code> or
        <code class="literal">ResultSet.CONCUR_UPDATABLE</code>.
      </p></li><li><p>
        Implemented <code class="literal">Clob.setAsciiStream()</code>.
      </p></li><li><p>
        Removed duplicate code from
        <code class="literal">UpdatableResultSet</code> (it can be inherited from
        <code class="literal">ResultSet</code>, the extra code for each method to
        handle updatability I thought might someday be necessary has not
        been needed).
      </p></li><li><p>
        Fixed <code class="literal">UnsupportedEncodingException</code> thrown
        when “<span class="quote">forcing</span>” a character encoding using
        properties.
      </p></li><li><p>
        Fixed incorrect conversion in
        <code class="literal">ResultSet.getLong()</code>.
      </p></li><li><p>
        Implemented <code class="literal">ResultSet.updateBlob()</code>.
      </p></li><li><p>
        Removed some not-needed temporary object creation by smarter use
        of <code class="literal">Strings</code> in
        <code class="literal">EscapeProcessor</code>,
        <code class="literal">Connection</code> and
        <code class="literal">DatabaseMetaData</code> classes.
      </p></li><li><p>
        Escape <code class="literal">0x5c</code> character in strings for the SJIS
        charset.
      </p></li><li><p>
        <code class="literal">PreparedStatement</code> now honors stream lengths
        in setBinary/Ascii/Character Stream() unless you set the
        connection property
        <code class="literal">useStreamLengthsInPrepStmts</code> to
        <code class="literal">false</code>.
      </p></li><li><p>
        Fixed issue with updatable result sets and
        <code class="literal">PreparedStatements</code> not working.
      </p></li><li><p>
        Fixed start position off-by-1 error in
        <code class="literal">Clob.getSubString()</code>.
      </p></li><li><p>
        Added <code class="literal">connectTimeout</code> parameter that enables
        users of JDK-1.4 and newer to specify a maximum time to wait to
        establish a connection.
      </p></li><li><p>
        Fixed various non-ASCII character encoding issues.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.isLast()</code> for empty result
        sets (should return <code class="literal">false</code>).
      </p></li><li><p>
        Added driver property <code class="literal">useHostsInPrivileges</code>.
        Defaults to <code class="literal">true</code>. Affects whether or not
        <code class="literal">@hostname</code> will be used in
        <code class="literal">DBMD.getColumn/TablePrivileges</code>.
      </p></li><li><p>
        Fixed
        <code class="literal">ResultSet.setFetchDirection(FETCH_UNKNOWN)</code>.
      </p></li><li><p>
        Added <code class="literal">queriesBeforeRetryMaster</code> property that
        specifies how many queries to issue when failed over before
        attempting to reconnect to the master (defaults to 50).
      </p></li><li><p>
        Fixed issue when calling
        <code class="literal">Statement.setFetchSize()</code> when using arbitrary
        values.
      </p></li><li><p>
        Properly restore connection properties when autoReconnecting or
        failing-over, including <code class="literal">autoCommit</code> state, and
        isolation level.
      </p></li><li><p>
        Implemented <code class="literal">Clob.truncate()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-1"></a>D.5.4.17. Changes in MySQL Connector/J 3.0.1 (21 September 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Charsets now automatically detected. Optimized code for
        single-byte character set conversion.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.isSigned()</code> for
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a> and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>.
      </p></li><li><p>
        Fixed <code class="literal">RowDataStatic.getAt()</code> off-by-one bug.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.getRow()</code> off-by-one bug.
      </p></li><li><p>
        Massive code clean-up to follow Java coding conventions (the
        time had come).
      </p></li><li><p>
        Implemented <code class="literal">ResultSet.getCharacterStream()</code>.
      </p></li><li><p>
        Added limited <code class="literal">Clob</code> functionality
        (<code class="literal">ResultSet.getClob()</code>,
        <code class="literal">PreparedStatement.setClob()</code>,
        <code class="literal">PreparedStatement.setObject(Clob)</code>.
      </p></li><li><p>
        <code class="literal">Connection.isClosed()</code> no longer
        “<span class="quote">pings</span>” the server.
      </p></li><li><p>
        <code class="literal">Connection.close()</code> issues
        <code class="literal">rollback()</code> when
        <code class="literal">getAutoCommit()</code> is <code class="literal">false</code>.
      </p></li><li><p>
        Added <code class="literal">socketTimeout</code> parameter to URL.
      </p></li><li><p>
        Added <code class="literal">LOCAL TEMPORARY</code> to table types in
        <code class="literal">DatabaseMetaData.getTableTypes()</code>.
      </p></li><li><p>
        Added <code class="literal">paranoid</code> parameter, which sanitizes
        error messages by removing “<span class="quote">sensitive</span>” information
        from them (such as host names, ports, or user names), as well as
        clearing “<span class="quote">sensitive</span>” data structures when possible.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-0"></a>D.5.4.18. Changes in MySQL Connector/J 3.0.0 (31 July 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        General source-code cleanup.
      </p></li><li><p>
        The driver now only works with JDK-1.2 or newer.
      </p></li><li><p>
        Fix and sort primary key names in <code class="literal">DBMetaData</code>
        (SF bugs 582086 and 582086).
      </p></li><li><p>
        <code class="literal">ResultSet.getTimestamp()</code> now works for
        <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> types (SF bug 559134).
      </p></li><li><p>
        Float types now reported as
        <code class="literal">java.sql.Types.FLOAT</code> (SF bug 579573).
      </p></li><li><p>
        Support for streaming (row-by-row) result sets (see
        <code class="filename">README</code>) Thanks to Doron.
      </p></li><li><p>
        Testsuite now uses Junit (which you can get from
        <a href="http://www.junit.org" target="_top">http://www.junit.org</a>.
      </p></li><li><p>
        JDBC Compliance: Passes all tests besides stored procedure
        tests.
      </p></li><li><p>
        <code class="literal">ResultSet.getDate/Time/Timestamp</code> now
        recognizes all forms of invalid values that have been set to all
        zeros by MySQL (SF bug 586058).
      </p></li><li><p>
        Added multi-host failover support (see
        <code class="filename">README</code>).
      </p></li><li><p>
        Repackaging: New driver name is
        <code class="literal">com.mysql.jdbc.Driver</code>, old name still works,
        though (the driver is now provided by MySQL-AB).
      </p></li><li><p>
        Support for large packets (new addition to MySQL-4.0 protocol),
        see <code class="filename">README</code> for more information.
      </p></li><li><p>
        Better checking for closed connections in
        <code class="literal">Statement</code> and
        <code class="literal">PreparedStatement</code>.
      </p></li><li><p>
        Performance improvements in string handling and field metadata
        creation (lazily instantiated) contributed by Alex
        Twisleton-Wykeham-Fiennes.
      </p></li><li><p>
        JDBC-3.0 functionality including
        <code class="literal">Statement/PreparedStatement.getGeneratedKeys()</code>
        and <code class="literal">ResultSet.getURL()</code>.
      </p></li><li><p>
        Overall speed improvements using controlling transient object
        creation in <code class="literal">MysqlIO</code> class when reading
        packets.
      </p></li><li><p>
        <span class="bold"><strong>!!! LICENSE CHANGE !!!</strong></span> The
        driver is now GPL. If you need non-GPL licenses, please contact
        me <code class="literal">&lt;mark@mysql.com&gt;</code>.
      </p></li><li><p>
        Performance enhancements: Driver is now 50–100% faster in
        most situations, and creates fewer temporary objects.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-2-0-x"></a>D.5.5. Changes in MySQL Connector/J 2.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-2-0-14">D.5.5.1. Changes in MySQL Connector/J 2.0.14 (16 May 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-13">D.5.5.2. Changes in MySQL Connector/J 2.0.13 (24 April 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-12">D.5.5.3. Changes in MySQL Connector/J 2.0.12 (07 April 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-11">D.5.5.4. Changes in MySQL Connector/J 2.0.11 (27 January 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-10">D.5.5.5. Changes in MySQL Connector/J 2.0.10 (24 January 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-9">D.5.5.6. Changes in MySQL Connector/J 2.0.9 (13 January 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-8">D.5.5.7. Changes in MySQL Connector/J 2.0.8 (25 November 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-7">D.5.5.8. Changes in MySQL Connector/J 2.0.7 (24 October 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-6">D.5.5.9. Changes in MySQL Connector/J 2.0.6 (16 June 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-5">D.5.5.10. Changes in MySQL Connector/J 2.0.5 (13 June 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-3">D.5.5.11. Changes in MySQL Connector/J 2.0.3 (03 December 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-1">D.5.5.12. Changes in MySQL Connector/J 2.0.1 (06 April 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0pre5">D.5.5.13. Changes in MySQL Connector/J 2.0.0pre5 (21 February 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0pre4">D.5.5.14. Changes in MySQL Connector/J 2.0.0pre4 (10 January 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0pre">D.5.5.15. Changes in MySQL Connector/J 2.0.0pre (17 August 1999)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-14"></a>D.5.5.1. Changes in MySQL Connector/J 2.0.14 (16 May 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.getDouble()</code> now uses code built
        into JDK to be more precise (but slower).
      </p></li><li><p>
        Fixed typo for <code class="literal">relaxAutoCommit</code> parameter.
      </p></li><li><p>
        <code class="literal">LogicalHandle.isClosed()</code> calls through to
        physical connection.
      </p></li><li><p>
        Added SQL profiling (to <code class="literal">STDERR</code>). Set
        <code class="literal">profileSql=true</code> in your JDBC URL. See
        <code class="filename">README</code> for more information.
      </p></li><li><p>
        <code class="literal">PreparedStatement</code> now releases resources on
        <code class="literal">.close()</code>. (SF bug 553268)
      </p></li><li><p>
        More code cleanup.
      </p></li><li><p>
        Quoted identifiers not used if server version does not support
        them. Also, if server started with
        <a href="server-administration.html#option_mysqld_ansi"><code class="option">--ansi</code></a> or
        <a href="server-administration.html#option_mysqld_sql-mode"><code class="option">--sql-mode=ANSI_QUOTES</code></a>,
        “<span class="quote"><code class="literal">"</code></span>” will be used as an
        identifier quote character, otherwise
        “<span class="quote"><code class="literal">'</code></span>” will be used.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-13"></a>D.5.5.2. Changes in MySQL Connector/J 2.0.13 (24 April 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed unicode chars being read incorrectly. (SF bug 541088)
      </p></li><li><p>
        Faster blob escaping for <code class="literal">PrepStmt</code>.
      </p></li><li><p>
        Added <code class="literal">setURL()</code> to
        <code class="literal">MySQLXADataSource</code>. (SF bug 546019)
      </p></li><li><p>
        Added <code class="literal">set</code>/<code class="literal">getPortNumber()</code>
        to <code class="literal">DataSource(s)</code>. (SF bug 548167)
      </p></li><li><p>
        <code class="literal">PreparedStatement.toString()</code> fixed. (SF bug
        534026)
      </p></li><li><p>
        More code cleanup.
      </p></li><li><p>
        Rudimentary version of
        <code class="literal">Statement.getGeneratedKeys()</code> from JDBC-3.0
        now implemented (you need to be using JDK-1.4 for this to work,
        I believe).
      </p></li><li><p>
        <code class="literal">DBMetaData.getIndexInfo()</code> - bad PAGES fixed.
        (SF BUG 542201)
      </p></li><li><p>
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> now
        implemented.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-12"></a>D.5.5.3. Changes in MySQL Connector/J 2.0.12 (07 April 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">testsuite.Traversal</code>
        <code class="literal">afterLast()</code> bug, thanks to Igor Lastric.
      </p></li><li><p>
        Added new types to <code class="literal">getTypeInfo()</code>, fixed
        existing types thanks to Al Davis and Kid Kalanon.
      </p></li><li><p>
        Fixed time zone off-by-1-hour bug in
        <code class="literal">PreparedStatement</code> (538286, 528785).
      </p></li><li><p>
        Added identifier quoting to all
        <code class="literal">DatabaseMetaData</code> methods that need them
        (should fix 518108).
      </p></li><li><p>
        Added support for <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> types
        (51870) to <code class="literal">PreparedStatement</code>.
      </p></li><li><p>
        <code class="literal">ResultSet.insertRow()</code> should now detect
        auto_increment fields in most cases and use that value in the
        new row. This detection will not work in multi-valued keys,
        however, due to the fact that the MySQL protocol does not return
        this information.
      </p></li><li><p>
        Relaxed synchronization in all classes, should fix 520615 and
        520393.
      </p></li><li><p>
        <code class="literal">DataSources</code> - fixed <code class="literal">setUrl</code>
        bug (511614, 525565), wrong datasource class name (532816,
        528767).
      </p></li><li><p>
        Added support for <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> type
        (533556).
      </p></li><li><p>
        Fixes for <code class="literal">ResultSet</code> updatability in
        <code class="literal">PreparedStatement</code>.
      </p></li><li><p>
        <code class="literal">ResultSet</code>: Fixed updatability (values being
        set to <code class="literal">null</code> if not updated).
      </p></li><li><p>
        Added <code class="literal">getTable/ColumnPrivileges()</code> to DBMD
        (fixes 484502).
      </p></li><li><p>
        Added <code class="literal">getIdleFor()</code> method to
        <code class="literal">Connection</code> and
        <code class="literal">MysqlLogicalHandle</code>.
      </p></li><li><p>
        <code class="literal">ResultSet.refreshRow()</code> implemented.
      </p></li><li><p>
        Fixed <code class="literal">getRow()</code> bug (527165) in
        <code class="literal">ResultSet</code>.
      </p></li><li><p>
        General code cleanup.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-11"></a>D.5.5.4. Changes in MySQL Connector/J 2.0.11 (27 January 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Full synchronization of <code class="literal">Statement.java</code>.
      </p></li><li><p>
        Fixed missing <code class="literal">DELETE_RULE</code> value in
        <code class="literal">DBMD.getImported/ExportedKeys()</code> and
        <code class="literal">getCrossReference()</code>.
      </p></li><li><p>
        More changes to fix <code class="literal">Unexpected end of input
        stream</code> errors when reading
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> values. This should be the
        last fix.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-10"></a>D.5.5.5. Changes in MySQL Connector/J 2.0.10 (24 January 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed null-pointer-exceptions when using
        <code class="literal">MysqlConnectionPoolDataSource</code> with Websphere
        4 (bug 505839).
      </p></li><li><p>
        Fixed spurious <code class="literal">Unexpected end of input stream</code>
        errors in <code class="literal">MysqlIO</code> (bug 507456).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-9"></a>D.5.5.6. Changes in MySQL Connector/J 2.0.9 (13 January 2002)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed extra memory allocation in
        <code class="literal">MysqlIO.readPacket()</code> (bug 488663).
      </p></li><li><p>
        Added detection of network connection being closed when reading
        packets (thanks to Todd Lizambri).
      </p></li><li><p>
        Fixed casting bug in <code class="literal">PreparedStatement</code> (bug
        488663).
      </p></li><li><p>
        <code class="literal">DataSource</code> implementations moved to
        <code class="literal">org.gjt.mm.mysql.jdbc2.optional</code> package, and
        (initial) implementations of
        <code class="literal">PooledConnectionDataSource</code> and
        <code class="literal">XADataSource</code> are in place (thanks to Todd
        Wolff for the implementation and testing of
        <code class="literal">PooledConnectionDataSource</code> with IBM WebSphere
        4).
      </p></li><li><p>
        Fixed quoting error with escape processor (bug 486265).
      </p></li><li><p>
        Removed concatenation support from driver (the
        <code class="literal">||</code> operator), as older versions of VisualAge
        seem to be the only thing that use it, and it conflicts with the
        logical <code class="literal">||</code> operator. You will need to start
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
        <a href="server-administration.html#option_mysqld_ansi"><code class="option">--ansi</code></a> flag to use the
        <code class="literal">||</code> operator as concatenation (bug 491680).
      </p></li><li><p>
        <span><strong class="command">Ant</strong></span> build was corrupting included
        <code class="filename">jar</code> files, fixed (bug 487669).
      </p></li><li><p>
        Report batch update support through
        <code class="literal">DatabaseMetaData</code> (bug 495101).
      </p></li><li><p>
        Implementation of
        <code class="literal">DatabaseMetaData.getExported/ImportedKeys()</code>
        and <code class="literal">getCrossReference()</code>.
      </p></li><li><p>
        Fixed off-by-one-hour error in
        <code class="literal">PreparedStatement.setTimestamp()</code> (bug
        491577).
      </p></li><li><p>
        Full synchronization on methods modifying instance and
        class-shared references, driver should be entirely thread-safe
        now (please let me know if you have problems).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-8"></a>D.5.5.7. Changes in MySQL Connector/J 2.0.8 (25 November 2001)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">XADataSource</code>/<code class="literal">ConnectionPoolDataSource</code>
        code (experimental)
      </p></li><li><p>
        <code class="literal">DatabaseMetaData.getPrimaryKeys()</code> and
        <code class="literal">getBestRowIdentifier()</code> are now more robust in
        identifying primary keys (matches regardless of case or
        abbreviation/full spelling of <code class="literal">Primary Key</code> in
        <code class="literal">Key_type</code> column).
      </p></li><li><p>
        Batch updates now supported (thanks to some inspiration from
        Daniel Rall).
      </p></li><li><p>
        <code class="literal">PreparedStatement.setAnyNumericType()</code> now
        handles positive exponents correctly (adds <code class="literal">+</code>
        so MySQL can understand it).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-7"></a>D.5.5.8. Changes in MySQL Connector/J 2.0.7 (24 October 2001)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Character sets read from database if
        <code class="literal">useUnicode=true</code> and
        <code class="literal">characterEncoding</code> is not set. (thanks to
        Dmitry Vereshchagin)
      </p></li><li><p>
        Initial transaction isolation level read from database (if
        available). (thanks to Dmitry Vereshchagin)
      </p></li><li><p>
        Fixed <code class="literal">PreparedStatement</code> generating SQL that
        would end up with syntax errors for some queries.
      </p></li><li><p>
        <code class="literal">PreparedStatement.setCharacterStream()</code> now
        implemented
      </p></li><li><p>
        Capitalize type names when
        <code class="literal">capitalizeTypeNames=true</code> is passed in URL or
        properties (for WebObjects. (thanks to Anjo Krank)
      </p></li><li><p>
        <code class="literal">ResultSet.getBlob()</code> now returns
        <code class="literal">null</code> if column value was
        <code class="literal">null</code>.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getPrecision()</code>
        returning one less than actual on newer versions of MySQL.
      </p></li><li><p>
        Fixed dangling socket problem when in high availability
        (<code class="literal">autoReconnect=true</code>) mode, and finalizer for
        <code class="literal">Connection</code> will close any dangling sockets on
        GC.
      </p></li><li><p>
        Fixed time zone issue in
        <code class="literal">PreparedStatement.setTimestamp()</code>. (thanks to
        Erik Olofsson)
      </p></li><li><p>
        PreparedStatement.setDouble() now uses full-precision doubles
        (reverting a fix made earlier to truncate them).
      </p></li><li><p>
        Fixed
        <code class="literal">DatabaseMetaData.supportsTransactions()</code>, and
        <code class="literal">supportsTransactionIsolationLevel()</code> and
        <code class="literal">getTypeInfo()</code>
        <code class="literal">SQL_DATETIME_SUB</code> and
        <code class="literal">SQL_DATA_TYPE</code> fields not being readable.
      </p></li><li><p>
        Updatable result sets now correctly handle
        <code class="literal">NULL</code> values in fields.
      </p></li><li><p>
        PreparedStatement.setBoolean() will use 1/0 for values if your
        MySQL version is 3.21.23 or higher.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.isAfterLast()</code> always
        returning <code class="literal">false</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-6"></a>D.5.5.9. Changes in MySQL Connector/J 2.0.6 (16 June 2001)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">PreparedStatement</code> parameter checking.
      </p></li><li><p>
        Fixed case-sensitive column names in
        <code class="literal">ResultSet.java</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-5"></a>D.5.5.10. Changes in MySQL Connector/J 2.0.5 (13 June 2001)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.insertRow()</code> works now, even if not
        all columns are set (they will be set to
        <code class="literal">NULL</code>).
      </p></li><li><p>
        Added <code class="literal">Byte</code> to
        <code class="literal">PreparedStatement.setObject()</code>.
      </p></li><li><p>
        Fixed data parsing of <a href="data-types.html#datetime" title="10.3.1. The DATE,
        DATETIME, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>
        values with 2-digit years.
      </p></li><li><p>
        Added <code class="literal">ISOLATION</code> level support to
        <code class="literal">Connection.setIsolationLevel()</code>
      </p></li><li><p>
        <code class="literal">DataBaseMetaData.getCrossReference()</code> no
        longer <code class="literal">ArrayIndexOOB</code>.
      </p></li><li><p>
        <code class="literal">ResultSet.getBoolean()</code> now recognizes
        <code class="literal">-1</code> as <code class="literal">true</code>.
      </p></li><li><p>
        <code class="literal">ResultSet</code> has +/-Inf/inf support.
      </p></li><li><p>
        <code class="literal">getObject()</code> on <code class="literal">ResultSet</code>
        correctly does
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a>-&gt;<code class="literal">Byte</code>
        and
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a>-&gt;<code class="literal">Short</code>.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getColumnTypeName</code> for
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>/<a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>.
      </p></li><li><p>
        Fixed <code class="literal">ArrayIndexOutOfBounds</code> when sending
        large <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> queries. (Max size
        packet was not being set)
      </p></li><li><p>
        Fixed NPE on
        <code class="literal">PreparedStatement.executeUpdate()</code> when all
        columns have not been set.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.getBlob()</code>
        <code class="literal">ArrayIndex</code> out-of-bounds.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-3"></a>D.5.5.11. Changes in MySQL Connector/J 2.0.3 (03 December 2000)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed composite key problem with updatable result sets.
      </p></li><li><p>
        Faster ASCII string operations.
      </p></li><li><p>
        Fixed off-by-one error in <code class="literal">java.sql.Blob</code>
        implementation code.
      </p></li><li><p>
        Fixed incorrect detection of
        <code class="literal">MAX_ALLOWED_PACKET</code>, so sending large blobs
        should work now.
      </p></li><li><p>
        Added detection of -/+INF for doubles.
      </p></li><li><p>
        Added <code class="literal">ultraDevHack</code> URL parameter, set to
        <code class="literal">true</code> to enable (broken) Macromedia UltraDev
        to use the driver.
      </p></li><li><p>
        Implemented <code class="literal">getBigDecimal()</code> without scale
        component for JDBC2.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-1"></a>D.5.5.12. Changes in MySQL Connector/J 2.0.1 (06 April 2000)</h4></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Columns that are of type <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> now
        return as <code class="literal">Strings</code> when you use
        <code class="literal">getObject()</code>.
      </p></li><li><p>
        Cleaned up exception handling when driver connects.
      </p></li><li><p>
        Fixed <code class="literal">RSMD.isWritable()</code> returning wrong
        value. Thanks to Moritz Maass.
      </p></li><li><p>
        <code class="literal">DatabaseMetaData.getPrimaryKeys()</code> now works
        correctly with respect to <code class="literal">key_seq</code>. Thanks to
        Brian Slesinsky.
      </p></li><li><p>
        Fixed many JDBC-2.0 traversal, positioning bugs, especially with
        respect to empty result sets. Thanks to Ron Smits, Nick Brook,
        Cessar Garcia and Carlos Martinez.
      </p></li><li><p>
        No escape processing is done on
        <code class="literal">PreparedStatements</code> anymore per JDBC spec.
      </p></li><li><p>
        Fixed some issues with updatability support in
        <code class="literal">ResultSet</code> when using multiple primary keys.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre5"></a>D.5.5.13. Changes in MySQL Connector/J 2.0.0pre5 (21 February 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed Bad Handshake problem.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre4"></a>D.5.5.14. Changes in MySQL Connector/J 2.0.0pre4 (10 January 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixes to ResultSet for insertRow() - Thanks to Cesar Garcia
          </p></li><li><p>
            Fix to Driver to recognize JDBC-2.0 by loading a JDBC-2.0
            class, instead of relying on JDK version numbers. Thanks to
            John Baker.
          </p></li><li><p>
            Fixed ResultSet to return correct row numbers
          </p></li><li><p>
            Statement.getUpdateCount() now returns rows matched, instead
            of rows actually updated, which is more SQL-92 like.
          </p></li></ul></div><p>
        10-29-99
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Statement/PreparedStatement.getMoreResults() bug fixed.
            Thanks to Noel J. Bergman.
          </p></li><li><p>
            Added Short as a type to PreparedStatement.setObject().
            Thanks to Jeff Crowder
          </p></li><li><p>
            Driver now automagically configures maximum/preferred packet
            sizes by querying server.
          </p></li><li><p>
            Autoreconnect code uses fast ping command if server supports
            it.
          </p></li><li><p>
            Fixed various bugs with respect to packet sizing when
            reading from the server and when alloc'ing to write to the
            server.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre"></a>D.5.5.15. Changes in MySQL Connector/J 2.0.0pre (17 August 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Now compiles under JDK-1.2. The driver supports both JDK-1.1
            and JDK-1.2 at the same time through a core set of classes.
            The driver will load the appropriate interface classes at
            runtime by figuring out which JVM version you are using.
          </p></li><li><p>
            Fixes for result sets with all nulls in the first row.
            (Pointed out by Tim Endres)
          </p></li><li><p>
            Fixes to column numbers in SQLExceptions in ResultSet
            (Thanks to Blas Rodriguez Somoza)
          </p></li><li><p>
            The database no longer needs to specified to connect.
            (Thanks to Christian Motschke)
          </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-1-2-x"></a>D.5.6. Changes in MySQL Connector/J 1.2.x and lower</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-1-2b">D.5.6.1. Changes in MySQL Connector/J 1.2b (04 July 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-2a">D.5.6.2. Changes in MySQL Connector/J 1.2a (14 April 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1i">D.5.6.3. Changes in MySQL Connector/J 1.1i (24 March 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1h">D.5.6.4. Changes in MySQL Connector/J 1.1h (08 March 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1g">D.5.6.5. Changes in MySQL Connector/J 1.1g (19 February 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1f">D.5.6.6. Changes in MySQL Connector/J 1.1f (31 December 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1b">D.5.6.7. Changes in MySQL Connector/J 1.1b (03 November 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1">D.5.6.8. Changes in MySQL Connector/J 1.1 (02 September 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-0">D.5.6.9. Changes in MySQL Connector/J 1.0 (24 August 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-9d">D.5.6.10. Changes in MySQL Connector/J 0.9d (04 August 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-9">D.5.6.11. Changes in MySQL Connector/J 0.9 (28 July 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-8">D.5.6.12. Changes in MySQL Connector/J 0.8 (06 July 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-7">D.5.6.13. Changes in MySQL Connector/J 0.7 (01 July 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-6">D.5.6.14. Changes in MySQL Connector/J 0.6 (21 May 1998)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-2b"></a>D.5.6.1. Changes in MySQL Connector/J 1.2b (04 July 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Better Documentation (in progress), in doc/mm.doc/book1.html
          </p></li><li><p>
            DBMD now permits null for a column name pattern (not in
            spec), which it changes to '%'.
          </p></li><li><p>
            DBMD now has correct types/lengths for getXXX().
          </p></li><li><p>
            ResultSet.getDate(), getTime(), and getTimestamp() fixes.
            (contributed by Alan Wilken)
          </p></li><li><p>
            EscapeProcessor now handles \{ \} and { or } inside
            quotation marks correctly. (thanks to Alik for some ideas on
            how to fix it)
          </p></li><li><p>
            Fixes to properties handling in Connection. (contributed by
            Juho Tikkala)
          </p></li><li><p>
            ResultSet.getObject() now returns null for NULL columns in
            the table, rather than bombing out. (thanks to Ben Grosman)
          </p></li><li><p>
            ResultSet.getObject() now returns Strings for types from
            MySQL that it doesn't know about. (Suggested by Chris
            Perdue)
          </p></li><li><p>
            Removed DataInput/Output streams, not needed, 1/2 number of
            method calls per IO operation.
          </p></li><li><p>
            Use default character encoding if one is not specified. This
            is a work-around for broken JVMs, because according to spec,
            EVERY JVM must support "ISO8859_1", but they do not.
          </p></li><li><p>
            Fixed Connection to use the platform character encoding
            instead of "ISO8859_1" if one isn't explicitly set. This
            fixes problems people were having loading the character-
            converter classes that didn't always exist (JVM bug).
            (thanks to Fritz Elfert for pointing out this problem)
          </p></li><li><p>
            Changed MysqlIO to re-use packets where possible to reduce
            memory usage.
          </p></li><li><p>
            Fixed escape-processor bugs pertaining to {} inside
            quotation marks.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-2a"></a>D.5.6.2. Changes in MySQL Connector/J 1.2a (14 April 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed character-set support for non-Javasoft JVMs (thanks to
            many people for pointing it out)
          </p></li><li><p>
            Fixed ResultSet.getBoolean() to recognize 'y' &amp; 'n' as
            well as '1' &amp; '0' as boolean flags. (thanks to Tim
            Pizey)
          </p></li><li><p>
            Fixed ResultSet.getTimestamp() to give better performance.
            (thanks to Richard Swift)
          </p></li><li><p>
            Fixed getByte() for numeric types. (thanks to Ray Bellis)
          </p></li><li><p>
            Fixed DatabaseMetaData.getTypeInfo() for DATE type. (thanks
            to Paul Johnston)
          </p></li><li><p>
            Fixed EscapeProcessor for "fn" calls. (thanks to Piyush Shah
            at locomotive.org)
          </p></li><li><p>
            Fixed EscapeProcessor to not do extraneous work if there are
            no escape codes. (thanks to Ryan Gustafson)
          </p></li><li><p>
            Fixed Driver to parse URLs of the form
            "jdbc:mysql://host:port" (thanks to Richard Lobb)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1i"></a>D.5.6.3. Changes in MySQL Connector/J 1.1i (24 March 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed Timestamps for PreparedStatements
          </p></li><li><p>
            Fixed null pointer exceptions in RSMD and RS
          </p></li><li><p>
            Re-compiled with jikes for valid class files (thanks ms!)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1h"></a>D.5.6.4. Changes in MySQL Connector/J 1.1h (08 March 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed escape processor to deal with unmatched { and }
            (thanks to Craig Coles)
          </p></li><li><p>
            Fixed escape processor to create more portable (between
            DATETIME and TIMESTAMP types) representations so that it
            will work with BETWEEN clauses. (thanks to Craig Longman)
          </p></li><li><p>
            MysqlIO.quit() now closes the socket connection. Before,
            after many failed connections some OS's would run out of
            file descriptors. (thanks to Michael Brinkman)
          </p></li><li><p>
            Fixed NullPointerException in Driver.getPropertyInfo.
            (thanks to Dave Potts)
          </p></li><li><p>
            Fixes to MysqlDefs to allow all *text fields to be retrieved
            as Strings. (thanks to Chris at Leverage)
          </p></li><li><p>
            Fixed setDouble in PreparedStatement for large numbers to
            avoid sending scientific notation to the database. (thanks
            to J.S. Ferguson)
          </p></li><li><p>
            Fixed getScale() and getPrecision() in RSMD. (contrib'd by
            James Klicman)
          </p></li><li><p>
            Fixed getObject() when field was DECIMAL or NUMERIC (thanks
            to Bert Hobbs)
          </p></li><li><p>
            DBMD.getTables() bombed when passed a null table-name
            pattern. Fixed. (thanks to Richard Lobb)
          </p></li><li><p>
            Added check for "client not authorized" errors during
            connect. (thanks to Hannes Wallnoefer)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1g"></a>D.5.6.5. Changes in MySQL Connector/J 1.1g (19 February 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Result set rows are now byte arrays. Blobs and Unicode work
            bidirectonally now. The useUnicode and encoding options are
            implemented now.
          </p></li><li><p>
            Fixes to PreparedStatement to send binary set by
            setXXXStream to be sent untouched to the MySQL server.
          </p></li><li><p>
            Fixes to getDriverPropertyInfo().
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1f"></a>D.5.6.6. Changes in MySQL Connector/J 1.1f (31 December 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Changed all ResultSet fields to Strings, this should allow
            Unicode to work, but your JVM must be able to convert
            between the character sets. This should also make reading
            data from the server be a bit quicker, because there is now
            no conversion from StringBuffer to String.
          </p></li><li><p>
            Changed PreparedStatement.streamToString() to be more
            efficient (code from Uwe Schaefer).
          </p></li><li><p>
            URL parsing is more robust (throws SQL exceptions on errors
            rather than NullPointerExceptions)
          </p></li><li><p>
            PreparedStatement now can convert Strings to Time/Date
            values using setObject() (code from Robert Currey).
          </p></li><li><p>
            IO no longer hangs in Buffer.readInt(), that bug was
            introduced in 1.1d when changing to all byte-arrays for
            result sets. (Pointed out by Samo Login)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1b"></a>D.5.6.7. Changes in MySQL Connector/J 1.1b (03 November 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixes to DatabaseMetaData to allow both IBM VA and J-Builder
            to work. Let me know how it goes. (thanks to Jac Kersing)
          </p></li><li><p>
            Fix to ResultSet.getBoolean() for NULL strings (thanks to
            Barry Lagerweij)
          </p></li><li><p>
            Beginning of code cleanup, and formatting. Getting ready to
            branch this off to a parallel JDBC-2.0 source tree.
          </p></li><li><p>
            Added "final" modifier to critical sections in MysqlIO and
            Buffer to allow compiler to inline methods for speed.
          </p></li></ul></div><p>
        9-29-98
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If object references passed to setXXX() in PreparedStatement
            are null, setNull() is automatically called for you. (Thanks
            for the suggestion goes to Erik Ostrom)
          </p></li><li><p>
            setObject() in PreparedStatement will now attempt to write a
            serialized representation of the object to the database for
            objects of Types.OTHER and objects of unknown type.
          </p></li><li><p>
            Util now has a static method readObject() which given a
            ResultSet and a column index will re-instantiate an object
            serialized in the above manner.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1"></a>D.5.6.8. Changes in MySQL Connector/J 1.1 (02 September 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Got rid of "ugly hack" in MysqlIO.nextRow(). Rather than
            catch an exception, Buffer.isLastDataPacket() was fixed.
          </p></li><li><p>
            Connection.getCatalog() and Connection.setCatalog() should
            work now.
          </p></li><li><p>
            Statement.setMaxRows() works, as well as setting by property
            maxRows. Statement.setMaxRows() overrides maxRows set using
            properties or url parameters.
          </p></li><li><p>
            Automatic re-connection is available. Because it has to
            "ping" the database before each query, it is turned off by
            default. To use it, pass in "autoReconnect=true" in the
            connection URL. You may also change the number of reconnect
            tries, and the initial timeout value using "maxReconnects=n"
            (default 3) and "initialTimeout=n" (seconds, default 2)
            parameters. The timeout is an exponential backoff type of
            timeout; for example, if you have initial timeout of 2
            seconds, and maxReconnects of 3, then the driver will
            timeout 2 seconds, 4 seconds, then 16 seconds between each
            re-connection attempt.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-0"></a>D.5.6.9. Changes in MySQL Connector/J 1.0 (24 August 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed handling of blob data in Buffer.java
          </p></li><li><p>
            Fixed bug with authentication packet being sized too small.
          </p></li><li><p>
            The JDBC Driver is now under the LGPL
          </p></li></ul></div><p>
        8-14-98
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed Buffer.readLenString() to correctly read data for
            BLOBS.
          </p></li><li><p>
            Fixed PreparedStatement.stringToStream to correctly read
            data for BLOBS.
          </p></li><li><p>
            Fixed PreparedStatement.setDate() to not add a day. (above
            fixes thanks to Vincent Partington)
          </p></li><li><p>
            Added URL parameter parsing (?user=... and so forth).
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-9d"></a>D.5.6.10. Changes in MySQL Connector/J 0.9d (04 August 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Big news! New package name. Tim Endres from ICE Engineering
            is starting a new source tree for GNU GPL'd Java software.
            He's graciously given me the org.gjt.mm package directory to
            use, so now the driver is in the org.gjt.mm.mysql package
            scheme. I'm "legal" now. Look for more information on Tim's
            project soon.
          </p></li><li><p>
            Now using dynamically sized packets to reduce memory usage
            when sending commands to the DB.
          </p></li><li><p>
            Small fixes to getTypeInfo() for parameters, and so forth.
          </p></li><li><p>
            DatabaseMetaData is now fully implemented. Let me know if
            these drivers work with the various IDEs out there. I've
            heard that they're working with JBuilder right now.
          </p></li><li><p>
            Added JavaDoc documentation to the package.
          </p></li><li><p>
            Package now available in .zip or .tar.gz.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-9"></a>D.5.6.11. Changes in MySQL Connector/J 0.9 (28 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Implemented getTypeInfo(). Connection.rollback() now throws
            an SQLException per the JDBC spec.
          </p></li><li><p>
            Added PreparedStatement that supports all JDBC API methods
            for PreparedStatement including InputStreams. Please check
            this out and let me know if anything is broken.
          </p></li><li><p>
            Fixed a bug in ResultSet that would break some queries that
            only returned 1 row.
          </p></li><li><p>
            Fixed bugs in DatabaseMetaData.getTables(),
            DatabaseMetaData.getColumns() and
            DatabaseMetaData.getCatalogs().
          </p></li><li><p>
            Added functionality to Statement that enables
            executeUpdate() to store values for IDs that are
            automatically generated for AUTO_INCREMENT fields.
            Basically, after an executeUpdate(), look at the SQLWarnings
            for warnings like "LAST_INSERTED_ID = 'some number', COMMAND
            = 'your SQL query'". If you are using AUTO_INCREMENT fields
            in your tables and are executing a lot of executeUpdate()s
            on one Statement, be sure to clearWarnings() every so often
            to save memory.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-8"></a>D.5.6.12. Changes in MySQL Connector/J 0.8 (06 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Split MysqlIO and Buffer to separate classes. Some
            ClassLoaders gave an IllegalAccess error for some fields in
            those two classes. Now mm.mysql works in applets and all
            classloaders. Thanks to Joe Ennis &lt;jce@mail.boone.com&gt;
            for pointing out the problem and working on a fix with me.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-7"></a>D.5.6.13. Changes in MySQL Connector/J 0.7 (01 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed DatabaseMetadata problems in getColumns() and bug in
            switch statement in the Field constructor. Thanks to Costin
            Manolache &lt;costin@tdiinc.com&gt; for pointing these out.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-6"></a>D.5.6.14. Changes in MySQL Connector/J 0.6 (21 May 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Incorporated efficiency changes from Richard Swift
            &lt;Richard.Swift@kanatek.ca&gt; in
            <code class="literal">MysqlIO.java</code> and
            <code class="literal">ResultSet.java</code>:
          </p></li><li><p>
            We're now 15% faster than gwe's driver.
          </p></li><li><p>
            Started working on <code class="literal">DatabaseMetaData</code>.
          </p></li><li><p>
            The following methods are implemented:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="function">getTables()</code>
              </p></li><li><p>
                <code class="function">getTableTypes()</code>
              </p></li><li><p>
                <code class="function">getColumns()</code>
              </p></li><li><p>
                <code class="function">getCatalogs()</code>
              </p></li></ul></div></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="news-connector-mxj"></a>D.6. MySQL Connector/MXJ Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-12">D.6.1. Changes in MySQL Connector/MXJ 5.0.12 (07 July 2011)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-11">D.6.2. Changes in MySQL Connector/MXJ 5.0.11 (24 November 2009)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-10">D.6.3. Changes in MySQL Connector/MXJ 5.0.10 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-9">D.6.4. Changes in MySQL Connector/MXJ 5.0.9 (19 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-8">D.6.5. Changes in MySQL Connector/MXJ 5.0.8 (06 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-7">D.6.6. Changes in MySQL Connector/MXJ 5.0.7 (27 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-6">D.6.7. Changes in MySQL Connector/MXJ 5.0.6 (04 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-5">D.6.8. Changes in MySQL Connector/MXJ 5.0.5 (14 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-4">D.6.9. Changes in MySQL Connector/MXJ 5.0.4 (28 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-3">D.6.10. Changes in MySQL Connector/MXJ 5.0.3 (24 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-2">D.6.11. Changes in MySQL Connector/MXJ 5.0.2 (15 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-1">D.6.12. Changes in MySQL Connector/MXJ 5.0.1 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-0">D.6.13. Changes in MySQL Connector/MXJ 5.0.0 (09 December 2005)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-12"></a>D.6.1. Changes in MySQL Connector/MXJ 5.0.12 (07 July 2011)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Connector/MXJ now contains MySQL 5.5.9, not MySQL 5.1.
      </p></li><li><p>
        These platform mappings were added:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Windows_Vista-amd64=Win-x86
          </p></li><li><p>
            Windows_2003-amd64=Win-x86
          </p></li><li><p>
            Windows_2000-amd64=Win-x86
          </p></li><li><p>
            FreeBSD-i386=FreeBSD-x86
          </p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-11"></a>D.6.2. Changes in MySQL Connector/MXJ 5.0.11 (24 November 2009)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The embedded MySQL binaries have been updated to MySQL 5.1.40
        for GPL releases and MySQL 5.1.40 for Commercial releases.
      </p></li><li><p>
        The contents of the directory used for bootstrapping the MySQL
        databases is now configurable by using the
        <code class="literal">windows-share-dir-jar</code> property. You should
        supply the name of a jar containing the files you want to use.
      </p></li><li><p>
        The embedded Aspect/J class has been removed.
      </p></li><li><p>
        The default timeout for the kill delay within the embedded test
        suite has been increased from 10 to 30 seconds.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        On startup Connector/MXJ generated an exception on Windows 7:
      </p><pre class="programlisting">Exception in thread “Thread-3” java.util.MissingResourceException?: Resource
‘5-0-51a/Windows_7-x86/mysqld-nt.exe’ not found
at com.mysql.management.util.Streams.getResourceAsStream(Streams.java:133)
at com.mysql.management.util.Streams.getResourceAsStream(Streams.java:107)
at com.mysql.management.util.Streams$1.inner(Streams.java:149) at
com.mysql.management.util.Exceptions$VoidBlock?.exec(Exceptions.java:128)
at com.mysql.management.util.Streams.createFileFromResource(Streams.java:162)
at com.mysql.management.MysqldResource?.makeMysqld(MysqldResource?.java:533)
at com.mysql.management.MysqldResource?.deployFiles(MysqldResource?.java:518)
at com.mysql.management.MysqldResource?.exec(MysqldResource?.java:495)
at com.mysql.management.MysqldResource?.start(MysqldResource?.java:216)
at com.mysql.management.MysqldResource?.start(MysqldResource?.java:166)</pre><p>
        The default <code class="literal">platform-map.properties</code> file,
        which maps platforms to the supplied binary bundles, has been
        updated with additional platforms, including Windows 7, Windows
        Server 2008, <code class="literal">amd64</code> and
        <code class="literal">sparcv9</code> for Solaris, and Mac OS X 64-bit.
       (Bug #48298)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-10"></a>D.6.3. Changes in MySQL Connector/MXJ 5.0.10 (Not released)</h3></div></div></div><p>
        This was an internal only release.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The embedded MySQL has been updated to the MySQL 5.1 series. The
        embedded MySQL binaries have been updated to MySQL 5.1.33 for
        GPL releases and MySQL 5.1.34 for Commercial releases.
      </p></li><li><p>
        The MySQL binary for Windows targets has been updated to be
        configurable through the
        <code class="literal">windows-mysqld-command</code> property. This is to
        handle the move in MySQL 5.1.33 from
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-nt.exe</strong></span></a> to
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld.exe</strong></span></a>. The default value is
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld.exe</strong></span></a>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-9"></a>D.6.4. Changes in MySQL Connector/MXJ 5.0.9 (19 August 2008)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The port used in the
        <code class="literal">ConnectorMXJUrlTestExample</code> and
        <code class="literal">ConnectorMXJObjectTestExample</code> port is no
        longer hard coded. Instead, the code uses the
        <code class="literal">x-mxj_test_port</code> property a default value of
        <code class="literal">3336</code>
      </p></li><li><p>
        The utility used to kill MySQL on Windows
        (<code class="literal">kill.exe</code>) has been configured to be loaded
        from the <code class="literal">kill.exe</code> property, instead of being
        hard-coded. The corresponding timeout,
        <code class="literal">KILL_DELAY</code> has also been moved to the
        properties file and defaults to 5 minutes.
      </p></li><li><p>
        The embedded MySQL binaries have been updated to MySQL 5.0.51a
        for GPL releases and MySQL 5.0.54 for Commercial releases.
      </p></li><li><p>
        The timeout for kill operations in the embedded test suite has
        been set to a default of 10 seconds.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-8"></a>D.6.5. Changes in MySQL Connector/MXJ 5.0.8 (06 August 2007)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The embedded documentation has been updated so that it now
        points to the main MySQL documentation pages in the MySQL
        reference manual.
      </p></li><li><p>
        The embedded MySQL binaries have been updated to MySQL 5.0.45
        for GPL releases and MySQL 5.0.46 for Commercial releases.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-7"></a>D.6.6. Changes in MySQL Connector/MXJ 5.0.7 (27 May 2007)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Updated the jar file name to be consistent with the Connector/J
        jar file name. Files are now formatted as
        <code class="filename">mysql-connector-mxj-<em class="replaceable"><code>mxj-version</code></em></code>.
      </p></li><li><p>
        The <code class="literal">ConnectorMXJUrlTestExample</code> and
        <code class="literal">ConnectorMXJObjectTestExammple</code> have been
        updated to include an example of initializing the user/password
        and creating an initial database. The
        <code class="literal">InitializePasswordExample</code> example class has
        now been removed.
      </p></li><li><p>
        The <code class="literal">PatchedStandardSocketFactory</code> class has
        been removed, because it fixed an issue in Connector/J that was
        corrected in Connector/J 5.0.6.
      </p></li><li><p>
        The embedded MySQL binaries have been updated to MySQL 5.0.41
        for GPL releases and MySQL 5.0.42 for Commercial releases.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added a null-check to deal with class loaders where
        <code class="literal">getClassLoader()</code> returns null.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-6"></a>D.6.7. Changes in MySQL Connector/MXJ 5.0.6 (04 May 2007)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Updated internal jar file names to include version information
        and be more consistent with Connector/J jar naming. For example,
        <code class="filename">connector-mxj.jar</code> is now
        <code class="filename">mysql-connector-mxj-${mxj-version}.jar</code>.
      </p></li><li><p>
        Updated commercial license files.
      </p></li><li><p>
        Added copyright notices to some classes which were missing them.
      </p></li><li><p>
        Added <code class="classname">InitializeUser</code> and
        <code class="classname">QueryUtil</code> classes to support new feature.
      </p></li><li><p>
        Added new tests for initial-user &amp; expanded some existing
        tests.
      </p></li><li><p>
        <code class="classname">ConnectorMXJUrlTestExample</code> and
        <code class="classname">ConnectorMXJObjectTestExample</code> now
        demonstrate the initialization of user/password and creating the
        initial database (rather than using "test").
      </p></li><li><p>
        Added new connection property <code class="option">initialize-user</code>
        which, if set to <code class="literal">true</code> will remove the
        default, un-passworded anonymous and root users, and create the
        user/password from the connection url.
      </p></li><li><p>
        Removed obsolete field
        <code class="literal">SimpleMysqldDynamicMBean.lastInvocation</code>.
      </p></li><li><p>
        Clarified code in <code class="literal">DefaultsMap.entrySet()</code>.
      </p></li><li><p>
        Removed obsolete
        <code class="filename">PatchedStandardSocketFactory</code> java file.
      </p></li><li><p>
        Added <code class="literal">main(String[])</code> to
        <code class="filename">com/mysql/management/AllTestsSuite.java</code>.
      </p></li><li><p>
        Errors reading <code class="literal">portFile</code> are now reported
        using <code class="literal">stacktrace(err)</code>, previously
        <code class="literal">System.err</code> was used.
      </p></li><li><p>
        <code class="literal">portFile</code> now contains a new-line to be
        consistent with <code class="literal">pidFile</code>.
      </p></li><li><p>
        Fixed where <code class="methodname">versionString.trim()</code> was
        ignored.
      </p></li><li><p>
        Removed references to <code class="classname">File.deleteOnExit</code>,
        a warning is printed instead.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Changed tests to shutdown mysqld prior to deleting files.
      </p></li><li><p>
        Fixed port file to always be written to datadir.
      </p></li><li><p>
        Added os.name-os.arch to resource directory mapping properties
        file.
      </p></li><li><p>
        Swapped out commercial binaries for v5.0.40.
      </p></li><li><p>
        Delete <code class="literal">portFile</code> on shutdown.
      </p></li><li><p>
        Moved <code class="literal">platform-map.properties</code> into
        <code class="filename">db-files.jar</code>.
      </p></li><li><p>
        Clarified the startup max wait numbers.
      </p></li><li><p>
        Updated <code class="filename">build.xml</code> in preperation for next
        beta build.
      </p></li><li><p>
        Removed <code class="literal">use-default-architecture</code> property
        replaced.
      </p></li><li><p>
        Added null-check to deal with C/MXJ being loaded by the
        bootstrap classloaders with JVMs for which
        <code class="function">getClassLoader()</code> returns null.
      </p></li><li><p>
        Added robustness around reading portfile.
      </p></li><li><p>
        Removed <code class="literal">PatchedStandardSocketFactory</code> (fixed
        in Connector/J 5.0.6).
      </p></li><li><p>
        Refactored duplication from tests and examples to
        <code class="classname">QueryUtil</code>.
      </p></li><li><p>
        Removed obsolete
        <code class="classname">InitializePasswordExample</code>
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-5"></a>D.6.8. Changes in MySQL Connector/MXJ 5.0.5 (14 March 2007)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Moved <code class="literal">MysqldFactory</code> to main package.
      </p></li><li><p>
        Reformatting: Added newlines some files which did not end in
        them.
      </p></li><li><p>
        Swapped out commercial binaries for v5.0.36.
      </p></li><li><p>
        Found and removed dynamic linking in mysql_kill; updated
        solution.
      </p></li><li><p>
        Changed protected constructor of
        <code class="literal">SimpleMysqldDynamicMBean</code> from taking a
        <code class="literal">MysqldResource</code> to taking a
        <code class="literal">MysqldFactory</code>, to lay groundwork for
        addressing BUG discovered by Andrew Rubinger. See:
        <a href="http://forums.mysql.com/read.php?39,143046,143046#msg-143046" target="_top">MySQL
        Forums</a> (Actual testing with JBoss, and filing a bug, is
        still required.)
      </p></li><li><p>
        <code class="filename">build.xml</code>: <code class="literal">usage</code> now
        slightly more verbose; some reformatting.
      </p></li><li><p>
        Now incorporates Reggie Bernett's
        <code class="literal">SafeTerminateProcess</code> and only calls the
        unsafe TerminateProcess as a final last resort.
      </p></li><li><p>
        New windows <code class="filename">kill.exe</code> fixes a bug where
        mysqld was being force terminated. Issue reported by bruno
        haleblian and others, see:
        <a href="http://forums.mysql.com/read.php?39,140623,140623#msg-140623" target="_top">MySQL
        Forums</a>.
      </p></li><li><p>
        Replaced <code class="literal">Boolean.parseBoolean</code> with JDK 1.4
        compliant <code class="literal">valueOf</code>.
      </p></li><li><p>
        Changed <code class="literal">connector-mxj.properties</code> default
        mysql version to 5.0.37.
      </p></li><li><p>
        In testing so far mysqld reliably shuts down cleanly much
        faster.
      </p></li><li><p>
        Added testcase to
        <code class="literal">com.mysql.management.jmx.AcceptanceTest</code> which
        demonstrates that <code class="literal">dataDir</code> is a mutable MBean
        property.
      </p></li><li><p>
        Updated <code class="literal">build.xml</code> in prep for next release.
      </p></li><li><p>
        Changed <code class="literal">SimpleMysqldDynamicMBean</code> to create
        <code class="literal">MysqldResource</code> on demand to enable setting of
        <code class="filename">datadir</code>. (Rubinger bug groundwork).
      </p></li><li><p>
        Clarified the synchronization of
        <code class="literal">MysqldResource</code> methods.
      </p></li><li><p>
        <code class="literal">SIGHUP</code> is replaced with
        <code class="literal">MySQLShutdown&lt;PID&gt;</code> event.
      </p></li><li><p>
        Clarified the immutability of <code class="literal">baseDir</code>,
        <code class="literal">dataDir</code>, <code class="literal">pidFile</code>,
        <code class="literal">portFile</code>.
      </p></li><li><p>
        Added 5.1.15 binaries to the repository.
      </p></li><li><p>
        Removed 5.1.14 binaries from the repository.
      </p></li><li><p>
        Added <code class="literal">getDataDir()</code> to interface
        <code class="literal">MysqldResourceI</code>.
      </p></li><li><p>
        Added 5.1.14 binaries to repository.
      </p></li><li><p>
        Replaced windows <a href="sql-syntax.html#kill" title="12.7.6.4. KILL Syntax"><span><strong class="command">kill.exe</strong></span></a> resource with
        re-written version specific to mysqld.
      </p></li><li><p>
        Added Patched <code class="literal">StandardSocketFactory</code> from
        Connector/J 5-0 HEAD.
      </p></li><li><p>
        Ensured 5.1.14 compatibility.
      </p></li><li><p>
        Swapped out gpl binaries for v5.0.37.
      </p></li><li><p>
        Removed 5.0.22 binaries from the repository.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-4"></a>D.6.9. Changes in MySQL Connector/MXJ 5.0.4 (28 January 2007)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Allow multiple calls to start server from URL connection on
        non-3306 port.
       (Bug #24004)</p></li><li><p>
        Updated <code class="filename">build.xml</code> to build to handle with
        different gpl and commercial mysqld version numbers.
      </p></li><li><p>
        Only populate the options map from the help text if specifically
        requested or in the MBean case.
      </p></li><li><p>
        Introduced property for Linux &amp; WinXX to default to 32bit
        versions.
      </p></li><li><p>
        Swapped out gpl binaries for v5.0.27.
      </p></li><li><p>
        Swapped out commercial binaries for v5.0.32.
      </p></li><li><p>
        Moved mysqld binary resourced into separate jar file NOTICE:
        <code class="literal">CLASSPATH</code> will now need to
        <code class="filename">connector-mxj-db-files.jar</code>.
      </p></li><li><p>
        Minor test robustness improvements.
      </p></li><li><p>
        Moved default version string out of java class into a text
        editable properties file
        (<code class="literal">connector-mxj.properties</code>) in the resources
        directory.
      </p></li><li><p>
        Fixed test to be tolerant of <code class="filename">/tmp</code> being a
        symlink to <code class="filename">/foo/tmp</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-3"></a>D.6.10. Changes in MySQL Connector/MXJ 5.0.3 (24 June 2006)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Removed unused imports, formatted code, made minor edits to
        tests.
      </p></li><li><p>
        Removed "TeeOutputStream" - no longer needed.
      </p></li><li><p>
        Swapped out the mysqld binaries for MySQL v5.0.22.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-2"></a>D.6.11. Changes in MySQL Connector/MXJ 5.0.2 (15 June 2006)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Replaced string parsing with JDBC connection attempt for
        determining if a mysqld is "ready for connections"
        <code class="literal">CLASSPATH</code> will now need to include
        Connector/J jar.
      </p></li><li><p>
        "platform" directories replace spaces with underscores
      </p></li><li><p>
        extracted array and list printing to ListToString utility class
      </p></li><li><p>
        Swapped out the mysqld binaries for MySQL v5.0.21
      </p></li><li><p>
        Added trace level logging with Aspect/J.
        <code class="literal">CLASSPATH</code> will now need to include
        <code class="literal">lib/aspectjrt.jar</code>
      </p></li><li><p>
        reformatted code
      </p></li><li><p>
        altered to be "basedir" rather than "port" oriented.
      </p></li><li><p>
        help parsing test reflects current help options
      </p></li><li><p>
        insulated users from problems with "." in basedir
      </p></li><li><p>
        swapped out the mysqld binaries for MySQL v5.0.18
      </p></li><li><p>
        Made tests more robust be deleting the /tmp/test-c.mxj directory
        before running tests.
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown API change: now takes File
        parameter (basedir) instead of port.
      </p></li><li><p>
        socket is now "mysql.sock" in datadir
      </p></li><li><p>
        added ability to specify "mysql-version" as an url parameter
      </p></li><li><p>
        Extended timeout for help string parsing, to avoid cases where
        the help text was getting prematurely flushed, and thus
        truncated.
      </p></li><li><p>
        swapped out the mysqld binaries for MySQL v5.0.19
      </p></li><li><p>
        MysqldResource now tied to dataDir as well as basedir (API
        CHANGE)
      </p></li><li><p>
        moved PID file into datadir
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown now works across JVMs.
      </p></li><li><p>
        extracted splitLines(String) to Str utility class
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown(port) no longer throws,
        only reports to System.err
      </p></li><li><p>
        ServerLauncherSocketFactory now treats URL parameters in the
        form of <code class="literal">&amp;server.foo=null</code> as
        <code class="literal">serverOptionMap.put("foo", null)</code>
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown API change: now takes 2
        File parameters (basedir, datadir)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-1"></a>D.6.12. Changes in MySQL Connector/MXJ 5.0.1 (Not released)</h3></div></div></div><p>
        This was an internal only release.
      </p><p>This section has no changelog entries.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-0"></a>D.6.13. Changes in MySQL Connector/MXJ 5.0.0 (09 December 2005)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Removed HelpOptionsParser's need to reference a MysqldResource.
      </p></li><li><p>
        Reorganized utils into a single "Utils" collaborator.
      </p></li><li><p>
        Minor test tweaks
      </p></li><li><p>
        Altered examples and tests to use new Connector/J 5.0 URL syntax
        for launching Connector/MXJ ("jdbc:mysql:mxj://")
      </p></li><li><p>
        Swapped out the mysqld binaries for MySQL v5.0.16.
      </p></li><li><p>
        Ditched "ClassUtil" (merged with Str).
      </p></li><li><p>
        Minor refactorings for type casting and exception handling.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ccpp-news"></a>D.7. MySQL Connector/C++ Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#ccpp-news-1-1-x">D.7.1. Changes in MySQL Connector/C++ 1.1.x</a></span></dt><dt><span class="section"><a href="news.html#ccpp-news-1-0-x">D.7.2. Changes in MySQL Connector/C++ 1.0.x</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ccpp-news-1-1-x"></a>D.7.1. Changes in MySQL Connector/C++ 1.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#ccpp-news-1-1-0">D.7.1.1. Changes in MySQL Connector/CPP 1.1.0 (13 September 2010, Generally Available)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ccpp-news-1-1-0"></a>D.7.1.1. Changes in MySQL Connector/CPP 1.1.0 (13 September 2010, Generally Available)</h4></div></div></div><p class="release-level">
        This fixes bugs since the first GA release 1.0.5 and introduces
        new features.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        API incompatible change: <code class="literal">ConnectPropertyVal</code>
        is no longer a <code class="literal">struct</code> by a typedef that uses
        <code class="literal">boost::variant</code>. Code such as:
      </p><pre class="programlisting">sql::ConnectPropertyVal tmp;
tmp.str.val=passwd.c_str();
tmp.str.len=passwd.length();
connection_properties["password"] = tmp;</pre><p>
        Should be changed to:
      </p><pre class="programlisting">connection_properties["password"] = sql::ConnectPropertyVal(passwd);</pre></li><li><p>
        Instances of <code class="literal">std::auto_ptr</code> have been changed
        to <code class="literal">boost::scoped_ptr</code>. Scoped array instances
        now use boost::scoped_array. Further,
        <code class="literal">boost::shared_ptr</code> and
        <code class="literal">boost::weak_ptr</code> are now used for guarding
        access around result sets.
      </p></li><li><p>
        <code class="literal">LDFLAGS</code>, <code class="literal">CXXFLAGS</code> and
        <code class="literal">CPPFLAGS</code> are now checked from the environment
        for every binary generated.
      </p></li><li><p>
        Connection map property <code class="literal">OPT_RECONNECT</code> was
        changed to be of type <code class="literal">boolean</code> from
        <code class="literal">long</code> <code class="literal">long</code>.
      </p></li><li><p>
        <code class="literal">get_driver_instance()</code> is now only available
        in dynamic library builds - static builds do not have this
        symbol. This was done to accommodate loading the DLL with
        <code class="literal">LoadLibrary</code> or <code class="literal">dlopen</code>. If
        you do not use <span><strong class="command">CMake</strong></span> for building the source
        code you will need to define
        <code class="literal">mysqlcppconn_EXPORTS</code> if you are loading
        dynamically and want to use the
        <code class="literal">get_driver_instance()</code> entry point.
      </p></li><li><p>
        <code class="literal">Connection::getClientOption(const sql::SQLString &amp;
        optionName, void * optionValue)</code> now accepts the
        <code class="literal">optionName</code> values
        <code class="literal">metadataUseInfoSchema</code>,
        <code class="literal">defaultStatementResultType</code>,
        <code class="literal">defaultPreparedStatementResultType</code>, and
        <code class="literal">characterSetResults</code>. In the previous version
        only <code class="literal">metadataUseInfoSchema</code> was permitted. The
        same options are available for
        <code class="literal">Connection::setClientOption()</code>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Certain header files were incorrectly present in the source
        distribution. The fix excludes dynamically generated and
        platform specific header files from source packages generated
        using CPack.
       (Bug #45846)</p></li><li><p>
        <span><strong class="command">CMake</strong></span> generated an error if configuring an
        out of source build, that is, when <span><strong class="command">CMake</strong></span> was
        not called from the source root directory.
       (Bug #45843)</p></li><li><p>
        Using Prepared Statements caused corruption of the heap.
       (Bug #45048)</p></li><li><p>
        Missing includes when using GCC 4.4. Note that GCC 4.4 is not
        yet in use for any official MySQL Connector/C++ builds.
       (Bug #44931)</p></li><li><p>
        A bug was fixed in Prepared Statements. The bug occurred when a
        stored procedure was prepared without any parameters. This led
        to an exception.
       (Bug #44931)</p></li><li><p>
        Fixed a Prepared Statements performance issue. Reading large
        result sets was slow.
      </p></li><li><p>
        Fixed bug in <code class="literal">ResultSetMetaData</code> for statements
        and prepared statements, <code class="literal">getScale</code> and
        <code class="literal">getPrecision</code> returned incorrect results.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ccpp-news-1-0-x"></a>D.7.2. Changes in MySQL Connector/C++ 1.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#ccpp-news-1-0-5">D.7.2.1. Changes in MySQL Connector/CPP 1.0.5 (21 April 2009)</a></span></dt><dt><span class="section"><a href="news.html#ccpp-news-1-0-4">D.7.2.2. Changes in MySQL Connector/CPP 1.0.4 (31 March 2009, beta)</a></span></dt><dt><span class="section"><a href="news.html#ccpp-news-1-0-3">D.7.2.3. Changes in MySQL Connector/CPP 1.0.3 (02 March 2009, alpha)</a></span></dt><dt><span class="section"><a href="news.html#ccpp-news-1-0-2">D.7.2.4. Changes in MySQL Connector/CPP 1.0.2 (19 December 2008, alpha)</a></span></dt><dt><span class="section"><a href="news.html#ccpp-news-1-0-1">D.7.2.5. Changes in MySQL Connector/CPP 1.0.1 (01 December 2008, alpha)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ccpp-news-1-0-5"></a>D.7.2.1. Changes in MySQL Connector/CPP 1.0.5 (21 April 2009)</h4></div></div></div><p class="release-level">
        This is the first Generally Available (GA) release.
      </p><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The interface of <code class="literal">sql::ConnectionMetaData</code>,
        <code class="literal">sql::ResultSetMetaData</code> and
        <code class="literal">sql::ParameterMetaData</code> was modified to have a
        protected destructor. As a result the client code has no need to
        destruct the metadata objects returned by the connector. MySQL Connector/C++
        handles the required destruction. This enables statements such
        as:
      </p><pre class="programlisting">connection-&gt;getMetaData-&gt;getSchema();</pre><p>
        This avoids potential memory leaks that could occur as a result
        of losing the pointer returned by
        <code class="literal">getMetaData()</code>.
      </p></li><li><p>
        Improved memory management. Potential memory leak situations are
        handled more robustly.
      </p></li><li><p>
        Changed the interface of <code class="literal">sql::Driver</code> and
        <code class="literal">sql::Connection</code> so they accept the options
        map by alias instead of by value.
      </p></li><li><p>
        Changed the return type of
        <code class="literal">sql::SQLException::getSQLState()</code> from
        <code class="literal">std::string</code> to <code class="literal">const char
        *</code> to be consistent with
        <code class="literal">std::exception::what()</code>.
      </p></li><li><p>
        Implemented <code class="literal">getResultSetType()</code> and
        <code class="literal">setResultSetType()</code> for
        <code class="literal">Statement</code>. Uses
        <code class="literal">TYPE_FORWARD_ONLY</code>, which means unbuffered
        result set and <code class="literal">TYPE_SCROLL_INSENSITIVE</code>, which
        means buffered result set.
      </p></li><li><p>
        Implemented <code class="literal">getResultSetType()</code> for
        <code class="literal">PreparedStatement</code>. The setter is not
        implemented because currently
        <code class="literal">PreparedStatement</code> cannot do refetching.
        Storing the result means the bind buffers will be correct.
      </p></li><li><p>
        Added the option <code class="literal">defaultStatementResultType</code>
        to <code class="literal">MySQL_Connection::setClientOption()</code>. Also,
        the method now returns <code class="literal">sql::Connection *</code>.
      </p></li><li><p>
        Added <code class="literal">Result::getType()</code>. Implemented for the
        three result set classes.
      </p></li><li><p>
        Enabled tracing functionality when building with Microsoft
        Visual C++ 8 and later, which corresponds to Microsoft Visual
        Studio 2005 and later.
      </p></li><li><p>
        Added better support for named pipes, on Windows. Use
        <code class="literal">pipe://</code> and add the path to the pipe. Shared
        memory connections are currently not supported.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A bug was fixed in
        <code class="literal">MySQL_Connection::setSessionVariable()</code>, which
        had been causing exceptions to be thrown.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ccpp-news-1-0-4"></a>D.7.2.2. Changes in MySQL Connector/CPP 1.0.4 (31 March 2009, beta)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        An installer was added for the Windows operating system.
      </p></li><li><p>
        Minimum <span><strong class="command">CMake</strong></span> version required was changed
        from 2.4.2 to 2.6.2. The latest version is required for building
        on Windows.
      </p></li><li><p>
        <code class="literal">metadataUseInfoSchema</code> was added to the
        connection property map, which enables control of the
        <code class="literal">INFORMATION_SCHEMA</code> for metadata.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_ConnectionMetaData::supportsConvert(from,
        to)</code>.
      </p></li><li><p>
        Added support for MySQL Connector/C.
      </p></li><li><p>
        Introduced <code class="literal">ResultSetMetaData::isZerofill()</code>,
        which is not in the JDBC specification.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A bug was fixed in all implementations of
        <code class="literal">ResultSet::relative()</code> which was giving a
        wrong return value although positioning was working correctly.
      </p></li><li><p>
        A leak was fixed in <code class="literal">MySQL_PreparedResultSet</code>,
        which occurred when the result contained a
        <code class="literal">BLOB</code> column.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ccpp-news-1-0-3"></a>D.7.2.3. Changes in MySQL Connector/CPP 1.0.3 (02 March 2009, alpha)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added new tests in <code class="filename">test/unit/classes</code>. Those
        tests are mostly about code coverage. Most of the actual
        functionality of the driver is tested by the tests found in
        <code class="filename">test/CJUnitPort</code>.
      </p></li><li><p>
        New data types added to the list returned by
        <code class="literal">DatabaseMetaData::getTypeInfo()</code> are
        <code class="literal">FLOAT UNSIGNED</code>, <code class="literal">DECIMAL
        UNSIGNED</code>, <code class="literal">DOUBLE UNSIGNED</code>. Those
        tests may not be in the JDBC specification. However, due to the
        change you should be able to look up every type and type name
        returned by, for example,
        <code class="literal">ResultSetMetaData::getColumnTypeName()</code>.
      </p></li><li><p>
        <code class="literal">MySQL_Driver::getPatchVersion</code> introduced.
      </p></li><li><p>
        Major performance improvements due to new buffered
        <code class="literal">ResultSet</code> implementation.
      </p></li><li><p>
        Addition of <code class="filename">test/unit/README</code> with
        instructions for writing bug and regression tests.
      </p></li><li><p>
        Experimental support for STLPort. This feature may be removed
        again at any time later without prior warning! Type
        <span><strong class="command">cmake <code class="option">-L</code></strong></span> for configuration
        instructions.
      </p></li><li><p>
        Added properties enabled methods for connecting, which add many
        connect options. This uses a dictionary (map) of key value
        pairs. Methods added are
        <code class="literal">Driver::connect(map)</code>, and
        <code class="literal">Connection::Connection(map)</code>.
      </p></li><li><p>
        New <code class="literal">BLOB</code> implementation.
        <code class="literal">sql::Blob</code> was removed in favor of
        <code class="literal">std::istream</code>. C++'s
        <code class="literal">IOStream</code> library is very powerful, similar to
        PHP's streams. It makes no sense to reinvent the wheel. For
        example, you can pass a <code class="literal">std::istringstream</code>
        object to <code class="literal">setBlob()</code> if the data is in memory,
        or just open a file <code class="literal">std::fstream</code> and let it
        stream to the DB, or write its own stream. This is also true for
        <code class="literal">getBlob()</code> where you can just copy data (if a
        buffered result set), or stream data (if implemented).
      </p></li><li><p>
        Implemented <code class="literal">ResultSet::getBlob()</code> which
        returns <code class="literal">std::stream</code>.
      </p></li><li><p>
        Fixed
        <code class="literal">MySQL_DatabaseMetaData::getTablePrivileges()</code>.
        Test cases were added in the first unit testing framework.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_Connection::setSessionVariable()</code> for
        setting variables like <code class="literal">sql_mode</code>.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_DatabaseMetaData::getColumnPrivileges()</code>.
      </p></li><li><p>
        <code class="filename">cppconn/datatype.h</code> has changed and is now
        used again. Reimplemented the type subsystem to be more usable -
        more types for binary and nonbinary strings.
      </p></li><li><p>
        Implementation for
        <code class="literal">MySQL_DatabaseMetaData::getImportedKeys()</code> for
        MySQL versions before 5.1.16 using <code class="literal">SHOW</code>, and
        above using <code class="literal">INFORMATION_SCHEMA</code>.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_ConnectionMetaData::getProcedureColumns()</code>.
      </p></li><li><p>
        <span><strong class="command">make package_source</strong></span> now packs with bzip2.
      </p></li><li><p>
        Re-added <code class="literal">getTypeInfo()</code> with information about
        all types supported by MySQL and the
        <code class="literal">sql::DataType</code>.
      </p></li><li><p>
        Changed the implementation of
        <code class="literal">MySQL_ConstructedResultSet</code> to use the more
        efficient O(1) access method. This should improve the speed with
        which the metadata result sets are used. Also, there is less
        copying during the construction of the result set, which means
        that all result sets returned from the metadata functions will
        be faster.
      </p></li><li><p>
        Introduced, internally, <code class="literal">sql::mysql::MyVal</code>
        which has implicit constructors. Used in
        <code class="filename">mysql_metadata.cpp</code> to create result sets
        with native data instead of always string (varchar).
      </p></li><li><p>
        Renamed <code class="literal">ResultSet::getLong()</code> to
        <code class="literal">ResultSet::getInt64()</code>.
        <code class="filename">resultset.h</code> includes typdefs for Windows to
        be able to use <code class="literal">int64_t</code>.
      </p></li><li><p>
        Introduced <code class="literal">ResultSet::getUInt()</code> and
        <code class="literal">ResultSet::getUInt64()</code>.
      </p></li><li><p>
        Improved the implementation for
        <code class="literal">ResultSetMetaData::isReadOnly()</code>. Values
        generated from views are read only. These generated values don't
        have <code class="literal">db</code> in <code class="literal">MYSQL_FIELD</code>
        set, while all normal columns do have.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_DatabaseMetaData::getExportedKeys()</code>.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_DatabaseMetaData::getCrossReference()</code>.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Bug fixed in
        <code class="literal">MySQL_PreparedResultSet::getString()</code>.
        Returned string that had real data but the length was random.
        Now, the string is initialized with the correct length and thus
        is binary safe.
      </p></li><li><p>
        Corrected handling of unsigned server types. Now returning
        correct values.
      </p></li><li><p>
        Fixed handling of numeric columns in
        <code class="literal">ResultSetMetaData::isCaseSensitive</code> to return
        <code class="literal">false</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ccpp-news-1-0-2"></a>D.7.2.4. Changes in MySQL Connector/CPP 1.0.2 (19 December 2008, alpha)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Implemented <code class="literal">getScale()</code>,
        <code class="literal">getPrecision()</code> and
        <code class="literal">getColumnDisplaySize()</code> for
        <code class="literal">MySQL_ResultSetMetaData</code> and
        <code class="literal">MySQL_Prepared_ResultSetMetaData</code>.
      </p></li><li><p>
        Changed <code class="literal">ResultSetMetaData</code> methods
        <code class="literal">getColumnDisplaySize()</code>,
        <code class="literal">getPrecision()</code>, <code class="literal">getScale()</code>
        to return <code class="literal">unsigned int</code> instead of
        <code class="literal">signed int</code>.
      </p></li><li><p>
        <code class="literal">DATE</code>, <code class="literal">DATETIME</code> and
        <code class="literal">TIME</code> are now being handled when calling the
        <code class="literal">MySQL_PreparedResultSet</code> methods
        <code class="literal">getString()</code>, <code class="literal">getDouble()</code>,
        <code class="literal">getInt()</code>, <code class="literal">getLong()</code>,
        <code class="literal">getBoolean()</code>.
      </p></li><li><p>
        Reverted implementation of
        <code class="literal">MySQL_DatabaseMetaData::getTypeInfo()</code>. Now
        unimplemented. In addition, removed
        <code class="literal">cppconn/datatype.h</code> for now, until a more
        robust implementation of the types can be developed.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_PreparedStatement::setNull()</code>.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_PreparedStatement::clearParameters()</code>.
      </p></li><li><p>
        Added PHP script
        <code class="filename">examples/cpp_trace_analyzer.php</code> to filter
        the output of the debug trace. Please see the inline comments
        for documentation. This script is unsupported.
      </p></li><li><p>
        Implemented
        <code class="literal">MySQL_ResultSetMetaData::getPrecision()</code> and
        <code class="literal">MySQL_Prepared_ResultSetMetaData::getPrecision()</code>,
        updating example.
      </p></li><li><p>
        Added new unit test framework for JDBC compliance and regression
        testing.
      </p></li><li><p>
        Added <code class="filename">test/unit</code> as a basis for general unit
        tests using the new test framework, see
        <code class="filename">test/unit/example</code> for basic usage examples.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed
        <code class="literal">MySQL_PreparedStatementResultSet::getDouble()</code>
        to return the correct value when the underlying type is
        <code class="literal">MYSQL_TYPE_FLOAT</code>.
      </p></li><li><p>
        Fixed bug in
        <code class="literal">MySQL_ConnectionMetaData::getIndexInfo()</code>. The
        method did not work because the schema name wasn't included in
        the query sent to the server.
      </p></li><li><p>
        Fixed a bug in
        <code class="literal">MySQL_ConnectionMetaData::getColumns()</code> which
        was performing a cartesian product of the columns in the table
        times the columns matching <code class="literal">columnNamePattern</code>.
        The example
        <code class="filename">example/connection_meta_schemaobj.cpp</code> was
        extended to cover the function.
      </p></li><li><p>
        Fixed bugs in <code class="literal">MySQL_DatabaseMetaData</code>. All
        <code class="literal">supportsCatalogXXXXX</code> methods were incorrectly
        returning <code class="literal">true</code> and all
        <code class="literal">supportsSchemaXXXX</code> methods were incorrectly
        returning <code class="literal">false</code>. Now
        <code class="literal">supportsCatalogXXXXX</code> returns
        <code class="literal">false</code> and
        <code class="literal">supportsSchemaXXXXX</code> returns
        <code class="literal">true</code>.
      </p></li><li><p>
        Fixed bugs in the <code class="literal">MySQL_PreparedStatements</code>
        methods <code class="literal">setBigInt()</code> and
        <code class="literal">setDatetime()</code>. They decremented the internal
        column index before forwarding the request. This resulted in a
        double-decrement and therefore the wrong internal column index.
        The error message generated was:
      </p><pre class="programlisting">setString() ... invalid "parameterIndex"</pre></li><li><p>
        Fixed a bug in <code class="literal">getString()</code>.
        <code class="literal">getString()</code> is now binary safe. A new example
        was also added.
      </p></li><li><p>
        Fixed bug in <code class="literal">FLOAT</code> handling.
      </p></li><li><p>
        Fixed <code class="literal">MySQL_PreparedStatement::setBlob()</code>. In
        the tests there is a simple example of a class implementing
        <code class="literal">sql::Blob</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ccpp-news-1-0-1"></a>D.7.2.5. Changes in MySQL Connector/CPP 1.0.1 (01 December 2008, alpha)</h4></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">sql::mysql::MySQL_SQLException</code> was removed.
        The distinction between server and client (connector) errors,
        based on the type of the exception, has been removed. However,
        the error code can still be checked to evaluate the error type.
      </p></li><li><p>
        Support for (n)make install was added. You can change the
        default installation path. Carefully read the messages displayed
        after executing cmake. The following are installed:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Static and the dynamic version of the library,
            <code class="filename">libmysqlcppconn</code>.
          </p></li><li><p>
            Generic interface, <code class="filename">cppconn</code>.
          </p></li><li><p>
            Two MySQL specific headers:
          </p><p>
            <code class="filename">mysql_driver.h</code>, use this if you want to
            get your connections from the driver instead of
            instantiating a <code class="literal">MySQL_Connection</code> object.
            This makes your code portable when using the common
            interface.
          </p><p>
            <code class="filename">mysql_connection.h</code>, use this if you
            intend to link directly to the
            <code class="literal">MySQL_Connection</code> class and use its
            specifics not found in <code class="literal">sql::Connection</code>.
          </p><p>
            However, you can make your application fully abstract by
            using the generic interface rather than these two headers.
          </p></li></ul></div></li><li><p>
        Driver Manager was removed.
      </p></li><li><p>
        Added <code class="literal">ConnectionMetaData::getSchemas()</code> and
        <code class="literal">Connection::setSchema()</code>.
      </p></li><li><p>
        <code class="literal">ConnectionMetaData::getCatalogTerm()</code> returns
        not applicable, there is no counterpart to catalog in MySQL Connector/C++.
      </p></li><li><p>
        Added experimental GCov support, <span><strong class="command">cmake
        <code class="option">-DMYSQLCPPCONN_GCOV_ENABLE:BOOL=1</code></strong></span>
      </p></li><li><p>
        All examples can be given optional connection parameters on the
        command line, for example:
      </p><pre class="programlisting">examples/connect tcp://host:port user pass database</pre><p>
        or
      </p><pre class="programlisting">examples/connect unix:///path/to/mysql.sock user pass database</pre></li><li><p>
        Renamed <code class="literal">ConnectionMetaData::getTables:
        TABLE_COMMENT</code> to <code class="literal">REMARKS</code>.
      </p></li><li><p>
        Renamed <code class="literal">ConnectionMetaData::getProcedures:
        PROCEDURE_SCHEMA</code> to
        <code class="literal">PROCEDURE_SCHEM</code>.
      </p></li><li><p>
        Renamed <code class="literal">ConnectionMetaData::getPrimaryKeys():
        COLUMN</code> to <code class="literal">COLUMN_NAME</code>,
        <code class="literal">SEQUENCE</code> to <code class="literal">KEY_SEQ</code>, and
        <code class="literal">INDEX_NAME</code> to <code class="literal">PK_NAME</code>.
      </p></li><li><p>
        Renamed <code class="literal">ConnectionMetaData::getImportedKeys():
        PKTABLE_CATALOG</code> to <code class="literal">PKTABLE_CAT</code>,
        <code class="literal">PKTABLE_SCHEMA</code> to
        <code class="literal">PKTABLE_SCHEM</code>,
        <code class="literal">FKTABLE_CATALOG</code> to
        <code class="literal">FKTABLE_CAT</code>,
        <code class="literal">FKTABLE_SCHEMA</code> to
        <code class="literal">FKTABLE_SCHEM</code>.
      </p></li><li><p>
        Changed metadata column name <code class="literal">TABLE_CATALOG</code> to
        <code class="literal">TABLE_CAT</code> and <code class="literal">TABLE_SCHEMA</code>
        to <code class="literal">TABLE_SCHEM</code> to ensure JDBC compliance.
      </p></li><li><p>
        Introduced experimental CPack support, see make help.
      </p></li><li><p>
        All tests changed to create TAP compliant output.
      </p></li><li><p>
        Renamed <code class="literal">sql::DbcMethodNotImplemented</code> to
        <code class="literal">sql::MethodNotImplementedException</code>
      </p></li><li><p>
        Renamed <code class="literal">sql::DbcInvalidArgument</code> to
        <code class="literal">sql::InvalidArgumentException</code>
      </p></li><li><p>
        Changed <code class="literal">sql::DbcException</code> to implement the
        interface of JDBC's <code class="literal">SQLException</code>. Renamed to
        <code class="literal">sql::SQLException</code>.
      </p></li><li><p>
        Converted Connector/J tests added.
      </p></li><li><p>
        MySQL Workbench 5.1 changed to use MySQL Connector/C++ for its database
        connectivity.
      </p></li><li><p>
        New directory layout.
      </p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-proxy-news"></a>D.8. MySQL Proxy Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#mysql-proxy-news-0-8-2">D.8.1. Changes in MySQL Proxy 0.8.2 (18 August 2011)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-8-1">D.8.2. Changes in MySQL Proxy 0.8.1 (13 September 2010)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-8-0">D.8.3. Changes in MySQL Proxy 0.8.0 (21 January 2010)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-7-2">D.8.4. Changes in MySQL Proxy 0.7.2 (30 June 2009)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-7-1">D.8.5. Changes in MySQL Proxy 0.7.1 (15 May 2009)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-7-0">D.8.6. Changes in MySQL Proxy 0.7.0 (Not Released)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-6-1">D.8.7. Changes in MySQL Proxy 0.6.1 (06 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-6-0">D.8.8. Changes in MySQL Proxy 0.6.0 (11 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-1">D.8.9. Changes in MySQL Proxy 0.5.1 (30 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-0">D.8.10. Changes in MySQL Proxy 0.5.0 (19 June 2007)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-8-2"></a>D.8.1. Changes in MySQL Proxy 0.8.2 (18 August 2011)</h3></div></div></div><p>
        MySQL Proxy 0.8.2 is a maintenance release and focuses on these
        areas:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Adding the protocol changes of MySQL 5.5 and later
          </p></li><li><p>
            Removing the “<span class="quote">admin</span>” plugin from the list of
            default plugins, as it requires configuration since 0.8.1
          </p></li></ul></div><p><span class="bold"><strong>Note to Windows Users</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The Microsoft Visual C++ runtime libraries are now a requirement
        for running MySQL Proxy. Users that do not have these libraries
        must download and install the Microsoft Visual C++ 2008 Service
        Pack 1 Redistributable Package MFC Security Update. For the
        current Proxy version, use the following link to obtain the
        package:
      </p><pre class="programlisting"><a href="http://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;id=26368" target="_top">http://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;id=26368</a>
</pre><p>(Bug #12836100)</p></li></ul></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Removed the “<span class="quote">admin</span>” plugin from the list of default
        plugins, as it requires configuration since 0.8.1.
      </p></li><li><p>
        Added support for <code class="literal">OUT</code> parameters in prepared
        statements in stored procedures with MySQL 5.5.
      </p></li><li><p>
        Added support for decoding <span class="emphasis"><em>all</em></span> data types
        of the row-based replication protocol.
      </p></li><li><p>
        Added support for binary log checksums.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed handling of stored procedures with cursors with MySQL 5.5.
       (Bug #61998)</p></li><li><p>
        A crash occurred if the file named with the
        <code class="option">--defaults-file</code> option did not exist.
       (Bug #59790)</p></li><li><p>
        The first characters of log messages were stripped.
       (Bug #59790)</p></li><li><p>
        A memory leak occurred if connection pooling was used.
       (Bug #56620)</p></li><li><p>
        A bogus timestamp log was produced if state tracking was not
        compiled in.
      </p></li><li><p>
        A crash could occur if run under Valgrind.
      </p></li><li><p>
        Fixed handling of “<span class="quote">used columns</span>” with row-based
        replication.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-8-1"></a>D.8.2. Changes in MySQL Proxy 0.8.1 (13 September 2010)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Allow interception of
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> and <a href="sql-syntax.html#show-errors" title="12.7.5.18. SHOW ERRORS Syntax"><code class="literal">SHOW ERRORS</code></a>
        statements.
      </p></li><li><p>
        The unused
        <code class="literal">network_mysqld_com_query_result_track_state()</code>
        function has been deprecated.
      </p></li><li><p>
        <code class="literal">chassis_set_fdlimit()</code> has been deprecated in
        favor of <code class="literal">chassis_fdlimit_set()</code>.
      </p></li><li><p>
        Shutdown hooks were added to free the global memory of
        third-party libraries such as <code class="literal">openssl</code>.
      </p></li><li><p>
        <code class="literal">con-&gt;in_load_data_local</code> has been removed.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The admin plugin had an undocumented default value for
        <a href="ha-overview.html#option_mysql-proxy_admin-password"><code class="option">--admin-password</code></a>.
       (Bug #53429)</p></li><li><p>
        Use of <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        LOCAL INFILE</code></a> caused the connection between the client
        and MySQL Proxy to abort.
       (Bug #51864)</p></li><li><p>
        If the backend MySQL server went down, and then the clock on the
        MySQL Proxy host went backward (for example, during daylight
        saving time adjustments), Proxy stopped forwarding queries to
        the backend.
       (Bug #50806)</p></li><li><p>
        <code class="literal">network_address_set_address()-&gt;network_address_set_address_ip()</code>
        called <code class="literal">gethostbyname()</code> which was not
        reentrant. This meant that a MySQL Proxy plugin needed to guard
        all calls to <code class="literal">network_address_set_address()</code>
        with a mutex. <code class="literal">network_address_set_address()</code>
        has been modified to be thread safe.
       (Bug #49099)</p></li><li><p>
        The hard limit was fixed for the case where the fdlimit was set.
       (Bug #48120)</p></li><li><p>
        MySQL Proxy returned an error message with a nonstandard SQL
        State when all backends were down:
      </p><pre class="programlisting">"#07000(proxy) all backends are down"</pre><p>
        This caused issues for clients with “<span class="quote">retry</span>” logic,
        as they could not handle these “<span class="quote">custom</span>” SQL States.
       (Bug #45417)</p></li><li><p>
        If MySQL Proxy used a UNIX socket, it did not remove the socket
        file at termination time.
       (Bug #38415)</p></li><li><p>
        The
        <a href="ha-overview.html#option_mysql-proxy_proxy-read-only-backend-addresses"><code class="option">--proxy-read-only-backend-addresses</code></a>
        option did not work.
       (Bug #38341, Bug #11749171)</p></li><li><p>
        When running <span><strong class="command">configure</strong></span> to build, the error
        message relating to the <code class="literal">lua</code> libraries could
        be misleading. The wording and build advice have been updated.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-8-0"></a>D.8.3. Changes in MySQL Proxy 0.8.0 (21 January 2010)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="option">--no-daemon</code> has been renamed to The
        <a href="ha-overview.html#option_mysql-proxy_daemon"><code class="option">--daemon</code></a>. By default, MySQL
        Proxy now starts in foreground mode. Use the
        <a href="ha-overview.html#option_mysql-proxy_daemon"><code class="option">--daemon</code></a> option to override
        this and start in daemon mode.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        A memory leak occurred in MySQL Proxy if clients older than
        MySQL 4.1 connected to it.
       (Bug #50993)</p></li><li><p>
        A segmentation fault occurred in MySQL Proxy if clients older
        than MySQL 4.1 connected to it.
       (Bug #48641)</p></li><li><p>
        MySQL Proxy would load a configuration file with unsafe
        permissions, which could permit password information to be
        exposed through the file. MySQL Proxy now refuses to load a
        configuration file with unsafe permissions.
       (Bug #47589)</p></li><li><p>
        Several supplied scripts were updated to account for flag and
        structure changes:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="filename">active-transactions.lua</code> was updated to
            use the <code class="literal">resultset_is_needed</code> flag.
          </p></li><li><p>
            <code class="filename">ro-balance.lua</code> was updated to use the
            <code class="literal">resultset_is_needed</code> flag and updated
            <code class="literal">proxy.connection.dst.name</code> structure.
          </p></li><li><p>
            <code class="filename">rw-splitting.lua</code> was updated to use the
            <code class="literal">resultset_is_needed</code> flag and updated
            <code class="literal">proxy.connections</code> structure.
          </p></li></ul></div><p>(Bug #47349, Bug #45408, Bug #47345, Bug #43424, Bug #42841, Bug #46141)</p></li><li><p>
        The line numbers provided in stack traces were off by one.
       (Bug #47348)</p></li><li><p>
        MySQL Proxy accepted more than one address in the value of the
        <a href="ha-overview.html#option_mysql-proxy_proxy-backend-addresses"><code class="option">--proxy-backend-addresses</code></a>
        option. You should specify one
        <a href="ha-overview.html#option_mysql-proxy_proxy-backend-addresses"><code class="option">--proxy-backend-addresses</code></a>
        option for each backend address.
       (Bug #47273)</p></li><li><p>
        MySQL Proxy returned the wrong version string internally from
        the <code class="literal">proxy.PROXY_VERSION</code> constant.
       (Bug #45996)</p></li><li><p>
        MySQL Proxy could stop accepting network packets if it received
        a large number of packets. The listen queue has been extended to
        permit a larger backlog.
       (Bug #45878, Bug #43278)</p></li><li><p>
        Due to a memory leak, memory usage for each new connection to
        the proxy increased, leading to very high consumption.
       (Bug #45272)</p></li><li><p>
        MySQL Proxy failed to work with certain versions of MySQL,
        including MySQL 5.1.15, where a change in the MySQL protocol
        existed. Now Proxy denies <code class="literal">COM_CHANGE_USER</code>
        commands when it is connected to MySQL 5.1.14 to 5.1.17 servers
        by sending back an error: <code class="literal">COM_CHANGE_USER is broken on
        5.1.14-.17, please upgrade the MySQL Server</code>.
       (Bug #45167)</p><p>References: See also Bug #25371.</p></li><li><p>
        Logging to <code class="literal">syslog</code> with the
        <a href="ha-overview.html#option_mysql-proxy_log-use-syslog"><code class="option">--log-use-syslog</code></a> option did
        not work.
       (Bug #36431)</p></li><li><p>
        MySQL Proxy could incorrectly insert <code class="literal">NULL</code>
        values into the returned result set, even though
        non-<code class="literal">NULL</code> values were returned in the original
        query.
       (Bug #35729)</p></li><li><p>
        MySQL Proxy raised an error when processing query packets larger
        than 16MB.
       (Bug #35202)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-7-2"></a>D.8.4. Changes in MySQL Proxy 0.7.2 (30 June 2009)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        On Windows, MySQL Proxy might not find the required modules
        during initialization. The core code has been updated to find
        the components correctly, and the Lua-based C modules are
        prefixed with <code class="literal">lua-</code> and Lua plugins with
        <code class="literal">plugin-</code>.
       (Bug #45833)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-7-1"></a>D.8.5. Changes in MySQL Proxy 0.7.1 (15 May 2009)</h3></div></div></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Due to a memory leak, memory usage for each new connection to
        the proxy increased, leading to very high consumption.
       (Bug #45272)</p></li><li><p>
        The port number was reported incorrectly in
        <code class="literal">proxy.connection.client.address</code>.
       (Bug #43313)</p></li><li><p>
        Result sets with more than 250 fields could cause MySQL Proxy to
        crash.
       (Bug #43078)</p></li><li><p>
        MySQL Proxy was unable to increase its own maximum number of
        open files according to the limit specified by the
        <a href="ha-overview.html#option_mysql-proxy_max-open-files"><code class="option">--max-open-files</code></a> option, if
        the limit was less than 8192. When set to debug level, Proxy now
        reports the open files limit and when the limit has been
        updated.
       (Bug #42783)</p></li><li><p>
        MySQL Proxy crashed when connecting to a MySQL 4.0 server. Now
        it generates an error message instead.
       (Bug #38601)</p></li><li><p>
        When using the <code class="filename">rw-splitting.lua</code> script, you
        could get an error when talking to the backend server:
      </p><pre class="programlisting">2008-07-28 18:00:30: (critical) (read_query) [string
"/usr/local/share/mysql-proxy/rw-splitting.l..."]:218: bad argument #1 to 'ipairs' (table
expected, got userdata)</pre><p>
        This led to Proxy closing the connection to the configured MySQL
        backend.
       (Bug #38419)</p></li><li><p>
        When using MySQL Proxy with multiple backends, failure of one
        backend caused Proxy to disconnect all backends and stop routing
        requests.
       (Bug #34793)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-7-0"></a>D.8.6. Changes in MySQL Proxy 0.7.0 (Not Released)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Support for using a configuration file, in addition to the
        command-line options, has been added. To specify such a file,
        use the
        <a href="ha-overview.html#option_mysql-proxy_defaults-file"><code class="option">--defaults-file=<code class="filename">file_name</code></code></a>
        command-line option. See
        <a href="ha-overview.html#mysql-proxy-configuration" title="14.7.3. MySQL Proxy Command Options">Section 14.7.3, “MySQL Proxy Command Options”</a>.
       (Bug #30206)</p></li><li><p>
        A number of the internal structures developed for use with Lua
        scripts that work with MySQL Proxy have been updated and
        harmonized to make their meaning and contents easier to use and
        consistent across multiple locations.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The address information has been updated. Instead of a
            combined <code class="literal">ip:port</code> structure that you had
            to parse to extract the individual information, you can now
            access that information directly. For example, instead of
            structures providing a single <code class="literal">.address</code>
            item, you now have these items: <code class="literal">name</code> (the
            combined <code class="literal">ip:port</code>),
            <code class="literal">address</code> (the IP address), and
            <code class="literal">port</code> (port number). In addition, all
            addresses now supply both the <code class="literal">src</code>
            (source) and <code class="literal">dst</code> (destination) socket
            information for both ends of connections.
          </p><p>
            Some familiar structures have been updated to accommodate
            this information:
          </p><div class="itemizedlist"><ul type="square"><li><p>
                <code class="literal">proxy.connection.client.address</code> is
                <code class="literal">proxy.connection.client.src.name</code>
              </p></li><li><p>
                <code class="literal">proxy.connection.server.address</code> is
                <code class="literal">proxy.connection.server.dst.name</code>
              </p></li></ul></div></li><li><p>
            <code class="literal">proxy.backends</code> is now in
            <code class="literal">proxy.global.backends</code> The
            <code class="literal">.address</code> field of each backend is an
            address-object as described earlier. For example,
            <code class="literal">proxy.backends[1].address</code> is
            <code class="literal">proxy.global.backends[1].dst.name</code>.
          </p></li><li><p>
            The <code class="function">read_auth()</code> and
            <code class="function">read_handshake()</code> functions no longer
            receive an <code class="literal">auth</code> parameter. Instead, all
            the data is available in the connection tables.
          </p><p>
            In <code class="literal">read_handshake()</code>, you access the
            information through the global
            <code class="literal">proxy.connection</code> table:
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>0.6</th><th>0.7</th></tr></thead><tbody><tr><td><code class="literal">auth.thread_id</code>

                  </td><td><code class="literal">proxy.connection.server.thread_id</code>

                  </td></tr><tr><td><code class="literal">auth.mysqld_version</code>

                  </td><td><code class="literal">proxy.connection.server.mysqld_version</code>

                  </td></tr><tr><td><code class="literal">auth.server_addr</code>

                  </td><td><code class="literal">proxy.connection.server.dst.name</code>

                  </td></tr><tr><td><code class="literal">auth.client_addr</code>

                  </td><td><code class="literal">proxy.connection.client.src.name</code>

                  </td></tr><tr><td><code class="literal">auth.scramble</code>

                  </td><td><code class="literal">proxy.connection.server.scramble_buffer</code>

                  </td></tr></tbody></table></div><p>
            In <code class="function">read_auth()</code>, you can use the
            following:
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>0.6</th><th>0.7</th></tr></thead><tbody><tr><td><code class="literal">auth.username</code>

                  </td><td><code class="literal">proxy.connection.client.username</code>

                  </td></tr><tr><td><code class="literal">auth.password</code>

                  </td><td><code class="literal">proxy.connection.client.scrambled_password</code>

                  </td></tr><tr><td><code class="literal">auth.default_db</code>

                  </td><td><code class="literal">proxy.connection.client.default_db</code>

                  </td></tr><tr><td><code class="literal">auth.server_addr</code>

                  </td><td><code class="literal">proxy.connection.server.dst.name</code>

                  </td></tr><tr><td><code class="literal">auth.client_addr</code>

                  </td><td><code class="literal">proxy.connection.client.src.name</code>

                  </td></tr></tbody></table></div></li><li><p>
            In the <code class="function">proxy.queries:append()</code> function,
            a third parameter is an (optional) table with options
            specific to the this packet. Specifically, if you want to
            have access to the result set in the
            <code class="function">read_query_result()</code> hook, you must set
            the <code class="literal">resultset_is_needed</code> flag:
          </p><pre class="programlisting">proxy.queries:append( 1, ..., { resultset_is_needed = true } )</pre><p>
            For more information, see
            <a href="ha-overview.html#mysql-proxy-scripting-structures-queries">proxy.queries</a>.
          </p></li><li><p>
            <code class="literal">proxy.backends</code> is now in
            <code class="literal">proxy.global.backends</code>.
          </p></li></ul></div></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        Accessing MySQL Proxy using a client or backend from earlier
        than MySQL 4.1 resulted in Proxy aborting with an assertion.
        This is because Proxy supports only MySQL 4.1 or higher. Proxy
        now reports a fault.
       (Bug #31419)</p></li><li><p>
        MySQL Proxy was configured with the <code class="literal">LUA_PATH</code>
        and <code class="literal">LUA_CPATH</code> directory locations according
        to the build host rather than the execution host. In addition,
        during installation, certain Lua source files could be installed
        into the incorrect locations.
       (Bug #44877, Bug #44497)</p></li><li><p>
        Using MySQL Proxy with very large return data sets from queries
        could cause a crash, with or without manipulation of the data
        set within the Lua engine.
       (Bug #39332)</p></li><li><p>
        MySQL Proxy terminated if a submitted packet was smaller than
        expected by the protocol.
       (Bug #36743)</p></li><li><p>
        When using MySQL Proxy in a master-master replication scenario,
        Proxy failed to identify failure in one of the replication
        masters and did not redirect connections to the other master.
       (Bug #35295)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-6-1"></a>D.8.7. Changes in MySQL Proxy 0.6.1 (06 February 2008)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed assertions on write errors.
      </p></li><li><p>
        Fixed sending fake server-greetings in
        <code class="literal">connect_server()</code>.
      </p></li><li><p>
        Fixed error handling for socket functions on Windows.
      </p></li><li><p>
        Added new features to <code class="filename">run-tests.lua</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-6-0"></a>D.8.8. Changes in MySQL Proxy 0.6.0 (11 September 2007)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        When using read/write splitting and the
        <code class="filename">rw-splitting.lua</code> example script, connecting
        a second user to the proxy returns an error message.
       (Bug #30867)</p></li><li><p>
        Added support in <code class="function">read_query_result()</code> to
        overwrite the result set.
      </p></li><li><p>
        By default, MySQL Proxy now starts in daemon mode. Use the new
        <code class="option">--no-daemon</code> option to override this. Added the
        <a href="ha-overview.html#option_mysql-proxy_pid-file"><code class="option">--pid-file</code></a> option for
        writing the process ID to a file after becoming a daemon.
      </p></li><li><p>
        Added hooks for <code class="function">read_auth()</code>,
        <code class="function">read_handshake()</code> and
        <code class="function">read_auth_result()</code>.
      </p></li><li><p>
        Added handling of
        <code class="literal">proxy.connection.backend_ndx</code> in
        <code class="function">connect_server()</code> and
        <code class="function">read_query()</code> to support read/write
        splitting.
      </p></li><li><p>
        Added support for <code class="literal">proxy.response.packets</code>.
      </p></li><li><p>
        Added test cases.
      </p></li><li><p>
        Added <code class="option">--no-proxy</code> to disable the proxy.
      </p></li><li><p>
        Added support for listening UNIX sockets.
      </p></li><li><p>
        Added a global Lua-scope <code class="literal">proxy.global.*</code>.
      </p></li><li><p>
        Added connection pooling.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed an assertion on <code class="literal">COM_BINLOG_DUMP</code>.
       (Bug #29764)</p></li><li><p>
        Fixed an assertion on result-packets like <code class="literal">[field-len |
        fields | EOF | ERR]</code>.
       (Bug #29732)</p></li><li><p>
        Fixed an assertion that MySQL Proxy raised at login time if a
        client specified no password and no default database.
       (Bug #29719)</p></li><li><p>
        Fixed an assertion at <code class="literal">COM_SHUTDOWN</code>.
       (Bug #29719)</p></li><li><p>
        Fixed a crash if <code class="literal">proxy.connection</code> is used in
        <code class="function">connect_server()</code>.
      </p></li><li><p>
        Fixed the <code class="literal">glib2</code> check to require at least
        <code class="literal">glib2</code> 2.6.0.
      </p></li><li><p>
        Fixed an assertion at connect time when all backends are down.
      </p></li><li><p>
        Fixed connection stalling if
        <code class="function">read_query_result()</code> raised an assertion.
      </p></li><li><p>
        Fixed length encoding on <code class="literal">proxy.resultsets</code>.
      </p></li><li><p>
        Fixed compilation on win32.
      </p></li><li><p>
        Fixed an assertion when connecting to MySQL 6.0.1.
      </p></li><li><p>
        Fixed decoding of length-encoded ints for 3-byte notation.
      </p></li><li><p>
        Fixed <code class="literal">inj.resultset.affected_rows</code> on
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> queries.
      </p></li><li><p>
        Fixed handling of (SQL) <code class="literal">NULL</code> in result sets.
      </p></li><li><p>
        Fixed a memory leak when <code class="literal">proxy.response.*</code> is
        used.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-5-1"></a>D.8.9. Changes in MySQL Proxy 0.5.1 (30 June 2007)</h3></div></div></div><p><span class="bold"><strong>Functionality Added or Changed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">resultset.affected_rows</code> and
        <code class="literal">resultset.insert_id</code>.
      </p></li><li><p>
        Changed <code class="option">--proxy.profiling</code> to
        <a href="ha-overview.html#option_mysql-proxy_proxy-skip-profiling"><code class="option">--proxy-skip-profiling</code></a>.
      </p></li><li><p>
        Added missing dependency to
        <code class="literal">libmysqlclient-dev</code> to the
        <code class="filename">INSTALL</code> file.
      </p></li><li><p>
        Added <code class="literal">inj.query_time</code> and
        <code class="literal">inj.response_time</code> into the Lua scripts.
      </p></li><li><p>
        Added support for pre-4.1 passwords in a 4.1 connection.
      </p></li><li><p>
        Added script examples for rewriting and injection.
      </p></li><li><p>
        Added <code class="literal">proxy.VERSION</code>.
      </p></li><li><p>
        Added support for UNIX sockets.
      </p></li><li><p>
        Added protection against duplicate result sets from a script.
      </p></li></ul></div><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed mysql check in <span><strong class="command">configure</strong></span> to die when
        <code class="filename">mysql.h</code> isn't detected.
      </p></li><li><p>
        Fixed handling of duplicate ERR on
        <code class="literal">COM_CHANGE_USER</code> in MySQL 5.1.18+.
      </p></li><li><p>
        Fixed a compile error with MySQL 4.1.x on missing
        <code class="literal">COM_STMT_*</code>.
      </p></li><li><p>
        Fixed a crash on fields longer than 250 bytes when the result
        set is inspected.
      </p></li><li><p>
        Fixed a warning if <code class="function">connect_server()</code> is not
        provided.
      </p></li><li><p>
        Fixed an assertion when an error occurs at initial script exec
        time.
      </p></li><li><p>
        Fixed an assertion when <code class="function">read_query_result()</code>
        is not provided when <code class="literal">PROXY_SEND_QUERY</code> is
        used.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-5-0"></a>D.8.10. Changes in MySQL Proxy 0.5.0 (19 June 2007)</h3></div></div></div><p>
        This is the first beta release.
      </p><p><span class="bold"><strong>Bugs Fixed</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <span><strong class="command">automake</strong></span>/<span><strong class="command">autoconf</strong></span>
        support.
      </p></li><li><p>
        Added <span><strong class="command">CMake</strong></span> support.
      </p></li></ul></div></div></div></div><div class="copyright-footer">
    Copyright © 1997, 2012, Oracle and/or its affiliates. All
    rights reserved.
  <a href="preface.html#legalnotice">Legal Notices</a></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="error-handling.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="restrictions.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix C. Errors, Error Codes, and Common Problems </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix E. Restrictions and Limits</td></tr></table></div></body></html>
