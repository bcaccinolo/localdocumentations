  <div id="fileHeader">
    <h1>grouping.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activesupport/lib/active_support/core_ext/array/grouping.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Sep 02 11:02:36 -0700 2006</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module ActiveSupport #:nodoc:
  module CoreExtensions #:nodoc:
    module Array #:nodoc:
      module Grouping
        # Iterate over an array in groups of a certain size, padding any remaining 
        # slots with specified value (&lt;tt&gt;nil&lt;/tt&gt; by default) unless it is
        # &lt;tt&gt;false&lt;/tt&gt;.
        # 
        # E.g.
        # 
        #   %w(1 2 3 4 5 6 7).in_groups_of(3) {|g| p g}
        #   [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]
        #   [&quot;4&quot;, &quot;5&quot;, &quot;6&quot;]
        #   [&quot;7&quot;, nil, nil]
        #
        #   %w(1 2 3).in_groups_of(2, '&amp;nbsp;') {|g| p g}
        #   [&quot;1&quot;, &quot;2&quot;]
        #   [&quot;3&quot;, &quot;&amp;nbsp;&quot;]
        #
        #   %w(1 2 3).in_groups_of(2, false) {|g| p g}
        #   [&quot;1&quot;, &quot;2&quot;]
        #   [&quot;3&quot;]
        def in_groups_of(number, fill_with = nil, &amp;block)
          require 'enumerator'
          collection = dup
          collection &lt;&lt; fill_with until collection.size.modulo(number).zero? unless fill_with == false
          grouped_collection = [] unless block_given?
          collection.each_slice(number) do |group|
            block_given? ? yield(group) : grouped_collection &lt;&lt; group
          end
          grouped_collection unless block_given?
        end

        # Divide the array into one or more subarrays based on a delimiting +value+
        # or the result of an optional block.
        #
        # ex.
        #
        #   [1, 2, 3, 4, 5].split(3)                # =&gt; [[1, 2], [4, 5]]
        #   (1..10).to_a.split { |i| i % 3 == 0 }   # =&gt; [[1, 2], [4, 5], [7, 8], [10]]
        def split(value = nil, &amp;block)
          block ||= Proc.new { |e| e == value }
          inject([[]]) do |results, element|
            if block.call(element)
              results &lt;&lt; []
            else
              results.last &lt;&lt; element
            end
            results
          end
        end
      end
    end
  end
end
</pre>
    </div>