  <div id="fileHeader">
    <h1>core.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activesupport/lib/active_support/json/encoders/core.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Fri Oct 05 03:07:23 -0700 2007</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module ActiveSupport
  module JSON #:nodoc:
    module Encoders #:nodoc:
      define_encoder Object do |object|
        object.instance_values.to_json
      end
      
      define_encoder TrueClass do
        'true'
      end
      
      define_encoder FalseClass do
        'false'
      end
      
      define_encoder NilClass do
        'null'
      end

      ESCAPED_CHARS = {
        &quot;\010&quot; =&gt;  '\b',
        &quot;\f&quot; =&gt;    '\f',
        &quot;\n&quot; =&gt;    '\n',
        &quot;\r&quot; =&gt;    '\r',
        &quot;\t&quot; =&gt;    '\t',
        '&quot;'  =&gt;    '\&quot;',
        '\\' =&gt;    '\\\\',
        '&lt;'  =&gt;    '\\074',
        '&gt;'  =&gt;    '\\076'
      }
      
      define_encoder String do |string|
        '&quot;' + string.gsub(/[\010\f\n\r\t&quot;\\&lt;&gt;]/) { |s|
          ESCAPED_CHARS[s]
        }.gsub(/([\xC0-\xDF][\x80-\xBF]|
                 [\xE0-\xEF][\x80-\xBF]{2}|
                 [\xF0-\xF7][\x80-\xBF]{3})+/nx) { |s|
          s.unpack(&quot;U*&quot;).pack(&quot;n*&quot;).unpack(&quot;H*&quot;)[0].gsub(/.{4}/, '\\\\u\&amp;')
        } + '&quot;'
      end
      
      define_encoder Numeric do |numeric|
        numeric.to_s
      end
      
      define_encoder Symbol do |symbol|
        symbol.to_s.to_json
      end

      define_encoder Enumerable do |enumerable|
        &quot;[#{enumerable.map { |value| value.to_json } * ', '}]&quot;
      end
      
      define_encoder Hash do |hash|
        returning result = '{' do
          result &lt;&lt; hash.map do |key, value|
            key = ActiveSupport::JSON::Variable.new(key.to_s) if 
              ActiveSupport::JSON.can_unquote_identifier?(key)
            &quot;#{key.to_json}: #{value.to_json}&quot;
          end * ', '
          result &lt;&lt; '}'
        end
      end

      define_encoder Regexp do |regexp|
        regexp.inspect
      end
    end
  end
end
</pre>
    </div>