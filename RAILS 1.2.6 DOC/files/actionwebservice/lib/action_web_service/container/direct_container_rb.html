  <div id="fileHeader">
    <h1>direct_container.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionwebservice/lib/action_web_service/container/direct_container.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Apr 29 11:10:14 -0700 2006</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module ActionWebService # :nodoc:
  module Container # :nodoc:
    module Direct # :nodoc:
      class ContainerError &lt; ActionWebServiceError # :nodoc:
      end

      def self.included(base) # :nodoc:
        base.extend(ClassMethods)
      end
  
      module ClassMethods
        # Attaches ActionWebService API +definition+ to the calling class.
        #
        # Action Controllers can have a default associated API, removing the need
        # to call this method if you follow the Action Web Service naming conventions.
        #
        # A controller with a class name of GoogleSearchController will
        # implicitly load &lt;tt&gt;app/apis/google_search_api.rb&lt;/tt&gt;, and expect the
        # API definition class to be named &lt;tt&gt;GoogleSearchAPI&lt;/tt&gt; or
        # &lt;tt&gt;GoogleSearchApi&lt;/tt&gt;.
        #
        # ==== Service class example
        #
        #   class MyService &lt; ActionWebService::Base
        #     web_service_api MyAPI
        #   end
        #
        #   class MyAPI &lt; ActionWebService::API::Base
        #     ...
        #   end
        #
        # ==== Controller class example
        #
        #   class MyController &lt; ActionController::Base
        #     web_service_api MyAPI
        #   end
        #
        #   class MyAPI &lt; ActionWebService::API::Base
        #     ...
        #   end
        def web_service_api(definition=nil)
          if definition.nil?
            read_inheritable_attribute(&quot;web_service_api&quot;)
          else
            if definition.is_a?(Symbol)
              raise(ContainerError, &quot;symbols can only be used for #web_service_api inside of a controller&quot;)
            end
            unless definition.respond_to?(:ancestors) &amp;&amp; definition.ancestors.include?(ActionWebService::API::Base)
              raise(ContainerError, &quot;#{definition.to_s} is not a valid API definition&quot;)
            end
            write_inheritable_attribute(&quot;web_service_api&quot;, definition)
            call_web_service_api_callbacks(self, definition)
          end
        end
  
        def add_web_service_api_callback(&amp;block) # :nodoc:
          write_inheritable_array(&quot;web_service_api_callbacks&quot;, [block])
        end
  
        private
          def call_web_service_api_callbacks(container_class, definition)
            (read_inheritable_attribute(&quot;web_service_api_callbacks&quot;) || []).each do |block|
              block.call(container_class, definition)
            end
          end
      end
    end
  end
end
</pre>
    </div>