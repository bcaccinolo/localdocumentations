  <div id="fileHeader">
    <h1>form_tag_helper.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/lib/action_view/helpers/form_tag_helper.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Tue Oct 24 10:14:50 -0700 2006</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'cgi'
require File.dirname(__FILE__) + '/tag_helper'

module ActionView
  module Helpers
    # Provides a number of methods for creating form tags that doesn't rely on conventions with an object assigned to the template like
    # FormHelper does. With the FormTagHelper, you provide the names and values yourself.
    #
    # NOTE: The html options disabled, readonly, and multiple can all be treated as booleans. So specifying &lt;tt&gt;:disabled =&gt; true&lt;/tt&gt;
    # will give &lt;tt&gt;disabled=&quot;disabled&quot;&lt;/tt&gt;.
    module FormTagHelper
      # Starts a form tag that points the action to an url configured with &lt;tt&gt;url_for_options&lt;/tt&gt; just like
      # ActionController::Base#url_for. The method for the form defaults to POST.
      #
      # Examples:
      # * &lt;tt&gt;form_tag('/posts') =&gt; &lt;form action=&quot;/posts&quot; method=&quot;post&quot;&gt;&lt;/tt&gt;
      # * &lt;tt&gt;form_tag('/posts/1', :method =&gt; :put) =&gt; &lt;form action=&quot;/posts/1&quot; method=&quot;put&quot;&gt;&lt;/tt&gt;
      # * &lt;tt&gt;form_tag('/upload', :multipart =&gt; true) =&gt; &lt;form action=&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;&lt;/tt&gt;
      # 
      # ERb example:
      #   &lt;% form_tag '/posts' do -%&gt;
      #     &lt;div&gt;&lt;%= submit_tag 'Save' %&gt;&lt;/div&gt;
      #   &lt;% end -%&gt;
      #
      # Will output:
      #   &lt;form action=&quot;/posts&quot; method=&quot;post&quot;&gt;&lt;div&gt;&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Save&quot; /&gt;&lt;/div&gt;&lt;/form&gt;
      #
      # Options:
      # * &lt;tt&gt;:multipart&lt;/tt&gt; - If set to true, the enctype is set to &quot;multipart/form-data&quot;.
      # * &lt;tt&gt;:method&lt;/tt&gt;    - The method to use when submitting the form, usually either &quot;get&quot; or &quot;post&quot;.
      #                         If &quot;put&quot;, &quot;delete&quot;, or another verb is used, a hidden input with name _method 
      #                         is added to simulate the verb over post.
      def form_tag(url_for_options = {}, options = {}, *parameters_for_url, &amp;block)
        html_options = options.stringify_keys
        html_options[&quot;enctype&quot;] = &quot;multipart/form-data&quot; if html_options.delete(&quot;multipart&quot;)
        html_options[&quot;action&quot;]  = url_for(url_for_options, *parameters_for_url)

        method_tag = &quot;&quot;
        
        case method = html_options.delete(&quot;method&quot;).to_s
          when /^get$/i # must be case-insentive, but can't use downcase as might be nil
            html_options[&quot;method&quot;] = &quot;get&quot;
          when /^post$/i, &quot;&quot;, nil
            html_options[&quot;method&quot;] = &quot;post&quot;
          else
            html_options[&quot;method&quot;] = &quot;post&quot;
            method_tag = content_tag(:div, tag(:input, :type =&gt; &quot;hidden&quot;, :name =&gt; &quot;_method&quot;, :value =&gt; method), :style =&gt; 'margin:0;padding:0')
        end
        
        if block_given?
          content = capture(&amp;block)
          concat(tag(:form, html_options, true) + method_tag, block.binding)
          concat(content, block.binding)
          concat(&quot;&lt;/form&gt;&quot;, block.binding)
        else
          tag(:form, html_options, true) + method_tag
        end
      end

      alias_method :start_form_tag, :form_tag

      # Outputs &quot;&lt;/form&gt;&quot;
      def end_form_tag
        &quot;&lt;/form&gt;&quot;
      end
      
      deprecate :end_form_tag, :start_form_tag =&gt; :form_tag

      # Creates a dropdown selection box, or if the &lt;tt&gt;:multiple&lt;/tt&gt; option is set to true, a multiple
      # choice selection box.
      #
      # Helpers::FormOptions can be used to create common select boxes such as countries, time zones, or
      # associated records.
      #
      # &lt;tt&gt;option_tags&lt;/tt&gt; is a string containing the option tags for the select box:
      #   # Outputs &lt;select id=&quot;people&quot; name=&quot;people&quot;&gt;&lt;option&gt;David&lt;/option&gt;&lt;/select&gt;
      #   select_tag &quot;people&quot;, &quot;&lt;option&gt;David&lt;/option&gt;&quot;
      #
      # Options:
      # * &lt;tt&gt;:multiple&lt;/tt&gt; - If set to true the selection will allow multiple choices.
      def select_tag(name, option_tags = nil, options = {})
        content_tag :select, option_tags, { &quot;name&quot; =&gt; name, &quot;id&quot; =&gt; name }.update(options.stringify_keys)
      end

      # Creates a standard text field.
      #
      # Options:
      # * &lt;tt&gt;:disabled&lt;/tt&gt; - If set to true, the user will not be able to use this input.
      # * &lt;tt&gt;:size&lt;/tt&gt; - The number of visible characters that will fit in the input.
      # * &lt;tt&gt;:maxlength&lt;/tt&gt; - The maximum number of characters that the browser will allow the user to enter.
      # 
      # A hash of standard HTML options for the tag.
      def text_field_tag(name, value = nil, options = {})
        tag :input, { &quot;type&quot; =&gt; &quot;text&quot;, &quot;name&quot; =&gt; name, &quot;id&quot; =&gt; name, &quot;value&quot; =&gt; value }.update(options.stringify_keys)
      end

      # Creates a hidden field.
      #
      # Takes the same options as text_field_tag
      def hidden_field_tag(name, value = nil, options = {})
        text_field_tag(name, value, options.stringify_keys.update(&quot;type&quot; =&gt; &quot;hidden&quot;))
      end

      # Creates a file upload field.
      #
      # If you are using file uploads then you will also need to set the multipart option for the form:
      #   &lt;%= form_tag { :action =&gt; &quot;post&quot; }, { :multipart =&gt; true } %&gt;
      #     &lt;label for=&quot;file&quot;&gt;File to Upload&lt;/label&gt; &lt;%= file_field_tag &quot;file&quot; %&gt;
      #     &lt;%= submit_tag %&gt;
      #   &lt;%= end_form_tag %&gt;
      #
      # The specified URL will then be passed a File object containing the selected file, or if the field 
      # was left blank, a StringIO object.
      def file_field_tag(name, options = {})
        text_field_tag(name, nil, options.update(&quot;type&quot; =&gt; &quot;file&quot;))
      end

      # Creates a password field.
      #
      # Takes the same options as text_field_tag
      def password_field_tag(name = &quot;password&quot;, value = nil, options = {})
        text_field_tag(name, value, options.update(&quot;type&quot; =&gt; &quot;password&quot;))
      end

      # Creates a text input area.
      #
      # Options:
      # * &lt;tt&gt;:size&lt;/tt&gt; - A string specifying the dimensions of the textarea.
      #     # Outputs &lt;textarea name=&quot;body&quot; id=&quot;body&quot; cols=&quot;25&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;
      #     &lt;%= text_area_tag &quot;body&quot;, nil, :size =&gt; &quot;25x10&quot; %&gt;
      def text_area_tag(name, content = nil, options = {})
        options.stringify_keys!

        if size = options.delete(&quot;size&quot;)
          options[&quot;cols&quot;], options[&quot;rows&quot;] = size.split(&quot;x&quot;)
        end

        content_tag :textarea, content, { &quot;name&quot; =&gt; name, &quot;id&quot; =&gt; name }.update(options.stringify_keys)
      end

      # Creates a check box.
      def check_box_tag(name, value = &quot;1&quot;, checked = false, options = {})
        html_options = { &quot;type&quot; =&gt; &quot;checkbox&quot;, &quot;name&quot; =&gt; name, &quot;id&quot; =&gt; name, &quot;value&quot; =&gt; value }.update(options.stringify_keys)
        html_options[&quot;checked&quot;] = &quot;checked&quot; if checked
        tag :input, html_options
      end

      # Creates a radio button.
      def radio_button_tag(name, value, checked = false, options = {})
        pretty_tag_value = value.to_s.gsub(/\s/, &quot;_&quot;).gsub(/(?!-)\W/, &quot;&quot;).downcase
        html_options = { &quot;type&quot; =&gt; &quot;radio&quot;, &quot;name&quot; =&gt; name, &quot;id&quot; =&gt; &quot;#{name}_#{pretty_tag_value}&quot;, &quot;value&quot; =&gt; value }.update(options.stringify_keys)
        html_options[&quot;checked&quot;] = &quot;checked&quot; if checked
        tag :input, html_options
      end

      # Creates a submit button with the text &lt;tt&gt;value&lt;/tt&gt; as the caption. If options contains a pair with the key of &quot;disable_with&quot;,
      # then the value will be used to rename a disabled version of the submit button.
      def submit_tag(value = &quot;Save changes&quot;, options = {})
        options.stringify_keys!
        
        if disable_with = options.delete(&quot;disable_with&quot;)
          options[&quot;onclick&quot;] = &quot;this.disabled=true;this.value='#{disable_with}';this.form.submit();#{options[&quot;onclick&quot;]}&quot;
        end
          
        tag :input, { &quot;type&quot; =&gt; &quot;submit&quot;, &quot;name&quot; =&gt; &quot;commit&quot;, &quot;value&quot; =&gt; value }.update(options.stringify_keys)
      end
      
      # Displays an image which when clicked will submit the form.
      #
      # &lt;tt&gt;source&lt;/tt&gt; is passed to AssetTagHelper#image_path
      def image_submit_tag(source, options = {})
        tag :input, { &quot;type&quot; =&gt; &quot;image&quot;, &quot;src&quot; =&gt; image_path(source) }.update(options.stringify_keys)
      end
    end
  end
end
</pre>
    </div>