  <div id="fileHeader">
    <h1>pagination_helper.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/lib/action_view/helpers/pagination_helper.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Wed Mar 15 22:38:08 -0800 2006</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module ActionView
  module Helpers
    # Provides methods for linking to ActionController::Pagination objects.
    #
    # You can also build your links manually, like in this example:
    #
    # &lt;%= link_to &quot;Previous page&quot;, { :page =&gt; paginator.current.previous } if paginator.current.previous %&gt;
    #
    # &lt;%= link_to &quot;Next page&quot;, { :page =&gt; paginator.current.next } if paginator.current.next %&gt;
    module PaginationHelper
      unless const_defined?(:DEFAULT_OPTIONS)
        DEFAULT_OPTIONS = {
          :name =&gt; :page,
          :window_size =&gt; 2,
          :always_show_anchors =&gt; true,
          :link_to_current_page =&gt; false,
          :params =&gt; {}
        }
      end

      # Creates a basic HTML link bar for the given +paginator+.
      # +html_options+ are passed to +link_to+.
      #
      # +options+ are:
      # &lt;tt&gt;:name&lt;/tt&gt;::                 the routing name for this paginator
      #                                  (defaults to +page+)
      # &lt;tt&gt;:window_size&lt;/tt&gt;::          the number of pages to show around 
      #                                  the current page (defaults to +2+)
      # &lt;tt&gt;:always_show_anchors&lt;/tt&gt;::  whether or not the first and last
      #                                  pages should always be shown
      #                                  (defaults to +true+)
      # &lt;tt&gt;:link_to_current_page&lt;/tt&gt;:: whether or not the current page
      #                                  should be linked to (defaults to
      #                                  +false+)
      # &lt;tt&gt;:params&lt;/tt&gt;::               any additional routing parameters
      #                                  for page URLs
      def pagination_links(paginator, options={}, html_options={})
        name = options[:name] || DEFAULT_OPTIONS[:name]
        params = (options[:params] || DEFAULT_OPTIONS[:params]).clone
        
        pagination_links_each(paginator, options) do |n|
          params[name] = n
          link_to(n.to_s, params, html_options)
        end
      end

      # Iterate through the pages of a given +paginator+, invoking a
      # block for each page number that needs to be rendered as a link.
      def pagination_links_each(paginator, options)
        options = DEFAULT_OPTIONS.merge(options)
        link_to_current_page = options[:link_to_current_page]
        always_show_anchors = options[:always_show_anchors]

        current_page = paginator.current_page
        window_pages = current_page.window(options[:window_size]).pages
        return if window_pages.length &lt;= 1 unless link_to_current_page
        
        first, last = paginator.first, paginator.last
        
        html = ''
        if always_show_anchors and not (wp_first = window_pages[0]).first?
          html &lt;&lt; yield(first.number)
          html &lt;&lt; ' ... ' if wp_first.number - first.number &gt; 1
          html &lt;&lt; ' '
        end
          
        window_pages.each do |page|
          if current_page == page &amp;&amp; !link_to_current_page
            html &lt;&lt; page.number.to_s
          else
            html &lt;&lt; yield(page.number)
          end
          html &lt;&lt; ' '
        end
        
        if always_show_anchors and not (wp_last = window_pages[-1]).last? 
          html &lt;&lt; ' ... ' if last.number - wp_last.number &gt; 1
          html &lt;&lt; yield(last.number)
        end
        
        html
      end
      
    end # PaginationHelper
  end # Helpers
end # ActionView
</pre>
    </div>