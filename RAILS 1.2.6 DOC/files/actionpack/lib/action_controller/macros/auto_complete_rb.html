  <div id="fileHeader">
    <h1>auto_complete.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/lib/action_controller/macros/auto_complete.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Sep 03 16:22:24 -0700 2006</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module ActionController
  # Macros are class-level calls that add pre-defined actions to the controller based on the parameters passed in.
  # Currently, they're used to bridge the JavaScript macros, like autocompletion and in-place editing, with the controller
  # backing.
  module Macros
    module AutoComplete #:nodoc:
      def self.included(base) #:nodoc:
        base.extend(ClassMethods)
      end

      # DEPRECATION WARNING: This method will become a separate plugin when Rails 2.0 ships.
      #
      # Example:
      #
      #   # Controller
      #   class BlogController &lt; ApplicationController
      #     auto_complete_for :post, :title
      #   end
      #
      #   # View
      #   &lt;%= text_field_with_auto_complete :post, title %&gt;
      #
      # By default, auto_complete_for limits the results to 10 entries,
      # and sorts by the given field.
      # 
      # auto_complete_for takes a third parameter, an options hash to
      # the find method used to search for the records:
      #
      #   auto_complete_for :post, :title, :limit =&gt; 15, :order =&gt; 'created_at DESC'
      #
      # For help on defining text input fields with autocompletion, 
      # see ActionView::Helpers::JavaScriptHelper.
      #
      # For more examples, see script.aculo.us:
      # * http://script.aculo.us/demos/ajax/autocompleter
      # * http://script.aculo.us/demos/ajax/autocompleter_customized
      module ClassMethods
        def auto_complete_for(object, method, options = {})
          define_method(&quot;auto_complete_for_#{object}_#{method}&quot;) do
            find_options = { 
              :conditions =&gt; [ &quot;LOWER(#{method}) LIKE ?&quot;, '%' + params[object][method].downcase + '%' ], 
              :order =&gt; &quot;#{method} ASC&quot;,
              :limit =&gt; 10 }.merge!(options)
            
            @items = object.to_s.camelize.constantize.find(:all, find_options)

            render :inline =&gt; &quot;&lt;%= auto_complete_result @items, '#{method}' %&gt;&quot;
          end
        end
      end
    end
  end
end</pre>
    </div>