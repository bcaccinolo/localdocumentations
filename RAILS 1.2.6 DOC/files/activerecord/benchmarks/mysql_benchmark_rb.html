  <div id="fileHeader">
    <h1>mysql_benchmark.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activerecord/benchmarks/mysql_benchmark.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Tue Nov 23 17:04:44 -0800 2004</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'mysql'

conn = Mysql::real_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;&quot;, &quot;basecamp&quot;)

require 'benchmark'

require 'profile' if ARGV[1] == &quot;profile&quot;
RUNS = ARGV[0].to_i

runtime = Benchmark::measure {
  RUNS.times { 
    result = conn.query(&quot;SELECT * FROM posts LIMIT 100&quot;)
    result.each_hash { |p| p[&quot;title&quot;] }
  }
}

puts &quot;Runs: #{RUNS}&quot;
puts &quot;Avg. runtime: #{runtime.real / RUNS}&quot;
puts &quot;Requests/second: #{RUNS / runtime.real}&quot;</pre>
    </div>