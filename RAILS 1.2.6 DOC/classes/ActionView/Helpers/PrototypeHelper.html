  <div id="C00000561">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />PrototypeHelper<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/lib/action_view/helpers/deprecated_helper_rb.html');">actionpack/lib/action_view/helpers/deprecated_helper.rb</a>
<a href="#" onclick="jsHref('files/actionpack/lib/action_view/helpers/prototype_helper_rb.html');">actionpack/lib/action_view/helpers/prototype_helper.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
Provides a set of helpers for calling Prototype JavaScript functions,
including functionality to call remote methods using <a
href="http://www.adaptivepath.com/publications/essays/archives/000385.php"
target="_blank">Ajax</a>. This means that you can call actions in your
controllers without reloading the page, but still update certain parts of
it using injections into the DOM. The common use case is having a form that
adds a new element to a list without reloading the page.
</p>
<p>
To be able to use these helpers, you must include the Prototype JavaScript
framework in your pages. See the documentation for <a
href="index.html?a=C00000574&name=ActionView::Helpers::JavaScriptHelper">ActionView::Helpers::JavaScriptHelper</a>
for more information on including the necessary JavaScript.
</p>
<p>
See <a href="index.html?a=M001656&name=link_to_remote">link_to_remote</a>
for documentation of options common to all Ajax helpers.
</p>
<p>
See also <a
href="index.html?a=C00000559&name=ActionView::Helpers::ScriptaculousHelper">ActionView::Helpers::ScriptaculousHelper</a>
for helpers which work with the Scriptaculous controls and visual effects
library.
</p>
<p>
See JavaScriptGenerator for information on updating multiple elements on
the page in an Ajax response.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001671&name=build_callbacks" >build_callbacks</a></li>
  <li><a href="index.html?a=M001670&name=build_observer" >build_observer</a></li>
  <li><a href="index.html?a=M001662&name=evaluate_remote_response" >evaluate_remote_response</a></li>
  <li><a href="index.html?a=M001660&name=form_remote_for" >form_remote_for</a></li>
  <li><a href="index.html?a=M001658&name=form_remote_tag" >form_remote_tag</a></li>
  <li><a href="index.html?a=M001656&name=link_to_remote" >link_to_remote</a></li>
  <li><a href="index.html?a=M001669&name=method_option_to_s" >method_option_to_s</a></li>
  <li><a href="index.html?a=M001664&name=observe_field" >observe_field</a></li>
  <li><a href="index.html?a=M001665&name=observe_form" >observe_form</a></li>
  <li><a href="index.html?a=M001668&name=options_for_ajax" >options_for_ajax</a></li>
  <li><a href="index.html?a=M001657&name=periodically_call_remote" >periodically_call_remote</a></li>
  <li><a href="index.html?a=M001659&name=remote_form_for" >remote_form_for</a></li>
  <li><a href="index.html?a=M001663&name=remote_function" >remote_function</a></li>
  <li><a href="index.html?a=M001661&name=submit_to_remote" >submit_to_remote</a></li>
  <li><a href="index.html?a=M001655&name=update_element_function" >update_element_function</a></li>
  <li><a href="index.html?a=M001666&name=update_page" >update_page</a></li>
  <li><a href="index.html?a=M001667&name=update_page_tag" >update_page_tag</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">CALLBACKS</td>
    <td>=</td>
    <td class="attr-value">Set.new([ :uninitialized, :loading, :loaded,                          :interactive, :complete, :failure, :success ] +                          (100..599).to_a)</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">AJAX_OPTIONS</td>
    <td>=</td>
    <td class="attr-value">Set.new([ :before, :after, :condition, :url,                          :asynchronous, :method, :insertion, :position,                          :form, :with, :update, :script ]).merge(CALLBACKS)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M001662" class="method">
  <div id="M001662_title" class="title">
    <b>evaluate_remote_response</b>()
  </div>
  <div class="description">
  <p>
Returns &#8216;eval(request.responseText)&#8217; which is the JavaScript
function that <a
href="index.html?a=M001658&name=form_remote_tag">form_remote_tag</a> can
call in :complete to evaluate a multiple update return document using <a
href="index.html?a=M001655&name=update_element_function">update_element_function</a>
calls.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001662_source')" id="l_M001662_source">show source</a> ]</p>
  <div id="M001662_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">evaluate_remote_response</span>
211:         <span class="ruby-value str">&quot;eval(request.responseText)&quot;</span>
212:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001660" class="method">
  <div id="M001660_title" class="title">
    <b>form_remote_for</b>(object_name, *args, &amp;proc)
  </div>
  <div class="description">
  <p>
Alias for <a
href="index.html?a=M001659&name=remote_form_for">remote_form_for</a>
</p>
  </div>
</div>
<div id="M001658" class="method">
  <div id="M001658_title" class="title">
    <b>form_remote_tag</b>(options = {}, &amp;block)
  </div>
  <div class="description">
  <p>
Returns a form tag that will submit using XMLHttpRequest in the background
instead of the regular reloading POST arrangement. Even though it&#8217;s
using JavaScript to serialize the form elements, the form submission will
work just like a regular submission as viewed by the receiving side (all
elements available in <tt>params</tt>). The options for specifying the
target with :url and defining callbacks is the same as <a
href="index.html?a=M001656&name=link_to_remote">link_to_remote</a>.
</p>
<p>
A &quot;fall-through&quot; target for browsers that doesn&#8217;t do
JavaScript can be specified with the :action/:method options on :html.
</p>
<p>
Example:
</p>
<pre>
  form_remote_tag :html =&gt; { :action =&gt;
    url_for(:controller =&gt; &quot;some&quot;, :action =&gt; &quot;place&quot;) }
</pre>
<p>
The Hash passed to the :html key is equivalent to the options (2nd)
argument in the <a
href="index.html?a=M001730&name=FormTagHelper.form_tag">FormTagHelper.form_tag</a>
method.
</p>
<p>
By default the fall-through action is the same as the one specified in the
:url (and the default method is :post).
</p>
<p>
<a href="index.html?a=M001658&name=form_remote_tag">form_remote_tag</a>
also takes a block, like form_tag:
</p>
<pre>
  &lt;% form_remote_tag :url =&gt; '/posts' do -%&gt;
    &lt;div&gt;&lt;%= submit_tag 'Save' %&gt;&lt;/div&gt;
  &lt;% end -%&gt;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001658_source')" id="l_M001658_source">show source</a> ]</p>
  <div id="M001658_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 172</span>
172:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">form_remote_tag</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
173:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:form</span>] = <span class="ruby-keyword kw">true</span>
174: 
175:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>] <span class="ruby-operator">||=</span> {}
176:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onsubmit</span>] = 
177:           (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onsubmit</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onsubmit</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;; &quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-operator">+</span> 
178:           <span class="ruby-node">&quot;#{remote_function(options)}; return false;&quot;</span>
179: 
180:         <span class="ruby-identifier">form_tag</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>].<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:action</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:url</span>]), <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>], <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
181:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001656" class="method">
  <div id="M001656_title" class="title">
    <b>link_to_remote</b>(name, options = {}, html_options = {})
  </div>
  <div class="description">
  <p>
Returns a link to a remote action defined by <tt>options[:url]</tt> (using
the url_for format) that&#8217;s called in the background using
XMLHttpRequest. The result of that request can then be inserted into a DOM
object whose id can be specified with <tt>options[:update]</tt>. Usually,
the result would be a partial prepared by the controller with render
:partial.
</p>
<p>
Examples:
</p>
<pre>
  link_to_remote &quot;Delete this post&quot;, :update =&gt; &quot;posts&quot;,
    :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id }
  link_to_remote(image_tag(&quot;refresh&quot;), :update =&gt; &quot;emails&quot;,
    :url =&gt; { :action =&gt; &quot;list_emails&quot; })
</pre>
<p>
You can also specify a hash for <tt>options[:update]</tt> to allow for easy
redirection of output to an other DOM element if a server-side error
occurs:
</p>
<p>
Example:
</p>
<pre>
  link_to_remote &quot;Delete this post&quot;,
    :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id },
    :update =&gt; { :success =&gt; &quot;posts&quot;, :failure =&gt; &quot;error&quot; }
</pre>
<p>
Optionally, you can use the <tt>options[:position]</tt> parameter to
influence how the target DOM element is updated. It must be one of
<tt>:before</tt>, <tt>:top</tt>, <tt>:bottom</tt>, or <tt>:after</tt>.
</p>
<p>
The method used is by default POST. You can also specify GET or you can
simulate PUT or DELETE over POST. All specified with
<tt>options[:method]</tt>
</p>
<p>
Example:
</p>
<pre>
  link_to_remote &quot;Destroy&quot;, :url =&gt; person_url(:id =&gt; person), :method =&gt; :delete
</pre>
<p>
By default, these remote requests are processed asynchronous during which
various JavaScript callbacks can be triggered (for progress indicators and
the likes). All callbacks get access to the <tt>request</tt> object, which
holds the underlying XMLHttpRequest.
</p>
<p>
To access the server response, use <tt>request.responseText</tt>, to find
out the HTTP status, use <tt>request.status</tt>.
</p>
<p>
Example:
</p>
<pre>
  link_to_remote word,
    :url =&gt; { :action =&gt; &quot;undo&quot;, :n =&gt; word_counter },
    :complete =&gt; &quot;undoRequestCompleted(request)&quot;
</pre>
<p>
The callbacks that may be specified are (in order):
</p>
<table>
<tr><td valign="top"><tt>:loading</tt>:</td><td>Called when the remote document is being loaded with data by the browser.

</td></tr>
<tr><td valign="top"><tt>:loaded</tt>:</td><td>Called when the browser has finished loading the remote document.

</td></tr>
<tr><td valign="top"><tt>:interactive</tt>:</td><td>Called when the user can interact with the remote document, even though it
has not finished loading.

</td></tr>
<tr><td valign="top"><tt>:success</tt>:</td><td>Called when the XMLHttpRequest is completed, and the HTTP status code is in
the 2XX range.

</td></tr>
<tr><td valign="top"><tt>:failure</tt>:</td><td>Called when the XMLHttpRequest is completed, and the HTTP status code is
not in the 2XX range.

</td></tr>
<tr><td valign="top"><tt>:complete</tt>:</td><td>Called when the XMLHttpRequest is complete (fires after success/failure if
they are present).

</td></tr>
</table>
<p>
You can further refine <tt>:success</tt> and <tt>:failure</tt> by adding
additional callbacks for specific status codes.
</p>
<p>
Example:
</p>
<pre>
  link_to_remote word,
    :url =&gt; { :action =&gt; &quot;action&quot; },
    404 =&gt; &quot;alert('Not found...? Wrong URL...?')&quot;,
    :failure =&gt; &quot;alert('HTTP Error ' + request.status + '!')&quot;
</pre>
<p>
A status code callback overrides the success/failure handlers if present.
</p>
<p>
If you for some reason or another need synchronous processing
(that&#8217;ll block the browser while the request is happening), you can
specify <tt>options[:type] = :synchronous</tt>.
</p>
<p>
You can customize further browser side call logic by passing in JavaScript
code snippets via some optional parameters. In their order of use these
are:
</p>
<table>
<tr><td valign="top"><tt>:confirm</tt>:</td><td>Adds confirmation dialog.

</td></tr>
<tr><td valign="top"><tt>:condition</tt>:</td><td>Perform remote request conditionally by this expression. Use this to
describe browser-side conditions when request should not be initiated.

</td></tr>
<tr><td valign="top"><tt>:before</tt>:</td><td>Called before request is initiated.

</td></tr>
<tr><td valign="top"><tt>:after</tt>:</td><td>Called immediately after request was initiated and before
<tt>:loading</tt>.

</td></tr>
<tr><td valign="top"><tt>:submit</tt>:</td><td>Specifies the DOM element ID that&#8217;s used as the parent of the form
elements. By default this is the current form, but it could just as well be
the ID of a table row or any other DOM element.

</td></tr>
</table>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001656_source')" id="l_M001656_source">show source</a> ]</p>
  <div id="M001656_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 132</span>
132:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link_to_remote</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})  
133:         <span class="ruby-identifier">link_to_function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>), <span class="ruby-identifier">html_options</span>)
134:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001664" class="method">
  <div id="M001664_title" class="title">
    <b>observe_field</b>(field_id, options = {})
  </div>
  <div class="description">
  <p>
Observes the field with the DOM ID specified by <tt>field_id</tt> and calls
a callback when its contents have changed. The default callback is an Ajax
call. By default the value of the observed field is sent as a parameter
with the Ajax call.
</p>
<p>
Required <tt>options</tt> are either of:
</p>
<table>
<tr><td valign="top"><tt>:url</tt>:</td><td><tt>url_for</tt>-style options for the action to call when the field has
changed.

</td></tr>
<tr><td valign="top"><tt>:function</tt>:</td><td>Instead of making a remote call to a URL, you can specify a function to be
called instead.

</td></tr>
</table>
<p>
Additional options are:
</p>
<table>
<tr><td valign="top"><tt>:frequency</tt>:</td><td>The frequency (in seconds) at which changes to this field will be detected.
Not setting this option at all or to a value equal to or less than zero
will use event based observation instead of time based observation.

</td></tr>
<tr><td valign="top"><tt>:update</tt>:</td><td>Specifies the DOM ID of the element whose innerHTML should be updated with
the XMLHttpRequest response text.

</td></tr>
<tr><td valign="top"><tt>:with</tt>:</td><td>A JavaScript expression specifying the parameters for the XMLHttpRequest.
The default is to send the key and value of the observed field. Any custom
expressions should return a valid URL query string. The value of the field
is stored in the JavaScript variable <tt>value</tt>.

<p>
Examples
</p>
<pre>
  :with =&gt; &quot;'my_custom_key=' + value&quot;
  :with =&gt; &quot;'person[name]=' + prompt('New name')&quot;
  :with =&gt; &quot;Form.Element.serialize('other-field')&quot;
</pre>
<p>
Finally
</p>
<pre>
  :with =&gt; 'name'
</pre>
<p>
is shorthand for
</p>
<pre>
  :with =&gt; &quot;'name=' + value&quot;
</pre>
<p>
This essentially just changes the key of the parameter.
</p>
</td></tr>
<tr><td valign="top"><tt>:on</tt>:</td><td>Specifies which event handler to observe. By default, it&#8217;s set to
&quot;changed&quot; for text fields and areas and &quot;click&quot; for
radio buttons and checkboxes. With this, you can specify it instead to be
&quot;blur&quot; or &quot;focus&quot; or any other event.

</td></tr>
</table>
<p>
Additionally, you may specify any of the options documented in <a
href="index.html?a=M001656&name=link_to_remote">link_to_remote</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001664_source')" id="l_M001664_source">show source</a> ]</p>
  <div id="M001664_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 299</span>
299:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">observe_field</span>(<span class="ruby-identifier">field_id</span>, <span class="ruby-identifier">options</span> = {})
300:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
301:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.Element.Observer'</span>, <span class="ruby-identifier">field_id</span>, <span class="ruby-identifier">options</span>)
302:         <span class="ruby-keyword kw">else</span>
303:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.Element.EventObserver'</span>, <span class="ruby-identifier">field_id</span>, <span class="ruby-identifier">options</span>)
304:         <span class="ruby-keyword kw">end</span>
305:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001665" class="method">
  <div id="M001665_title" class="title">
    <b>observe_form</b>(form_id, options = {})
  </div>
  <div class="description">
  <p>
Observes the form with the DOM ID specified by <tt>form_id</tt> and calls a
callback when its contents have changed. The default callback is an Ajax
call. By default all fields of the observed field are sent as parameters
with the Ajax call.
</p>
<p>
The <tt>options</tt> for <tt><a
href="index.html?a=M001665&name=observe_form">observe_form</a></tt> are the
same as the options for <tt><a
href="index.html?a=M001664&name=observe_field">observe_field</a></tt>. The
JavaScript variable <tt>value</tt> available to the <tt>:with</tt> option
is set to the serialized form by default.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001665_source')" id="l_M001665_source">show source</a> ]</p>
  <div id="M001665_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 315</span>
315:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">observe_form</span>(<span class="ruby-identifier">form_id</span>, <span class="ruby-identifier">options</span> = {})
316:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>]
317:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.Observer'</span>, <span class="ruby-identifier">form_id</span>, <span class="ruby-identifier">options</span>)
318:         <span class="ruby-keyword kw">else</span>
319:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.EventObserver'</span>, <span class="ruby-identifier">form_id</span>, <span class="ruby-identifier">options</span>)
320:         <span class="ruby-keyword kw">end</span>
321:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001657" class="method">
  <div id="M001657_title" class="title">
    <b>periodically_call_remote</b>(options = {})
  </div>
  <div class="description">
  <p>
Periodically calls the specified url (<tt>options[:url]</tt>) every
<tt>options[:frequency]</tt> seconds (default is 10). Usually used to
update a specified div (<tt>options[:update]</tt>) with the results of the
remote call. The options for specifying the target with :url and defining
callbacks is the same as <a
href="index.html?a=M001656&name=link_to_remote">link_to_remote</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001657_source')" id="l_M001657_source">show source</a> ]</p>
  <div id="M001657_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 141</span>
141:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">periodically_call_remote</span>(<span class="ruby-identifier">options</span> = {})
142:          <span class="ruby-identifier">frequency</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>] <span class="ruby-operator">||</span> <span class="ruby-value">10</span> <span class="ruby-comment cmt"># every ten seconds by default</span>
143:          <span class="ruby-identifier">code</span> = <span class="ruby-node">&quot;new PeriodicalExecuter(function() {#{remote_function(options)}}, #{frequency})&quot;</span>
144:          <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">code</span>)
145:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001659" class="method">
  <div id="M001659_title" class="title">
    <b>remote_form_for</b>(object_name, *args, &amp;proc)
  </div>
  <div class="description">
  <p>
Works like <a
href="index.html?a=M001658&name=form_remote_tag">form_remote_tag</a>, but
uses form_for semantics.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M001660&name=form_remote_for">form_remote_for</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001659_source')" id="l_M001659_source">show source</a> ]</p>
  <div id="M001659_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 184</span>
184:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remote_form_for</span>(<span class="ruby-identifier">object_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)
185:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
186:         <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">form_remote_tag</span>(<span class="ruby-identifier">options</span>), <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">binding</span>)
187:         <span class="ruby-identifier">fields_for</span>(<span class="ruby-identifier">object_name</span>, <span class="ruby-operator">*</span>(<span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)
188:         <span class="ruby-identifier">concat</span>(<span class="ruby-value str">'&lt;/form&gt;'</span>, <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">binding</span>)
189:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001663" class="method">
  <div id="M001663_title" class="title">
    <b>remote_function</b>(options)
  </div>
  <div class="description">
  <p>
Returns the JavaScript needed for a remote function. Takes the same
arguments as <a
href="index.html?a=M001656&name=link_to_remote">link_to_remote</a>.
</p>
<p>
Example:
</p>
<pre>
  &lt;select id=&quot;options&quot; onchange=&quot;&lt;%= remote_function(:update =&gt; &quot;options&quot;,
      :url =&gt; { :action =&gt; :update_options }) %&gt;&quot;&gt;
    &lt;option value=&quot;0&quot;&gt;Hello&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;World&lt;/option&gt;
  &lt;/select&gt;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001663_source')" id="l_M001663_source">show source</a> ]</p>
  <div id="M001663_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 223</span>
223:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>)
224:         <span class="ruby-identifier">javascript_options</span> = <span class="ruby-identifier">options_for_ajax</span>(<span class="ruby-identifier">options</span>)
225: 
226:         <span class="ruby-identifier">update</span> = <span class="ruby-value str">''</span>
227:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
228:           <span class="ruby-identifier">update</span>  = []
229:           <span class="ruby-identifier">update</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;success:'#{options[:update][:success]}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>][<span class="ruby-identifier">:success</span>]
230:           <span class="ruby-identifier">update</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;failure:'#{options[:update][:failure]}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>][<span class="ruby-identifier">:failure</span>]
231:           <span class="ruby-identifier">update</span>  = <span class="ruby-value str">'{'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'}'</span>
232:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>]
233:           <span class="ruby-identifier">update</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;'#{options[:update]}'&quot;</span>
234:         <span class="ruby-keyword kw">end</span>
235: 
236:         <span class="ruby-identifier">function</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span>
237:           <span class="ruby-value str">&quot;new Ajax.Request(&quot;</span> <span class="ruby-operator">:</span>
238:           <span class="ruby-node">&quot;new Ajax.Updater(#{update}, &quot;</span>
239: 
240:         <span class="ruby-identifier">url_options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:url</span>]
241:         <span class="ruby-identifier">url_options</span> = <span class="ruby-identifier">url_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:escape</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">url_options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
242:         <span class="ruby-identifier">function</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;'#{url_for(url_options)}'&quot;</span>
243:         <span class="ruby-identifier">function</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;, #{javascript_options})&quot;</span>
244: 
245:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;#{options[:before]}; #{function}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:before</span>]
246:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;#{function}; #{options[:after]}&quot;</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:after</span>]
247:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;if (#{options[:condition]}) { #{function}; }&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:condition</span>]
248:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;if (confirm('#{escape_javascript(options[:confirm])}')) { #{function}; }&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:confirm</span>]
249: 
250:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">function</span>
251:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001661" class="method">
  <div id="M001661_title" class="title">
    <b>submit_to_remote</b>(name, value, options = {})
  </div>
  <div class="description">
  <p>
Returns a button input tag that will submit form using XMLHttpRequest in
the background instead of regular reloading POST arrangement.
<tt>options</tt> argument is the same as in <tt><a
href="index.html?a=M001658&name=form_remote_tag">form_remote_tag</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001661_source')" id="l_M001661_source">show source</a> ]</p>
  <div id="M001661_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 195</span>
195:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">submit_to_remote</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span> = {})
196:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">'Form.serialize(this.form)'</span>
197: 
198:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>] <span class="ruby-operator">||=</span> {}
199:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:type</span>] = <span class="ruby-value str">'button'</span>
200:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onclick</span>] = <span class="ruby-node">&quot;#{remote_function(options)}; return false;&quot;</span>
201:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:name</span>] = <span class="ruby-identifier">name</span>
202:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:value</span>] = <span class="ruby-identifier">value</span>
203: 
204:         <span class="ruby-identifier">tag</span>(<span class="ruby-value str">&quot;input&quot;</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>], <span class="ruby-keyword kw">false</span>)
205:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001655" class="method">
  <div id="M001655_title" class="title">
    <b>update_element_function</b>(element_id, options = {}, &amp;block)
  </div>
  <div class="description">
  <p>
Method to execute an element update using Prototype. DEPRECATION WARNING:
This helper has been depercated; use RJS instead. See <a
href="index.html?a=C00000563&name=ActionView::Helpers::PrototypeHelper::JavaScriptGenerator::GeneratorMethods">ActionView::Helpers::PrototypeHelper::JavaScriptGenerator::GeneratorMethods</a>
for more information.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001655_source')" id="l_M001655_source">show source</a> ]</p>
  <div id="M001655_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/deprecated_helper.rb, line 8</span>
 8:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_element_function</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
 9:         <span class="ruby-identifier">content</span> = <span class="ruby-identifier">escape_javascript</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:content</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>)
10:         <span class="ruby-identifier">content</span> = <span class="ruby-identifier">escape_javascript</span>(<span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
11:         
12:         <span class="ruby-identifier">javascript_function</span> = <span class="ruby-keyword kw">case</span> (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:action</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">:update</span>)
13:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:update</span>
14:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:position</span>]
15:               <span class="ruby-node">&quot;new Insertion.#{options[:position].to_s.camelize}('#{element_id}','#{content}')&quot;</span>
16:             <span class="ruby-keyword kw">else</span>
17:               <span class="ruby-node">&quot;$('#{element_id}').innerHTML = '#{content}'&quot;</span>
18:             <span class="ruby-keyword kw">end</span>
19:           
20:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:empty</span>
21:             <span class="ruby-node">&quot;$('#{element_id}').innerHTML = ''&quot;</span>
22:           
23:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:remove</span>
24:             <span class="ruby-node">&quot;Element.remove('#{element_id}')&quot;</span>
25:           
26:           <span class="ruby-keyword kw">else</span>
27:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Invalid action, choose one of :update, :remove, :empty&quot;</span>
28:         <span class="ruby-keyword kw">end</span>
29:         
30:         <span class="ruby-identifier">javascript_function</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;;\n&quot;</span>
31:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:binding</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">javascript_function</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:binding</span>]) <span class="ruby-operator">:</span> <span class="ruby-identifier">javascript_function</span>
32:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001666" class="method">
  <div id="M001666_title" class="title">
    <b>update_page</b>(&amp;block)
  </div>
  <div class="description">
  <p>
Yields a JavaScriptGenerator and returns the generated JavaScript code. Use
this to update multiple elements on a page in an Ajax response. See
JavaScriptGenerator for more information.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001666_source')" id="l_M001666_source">show source</a> ]</p>
  <div id="M001666_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 640</span>
640:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_page</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
641:         <span class="ruby-constant">JavaScriptGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@template</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>).<span class="ruby-identifier">to_s</span>
642:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001667" class="method">
  <div id="M001667_title" class="title">
    <b>update_page_tag</b>(html_options = {}, &amp;block)
  </div>
  <div class="description">
  <p>
Works like <a href="index.html?a=M001666&name=update_page">update_page</a>
but wraps the generated JavaScript in a &lt;script&gt; tag. Use this to
include generated JavaScript in an ERb template. See JavaScriptGenerator
for more information.
</p>
<p>
<tt>html_options</tt> may be a hash of &lt;script&gt; attributes to be
passed to <a
href="index.html?a=M001763&name=ActionView::Helpers::JavaScriptHelper#javascript_tag">ActionView::Helpers::JavaScriptHelper#javascript_tag</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001667_source')" id="l_M001667_source">show source</a> ]</p>
  <div id="M001667_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 650</span>
650:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_page_tag</span>(<span class="ruby-identifier">html_options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
651:         <span class="ruby-identifier">javascript_tag</span> <span class="ruby-identifier">update_page</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-identifier">html_options</span>
652:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M001671" class="method">
  <div id="M001671_title" class="title">
    <b>build_callbacks</b>(options)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001671_source')" id="l_M001671_source">show source</a> ]</p>
  <div id="M001671_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 695</span>
695:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_callbacks</span>(<span class="ruby-identifier">options</span>)
696:         <span class="ruby-identifier">callbacks</span> = {}
697:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">callback</span>, <span class="ruby-identifier">code</span><span class="ruby-operator">|</span>
698:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">CALLBACKS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">callback</span>)
699:             <span class="ruby-identifier">name</span> = <span class="ruby-value str">'on'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">callback</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">capitalize</span>
700:             <span class="ruby-identifier">callbacks</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-node">&quot;function(request){#{code}}&quot;</span>
701:           <span class="ruby-keyword kw">end</span>
702:         <span class="ruby-keyword kw">end</span>
703:         <span class="ruby-identifier">callbacks</span>
704:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001670" class="method">
  <div id="M001670_title" class="title">
    <b>build_observer</b>(klass, name, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001670_source')" id="l_M001670_source">show source</a> ]</p>
  <div id="M001670_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 678</span>
678:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_observer</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
679:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[=(.]/</span>)
680:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] = <span class="ruby-node">&quot;'#{options[:with]}=' + value&quot;</span>
681:         <span class="ruby-keyword kw">else</span>
682:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">'value'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:function</span>]
683:         <span class="ruby-keyword kw">end</span>
684: 
685:         <span class="ruby-identifier">callback</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:function</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>)
686:         <span class="ruby-identifier">javascript</span>  = <span class="ruby-node">&quot;new #{klass}('#{name}', &quot;</span>
687:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{options[:frequency]}, &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>]
688:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;function(element, value) {&quot;</span>
689:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{callback}}&quot;</span>
690:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;, '#{options[:on]}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:on</span>]
691:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;)&quot;</span>
692:         <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">javascript</span>)
693:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001669" class="method">
  <div id="M001669_title" class="title">
    <b>method_option_to_s</b>(method)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001669_source')" id="l_M001669_source">show source</a> ]</p>
  <div id="M001669_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 674</span>
674:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_option_to_s</span>(<span class="ruby-identifier">method</span>) 
675:         (<span class="ruby-identifier">method</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">method</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;'&quot;</span>).<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;'#{method}'&quot;</span>
676:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001668" class="method">
  <div id="M001668_title" class="title">
    <b>options_for_ajax</b>(options)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001668_source')" id="l_M001668_source">show source</a> ]</p>
  <div id="M001668_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/prototype_helper.rb, line 655</span>
655:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_for_ajax</span>(<span class="ruby-identifier">options</span>)
656:         <span class="ruby-identifier">js_options</span> = <span class="ruby-identifier">build_callbacks</span>(<span class="ruby-identifier">options</span>)
657:       
658:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'asynchronous'</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:type</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">:synchronous</span>
659:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'method'</span>]       = <span class="ruby-identifier">method_option_to_s</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:method</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:method</span>]
660:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'insertion'</span>]    = <span class="ruby-node">&quot;Insertion.#{options[:position].to_s.camelize}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:position</span>]
661:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'evalScripts'</span>]  = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:script</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:script</span>]
662: 
663:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:form</span>]
664:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-value str">'Form.serialize(this)'</span>
665:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:submit</span>]
666:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-node">&quot;Form.serialize('#{options[:submit]}')&quot;</span>
667:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>]
668:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>]
669:         <span class="ruby-keyword kw">end</span>
670:       
671:         <span class="ruby-identifier">options_for_javascript</span>(<span class="ruby-identifier">js_options</span>)
672:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>