  <div id="C00000411">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />MysqlAdapter<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/lib/active_record/connection_adapters/mysql_adapter_rb.html');">activerecord/lib/active_record/connection_adapters/mysql_adapter.rb</a>

Parent:&nbsp;
AbstractAdapter
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
The MySQL adapter will work with both Ruby/MySQL, which is a Ruby-based
MySQL adapter that comes bundled with Active Record, and with the faster
C-based MySQL/Ruby adapter (available both as a gem and from <a
href="http://www.tmtm.org/en/mysql/ruby"
target="_blank">http://www.tmtm.org/en/mysql/ruby</a>/).
</p>
<p>
Options:
</p>
<ul>
<li><tt>:host</tt> &#8212; Defaults to localhost

</li>
<li><tt>:port</tt> &#8212; Defaults to 3306

</li>
<li><tt>:socket</tt> &#8212; Defaults to /tmp/mysql.sock

</li>
<li><tt>:username</tt> &#8212; Defaults to root

</li>
<li><tt>:password</tt> &#8212; Defaults to nothing

</li>
<li><tt>:database</tt> &#8212; The name of the database. No default, must be
provided.

</li>
<li><tt>:sslkey</tt> &#8212; Necessary to use MySQL with an SSL connection

</li>
<li><tt>:sslcert</tt> &#8212; Necessary to use MySQL with an SSL connection

</li>
<li><tt>:sslcapath</tt> &#8212; Necessary to use MySQL with an SSL connection

</li>
<li><tt>:sslcipher</tt> &#8212; Necessary to use MySQL with an SSL connection

</li>
</ul>
<p>
By default, the <a
href="index.html?a=C00000411&name=MysqlAdapter">MysqlAdapter</a> will
consider all columns of type tinyint(1) as boolean. If you wish to disable
this emulation (which was the default behavior in versions 0.13.1 and
earlier) you can add the following line to your environment.rb file:
</p>
<pre>
  ActiveRecord::ConnectionAdapters::MysqlAdapter.emulate_booleans = false
</pre>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001281&name=active?" >active?</a></li>
  <li><a href="index.html?a=M001284&name=current_database" >current_database</a></li>
  <li><a href="index.html?a=M001283&name=disconnect!" >disconnect!</a></li>
  <li><a href="index.html?a=M001277&name=new" >new</a></li>
  <li><a href="index.html?a=M001278&name=quote" >quote</a></li>
  <li><a href="index.html?a=M001280&name=quoted_false" >quoted_false</a></li>
  <li><a href="index.html?a=M001279&name=quoted_true" >quoted_true</a></li>
  <li><a href="index.html?a=M001282&name=reconnect!" >reconnect!</a></li>
  <li><a href="index.html?a=M001285&name=rename_table" >rename_table</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">LOST_CONNECTION_ERROR_MESSAGES</td>
    <td>=</td>
    <td class="attr-value">[         &quot;Server shutdown in progress&quot;,         &quot;Broken pipe&quot;,         &quot;Lost connection to MySQL server during query&quot;,         &quot;MySQL server has gone away&quot;</td>
  </tr>
  </table>


<div class="sectiontitle">Public Class methods</div>
<div id="M001277" class="method">
  <div id="M001277_title" class="title">
    <b>new</b>(connection, logger, connection_options, config)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001277_source')" id="l_M001277_source">show source</a> ]</p>
  <div id="M001277_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 150</span>
150:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>)
151:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>)
152:         <span class="ruby-ivar">@connection_options</span>, <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>
153: 
154:         <span class="ruby-identifier">connect</span>
155:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M001281" class="method">
  <div id="M001281_title" class="title">
    <b>active?</b>()
  </div>
  <div class="description">
  <p>
CONNECTION MANAGEMENT ====================================
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001281_source')" id="l_M001281_source">show source</a> ]</p>
  <div id="M001281_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 215</span>
215:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">active?</span>
216:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:stat</span>)
217:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">stat</span>
218:         <span class="ruby-keyword kw">else</span>
219:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span> <span class="ruby-value str">'select 1'</span>
220:         <span class="ruby-keyword kw">end</span>
221: 
222:         <span class="ruby-comment cmt"># mysql-ruby doesn't raise an exception when stat fails.</span>
223:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:errno</span>)
224:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">errno</span>.<span class="ruby-identifier">zero?</span>
225:         <span class="ruby-keyword kw">else</span>
226:           <span class="ruby-keyword kw">true</span>
227:         <span class="ruby-keyword kw">end</span>
228:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Mysql</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
229:         <span class="ruby-keyword kw">false</span>
230:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001284" class="method">
  <div id="M001284_title" class="title">
    <b>current_database</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001284_source')" id="l_M001284_source">show source</a> ]</p>
  <div id="M001284_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 322</span>
322:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_database</span>
323:         <span class="ruby-identifier">select_one</span>(<span class="ruby-value str">&quot;SELECT DATABASE() as db&quot;</span>)[<span class="ruby-value str">&quot;db&quot;</span>]
324:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001283" class="method">
  <div id="M001283_title" class="title">
    <b>disconnect!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001283_source')" id="l_M001283_source">show source</a> ]</p>
  <div id="M001283_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 237</span>
237:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disconnect!</span>
238:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
239:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001278" class="method">
  <div id="M001278_title" class="title">
    <b>quote</b>(value, column = nil)
  </div>
  <div class="description">
  <p>
QUOTING ==================================================
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001278_source')" id="l_M001278_source">show source</a> ]</p>
  <div id="M001278_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 185</span>
185:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">column</span> = <span class="ruby-keyword kw">nil</span>)
186:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:binary</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:string_to_binary</span>)
187:           <span class="ruby-identifier">s</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">string_to_binary</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;H*&quot;</span>)[<span class="ruby-value">0</span>]
188:           <span class="ruby-node">&quot;x'#{s}'&quot;</span>
189:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">BigDecimal</span>)
190:           <span class="ruby-node">&quot;'#{value.to_s(&quot;F&quot;)}'&quot;</span>
191:         <span class="ruby-keyword kw">else</span>
192:           <span class="ruby-keyword kw">super</span>
193:         <span class="ruby-keyword kw">end</span>
194:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001280" class="method">
  <div id="M001280_title" class="title">
    <b>quoted_false</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001280_source')" id="l_M001280_source">show source</a> ]</p>
  <div id="M001280_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 208</span>
208:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_false</span>
209:         <span class="ruby-value str">&quot;0&quot;</span>
210:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001279" class="method">
  <div id="M001279_title" class="title">
    <b>quoted_true</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001279_source')" id="l_M001279_source">show source</a> ]</p>
  <div id="M001279_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 204</span>
204:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_true</span>
205:         <span class="ruby-value str">&quot;1&quot;</span>
206:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001282" class="method">
  <div id="M001282_title" class="title">
    <b>reconnect!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001282_source')" id="l_M001282_source">show source</a> ]</p>
  <div id="M001282_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 232</span>
232:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reconnect!</span>
233:         <span class="ruby-identifier">disconnect!</span>
234:         <span class="ruby-identifier">connect</span>
235:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001285" class="method">
  <div id="M001285_title" class="title">
    <b>rename_table</b>(name, new_name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001285_source')" id="l_M001285_source">show source</a> ]</p>
  <div id="M001285_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 358</span>
358:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>)
359:         <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;RENAME TABLE #{name} TO #{new_name}&quot;</span>
360:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>