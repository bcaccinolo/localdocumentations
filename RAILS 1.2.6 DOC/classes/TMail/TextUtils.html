  <div id="C00000208">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />TextUtils<br/>
  In:
<a href="#" onclick="jsHref('files/actionmailer/lib/action_mailer/vendor/tmail/utils_rb.html');">actionmailer/lib/action_mailer/vendor/tmail/utils.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000468&name=atom_safe?" >atom_safe?</a></li>
  <li><a href="index.html?a=M000480&name=decode_RFC2231" >decode_RFC2231</a></li>
  <li><a href="index.html?a=M000478&name=decode_params" >decode_params</a></li>
  <li><a href="index.html?a=M000473&name=join_domain" >join_domain</a></li>
  <li><a href="index.html?a=M000476&name=message_id?" >message_id?</a></li>
  <li><a href="index.html?a=M000477&name=mime_encoded?" >mime_encoded?</a></li>
  <li><a href="index.html?a=M000469&name=quote_atom" >quote_atom</a></li>
  <li><a href="index.html?a=M000470&name=quote_phrase" >quote_phrase</a></li>
  <li><a href="index.html?a=M000472&name=quote_token" >quote_token</a></li>
  <li><a href="index.html?a=M000475&name=time2str" >time2str</a></li>
  <li><a href="index.html?a=M000474&name=timezone_string_to_unixtime" >timezone_string_to_unixtime</a></li>
  <li><a href="index.html?a=M000479&name=to_kcode" >to_kcode</a></li>
  <li><a href="index.html?a=M000471&name=token_safe?" >token_safe?</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">ATOM_UNSAFE</td>
    <td>=</td>
    <td class="attr-value">/[#{Regexp.quote aspecial}#{control}#{lwsp}]/n</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">PHRASE_UNSAFE</td>
    <td>=</td>
    <td class="attr-value">/[#{Regexp.quote aspecial}#{control}]/n</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">TOKEN_UNSAFE</td>
    <td>=</td>
    <td class="attr-value">/[#{Regexp.quote tspecial}#{control}#{lwsp}]/n</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">CONTROL_CHAR</td>
    <td>=</td>
    <td class="attr-value">/[#{control}]/n</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ZONESTR_TABLE</td>
    <td>=</td>
    <td class="attr-value">{       'jst' =&gt;   9 * 60,       'eet' =&gt;   2 * 60,       'bst' =&gt;   1 * 60,       'met' =&gt;   1 * 60,       'gmt' =&gt;   0,       'utc' =&gt;   0,       'ut'  =&gt;   0,       'nst' =&gt; -(3 * 60 + 30),       'ast' =&gt;  -4 * 60,       'edt' =&gt;  -4 * 60,       'est' =&gt;  -5 * 60,       'cdt' =&gt;  -5 * 60,       'cst' =&gt;  -6 * 60,       'mdt' =&gt;  -6 * 60,       'mst' =&gt;  -7 * 60,       'pdt' =&gt;  -7 * 60,       'pst' =&gt;  -8 * 60,       'a'   =&gt;  -1 * 60,       'b'   =&gt;  -2 * 60,       'c'   =&gt;  -3 * 60,       'd'   =&gt;  -4 * 60,       'e'   =&gt;  -5 * 60,       'f'   =&gt;  -6 * 60,       'g'   =&gt;  -7 * 60,       'h'   =&gt;  -8 * 60,       'i'   =&gt;  -9 * 60,       # j not use       'k'   =&gt; -10 * 60,       'l'   =&gt; -11 * 60,       'm'   =&gt; -12 * 60,       'n'   =&gt;   1 * 60,       'o'   =&gt;   2 * 60,       'p'   =&gt;   3 * 60,       'q'   =&gt;   4 * 60,       'r'   =&gt;   5 * 60,       's'   =&gt;   6 * 60,       't'   =&gt;   7 * 60,       'u'   =&gt;   8 * 60,       'v'   =&gt;   9 * 60,       'w'   =&gt;  10 * 60,       'x'   =&gt;  11 * 60,       'y'   =&gt;  12 * 60,       'z'   =&gt;   0 * 60</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">WDAY</td>
    <td>=</td>
    <td class="attr-value">%w( Sun Mon Tue Wed Thu Fri Sat TMailBUG )</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MONTH</td>
    <td>=</td>
    <td class="attr-value">%w( TMailBUG Jan Feb Mar Apr May Jun                          Jul Aug Sep Oct Nov Dec TMailBUG )</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MESSAGE_ID</td>
    <td>=</td>
    <td class="attr-value">/&lt;[^\@&gt;]+\@[^&gt;\@]+&gt;/</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MIME_ENCODED</td>
    <td>=</td>
    <td class="attr-value">/=\?[^\s?=]+\?[QB]\?[^\s?=]+\?=/i</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">NKF_FLAGS</td>
    <td>=</td>
    <td class="attr-value">{       'EUC'  =&gt; '-e -m',       'SJIS' =&gt; '-s -m'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">RFC2231_ENCODED</td>
    <td>=</td>
    <td class="attr-value">/\A(?:iso-2022-jp|euc-jp|shift_jis|us-ascii)?'[a-z]*'/in</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000468" class="method">
  <div id="M000468_title" class="title">
    <b>atom_safe?</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000468_source')" id="l_M000468_source">show source</a> ]</p>
  <div id="M000468_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 68</span>
68:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">atom_safe?</span>( <span class="ruby-identifier">str</span> )
69:       <span class="ruby-keyword kw">not</span> <span class="ruby-constant">ATOM_UNSAFE</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>
70:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000480" class="method">
  <div id="M000480_title" class="title">
    <b>decode_RFC2231</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000480_source')" id="l_M000480_source">show source</a> ]</p>
  <div id="M000480_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 226</span>
226:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_RFC2231</span>( <span class="ruby-identifier">str</span> )
227:       <span class="ruby-identifier">m</span> = <span class="ruby-constant">RFC2231_ENCODED</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">str</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span>
228:       <span class="ruby-keyword kw">begin</span>
229:         <span class="ruby-constant">NKF</span>.<span class="ruby-identifier">nkf</span>(<span class="ruby-constant">NKF_FLAGS</span>[<span class="ruby-identifier">$KCODE</span>],
230:         <span class="ruby-identifier">m</span>.<span class="ruby-identifier">post_match</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/%[\da-f]{2}/i</span><span class="ruby-identifier">n</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>[<span class="ruby-value">1</span>,<span class="ruby-value">2</span>].<span class="ruby-identifier">hex</span>.<span class="ruby-identifier">chr</span> })
231:       <span class="ruby-keyword kw">rescue</span>
232:         <span class="ruby-identifier">m</span>.<span class="ruby-identifier">post_match</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/%[\da-f]{2}/i</span><span class="ruby-identifier">n</span>, <span class="ruby-value str">&quot;&quot;</span>)
233:       <span class="ruby-keyword kw">end</span>
234:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000478" class="method">
  <div id="M000478_title" class="title">
    <b>decode_params</b>( hash )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000478_source')" id="l_M000478_source">show source</a> ]</p>
  <div id="M000478_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 195</span>
195:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_params</span>( <span class="ruby-identifier">hash</span> )
196:       <span class="ruby-identifier">new</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
197:       <span class="ruby-identifier">encoded</span> = <span class="ruby-keyword kw">nil</span>
198:       <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
199:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> = <span class="ruby-regexp re">/\*(?:(\d+)\*)?\z/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">key</span>)
200:           ((<span class="ruby-identifier">encoded</span> <span class="ruby-operator">||=</span> {})[<span class="ruby-identifier">m</span>.<span class="ruby-identifier">pre_match</span>] <span class="ruby-operator">||=</span> [])[(<span class="ruby-identifier">m</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>).<span class="ruby-identifier">to_i</span>] = <span class="ruby-identifier">value</span>
201:         <span class="ruby-keyword kw">else</span>
202:           <span class="ruby-identifier">new</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">to_kcode</span>(<span class="ruby-identifier">value</span>)
203:         <span class="ruby-keyword kw">end</span>
204:       <span class="ruby-keyword kw">end</span>
205:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">encoded</span>
206:         <span class="ruby-identifier">encoded</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">strings</span><span class="ruby-operator">|</span>
207:           <span class="ruby-identifier">new</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">decode_RFC2231</span>(<span class="ruby-identifier">strings</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">''</span>))
208:         <span class="ruby-keyword kw">end</span>
209:       <span class="ruby-keyword kw">end</span>
210: 
211:       <span class="ruby-identifier">new</span>
212:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000473" class="method">
  <div id="M000473_title" class="title">
    <b>join_domain</b>( arr )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000473_source')" id="l_M000473_source">show source</a> ]</p>
  <div id="M000473_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 94</span>
 94:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join_domain</span>( <span class="ruby-identifier">arr</span> )
 95:       <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
 96:           <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A\[.*\]\z/</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">i</span>
 97:             <span class="ruby-identifier">i</span>
 98:           <span class="ruby-keyword kw">else</span>
 99:             <span class="ruby-identifier">quote_atom</span>(<span class="ruby-identifier">i</span>)
100:           <span class="ruby-keyword kw">end</span>
101:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
102:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000476" class="method">
  <div id="M000476_title" class="title">
    <b>message_id?</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000476_source')" id="l_M000476_source">show source</a> ]</p>
  <div id="M000476_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 183</span>
183:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">message_id?</span>( <span class="ruby-identifier">str</span> )
184:       <span class="ruby-constant">MESSAGE_ID</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>
185:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000477" class="method">
  <div id="M000477_title" class="title">
    <b>mime_encoded?</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000477_source')" id="l_M000477_source">show source</a> ]</p>
  <div id="M000477_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 190</span>
190:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mime_encoded?</span>( <span class="ruby-identifier">str</span> )
191:       <span class="ruby-constant">MIME_ENCODED</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>
192:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000469" class="method">
  <div id="M000469_title" class="title">
    <b>quote_atom</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000469_source')" id="l_M000469_source">show source</a> ]</p>
  <div id="M000469_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 72</span>
72:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_atom</span>( <span class="ruby-identifier">str</span> )
73:       (<span class="ruby-constant">ATOM_UNSAFE</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">dquote</span>(<span class="ruby-identifier">str</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">str</span>
74:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000470" class="method">
  <div id="M000470_title" class="title">
    <b>quote_phrase</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000470_source')" id="l_M000470_source">show source</a> ]</p>
  <div id="M000470_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 76</span>
76:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_phrase</span>( <span class="ruby-identifier">str</span> )
77:       (<span class="ruby-constant">PHRASE_UNSAFE</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">dquote</span>(<span class="ruby-identifier">str</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">str</span>
78:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000472" class="method">
  <div id="M000472_title" class="title">
    <b>quote_token</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000472_source')" id="l_M000472_source">show source</a> ]</p>
  <div id="M000472_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 84</span>
84:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_token</span>( <span class="ruby-identifier">str</span> )
85:       (<span class="ruby-constant">TOKEN_UNSAFE</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">dquote</span>(<span class="ruby-identifier">str</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">str</span>
86:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000475" class="method">
  <div id="M000475_title" class="title">
    <b>time2str</b>( tm )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000475_source')" id="l_M000475_source">show source</a> ]</p>
  <div id="M000475_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 167</span>
167:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time2str</span>( <span class="ruby-identifier">tm</span> )
168:       <span class="ruby-comment cmt"># [ruby-list:7928]</span>
169:       <span class="ruby-identifier">gmt</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">tm</span>.<span class="ruby-identifier">to_i</span>)
170:       <span class="ruby-identifier">gmt</span>.<span class="ruby-identifier">gmtime</span>
171:       <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">tm</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">gmt</span>.<span class="ruby-identifier">to_a</span>[<span class="ruby-value">0</span>,<span class="ruby-value">6</span>].<span class="ruby-identifier">reverse</span>).<span class="ruby-identifier">to_i</span>
172: 
173:       <span class="ruby-comment cmt"># DO NOT USE strftime: setlocale() breaks it</span>
174:       <span class="ruby-identifier">sprintf</span> <span class="ruby-value str">'%s, %s %s %d %02d:%02d:%02d %+.2d%.2d'</span>,
175:               <span class="ruby-constant">WDAY</span>[<span class="ruby-identifier">tm</span>.<span class="ruby-identifier">wday</span>], <span class="ruby-identifier">tm</span>.<span class="ruby-identifier">mday</span>, <span class="ruby-constant">MONTH</span>[<span class="ruby-identifier">tm</span>.<span class="ruby-identifier">month</span>],
176:               <span class="ruby-identifier">tm</span>.<span class="ruby-identifier">year</span>, <span class="ruby-identifier">tm</span>.<span class="ruby-identifier">hour</span>, <span class="ruby-identifier">tm</span>.<span class="ruby-identifier">min</span>, <span class="ruby-identifier">tm</span>.<span class="ruby-identifier">sec</span>,
177:               <span class="ruby-operator">*</span>(<span class="ruby-identifier">offset</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">60</span>)
178:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000474" class="method">
  <div id="M000474_title" class="title">
    <b>timezone_string_to_unixtime</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000474_source')" id="l_M000474_source">show source</a> ]</p>
  <div id="M000474_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 151</span>
151:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">timezone_string_to_unixtime</span>( <span class="ruby-identifier">str</span> )
152:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> = <span class="ruby-regexp re">/([\+\-])(\d\d?)(\d\d)/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">str</span>)
153:         <span class="ruby-identifier">sec</span> = (<span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">m</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">to_i</span>) <span class="ruby-operator">*</span> <span class="ruby-value">60</span>
154:         <span class="ruby-identifier">m</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">?</span> <span class="ruby-operator">-</span><span class="ruby-identifier">sec</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">sec</span>
155:       <span class="ruby-keyword kw">else</span>
156:         <span class="ruby-identifier">min</span> = <span class="ruby-constant">ZONESTR_TABLE</span>[<span class="ruby-identifier">str</span>.<span class="ruby-identifier">downcase</span>] <span class="ruby-keyword kw">or</span>
157:                 <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;wrong timezone format '#{str}'&quot;</span>
158:         <span class="ruby-identifier">min</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span>
159:       <span class="ruby-keyword kw">end</span>
160:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000479" class="method">
  <div id="M000479_title" class="title">
    <b>to_kcode</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000479_source')" id="l_M000479_source">show source</a> ]</p>
  <div id="M000479_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 219</span>
219:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_kcode</span>( <span class="ruby-identifier">str</span> )
220:       <span class="ruby-identifier">flag</span> = <span class="ruby-constant">NKF_FLAGS</span>[<span class="ruby-identifier">$KCODE</span>] <span class="ruby-keyword kw">or</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span>
221:       <span class="ruby-constant">NKF</span>.<span class="ruby-identifier">nkf</span>(<span class="ruby-identifier">flag</span>, <span class="ruby-identifier">str</span>)
222:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000471" class="method">
  <div id="M000471_title" class="title">
    <b>token_safe?</b>( str )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000471_source')" id="l_M000471_source">show source</a> ]</p>
  <div id="M000471_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionmailer/lib/action_mailer/vendor/tmail/utils.rb, line 80</span>
80:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">token_safe?</span>( <span class="ruby-identifier">str</span> )
81:       <span class="ruby-keyword kw">not</span> <span class="ruby-constant">TOKEN_UNSAFE</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>
82:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>